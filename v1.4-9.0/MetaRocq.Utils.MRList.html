<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Utils.MRList</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.Arith.html#"><span class="id" title="library">Arith</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.micromega.Lia.html#"><span class="id" title="library">Lia</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Sorting.SetoidList.html#"><span class="id" title="library">SetoidList</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8.html#"><span class="id" title="library">Utf8</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#"><span class="id" title="library">MRPrelude</span></a> <a class="idref" href="MetaRocq.Utils.MRRelations.html#"><span class="id" title="library">MRRelations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Transparent</span>.<br/>

<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="50abc9bd1bb81dce67ffb7e42f8ed4c9" class="idref" href="#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">&quot;</span></a>#| l |" := (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <span class="id" title="var">l</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0, <span class="id" title="var">l</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 99, <span class="id" title="var">format</span> "#| l |").<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> {<span class="id" title="var">_</span>}, <span class="id" title="var">_</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="proper_map_ho" class="idref" href="#proper_map_ho"><span class="id" title="instance">proper_map_ho</span></a> {<a id="A:1" class="idref" href="#A:1"><span class="id" title="binder">A</span></a> <a id="B:2" class="idref" href="#B:2"><span class="id" title="binder">B</span></a>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a>)<br/>
&nbsp;&nbsp;(@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:1"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:2"><span class="id" title="variable">B</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">Hfg</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> →. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_ext"><span class="id" title="lemma">map_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">Hfg</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_tip_assoc" class="idref" href="#app_tip_assoc"><span class="id" title="lemma">app_tip_assoc</span></a> {<a id="A:3" class="idref" href="#A:3"><span class="id" title="binder">A</span></a>} (<a id="l:4" class="idref" href="#l:4"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:3"><span class="id" title="variable">A</span></a>) <a id="x:5" class="idref" href="#x:5"><span class="id" title="binder">x</span></a> <a id="l':6" class="idref" href="#l':6"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:4"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:5"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':6"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:4"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:5"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':6"><span class="id" title="variable">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="fold_left_i_aux" class="idref" href="#fold_left_i_aux"><span class="id" title="definition">fold_left_i_aux</span></a> {<a id="A:7" class="idref" href="#A:7"><span class="id" title="binder">A</span></a> <a id="B:8" class="idref" href="#B:8"><span class="id" title="binder">B</span></a>} (<a id="f:9" class="idref" href="#f:9"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:7"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:8"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:7"><span class="id" title="variable">A</span></a>) (<a id="n0:10" class="idref" href="#n0:10"><span class="id" title="binder">n0</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:11" class="idref" href="#l:11"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:8"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="a0:12" class="idref" href="#a0:12"><span class="id" title="binder">a0</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:7"><span class="id" title="variable">A</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">l</span>} : <a class="idref" href="MetaRocq.Utils.MRList.html#A:7"><span class="id" title="variable">A</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:11"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#a0:12"><span class="id" title="variable">a0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#fold_left_i_aux:13"><span class="id" title="definition">fold_left_i_aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:9"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n0:10"><span class="id" title="variable">n0</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:11"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a0:12"><span class="id" title="variable">a0</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n0:10"><span class="id" title="variable">n0</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="fold_left_i" class="idref" href="#fold_left_i"><span class="id" title="definition">fold_left_i</span></a> {<a id="A:15" class="idref" href="#A:15"><span class="id" title="binder">A</span></a> <a id="B:16" class="idref" href="#B:16"><span class="id" title="binder">B</span></a>} <a id="f:17" class="idref" href="#f:17"><span class="id" title="binder">f</span></a> := @<a class="idref" href="MetaRocq.Utils.MRList.html#fold_left_i_aux"><span class="id" title="definition">fold_left_i_aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:15"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:16"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:17"><span class="id" title="variable">f</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="mapi_rec" class="idref" href="#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> {<a id="A:18" class="idref" href="#A:18"><span class="id" title="binder">A</span></a> <a id="B:19" class="idref" href="#B:19"><span class="id" title="binder">B</span></a>} (<a id="f:20" class="idref" href="#f:20"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:18"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:19"><span class="id" title="variable">B</span></a>) (<a id="l:21" class="idref" href="#l:21"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:18"><span class="id" title="variable">A</span></a>) (<a id="n:22" class="idref" href="#n:22"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:19"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:21"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:20"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:22"><span class="id" title="variable">n</span></a> <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec:23"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:20"><span class="id" title="variable">f</span></a> <span class="id" title="var">tl</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:22"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="mapi" class="idref" href="#mapi"><span class="id" title="definition">mapi</span></a> {<a id="A:25" class="idref" href="#A:25"><span class="id" title="binder">A</span></a> <a id="B:26" class="idref" href="#B:26"><span class="id" title="binder">B</span></a>} (<a id="f:27" class="idref" href="#f:27"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:25"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:26"><span class="id" title="variable">B</span></a>) (<a id="l:28" class="idref" href="#l:28"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:25"><span class="id" title="variable">A</span></a>) := <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:27"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:28"><span class="id" title="variable">l</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Program Fixpoint</span> <a id="safe_nth" class="idref" href="#safe_nth"><span class="id" title="definition">safe_nth</span></a> {<a id="A:29" class="idref" href="#A:29"><span class="id" title="binder">A</span></a>} (<a id="l:30" class="idref" href="#l:30"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:29"><span class="id" title="variable">A</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">(</span></a><a id="n:31" class="idref" href="#n:31"><span class="id" title="binder"><span id="n:32" class="id">n</span></span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">:</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">List.length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#sig"><span class="id" title="inductive">)</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:29"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:30"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:32"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| 0 ⇒ <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#safe_nth:33"><span class="id" title="definition">safe_nth</span></a> <span class="id" title="var">tl</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:32"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exfalso</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="map2" class="idref" href="#map2"><span class="id" title="section">map2</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="map2.A" class="idref" href="#map2.A"><span class="id" title="variable">A</span></a> <a id="map2.B" class="idref" href="#map2.B"><span class="id" title="variable">B</span></a> <a id="map2.C" class="idref" href="#map2.C"><span class="id" title="variable">C</span></a>} (<a id="map2.f" class="idref" href="#map2.f"><span class="id" title="variable">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:36"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:37"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:38"><span class="id" title="variable">C</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="map2" class="idref" href="#map2"><span class="id" title="definition">map2</span></a> (<a id="l:40" class="idref" href="#l:40"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2.A"><span class="id" title="variable">A</span></a>) (<a id="l':41" class="idref" href="#l':41"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2.B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2.C"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:40"><span class="id" title="variable">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#l':41"><span class="id" title="variable">l'</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span>, <span class="id" title="var">hd'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl'</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#map2.f"><span class="id" title="variable">f</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">hd'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2:42"><span class="id" title="definition">map2</span></a> <span class="id" title="var">tl</span> <span class="id" title="var">tl'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="section">map2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_ext" class="idref" href="#map2_ext"><span class="id" title="lemma">map2_ext</span></a> {<a id="A:45" class="idref" href="#A:45"><span class="id" title="binder">A</span></a> <a id="B:46" class="idref" href="#B:46"><span class="id" title="binder">B</span></a> <a id="C:47" class="idref" href="#C:47"><span class="id" title="binder">C</span></a>} (<a id="f:48" class="idref" href="#f:48"><span class="id" title="binder">f</span></a> <a id="g:49" class="idref" href="#g:49"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:45"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:46"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:47"><span class="id" title="variable">C</span></a>) (<a id="l:50" class="idref" href="#l:50"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:45"><span class="id" title="variable">A</span></a>) (<a id="l':51" class="idref" href="#l':51"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:46"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:52" class="idref" href="#x:52"><span class="id" title="binder">x</span></a> <a id="y:53" class="idref" href="#y:53"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:48"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:52"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:53"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:49"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:52"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:53"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:48"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:50"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':51"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:49"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:50"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':51"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_safe_nth" class="idref" href="#nth_error_safe_nth"><span class="id" title="lemma">nth_error_safe_nth</span></a> {<a id="A:54" class="idref" href="#A:54"><span class="id" title="binder">A</span></a>} <a id="n:55" class="idref" href="#n:55"><span class="id" title="binder">n</span></a> (<a id="l:56" class="idref" href="#l:56"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:54"><span class="id" title="variable">A</span></a>) (<a id="isdecl:57" class="idref" href="#isdecl:57"><span class="id" title="binder">isdecl</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#n:55"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">Datatypes.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:56"><span class="id" title="variable">l</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:56"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:55"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#safe_nth"><span class="id" title="definition">safe_nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:56"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#exist"><span class="id" title="constructor">exist</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:55"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#isdecl:57"><span class="id" title="variable">isdecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">isdecl</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">isdecl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span> <span class="id" title="keyword">as</span> [| <span class="id" title="var">n'</span>]; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="rev" class="idref" href="#rev"><span class="id" title="definition">rev</span></a> {<a id="A:58" class="idref" href="#A:58"><span class="id" title="binder">A</span></a>} (<a id="l:59" class="idref" href="#l:59"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:58"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:58"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="aux:64" class="idref" href="#aux:64"><span class="id" title="binder">aux</span></a> (<a id="l:60" class="idref" href="#l:60"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:58"><span class="id" title="variable">A</span></a>) (<a id="acc:61" class="idref" href="#acc:61"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:58"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:58"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:60"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#acc:61"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#aux:62"><span class="id" title="variable">aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:60"><span class="id" title="variable">l</span></a> (<span class="id" title="var">x</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:61"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Utils.MRList.html#aux:64"><span class="id" title="variable">aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:59"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="rev_map" class="idref" href="#rev_map"><span class="id" title="definition">rev_map</span></a> {<a id="A:65" class="idref" href="#A:65"><span class="id" title="binder">A</span></a> <a id="B:66" class="idref" href="#B:66"><span class="id" title="binder">B</span></a>} (<a id="f:67" class="idref" href="#f:67"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:65"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:66"><span class="id" title="variable">B</span></a>) (<a id="l:68" class="idref" href="#l:68"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:65"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:66"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="aux:73" class="idref" href="#aux:73"><span class="id" title="binder">aux</span></a> (<a id="l:69" class="idref" href="#l:69"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:65"><span class="id" title="variable">A</span></a>) (<a id="acc:70" class="idref" href="#acc:70"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:66"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:66"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:69"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#acc:70"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#aux:71"><span class="id" title="variable">aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:69"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:67"><span class="id" title="variable">f</span></a> <span class="id" title="var">x</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:70"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Utils.MRList.html#aux:73"><span class="id" title="variable">aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:68"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a id="rev_cons" class="idref" href="#rev_cons"><span class="id" title="lemma">rev_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:74" class="idref" href="#A:74"><span class="id" title="binder">A</span></a>} {<a id="l:75" class="idref" href="#l:75"><span class="id" title="binder">l</span></a>} {<a id="a:76" class="idref" href="#a:76"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:74"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#a:76"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:75"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:75"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#a:76"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">∀</span> <a id="l:77" class="idref" href="#l:77"><span class="id" title="binder"><span id="l:79" class="id">l</span></span></a> <a id="a:78" class="idref" href="#a:78"><span class="id" title="binder"><span id="a:80" class="id">a</span></span></a>, ?<span class="id" title="var">faux</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">set</span> (<span class="id" title="var">aux</span> := <span class="id" title="var">faux</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <a id="l:81" class="idref" href="#l:81"><span class="id" title="binder"><span id="l:83" class="id">l</span></span></a> <a id="acc:82" class="idref" href="#acc:82"><span class="id" title="binder"><span id="acc:84" class="id">acc</span></span></a>, <span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:81"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:82"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:81"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:82"><span class="id" title="variable">acc</span></a>)%<span class="id" title="var">list</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">acc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">acc</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">acc</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a id="rev_map_cons" class="idref" href="#rev_map_cons"><span class="id" title="lemma">rev_map_cons</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:85" class="idref" href="#A:85"><span class="id" title="binder">A</span></a> <a id="B:86" class="idref" href="#B:86"><span class="id" title="binder">B</span></a>} {<a id="f:87" class="idref" href="#f:87"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:85"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:86"><span class="id" title="variable">B</span></a>} {<a id="l:88" class="idref" href="#l:88"><span class="id" title="binder">l</span></a>} {<a id="a:89" class="idref" href="#a:89"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:85"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:87"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#a:89"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:88"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:87"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:88"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#f:87"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:89"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">∀</span> <a id="l:90" class="idref" href="#l:90"><span class="id" title="binder"><span id="l:92" class="id">l</span></span></a> <a id="a:91" class="idref" href="#a:91"><span class="id" title="binder"><span id="a:93" class="id">a</span></span></a>, ?<span class="id" title="var">faux</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">set</span> (<span class="id" title="var">aux</span> := <span class="id" title="var">faux</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <a id="l:94" class="idref" href="#l:94"><span class="id" title="binder"><span id="l:96" class="id">l</span></span></a> <a id="acc:95" class="idref" href="#acc:95"><span class="id" title="binder"><span id="acc:97" class="id">acc</span></span></a>, <span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:94"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:95"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:94"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:95"><span class="id" title="variable">acc</span></a>)%<span class="id" title="var">list</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">acc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f</span> <span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">acc</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f</span> <span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">acc</span>)%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">datatypes</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a id="length_rev" class="idref" href="#length_rev"><span class="id" title="lemma">length_rev</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:98" class="idref" href="#A:98"><span class="id" title="binder">A</span></a>} {<a id="l:99" class="idref" href="#l:99"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:98"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:99"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:99"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">A</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (?<span class="id" title="var">faux</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ] ⇒ <span class="id" title="tactic">set</span> (<span class="id" title="var">aux</span> := <span class="id" title="var">faux</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <a id="l:100" class="idref" href="#l:100"><span class="id" title="binder"><span id="l:102" class="id">l</span></span></a> <a id="acc:101" class="idref" href="#acc:101"><span class="id" title="binder"><span id="acc:103" class="id">acc</span></span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:100"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:101"><span class="id" title="variable">acc</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:101"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:100"><span class="id" title="variable">l</span></a>)%<span class="id" title="var">nat</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">acc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#length_rev"><span class="id" title="lemma">length_rev</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a id="length_rev_map" class="idref" href="#length_rev_map"><span class="id" title="lemma">length_rev_map</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:104" class="idref" href="#A:104"><span class="id" title="binder">A</span></a> <a id="B:105" class="idref" href="#B:105"><span class="id" title="binder">B</span></a>} {<a id="f:106" class="idref" href="#f:106"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:104"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:105"><span class="id" title="variable">B</span></a>} {<a id="l:107" class="idref" href="#l:107"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:104"><span class="id" title="variable">A</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:106"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:107"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:107"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (?<span class="id" title="var">faux</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ] ⇒ <span class="id" title="tactic">set</span> (<span class="id" title="var">aux</span> := <span class="id" title="var">faux</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <a id="l:108" class="idref" href="#l:108"><span class="id" title="binder"><span id="l:110" class="id">l</span></span></a> <a id="acc:109" class="idref" href="#acc:109"><span class="id" title="binder"><span id="acc:111" class="id">acc</span></span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> (<span class="id" title="var">aux</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:108"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:109"><span class="id" title="variable">acc</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:109"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:108"><span class="id" title="variable">l</span></a>)%<span class="id" title="var">nat</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">intro</span> <span class="id" title="var">acc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#length_rev_map"><span class="id" title="lemma">length_rev_map</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Fact</span> <a id="rev_map_app" class="idref" href="#rev_map_app"><span class="id" title="lemma">rev_map_app</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:112" class="idref" href="#A:112"><span class="id" title="binder">A</span></a> <a id="B:113" class="idref" href="#B:113"><span class="id" title="binder">B</span></a>} {<a id="f:114" class="idref" href="#f:114"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:112"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:113"><span class="id" title="variable">B</span></a>} {<a id="l1:115" class="idref" href="#l1:115"><span class="id" title="binder">l1</span></a> <a id="l2:116" class="idref" href="#l2:116"><span class="id" title="binder">l2</span></a>},<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:114"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l1:115"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:116"><span class="id" title="variable">l2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:114"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:116"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:114"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:115"><span class="id" title="variable">l1</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>. <span class="id" title="var">revert</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_cons"><span class="id" title="lemma">rev_map_cons</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_map_compose" class="idref" href="#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="A:117" class="idref" href="#A:117"><span class="id" title="binder">A</span></a> <a id="B:118" class="idref" href="#B:118"><span class="id" title="binder">B</span></a> <a id="C:119" class="idref" href="#C:119"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>) (<a id="f:120" class="idref" href="#f:120"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:117"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:118"><span class="id" title="variable">B</span></a>) (<a id="g:121" class="idref" href="#g:121"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:118"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:119"><span class="id" title="variable">C</span></a>) (<a id="l:122" class="idref" href="#l:122"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:117"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:121"><span class="id" title="variable">g</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:120"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:122"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:123" class="idref" href="#x:123"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:121"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:120"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:123"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:122"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_cst_repeat" class="idref" href="#map_cst_repeat"><span class="id" title="lemma">map_cst_repeat</span></a> {<a id="A:124" class="idref" href="#A:124"><span class="id" title="binder">A</span></a> <a id="B:125" class="idref" href="#B:125"><span class="id" title="binder">B</span></a>} (<a id="f:126" class="idref" href="#f:126"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:125"><span class="id" title="variable">B</span></a>) (<a id="l:127" class="idref" href="#l:127"><span class="id" title="binder">l</span></a>: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:124"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:126"><span class="id" title="variable">f</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:127"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:126"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:127"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_id_f" class="idref" href="#map_id_f"><span class="id" title="lemma">map_id_f</span></a> {<a id="A:128" class="idref" href="#A:128"><span class="id" title="binder">A</span></a>} (<a id="l:129" class="idref" href="#l:129"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:128"><span class="id" title="variable">A</span></a>) (<a id="f:130" class="idref" href="#f:130"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:128"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:128"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:131" class="idref" href="#x:131"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:130"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:131"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:131"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:130"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:129"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:129"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Reverse_Induction" class="idref" href="#Reverse_Induction"><span class="id" title="section">Reverse_Induction</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="Reverse_Induction.A" class="idref" href="#Reverse_Induction.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="rev_list_ind" class="idref" href="#rev_list_ind"><span class="id" title="lemma">rev_list_ind</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="P:133" class="idref" href="#P:133"><span class="id" title="binder">P</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#P:133"><span class="id" title="variable">P</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="a:134" class="idref" href="#a:134"><span class="id" title="binder">a</span></a>:<a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>) (<a id="l:135" class="idref" href="#l:135"><span class="id" title="binder">l</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>), <a class="idref" href="MetaRocq.Utils.MRList.html#P:133"><span class="id" title="variable">P</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:135"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#P:133"><span class="id" title="variable">P</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#a:134"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:135"><span class="id" title="variable">l</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="l:136" class="idref" href="#l:136"><span class="id" title="binder">l</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:133"><span class="id" title="variable">P</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">Stdlib.Lists.List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:136"><span class="id" title="variable">l</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <a id="rev_ind" class="idref" href="#rev_ind"><span class="id" title="lemma">rev_ind</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="P:137" class="idref" href="#P:137"><span class="id" title="binder">P</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#P:137"><span class="id" title="variable">P</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="x:138" class="idref" href="#x:138"><span class="id" title="binder">x</span></a>:<a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>) (<a id="l:139" class="idref" href="#l:139"><span class="id" title="binder">l</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>), <a class="idref" href="MetaRocq.Utils.MRList.html#P:137"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:139"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#P:137"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:139"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:138"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="l:140" class="idref" href="#l:140"><span class="id" title="binder">l</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction.A"><span class="id" title="variable">A</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:137"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:140"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">rev_involutive</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev_list_ind"><span class="id" title="lemma">rev_list_ind</span></a> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">X0</span> <span class="id" title="var">a</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <span class="id" title="var">l0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#Reverse_Induction"><span class="id" title="section">Reverse_Induction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_nil" class="idref" href="#skipn_nil"><span class="id" title="lemma">skipn_nil</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:141" class="idref" href="#A:141"><span class="id" title="binder">A</span></a>} <a id="n:142" class="idref" href="#n:142"><span class="id" title="binder">n</span></a>, @<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:141"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:142"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> [| <span class="id" title="var">n</span>] ; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_S" class="idref" href="#skipn_S"><span class="id" title="lemma">skipn_S</span></a> {<a id="A:143" class="idref" href="#A:143"><span class="id" title="binder">A</span></a>} <a id="a:144" class="idref" href="#a:144"><span class="id" title="binder">a</span></a> (<a id="l:145" class="idref" href="#l:145"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:143"><span class="id" title="variable">A</span></a>) <a id="n:146" class="idref" href="#n:146"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:146"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#a:144"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:145"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:146"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:145"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_ext_size" class="idref" href="#mapi_ext_size"><span class="id" title="lemma">mapi_ext_size</span></a> {<a id="A:147" class="idref" href="#A:147"><span class="id" title="binder">A</span></a> <a id="B:148" class="idref" href="#B:148"><span class="id" title="binder">B</span></a>} (<a id="f:149" class="idref" href="#f:149"><span class="id" title="binder">f</span></a> <a id="g:150" class="idref" href="#g:150"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:147"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:148"><span class="id" title="variable">B</span></a>) <a id="l:151" class="idref" href="#l:151"><span class="id" title="binder">l</span></a> <a id="k:152" class="idref" href="#k:152"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="k':153" class="idref" href="#k':153"><span class="id" title="binder">k'</span></a> <a id="x:154" class="idref" href="#x:154"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#k':153"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:152"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:151"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:149"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k':153"><span class="id" title="variable">k'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:154"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:150"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k':153"><span class="id" title="variable">k'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:154"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:149"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:151"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:152"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:150"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:151"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:152"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.le_refl"><span class="id" title="lemma">Nat.le_refl</span></a> <span class="id" title="var">k</span>). <span class="id" title="tactic">generalize</span> <span class="id" title="var">k</span> <span class="id" title="tactic">at</span> 1 3 4.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span>, <span class="id" title="var">Hl</span> |- ×. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">erewrite</span> <span class="id" title="var">Hl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IHl</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_ext_size" class="idref" href="#map_ext_size"><span class="id" title="lemma">map_ext_size</span></a> {<a id="A:155" class="idref" href="#A:155"><span class="id" title="binder">A</span></a> <a id="B:156" class="idref" href="#B:156"><span class="id" title="binder">B</span></a>} (<a id="f:157" class="idref" href="#f:157"><span class="id" title="binder">f</span></a> <a id="g:158" class="idref" href="#g:158"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:155"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:156"><span class="id" title="variable">B</span></a>) <a id="l:159" class="idref" href="#l:159"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="k:160" class="idref" href="#k:160"><span class="id" title="binder">k</span></a> <a id="x:161" class="idref" href="#x:161"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:159"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:157"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:161"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:158"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:160"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:161"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:157"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:159"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:158"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:159"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext_size"><span class="id" title="lemma">mapi_ext_size</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_map" class="idref" href="#firstn_map"><span class="id" title="lemma">firstn_map</span></a> {<a id="A:162" class="idref" href="#A:162"><span class="id" title="binder">A</span></a> <a id="B:163" class="idref" href="#B:163"><span class="id" title="binder">B</span></a>} <a id="n:164" class="idref" href="#n:164"><span class="id" title="binder">n</span></a> (<a id="f:165" class="idref" href="#f:165"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:162"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:163"><span class="id" title="variable">B</span></a>) <a id="l:166" class="idref" href="#l:166"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:164"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:165"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:166"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:165"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:164"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:166"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_compose" class="idref" href="#mapi_rec_compose"><span class="id" title="lemma">mapi_rec_compose</span></a> {<a id="A:167" class="idref" href="#A:167"><span class="id" title="binder">A</span></a> <a id="B:168" class="idref" href="#B:168"><span class="id" title="binder">B</span></a> <a id="C:169" class="idref" href="#C:169"><span class="id" title="binder">C</span></a>} (<a id="g:170" class="idref" href="#g:170"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:168"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:169"><span class="id" title="variable">C</span></a>) (<a id="f:171" class="idref" href="#f:171"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:167"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:168"><span class="id" title="variable">B</span></a>) <a id="k:172" class="idref" href="#k:172"><span class="id" title="binder">k</span></a> <a id="l:173" class="idref" href="#l:173"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:170"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:171"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:173"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:172"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#k:172"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> (<span class="id" title="keyword">fun</span> <a id="k:174" class="idref" href="#k:174"><span class="id" title="binder">k</span></a> <a id="x:175" class="idref" href="#x:175"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:170"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:174"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:171"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:174"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:175"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:173"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:172"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_compose" class="idref" href="#mapi_compose"><span class="id" title="lemma">mapi_compose</span></a> {<a id="A:176" class="idref" href="#A:176"><span class="id" title="binder">A</span></a> <a id="B:177" class="idref" href="#B:177"><span class="id" title="binder">B</span></a> <a id="C:178" class="idref" href="#C:178"><span class="id" title="binder">C</span></a>} (<a id="g:179" class="idref" href="#g:179"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:177"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:178"><span class="id" title="variable">C</span></a>) (<a id="f:180" class="idref" href="#f:180"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:176"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:177"><span class="id" title="variable">B</span></a>) <a id="l:181" class="idref" href="#l:181"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:179"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:180"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:181"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="k:182" class="idref" href="#k:182"><span class="id" title="binder">k</span></a> <a id="x:183" class="idref" href="#x:183"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:179"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:182"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:180"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:182"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:183"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:181"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_compose"><span class="id" title="lemma">mapi_rec_compose</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_ext" class="idref" href="#map_ext"><span class="id" title="lemma">map_ext</span></a> {<a id="A:184" class="idref" href="#A:184"><span class="id" title="binder">A</span></a> <a id="B:185" class="idref" href="#B:185"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:186" class="idref" href="#f:186"><span class="id" title="binder">f</span></a> <a id="g:187" class="idref" href="#g:187"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:184"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:185"><span class="id" title="variable">B</span></a>) (<a id="l:188" class="idref" href="#l:188"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:184"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:189" class="idref" href="#x:189"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:186"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:189"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:187"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:189"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:186"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:188"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:187"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:188"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_skipn" class="idref" href="#map_skipn"><span class="id" title="lemma">map_skipn</span></a> {<a id="A:190" class="idref" href="#A:190"><span class="id" title="binder">A</span></a> <a id="B:191" class="idref" href="#B:191"><span class="id" title="binder">B</span></a>} (<a id="f:192" class="idref" href="#f:192"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:190"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:191"><span class="id" title="variable">B</span></a>) (<a id="l:193" class="idref" href="#l:193"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:190"><span class="id" title="variable">A</span></a>) (<a id="n:194" class="idref" href="#n:194"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:192"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:194"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:193"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:194"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:192"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:193"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">n</span> <span class="id" title="var">l</span> ⇒ <span class="id" title="var">l</span> // <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_map" class="idref" href="#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> {<a id="A:195" class="idref" href="#A:195"><span class="id" title="binder">A</span></a> <a id="B:196" class="idref" href="#B:196"><span class="id" title="binder">B</span></a>} (<a id="f:197" class="idref" href="#f:197"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:195"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:196"><span class="id" title="variable">B</span></a>) <a id="n:198" class="idref" href="#n:198"><span class="id" title="binder">n</span></a> <a id="l:199" class="idref" href="#l:199"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:197"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:199"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:198"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:197"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:199"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:198"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">n</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">case</span> ⇒ // <span class="id" title="var">IHn</span> <span class="id" title="var">l</span> /=.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: <span class="id" title="var">l</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_nil" class="idref" href="#map_nil"><span class="id" title="lemma">map_nil</span></a> {<a id="A:200" class="idref" href="#A:200"><span class="id" title="binder">A</span></a> <a id="B:201" class="idref" href="#B:201"><span class="id" title="binder">B</span></a>} (<a id="f:202" class="idref" href="#f:202"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:200"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:201"><span class="id" title="variable">B</span></a>) (<a id="l:203" class="idref" href="#l:203"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:200"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#l:203"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:202"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:203"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">map_nil</span> : <span class="id" title="keyword">wf</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="nth_error_Spec" class="idref" href="#nth_error_Spec"><span class="id" title="definition, inductive"><span id="nth_error_Spec_rect" class="id"><span id="nth_error_Spec_ind" class="id"><span id="nth_error_Spec_rec" class="id"><span id="nth_error_Spec_sind" class="id">nth_error_Spec</span></span></span></span></span></a> {<a id="A:204" class="idref" href="#A:204"><span class="id" title="binder">A</span></a>} (<a id="l:205" class="idref" href="#l:205"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:204"><span class="id" title="variable">A</span></a>) (<a id="n:206" class="idref" href="#n:206"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <span class="id" title="var">A</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a id="nth_error_Spec_Some" class="idref" href="#nth_error_Spec_Some"><span class="id" title="constructor">nth_error_Spec_Some</span></a> <a id="x:209" class="idref" href="#x:209"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:206"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:209"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:206"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Spec:207"><span class="id" title="inductive">nth_error_Spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:206"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:209"><span class="id" title="variable">x</span></a>)<br/>
| <a id="nth_error_Spec_None" class="idref" href="#nth_error_Spec_None"><span class="id" title="constructor">nth_error_Spec_None</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:206"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Spec:207"><span class="id" title="inductive">nth_error_Spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:205"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:206"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_eqn" class="idref" href="#mapi_rec_eqn"><span class="id" title="lemma">mapi_rec_eqn</span></a> {<a id="A:210" class="idref" href="#A:210"><span class="id" title="binder">A</span></a> <a id="B:211" class="idref" href="#B:211"><span class="id" title="binder">B</span></a>} (<a id="f:212" class="idref" href="#f:212"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:210"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:211"><span class="id" title="variable">B</span></a>) (<a id="l:213" class="idref" href="#l:213"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:210"><span class="id" title="variable">A</span></a>) <a id="a:214" class="idref" href="#a:214"><span class="id" title="binder">a</span></a> <a id="n:215" class="idref" href="#n:215"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:212"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#a:214"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:213"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:215"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:212"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:215"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:214"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:212"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:213"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:215"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_mapi_rec" class="idref" href="#nth_error_mapi_rec"><span class="id" title="lemma">nth_error_mapi_rec</span></a> {<a id="A:216" class="idref" href="#A:216"><span class="id" title="binder">A</span></a> <a id="B:217" class="idref" href="#B:217"><span class="id" title="binder">B</span></a>} (<a id="f:218" class="idref" href="#f:218"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:216"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:217"><span class="id" title="variable">B</span></a>) <a id="n:219" class="idref" href="#n:219"><span class="id" title="binder">n</span></a> <a id="k:220" class="idref" href="#k:220"><span class="id" title="binder">k</span></a> <a id="l:221" class="idref" href="#l:221"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:218"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:221"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:220"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:219"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:218"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:219"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:220"><span class="id" title="variable">k</span></a>)) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:221"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:219"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">k</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">by</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_comm"><span class="id" title="lemma">Nat.add_succ_comm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_mapi" class="idref" href="#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a> {<a id="A:222" class="idref" href="#A:222"><span class="id" title="binder">A</span></a> <a id="B:223" class="idref" href="#B:223"><span class="id" title="binder">B</span></a>} (<a id="f:224" class="idref" href="#f:224"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:222"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:223"><span class="id" title="variable">B</span></a>) <a id="n:225" class="idref" href="#n:225"><span class="id" title="binder">n</span></a> <a id="l:226" class="idref" href="#l:226"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:224"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:226"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:225"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:224"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:225"><span class="id" title="variable">n</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:226"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:225"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi_rec"><span class="id" title="lemma">nth_error_mapi_rec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> → <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_Some_length" class="idref" href="#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> {<a id="A:227" class="idref" href="#A:227"><span class="id" title="binder">A</span></a>} {<a id="l:228" class="idref" href="#l:228"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:227"><span class="id" title="variable">A</span></a>} {<a id="n:229" class="idref" href="#n:229"><span class="id" title="binder">n</span></a> <a id="t:230" class="idref" href="#t:230"><span class="id" title="binder">t</span></a>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:228"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:229"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#t:230"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:229"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:228"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_Some"><span class="id" title="lemma">nth_error_Some</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">l</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_Some_non_nil" class="idref" href="#nth_error_Some_non_nil"><span class="id" title="lemma">nth_error_Some_non_nil</span></a> {<a id="A:231" class="idref" href="#A:231"><span class="id" title="binder">A</span></a>} (<a id="l:232" class="idref" href="#l:232"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:231"><span class="id" title="variable">A</span></a>) (<a id="n:233" class="idref" href="#n:233"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="x:234" class="idref" href="#x:234"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:231"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:232"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:233"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:234"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:232"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>, <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_Some'" class="idref" href="#nth_error_Some'"><span class="id" title="lemma">nth_error_Some'</span></a> {<a id="A:235" class="idref" href="#A:235"><span class="id" title="binder">A</span></a>} <a id="l:236" class="idref" href="#l:236"><span class="id" title="binder">l</span></a> <a id="n:237" class="idref" href="#n:237"><span class="id" title="binder">n</span></a> : <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="x:238" class="idref" href="#x:238"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:235"><span class="id" title="variable">A</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:236"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:237"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:238"><span class="id" title="variable">x</span></a><a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:237"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:236"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> 1 | <span class="id" title="tactic">intros</span> <span class="id" title="var">H'</span>; <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> 1 | <span class="id" title="tactic">intros</span> <span class="id" title="var">H'</span>; <span class="id" title="var">exfalso</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H'</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">n</span>); <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_spec" class="idref" href="#nth_error_spec"><span class="id" title="lemma">nth_error_spec</span></a> {<a id="A:239" class="idref" href="#A:239"><span class="id" title="binder">A</span></a>} (<a id="l:240" class="idref" href="#l:240"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:239"><span class="id" title="variable">A</span></a>) (<a id="n:241" class="idref" href="#n:241"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Spec"><span class="id" title="inductive">nth_error_Spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:241"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:240"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:241"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_None"><span class="id" title="lemma">nth_error_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_app_left" class="idref" href="#nth_error_app_left"><span class="id" title="lemma">nth_error_app_left</span></a> {<a id="A:242" class="idref" href="#A:242"><span class="id" title="binder">A</span></a>} (<a id="l:243" class="idref" href="#l:243"><span class="id" title="binder">l</span></a> <a id="l':244" class="idref" href="#l':244"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:242"><span class="id" title="variable">A</span></a>) <a id="n:245" class="idref" href="#n:245"><span class="id" title="binder">n</span></a> <a id="t:246" class="idref" href="#t:246"><span class="id" title="binder">t</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:243"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:245"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#t:246"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:243"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':244"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:245"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#t:246"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_nil" class="idref" href="#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> {<a id="A:247" class="idref" href="#A:247"><span class="id" title="binder">A</span></a>} <a id="n:248" class="idref" href="#n:248"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:247"><span class="id" title="variable">A</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:248"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="chop" class="idref" href="#chop"><span class="id" title="definition">chop</span></a> {<a id="A:249" class="idref" href="#A:249"><span class="id" title="binder">A</span></a>} (<a id="n:250" class="idref" href="#n:250"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:251" class="idref" href="#l:251"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:249"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:250"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:251"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:251"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">l</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">r</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop:252"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:250"><span class="id" title="variable">n</span></a> <span class="id" title="var">tl</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:251"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">r</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_map'" class="idref" href="#nth_map'"><span class="id" title="lemma">nth_map'</span></a> {<a id="A:255" class="idref" href="#A:255"><span class="id" title="binder">A</span></a> <a id="B:256" class="idref" href="#B:256"><span class="id" title="binder">B</span></a>} (<a id="f:257" class="idref" href="#f:257"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:255"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:256"><span class="id" title="variable">B</span></a>) <a id="n:258" class="idref" href="#n:258"><span class="id" title="binder">n</span></a> <a id="l:259" class="idref" href="#l:259"><span class="id" title="binder">l</span></a> <a id="d:260" class="idref" href="#d:260"><span class="id" title="binder">d</span></a> <a id="d':261" class="idref" href="#d':261"><span class="id" title="binder">d'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#d':261"><span class="id" title="variable">d'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:257"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:260"><span class="id" title="variable">d</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:258"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:257"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:259"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#d':261"><span class="id" title="variable">d'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:257"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:258"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:259"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:260"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_map" class="idref" href="#mapi_map"><span class="id" title="lemma">mapi_map</span></a> {<a id="A:262" class="idref" href="#A:262"><span class="id" title="binder">A</span></a> <a id="B:263" class="idref" href="#B:263"><span class="id" title="binder">B</span></a> <a id="C:264" class="idref" href="#C:264"><span class="id" title="binder">C</span></a>} (<a id="f:265" class="idref" href="#f:265"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:263"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:264"><span class="id" title="variable">C</span></a>) (<a id="l:266" class="idref" href="#l:266"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:262"><span class="id" title="variable">A</span></a>) (<a id="g:267" class="idref" href="#g:267"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:262"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:263"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:265"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:267"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:266"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:268" class="idref" href="#i:268"><span class="id" title="binder">i</span></a> <a id="x:269" class="idref" href="#x:269"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:265"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:268"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#g:267"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:269"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:266"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_mapi" class="idref" href="#map_mapi"><span class="id" title="lemma">map_mapi</span></a> {<a id="A:270" class="idref" href="#A:270"><span class="id" title="binder">A</span></a> <a id="B:271" class="idref" href="#B:271"><span class="id" title="binder">B</span></a> <a id="C:272" class="idref" href="#C:272"><span class="id" title="binder">C</span></a>} (<a id="f:273" class="idref" href="#f:273"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:270"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:271"><span class="id" title="variable">B</span></a>) (<a id="l:274" class="idref" href="#l:274"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:270"><span class="id" title="variable">A</span></a>) (<a id="g:275" class="idref" href="#g:275"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:271"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:272"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:275"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:273"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:274"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:276" class="idref" href="#i:276"><span class="id" title="binder">i</span></a> <a id="x:277" class="idref" href="#x:277"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:275"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:273"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:276"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:277"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:274"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="chop_map" class="idref" href="#chop_map"><span class="id" title="lemma">chop_map</span></a> {<a id="A:278" class="idref" href="#A:278"><span class="id" title="binder">A</span></a> <a id="B:279" class="idref" href="#B:279"><span class="id" title="binder">B</span></a>} (<a id="f:280" class="idref" href="#f:280"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:278"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:279"><span class="id" title="variable">B</span></a>) <a id="n:281" class="idref" href="#n:281"><span class="id" title="binder">n</span></a> <a id="l:282" class="idref" href="#l:282"><span class="id" title="binder">l</span></a> <a id="l':283" class="idref" href="#l':283"><span class="id" title="binder">l'</span></a> <a id="l'':284" class="idref" href="#l'':284"><span class="id" title="binder">l''</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:281"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:282"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':283"><span class="id" title="variable">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l'':284"><span class="id" title="variable">l''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:281"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:280"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:282"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:280"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':283"><span class="id" title="variable">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:280"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l'':284"><span class="id" title="variable">l''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">l'</span>, <span class="id" title="var">l''</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">intros</span> [= &lt;- &lt;-]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">n</span> <span class="id" title="var">l</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;- &lt;-]. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="chop_n_app" class="idref" href="#chop_n_app"><span class="id" title="lemma">chop_n_app</span></a> {<a id="A:285" class="idref" href="#A:285"><span class="id" title="binder">A</span></a>} {<a id="l:286" class="idref" href="#l:286"><span class="id" title="binder">l</span></a> <a id="l':287" class="idref" href="#l':287"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:285"><span class="id" title="variable">A</span></a>} {<a id="n:288" class="idref" href="#n:288"><span class="id" title="binder">n</span></a>} : <a class="idref" href="MetaRocq.Utils.MRList.html#n:288"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:286"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:288"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:286"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':287"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:286"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':287"><span class="id" title="variable">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_mapi" class="idref" href="#mapi_mapi"><span class="id" title="lemma">mapi_mapi</span></a> {<a id="A:289" class="idref" href="#A:289"><span class="id" title="binder">A</span></a> <a id="B:290" class="idref" href="#B:290"><span class="id" title="binder">B</span></a> <a id="C:291" class="idref" href="#C:291"><span class="id" title="binder">C</span></a>} (<a id="g:292" class="idref" href="#g:292"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:290"><span class="id" title="variable">B</span></a>) (<a id="f:293" class="idref" href="#f:293"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:290"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:291"><span class="id" title="variable">C</span></a>) (<a id="l:294" class="idref" href="#l:294"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:289"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:293"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:292"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:294"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="n:295" class="idref" href="#n:295"><span class="id" title="binder">n</span></a> <a id="x:296" class="idref" href="#x:296"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:293"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:295"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#g:292"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:295"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:296"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:294"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_cst_map" class="idref" href="#mapi_cst_map"><span class="id" title="lemma">mapi_cst_map</span></a> {<a id="A:297" class="idref" href="#A:297"><span class="id" title="binder">A</span></a> <a id="B:298" class="idref" href="#B:298"><span class="id" title="binder">B</span></a>} (<a id="f:299" class="idref" href="#f:299"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:297"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:298"><span class="id" title="variable">B</span></a>) <a id="l:300" class="idref" href="#l:300"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:299"><span class="id" title="variable">f</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:300"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:299"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:300"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_ext" class="idref" href="#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a> {<a id="A:301" class="idref" href="#A:301"><span class="id" title="binder">A</span></a> <a id="B:302" class="idref" href="#B:302"><span class="id" title="binder">B</span></a>} (<a id="f:303" class="idref" href="#f:303"><span class="id" title="binder">f</span></a> <a id="g:304" class="idref" href="#g:304"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:301"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:302"><span class="id" title="variable">B</span></a>) (<a id="l:305" class="idref" href="#l:305"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:301"><span class="id" title="variable">A</span></a>) <a id="n:306" class="idref" href="#n:306"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="k:307" class="idref" href="#k:307"><span class="id" title="binder">k</span></a> <a id="x:308" class="idref" href="#x:308"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#n:306"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:307"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:307"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:306"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:303"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:307"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:308"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:304"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:307"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:308"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:303"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:306"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:304"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:305"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:306"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfg</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">Hfg</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfg</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">Hfg</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_ext" class="idref" href="#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a> {<a id="A:309" class="idref" href="#A:309"><span class="id" title="binder">A</span></a> <a id="B:310" class="idref" href="#B:310"><span class="id" title="binder">B</span></a>} (<a id="f:311" class="idref" href="#f:311"><span class="id" title="binder">f</span></a> <a id="g:312" class="idref" href="#g:312"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:309"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:310"><span class="id" title="variable">B</span></a>) (<a id="l:313" class="idref" href="#l:313"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:309"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:314" class="idref" href="#n:314"><span class="id" title="binder">n</span></a> <a id="x:315" class="idref" href="#x:315"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:311"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:314"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:315"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:312"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:314"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:315"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:311"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:313"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:312"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:313"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_Sk" class="idref" href="#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a> {<a id="A:316" class="idref" href="#A:316"><span class="id" title="binder">A</span></a> <a id="B:317" class="idref" href="#B:317"><span class="id" title="binder">B</span></a>} (<a id="f:318" class="idref" href="#f:318"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:316"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:317"><span class="id" title="variable">B</span></a>) (<a id="l:319" class="idref" href="#l:319"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:316"><span class="id" title="variable">A</span></a>) <a id="k:320" class="idref" href="#k:320"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:318"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:319"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:320"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> (<span class="id" title="keyword">fun</span> <a id="n:321" class="idref" href="#n:321"><span class="id" title="binder">n</span></a> <a id="x:322" class="idref" href="#x:322"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:318"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:321"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:322"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:319"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:320"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_add" class="idref" href="#mapi_rec_add"><span class="id" title="lemma">mapi_rec_add</span></a> {<a id="A:323" class="idref" href="#A:323"><span class="id" title="binder">A</span></a> <a id="B:324" class="idref" href="#B:324"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:325" class="idref" href="#f:325"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:323"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:324"><span class="id" title="variable">B</span></a>) (<a id="l:326" class="idref" href="#l:326"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:323"><span class="id" title="variable">A</span></a>) (<a id="n:327" class="idref" href="#n:327"><span class="id" title="binder">n</span></a> <a id="k:328" class="idref" href="#k:328"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:325"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:326"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:327"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:328"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> (<span class="id" title="keyword">fun</span> (<a id="k:329" class="idref" href="#k:329"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="x:330" class="idref" href="#x:330"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:323"><span class="id" title="variable">A</span></a>) ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:325"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:327"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:329"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:330"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:326"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:328"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">k</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHl</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">k</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_app" class="idref" href="#mapi_rec_app"><span class="id" title="lemma">mapi_rec_app</span></a> {<a id="A:331" class="idref" href="#A:331"><span class="id" title="binder">A</span></a> <a id="B:332" class="idref" href="#B:332"><span class="id" title="binder">B</span></a>} (<a id="f:333" class="idref" href="#f:333"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:331"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:332"><span class="id" title="variable">B</span></a>) (<a id="l:334" class="idref" href="#l:334"><span class="id" title="binder">l</span></a> <a id="l':335" class="idref" href="#l':335"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:331"><span class="id" title="variable">A</span></a>) <a id="n:336" class="idref" href="#n:336"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:333"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:334"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':335"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:336"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:333"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:334"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:336"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:333"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':335"><span class="id" title="variable">l'</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:334"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:336"><span class="id" title="variable">n</span></a>))%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_comm"><span class="id" title="lemma">Nat.add_succ_comm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_app" class="idref" href="#mapi_app"><span class="id" title="lemma">mapi_app</span></a> {<a id="A:337" class="idref" href="#A:337"><span class="id" title="binder">A</span></a> <a id="B:338" class="idref" href="#B:338"><span class="id" title="binder">B</span></a>} (<a id="f:339" class="idref" href="#f:339"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:337"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:338"><span class="id" title="variable">B</span></a>) (<a id="l:340" class="idref" href="#l:340"><span class="id" title="binder">l</span></a> <a id="l':341" class="idref" href="#l':341"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:337"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:339"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:340"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':341"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:339"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:340"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="n:342" class="idref" href="#n:342"><span class="id" title="binder">n</span></a> <a id="x:343" class="idref" href="#x:343"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:339"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:340"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:342"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:343"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l':341"><span class="id" title="variable">l'</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_app"><span class="id" title="lemma">mapi_rec_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_eqn"><span class="id" title="lemma">mapi_rec_eqn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <span class="id" title="var">l</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_comm"><span class="id" title="lemma">Nat.add_succ_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">n</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_mapi_rec" class="idref" href="#rev_mapi_rec"><span class="id" title="lemma">rev_mapi_rec</span></a> {<a id="A:344" class="idref" href="#A:344"><span class="id" title="binder">A</span></a> <a id="B:345" class="idref" href="#B:345"><span class="id" title="binder">B</span></a>} (<a id="f:346" class="idref" href="#f:346"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:344"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:345"><span class="id" title="variable">B</span></a>) (<a id="l:347" class="idref" href="#l:347"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:344"><span class="id" title="variable">A</span></a>) <a id="n:348" class="idref" href="#n:348"><span class="id" title="binder">n</span></a> <a id="k:349" class="idref" href="#k:349"><span class="id" title="binder">k</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#k:349"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:348"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:346"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:347"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:348"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:349"><span class="id" title="variable">k</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> (<span class="id" title="keyword">fun</span> <a id="k:350" class="idref" href="#k:350"><span class="id" title="binder">k</span></a> <a id="x:351" class="idref" href="#x:351"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:346"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.pred"><span class="id" title="definition">Nat.pred</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:347"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:348"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:350"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:351"><span class="id" title="variable">x</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:347"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#k:349"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_unit"><span class="id" title="lemma">rev_unit</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_app"><span class="id" title="lemma">mapi_rec_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a>. <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_mapi" class="idref" href="#rev_mapi"><span class="id" title="lemma">rev_mapi</span></a> {<a id="A:352" class="idref" href="#A:352"><span class="id" title="binder">A</span></a> <a id="B:353" class="idref" href="#B:353"><span class="id" title="binder">B</span></a>} (<a id="f:354" class="idref" href="#f:354"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:352"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:353"><span class="id" title="variable">B</span></a>) (<a id="l:355" class="idref" href="#l:355"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:352"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:354"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:355"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="k:356" class="idref" href="#k:356"><span class="id" title="binder">k</span></a> <a id="x:357" class="idref" href="#x:357"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:354"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.pred"><span class="id" title="definition">Nat.pred</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:355"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:356"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:357"><span class="id" title="variable">x</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:355"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">change</span> 0 <span class="id" title="keyword">with</span> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 0) <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_mapi_rec"><span class="id" title="lemma">rev_mapi_rec</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_rev" class="idref" href="#mapi_rec_rev"><span class="id" title="lemma">mapi_rec_rev</span></a> {<a id="A:358" class="idref" href="#A:358"><span class="id" title="binder">A</span></a> <a id="B:359" class="idref" href="#B:359"><span class="id" title="binder">B</span></a>} (<a id="f:360" class="idref" href="#f:360"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:358"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:359"><span class="id" title="variable">B</span></a>) (<a id="l:361" class="idref" href="#l:361"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:358"><span class="id" title="variable">A</span></a>) <a id="n:362" class="idref" href="#n:362"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:360"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:361"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:362"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="k:363" class="idref" href="#k:363"><span class="id" title="binder">k</span></a> <a id="x:364" class="idref" href="#x:364"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:360"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:361"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:362"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:363"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:364"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:361"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="var">revert</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_unit"><span class="id" title="lemma">rev_unit</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_app"><span class="id" title="lemma">mapi_rec_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_unit"><span class="id" title="lemma">rev_unit</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rev" class="idref" href="#mapi_rev"><span class="id" title="lemma">mapi_rev</span></a> {<a id="A:365" class="idref" href="#A:365"><span class="id" title="binder">A</span></a> <a id="B:366" class="idref" href="#B:366"><span class="id" title="binder">B</span></a>} (<a id="f:367" class="idref" href="#f:367"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:365"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:366"><span class="id" title="variable">B</span></a>) (<a id="l:368" class="idref" href="#l:368"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:365"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:367"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:368"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="k:369" class="idref" href="#k:369"><span class="id" title="binder">k</span></a> <a id="x:370" class="idref" href="#x:370"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:367"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:368"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:369"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#x:370"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:368"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_rev"><span class="id" title="lemma">mapi_rec_rev</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_rec_length" class="idref" href="#mapi_rec_length"><span class="id" title="lemma">mapi_rec_length</span></a> {<a id="A:371" class="idref" href="#A:371"><span class="id" title="binder">A</span></a> <a id="B:372" class="idref" href="#B:372"><span class="id" title="binder">B</span></a>} (<a id="f:373" class="idref" href="#f:373"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:371"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:372"><span class="id" title="variable">B</span></a>) (<a id="l:374" class="idref" href="#l:374"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:371"><span class="id" title="variable">A</span></a>) <a id="n:375" class="idref" href="#n:375"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:373"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:374"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:375"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:374"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_length"><span class="id" title="lemma">mapi_rec_length</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_length" class="idref" href="#mapi_length"><span class="id" title="lemma">mapi_length</span></a> {<a id="A:376" class="idref" href="#A:376"><span class="id" title="binder">A</span></a> <a id="B:377" class="idref" href="#B:377"><span class="id" title="binder">B</span></a>} (<a id="f:378" class="idref" href="#f:378"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:376"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:377"><span class="id" title="variable">B</span></a>) (<a id="l:379" class="idref" href="#l:379"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:376"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:378"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:379"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:379"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_length"><span class="id" title="lemma">mapi_rec_length</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_length"><span class="id" title="lemma">mapi_length</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_cons" class="idref" href="#mapi_cons"><span class="id" title="lemma">mapi_cons</span></a> {<a id="A:380" class="idref" href="#A:380"><span class="id" title="binder">A</span></a> <a id="B:381" class="idref" href="#B:381"><span class="id" title="binder">B</span></a>} (<a id="f:382" class="idref" href="#f:382"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:380"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:381"><span class="id" title="variable">B</span></a>) <a id="a:383" class="idref" href="#a:383"><span class="id" title="binder">a</span></a> <a id="l:384" class="idref" href="#l:384"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:382"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#a:383"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:384"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:382"><span class="id" title="variable">f</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#a:383"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="x:385" class="idref" href="#x:385"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:382"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:385"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:384"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> /= <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_nth" class="idref" href="#mapi_nth"><span class="id" title="lemma">mapi_nth</span></a> {<a id="A:386" class="idref" href="#A:386"><span class="id" title="binder">A</span></a> <a id="B:387" class="idref" href="#B:387"><span class="id" title="binder">B</span></a>} (<a id="l:388" class="idref" href="#l:388"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:386"><span class="id" title="variable">A</span></a>) (<a id="l':389" class="idref" href="#l':389"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:387"><span class="id" title="variable">B</span></a>) (<a id="default:390" class="idref" href="#default:390"><span class="id" title="binder">default</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:386"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:388"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':389"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:391" class="idref" href="#i:391"><span class="id" title="binder">i</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:391"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:388"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#default:390"><span class="id" title="variable">default</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l':389"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:388"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ /= //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> [= <span class="id" title="var">Hl</span>]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_skipn" class="idref" href="#length_skipn"><span class="id" title="lemma">length_skipn</span></a> {<a id="A:392" class="idref" href="#A:392"><span class="id" title="binder">A</span></a>} <a id="n:393" class="idref" href="#n:393"><span class="id" title="binder">n</span></a> (<a id="l:394" class="idref" href="#l:394"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:392"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:393"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:394"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:394"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:393"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="combine_map_id" class="idref" href="#combine_map_id"><span class="id" title="lemma">combine_map_id</span></a> {<a id="A:395" class="idref" href="#A:395"><span class="id" title="binder">A</span></a> <a id="B:396" class="idref" href="#B:396"><span class="id" title="binder">B</span></a>} (<a id="l:397" class="idref" href="#l:397"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#A:395"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:396"><span class="id" title="variable">B</span></a>)) :<br/>
&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#l:397"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#combine"><span class="id" title="definition">combine</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:397"><span class="id" title="variable">l</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:397"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Ltac</span> <span class="id" title="var">invs</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_inv" class="idref" href="#last_inv"><span class="id" title="lemma">last_inv</span></a> <a id="A:398" class="idref" href="#A:398"><span class="id" title="binder">A</span></a> (<a id="l1:399" class="idref" href="#l1:399"><span class="id" title="binder">l1</span></a> <a id="l2:400" class="idref" href="#l2:400"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:398"><span class="id" title="variable">A</span></a>) <a id="x:401" class="idref" href="#x:401"><span class="id" title="binder">x</span></a> <a id="y:402" class="idref" href="#y:402"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#l1:399"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:401"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:400"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#y:402"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:399"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:400"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:401"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:402"><span class="id" title="variable">y</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l2</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> []. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_all2" class="idref" href="#skipn_all2"><span class="id" title="lemma">skipn_all2</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:403" class="idref" href="#A:403"><span class="id" title="binder">A</span></a> <a id="n:404" class="idref" href="#n:404"><span class="id" title="binder">n</span></a>} (<a id="l:405" class="idref" href="#l:405"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:403"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:405"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:404"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:404"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:405"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">h</span>. <span class="id" title="var">revert</span> <span class="id" title="var">l</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> ; <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="not_empty_map" class="idref" href="#not_empty_map"><span class="id" title="lemma">not_empty_map</span></a> {<a id="A:406" class="idref" href="#A:406"><span class="id" title="binder">A</span></a> <a id="B:407" class="idref" href="#B:407"><span class="id" title="binder">B</span></a>} (<a id="f:408" class="idref" href="#f:408"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:406"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:407"><span class="id" title="variable">B</span></a>) <a id="l:409" class="idref" href="#l:409"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#l:409"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:408"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:409"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_skipn_add" class="idref" href="#nth_error_skipn_add"><span class="id" title="lemma">nth_error_skipn_add</span></a> <a id="A:410" class="idref" href="#A:410"><span class="id" title="binder">A</span></a> <a id="l:411" class="idref" href="#l:411"><span class="id" title="binder">l</span></a> <a id="m:412" class="idref" href="#m:412"><span class="id" title="binder">m</span></a> <a id="n:413" class="idref" href="#n:413"><span class="id" title="binder">n</span></a> (<a id="a:414" class="idref" href="#a:414"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:410"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:411"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#m:412"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:413"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:414"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:412"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:411"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:413"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:414"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHm</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_all_app" class="idref" href="#skipn_all_app"><span class="id" title="lemma">skipn_all_app</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:415" class="idref" href="#A:415"><span class="id" title="binder">A</span></a> (<a id="l1:416" class="idref" href="#l1:416"><span class="id" title="binder">l1</span></a> <a id="l2:417" class="idref" href="#l2:417"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:415"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:416"><span class="id" title="variable">l1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l1:416"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:417"><span class="id" title="variable">l2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:417"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l2</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_map_spec" class="idref" href="#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> {<a id="A:418" class="idref" href="#A:418"><span class="id" title="binder">A</span></a> <a id="B:419" class="idref" href="#B:419"><span class="id" title="binder">B</span></a>} (<a id="f:420" class="idref" href="#f:420"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:418"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:419"><span class="id" title="variable">B</span></a>) (<a id="l:421" class="idref" href="#l:421"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:418"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:420"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:421"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:420"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:421"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">f</span> <span class="id" title="var">l</span>))).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">B</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">l0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_0" class="idref" href="#skipn_0"><span class="id" title="lemma">skipn_0</span></a> {<a id="A:422" class="idref" href="#A:422"><span class="id" title="binder">A</span></a>} (<a id="l:423" class="idref" href="#l:423"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:422"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#l:423"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:423"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_0_eq" class="idref" href="#skipn_0_eq"><span class="id" title="lemma">skipn_0_eq</span></a> {<a id="A:424" class="idref" href="#A:424"><span class="id" title="binder">A</span></a>} (<a id="l:425" class="idref" href="#l:425"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:424"><span class="id" title="variable">A</span></a>) <a id="n:426" class="idref" href="#n:426"><span class="id" title="binder">n</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#n:426"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:426"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:425"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:425"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_n_Sn" class="idref" href="#skipn_n_Sn"><span class="id" title="lemma">skipn_n_Sn</span></a> {<a id="A:427" class="idref" href="#A:427"><span class="id" title="binder">A</span></a>} <a id="n:428" class="idref" href="#n:428"><span class="id" title="binder">n</span></a> <a id="s:429" class="idref" href="#s:429"><span class="id" title="binder">s</span></a> (<a id="x:430" class="idref" href="#x:430"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:427"><span class="id" title="variable">A</span></a>) <a id="xs:431" class="idref" href="#xs:431"><span class="id" title="binder">xs</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:428"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#s:429"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:430"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:431"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:428"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#s:429"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:431"><span class="id" title="variable">xs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>, <span class="id" title="var">x</span>, <span class="id" title="var">xs</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_all" class="idref" href="#skipn_all"><span class="id" title="lemma">skipn_all</span></a> {<a id="A:432" class="idref" href="#A:432"><span class="id" title="binder">A</span></a>} (<a id="l:433" class="idref" href="#l:433"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:432"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:433"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:433"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_app_le" class="idref" href="#skipn_app_le"><span class="id" title="lemma">skipn_app_le</span></a> {<a id="A:434" class="idref" href="#A:434"><span class="id" title="binder">A</span></a>} <a id="n:435" class="idref" href="#n:435"><span class="id" title="binder">n</span></a> (<a id="l:436" class="idref" href="#l:436"><span class="id" title="binder">l</span></a> <a id="l':437" class="idref" href="#l':437"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:434"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#n:435"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:436"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:435"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:436"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':437"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:435"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:436"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':437"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_mapi_rec" class="idref" href="#skipn_mapi_rec"><span class="id" title="lemma">skipn_mapi_rec</span></a> {<a id="A:438" class="idref" href="#A:438"><span class="id" title="binder">A</span></a> <a id="B:439" class="idref" href="#B:439"><span class="id" title="binder">B</span></a>} <a id="n:440" class="idref" href="#n:440"><span class="id" title="binder">n</span></a> (<a id="f:441" class="idref" href="#f:441"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:438"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:439"><span class="id" title="variable">B</span></a>) <a id="k:442" class="idref" href="#k:442"><span class="id" title="binder">k</span></a> (<a id="l:443" class="idref" href="#l:443"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:438"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:440"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:441"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:443"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:442"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:441"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:440"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:443"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#n:440"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:442"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">f</span>, <span class="id" title="var">l</span>, <span class="id" title="var">k</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_skipn_map" class="idref" href="#length_skipn_map"><span class="id" title="lemma">length_skipn_map</span></a> {<a id="A:444" class="idref" href="#A:444"><span class="id" title="binder">A</span></a> <a id="B:445" class="idref" href="#B:445"><span class="id" title="binder">B</span></a>} <a id="n:446" class="idref" href="#n:446"><span class="id" title="binder">n</span></a> (<a id="f:447" class="idref" href="#f:447"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:444"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:445"><span class="id" title="variable">B</span></a>) (<a id="l:448" class="idref" href="#l:448"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:444"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:446"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:447"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:448"><span class="id" title="variable">l</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:446"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:448"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>; <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#length_skipn_map"><span class="id" title="lemma">length_skipn_map</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_ge" class="idref" href="#firstn_ge"><span class="id" title="lemma">firstn_ge</span></a> {<a id="A:449" class="idref" href="#A:449"><span class="id" title="binder">A</span></a>} (<a id="l:450" class="idref" href="#l:450"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:449"><span class="id" title="variable">A</span></a>) <a id="n:451" class="idref" href="#n:451"><span class="id" title="binder">n</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:450"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:451"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:451"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:450"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:450"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_nil"><span class="id" title="lemma">firstn_nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_0" class="idref" href="#firstn_0"><span class="id" title="lemma">firstn_0</span></a> {<a id="A:452" class="idref" href="#A:452"><span class="id" title="binder">A</span></a>} (<a id="l:453" class="idref" href="#l:453"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:452"><span class="id" title="variable">A</span></a>) <a id="n:454" class="idref" href="#n:454"><span class="id" title="binder">n</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#n:454"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:454"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:453"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_firstn_skipn" class="idref" href="#skipn_firstn_skipn"><span class="id" title="lemma">skipn_firstn_skipn</span></a> {<a id="A:455" class="idref" href="#A:455"><span class="id" title="binder">A</span></a>} (<a id="l:456" class="idref" href="#l:456"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:455"><span class="id" title="variable">A</span></a>) <a id="n:457" class="idref" href="#n:457"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:457"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:457"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:456"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:457"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:456"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:457"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:456"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>⇒ /=; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_firstn_firstn" class="idref" href="#firstn_firstn_firstn"><span class="id" title="lemma">firstn_firstn_firstn</span></a> {<a id="A:458" class="idref" href="#A:458"><span class="id" title="binder">A</span></a>} (<a id="l:459" class="idref" href="#l:459"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:458"><span class="id" title="variable">A</span></a>) <a id="n:460" class="idref" href="#n:460"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:460"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:460"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:459"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:460"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:459"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>⇒ /=; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_eq_cons" class="idref" href="#skipn_eq_cons"><span class="id" title="lemma">skipn_eq_cons</span></a> {<a id="A:461" class="idref" href="#A:461"><span class="id" title="binder">A</span></a>} <a id="n:462" class="idref" href="#n:462"><span class="id" title="binder">n</span></a> (<a id="l:463" class="idref" href="#l:463"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:461"><span class="id" title="variable">A</span></a>) <a id="hd:464" class="idref" href="#hd:464"><span class="id" title="binder">hd</span></a> <a id="tl:465" class="idref" href="#tl:465"><span class="id" title="binder">tl</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:462"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:463"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#hd:464"><span class="id" title="variable">hd</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#tl:465"><span class="id" title="variable">tl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:463"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:462"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#hd:464"><span class="id" title="variable">hd</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:462"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:463"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#tl:465"><span class="id" title="variable">tl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">hd</span>, <span class="id" title="var">tl</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> ⇒ →. <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">hd'</span> <span class="id" title="var">tl'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_nil"><span class="id" title="lemma">skipn_nil</span></a>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="split_at_aux" class="idref" href="#split_at_aux"><span class="id" title="definition">split_at_aux</span></a> {<a id="A:466" class="idref" href="#A:466"><span class="id" title="binder">A</span></a>} (<a id="n:467" class="idref" href="#n:467"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="acc:468" class="idref" href="#acc:468"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:466"><span class="id" title="variable">A</span></a>) (<a id="l:469" class="idref" href="#l:469"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:466"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:466"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:466"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:467"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:468"><span class="id" title="variable">acc</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:469"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n'</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:469"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:468"><span class="id" title="variable">acc</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l'</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#split_at_aux:470"><span class="id" title="definition">split_at_aux</span></a> <span class="id" title="var">n'</span> (<span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:468"><span class="id" title="variable">acc</span></a>) <span class="id" title="var">l'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="split_at" class="idref" href="#split_at"><span class="id" title="definition">split_at</span></a> {<a id="A:473" class="idref" href="#A:473"><span class="id" title="binder">A</span></a>} (<a id="n:474" class="idref" href="#n:474"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:475" class="idref" href="#l:475"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:473"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:473"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:473"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#split_at_aux"><span class="id" title="definition">split_at_aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:474"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:475"><span class="id" title="variable">l</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="split_at_aux_firstn_skipn" class="idref" href="#split_at_aux_firstn_skipn"><span class="id" title="lemma">split_at_aux_firstn_skipn</span></a> {<a id="A:476" class="idref" href="#A:476"><span class="id" title="binder">A</span></a>} <a id="n:477" class="idref" href="#n:477"><span class="id" title="binder">n</span></a> <a id="acc:478" class="idref" href="#acc:478"><span class="id" title="binder">acc</span></a> (<a id="l:479" class="idref" href="#l:479"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:476"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#split_at_aux"><span class="id" title="definition">split_at_aux</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:477"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:478"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:479"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#acc:478"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:477"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:479"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:477"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:479"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">acc</span>, <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> /=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="split_at_firstn_skipn" class="idref" href="#split_at_firstn_skipn"><span class="id" title="lemma">split_at_firstn_skipn</span></a> {<a id="A:480" class="idref" href="#A:480"><span class="id" title="binder">A</span></a>} <a id="n:481" class="idref" href="#n:481"><span class="id" title="binder">n</span></a> (<a id="l:482" class="idref" href="#l:482"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:480"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#split_at"><span class="id" title="definition">split_at</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:481"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:482"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:481"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:482"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:481"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:482"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Utils.MRList.html#split_at"><span class="id" title="definition">split_at</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#split_at_aux_firstn_skipn"><span class="id" title="lemma">split_at_aux_firstn_skipn</span></a> /= //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_app" class="idref" href="#rev_app"><span class="id" title="lemma">rev_app</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:483" class="idref" href="#A:483"><span class="id" title="binder">A</span></a> (<a id="l:484" class="idref" href="#l:484"><span class="id" title="binder">l</span></a> <a id="l':485" class="idref" href="#l':485"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:483"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:484"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':485"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':485"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:484"><span class="id" title="variable">l</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">A</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_invol" class="idref" href="#rev_invol"><span class="id" title="lemma">rev_invol</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:486" class="idref" href="#A:486"><span class="id" title="binder">A</span></a> (<a id="l:487" class="idref" href="#l:487"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:486"><span class="id" title="variable">A</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:487"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:487"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_app"><span class="id" title="lemma">rev_app</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_ind_rev" class="idref" href="#list_ind_rev"><span class="id" title="lemma">list_ind_rev</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:488" class="idref" href="#A:488"><span class="id" title="binder">A</span></a> (<a id="P:489" class="idref" href="#P:489"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:488"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#P:489"><span class="id" title="variable">P</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:490" class="idref" href="#a:490"><span class="id" title="binder">a</span></a> <a id="l:491" class="idref" href="#l:491"><span class="id" title="binder">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:489"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:491"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#P:489"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:491"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#a:490"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="l:492" class="idref" href="#l:492"><span class="id" title="binder">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:489"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:492"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">h1</span> <span class="id" title="var">h2</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Utils.MRList.html#rev_invol"><span class="id" title="lemma">rev_invol</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_rect_rev" class="idref" href="#list_rect_rev"><span class="id" title="lemma">list_rect_rev</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:493" class="idref" href="#A:493"><span class="id" title="binder">A</span></a> (<a id="P:494" class="idref" href="#P:494"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:493"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#P:494"><span class="id" title="variable">P</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a:495" class="idref" href="#a:495"><span class="id" title="binder">a</span></a> <a id="l:496" class="idref" href="#l:496"><span class="id" title="binder">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:494"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:496"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#P:494"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:496"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#a:495"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="l:497" class="idref" href="#l:497"><span class="id" title="binder">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:494"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:497"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">h1</span> <span class="id" title="var">h2</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Utils.MRList.html#rev_invol"><span class="id" title="lemma">rev_invol</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">clear</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> ; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_app" class="idref" href="#last_app"><span class="id" title="lemma">last_app</span></a> {<a id="A:498" class="idref" href="#A:498"><span class="id" title="binder">A</span></a>} (<a id="l:499" class="idref" href="#l:499"><span class="id" title="binder">l</span></a> <a id="l':500" class="idref" href="#l':500"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:498"><span class="id" title="variable">A</span></a>) <a id="d:501" class="idref" href="#d:501"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#l':500"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:499"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':500"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#d:501"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':500"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:501"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="last_nonempty_eq" class="idref" href="#last_nonempty_eq"><span class="id" title="lemma">last_nonempty_eq</span></a> {<a id="A:502" class="idref" href="#A:502"><span class="id" title="binder">A</span></a>} {<a id="l:503" class="idref" href="#l:503"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:502"><span class="id" title="variable">A</span></a>} {<a id="d:504" class="idref" href="#d:504"><span class="id" title="binder">d</span></a> <a id="d':505" class="idref" href="#d':505"><span class="id" title="binder">d'</span></a>} : <a class="idref" href="MetaRocq.Utils.MRList.html#l:503"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:503"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:504"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:503"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d':505"><span class="id" title="variable">d'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_removelast" class="idref" href="#nth_error_removelast"><span class="id" title="lemma">nth_error_removelast</span></a> {<a id="A:506" class="idref" href="#A:506"><span class="id" title="binder">A</span></a>} (<a id="args:507" class="idref" href="#args:507"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:506"><span class="id" title="variable">A</span></a>) <a id="n:508" class="idref" href="#n:508"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#n:508"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.pred"><span class="id" title="definition">Nat.pred</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#args:507"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#args:507"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:508"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#removelast"><span class="id" title="definition">removelast</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#args:507"><span class="id" title="variable">args</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:508"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">args</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>, <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_skipn" class="idref" href="#nth_error_skipn"><span class="id" title="lemma">nth_error_skipn</span></a> {<a id="A:509" class="idref" href="#A:509"><span class="id" title="binder">A</span></a>} <a id="n:510" class="idref" href="#n:510"><span class="id" title="binder">n</span></a> (<a id="l:511" class="idref" href="#l:511"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:509"><span class="id" title="variable">A</span></a>) <a id="i:512" class="idref" href="#i:512"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:510"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:511"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#i:512"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:511"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:510"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:512"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">i</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="tactic">case</span>: <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_skipn" class="idref" href="#skipn_skipn"><span class="id" title="lemma">skipn_skipn</span></a> {<a id="A:513" class="idref" href="#A:513"><span class="id" title="binder">A</span></a>} <a id="n:514" class="idref" href="#n:514"><span class="id" title="binder">n</span></a> <a id="m:515" class="idref" href="#m:515"><span class="id" title="binder">m</span></a> (<a id="l:516" class="idref" href="#l:516"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:513"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:514"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:515"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:516"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#m:515"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:514"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:516"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> |- ×. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_nth_error" class="idref" href="#skipn_nth_error"><span class="id" title="lemma">skipn_nth_error</span></a> {<a id="A:517" class="idref" href="#A:517"><span class="id" title="binder">A</span></a>} (<a id="l:518" class="idref" href="#l:518"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:517"><span class="id" title="variable">A</span></a>) <a id="i:519" class="idref" href="#i:519"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:518"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:519"><span class="id" title="variable">i</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">a</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:519"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:518"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:519"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:518"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:519"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:518"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span> |- ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">i</span>). <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<span class="id" title="var">IHl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<span class="id" title="var">IHl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_app_ge" class="idref" href="#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a> {<a id="A:520" class="idref" href="#A:520"><span class="id" title="binder">A</span></a>} (<a id="l:521" class="idref" href="#l:521"><span class="id" title="binder">l</span></a> <a id="l':522" class="idref" href="#l':522"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:520"><span class="id" title="variable">A</span></a>) (<a id="v:523" class="idref" href="#v:523"><span class="id" title="binder">v</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:521"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:523"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:521"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':522"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#v:523"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':522"><span class="id" title="variable">l'</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#v:523"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:521"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_app_lt" class="idref" href="#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a> {<a id="A:524" class="idref" href="#A:524"><span class="id" title="binder">A</span></a>} (<a id="l:525" class="idref" href="#l:525"><span class="id" title="binder">l</span></a> <a id="l':526" class="idref" href="#l':526"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:524"><span class="id" title="variable">A</span></a>) (<a id="v:527" class="idref" href="#v:527"><span class="id" title="binder">v</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#v:527"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:525"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:525"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':526"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#v:527"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:525"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:527"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>. <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_app_inv" class="idref" href="#nth_error_app_inv"><span class="id" title="lemma">nth_error_app_inv</span></a> <a id="X:528" class="idref" href="#X:528"><span class="id" title="binder">X</span></a> (<a id="x:529" class="idref" href="#x:529"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#X:528"><span class="id" title="variable">X</span></a>) <a id="n:530" class="idref" href="#n:530"><span class="id" title="binder">n</span></a> <a id="l1:531" class="idref" href="#l1:531"><span class="id" title="binder">l1</span></a> <a id="l2:532" class="idref" href="#l2:532"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l1:531"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:532"><span class="id" title="variable">l2</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:530"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:529"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#n:530"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:531"><span class="id" title="variable">l1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:531"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:530"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:529"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#n:530"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:531"><span class="id" title="variable">l1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:532"><span class="id" title="variable">l2</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#n:530"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length"><span class="id" title="abbreviation">List.length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:531"><span class="id" title="variable">l1</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:529"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.Compare_dec.html#le_lt_dec"><span class="id" title="definition">le_lt_dec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l1</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_rev" class="idref" href="#nth_error_rev"><span class="id" title="lemma">nth_error_rev</span></a> {<a id="A:533" class="idref" href="#A:533"><span class="id" title="binder">A</span></a>} (<a id="l:534" class="idref" href="#l:534"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:533"><span class="id" title="variable">A</span></a>) <a id="i:535" class="idref" href="#i:535"><span class="id" title="binder">i</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#i:535"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:534"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:534"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:535"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:534"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:534"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:535"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 0) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHi</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_rev_inv" class="idref" href="#nth_error_rev_inv"><span class="id" title="lemma">nth_error_rev_inv</span></a> {<a id="A:536" class="idref" href="#A:536"><span class="id" title="binder">A</span></a>} (<a id="l:537" class="idref" href="#l:537"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:536"><span class="id" title="variable">A</span></a>) <a id="i:538" class="idref" href="#i:538"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#i:538"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:537"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:537"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#i:538"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:537"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:537"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:538"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hi</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_rev"><span class="id" title="lemma">nth_error_rev</span></a> ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_snoc" class="idref" href="#nth_error_snoc"><span class="id" title="lemma">nth_error_snoc</span></a> {<a id="A:539" class="idref" href="#A:539"><span class="id" title="binder">A</span></a>} (<a id="l:540" class="idref" href="#l:540"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:539"><span class="id" title="variable">A</span></a>) (<a id="a:541" class="idref" href="#a:541"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:539"><span class="id" title="variable">A</span></a>) (<a id="l':542" class="idref" href="#l':542"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:539"><span class="id" title="variable">A</span></a>) <a id="i:543" class="idref" href="#i:543"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#i:543"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:540"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:540"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:541"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':542"><span class="id" title="variable">l'</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#i:543"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:541"><span class="id" title="variable">a</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_inj" class="idref" href="#map_inj"><span class="id" title="lemma">map_inj</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="A:544" class="idref" href="#A:544"><span class="id" title="binder">A</span></a> <a id="B:545" class="idref" href="#B:545"><span class="id" title="binder">B</span></a> (<a id="f:546" class="idref" href="#f:546"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:544"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:545"><span class="id" title="variable">B</span></a>) <a id="l:547" class="idref" href="#l:547"><span class="id" title="binder">l</span></a> <a id="l':548" class="idref" href="#l':548"><span class="id" title="binder">l'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:549" class="idref" href="#x:549"><span class="id" title="binder">x</span></a> <a id="y:550" class="idref" href="#y:550"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:546"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:549"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:546"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:550"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:549"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:550"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:546"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:547"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:546"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':548"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#l:547"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':548"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">l</span> <span class="id" title="var">l'</span> <span class="id" title="var">h</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span>, <span class="id" title="var">e</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span> ; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span> ; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ListSize" class="idref" href="#ListSize"><span class="id" title="section">ListSize</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ListSize.A" class="idref" href="#ListSize.A"><span class="id" title="variable">A</span></a>} (<a id="ListSize.size" class="idref" href="#ListSize.size"><span class="id" title="variable">size</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:551"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="list_size" class="idref" href="#list_size"><span class="id" title="definition">list_size</span></a> (<a id="l:553" class="idref" href="#l:553"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSize.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:553"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒  0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">v</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#ListSize.size"><span class="id" title="variable">size</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size:554"><span class="id" title="definition">list_size</span></a> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_app" class="idref" href="#list_size_app"><span class="id" title="lemma">list_size_app</span></a> (<a id="l:556" class="idref" href="#l:556"><span class="id" title="binder">l</span></a> <a id="l':557" class="idref" href="#l':557"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSize.A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:556"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':557"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:556"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':557"><span class="id" title="variable">l'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_rev" class="idref" href="#list_size_rev"><span class="id" title="lemma">list_size_rev</span></a> (<a id="l:558" class="idref" href="#l:558"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSize.A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:558"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:558"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_cons"><span class="id" title="lemma">rev_cons</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size_app"><span class="id" title="lemma">list_size_app</span></a> <span class="id" title="var">IHl</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_length" class="idref" href="#list_size_length"><span class="id" title="lemma">list_size_length</span></a> (<a id="l:559" class="idref" href="#l:559"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSize.A"><span class="id" title="variable">A</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:559"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:559"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSize"><span class="id" title="section">ListSize</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ListSizeMap" class="idref" href="#ListSizeMap"><span class="id" title="section">ListSizeMap</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ListSizeMap.A" class="idref" href="#ListSizeMap.A"><span class="id" title="variable">A</span></a>} (<a id="ListSizeMap.sizeA" class="idref" href="#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:560"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ListSizeMap.B" class="idref" href="#ListSizeMap.B"><span class="id" title="variable">B</span></a>} (<a id="ListSizeMap.sizeB" class="idref" href="#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:562"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_map" class="idref" href="#list_size_map"><span class="id" title="lemma">list_size_map</span></a> (<a id="f:564" class="idref" href="#f:564"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) <a id="l:565" class="idref" href="#l:565"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:564"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:565"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> (<span class="id" title="keyword">fun</span> <a id="x:566" class="idref" href="#x:566"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:564"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:566"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:565"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_mapi_rec_eq" class="idref" href="#list_size_mapi_rec_eq"><span class="id" title="lemma">list_size_mapi_rec_eq</span></a> (<a id="l:567" class="idref" href="#l:567"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:568" class="idref" href="#f:568"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) <a id="k:569" class="idref" href="#k:569"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:570" class="idref" href="#i:570"><span class="id" title="binder">i</span></a> <a id="x:571" class="idref" href="#x:571"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:568"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:570"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:571"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:571"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:568"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:567"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:569"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:567"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- ×. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_mapi_eq" class="idref" href="#list_size_mapi_eq"><span class="id" title="lemma">list_size_mapi_eq</span></a> (<a id="l:572" class="idref" href="#l:572"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:573" class="idref" href="#f:573"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:574" class="idref" href="#i:574"><span class="id" title="binder">i</span></a> <a id="x:575" class="idref" href="#x:575"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:573"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:574"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:575"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:575"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:573"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:572"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:572"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size_mapi_rec_eq"><span class="id" title="lemma">list_size_mapi_rec_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_map_eq" class="idref" href="#list_size_map_eq"><span class="id" title="lemma">list_size_map_eq</span></a> (<a id="l:576" class="idref" href="#l:576"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:577" class="idref" href="#f:577"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:578" class="idref" href="#x:578"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:578"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:577"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:578"><span class="id" title="variable">x</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:577"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:576"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:576"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_mapi_rec_le" class="idref" href="#list_size_mapi_rec_le"><span class="id" title="lemma">list_size_mapi_rec_le</span></a> (<a id="l:579" class="idref" href="#l:579"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:580" class="idref" href="#f:580"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) <a id="k:581" class="idref" href="#k:581"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:582" class="idref" href="#i:582"><span class="id" title="binder">i</span></a> <a id="x:583" class="idref" href="#x:583"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:580"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:582"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:583"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:583"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:580"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:579"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:581"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:579"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- ×. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">k</span> <span class="id" title="var">a</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>)). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_mapi_le" class="idref" href="#list_size_mapi_le"><span class="id" title="lemma">list_size_mapi_le</span></a> (<a id="l:584" class="idref" href="#l:584"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:585" class="idref" href="#f:585"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:586" class="idref" href="#i:586"><span class="id" title="binder">i</span></a> <a id="x:587" class="idref" href="#x:587"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:585"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:586"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:587"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:587"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:585"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:584"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:584"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size_mapi_rec_le"><span class="id" title="lemma">list_size_mapi_rec_le</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="list_size_map_le" class="idref" href="#list_size_map_le"><span class="id" title="lemma">list_size_map_le</span></a> (<a id="l:588" class="idref" href="#l:588"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a>) (<a id="f:589" class="idref" href="#f:589"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.B"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:590" class="idref" href="#x:590"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:589"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:590"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:590"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeB"><span class="id" title="variable">sizeB</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:589"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:588"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap.sizeA"><span class="id" title="variable">sizeA</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:588"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#ListSizeMap"><span class="id" title="section">ListSizeMap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="list_size_map_hom" class="idref" href="#list_size_map_hom"><span class="id" title="lemma">list_size_map_hom</span></a> {<a id="A:591" class="idref" href="#A:591"><span class="id" title="binder">A</span></a>} (<a id="size:592" class="idref" href="#size:592"><span class="id" title="binder">size</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:591"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:593" class="idref" href="#l:593"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:591"><span class="id" title="variable">A</span></a>) (<a id="f:594" class="idref" href="#f:594"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:591"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:591"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:595" class="idref" href="#x:595"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#size:592"><span class="id" title="variable">size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:595"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#size:592"><span class="id" title="variable">size</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:594"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:595"><span class="id" title="variable">x</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#size:592"><span class="id" title="variable">size</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:594"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:593"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#size:592"><span class="id" title="variable">size</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:593"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="InA_In_eq" class="idref" href="#InA_In_eq"><span class="id" title="lemma">InA_In_eq</span></a> {<a id="A:596" class="idref" href="#A:596"><span class="id" title="binder">A</span></a>} <a id="x:597" class="idref" href="#x:597"><span class="id" title="binder">x</span></a> (<a id="l:598" class="idref" href="#l:598"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:596"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Sorting.SetoidList.html#InA"><span class="id" title="inductive">InA</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">Logic.eq</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:597"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:598"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:597"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:598"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Sorting.SetoidList.html#InA_alt"><span class="id" title="lemma">InA_alt</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">firstorder</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_rev" class="idref" href="#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> {<a id="A:599" class="idref" href="#A:599"><span class="id" title="binder">A</span></a>} (<a id="p:600" class="idref" href="#p:600"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:599"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="l:601" class="idref" href="#l:601"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#p:600"><span class="id" title="variable">p</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:601"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#p:600"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:601"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_unit"><span class="id" title="lemma">rev_unit</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_comm"><span class="id" title="lemma">andb_comm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="unfold" class="idref" href="#unfold"><span class="id" title="definition">unfold</span></a> {<a id="A:602" class="idref" href="#A:602"><span class="id" title="binder">A</span></a>} (<a id="n:603" class="idref" href="#n:603"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="f:604" class="idref" href="#f:604"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:602"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:602"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#n:603"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0 ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#unfold:605"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:603"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:604"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#f:604"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:603"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_irrel_list" class="idref" href="#mapi_irrel_list"><span class="id" title="lemma">mapi_irrel_list</span></a> {<a id="A:607" class="idref" href="#A:607"><span class="id" title="binder">A</span></a> <a id="B:608" class="idref" href="#B:608"><span class="id" title="binder">B</span></a>} (<a id="f:609" class="idref" href="#f:609"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:607"><span class="id" title="variable">A</span></a>) (<a id="l:610" class="idref" href="#l:610"><span class="id" title="binder">l</span></a> <a id="l':611" class="idref" href="#l':611"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:608"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:610"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':611"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:612" class="idref" href="#i:612"><span class="id" title="binder">i</span></a> (<a id="x:613" class="idref" href="#x:613"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:608"><span class="id" title="variable">B</span></a>) ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:609"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:612"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:610"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:614" class="idref" href="#i:614"><span class="id" title="binder">i</span></a> <a id="x:615" class="idref" href="#x:615"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:609"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:614"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l':611"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">f</span>, <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span> ⇒ //; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= <span class="id" title="var">eq</span>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<span class="id" title="var">IHl</span> (<span class="id" title="keyword">fun</span> <a id="x:616" class="idref" href="#x:616"><span class="id" title="binder"><span id="x:617" class="id"><span id="x:618" class="id">x</span></span></span></a> ⇒ (<span class="id" title="var">f</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:616"><span class="id" title="variable">x</span></a>))) <span class="id" title="var">l'</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_unfold" class="idref" href="#mapi_unfold"><span class="id" title="lemma">mapi_unfold</span></a> {<a id="A:619" class="idref" href="#A:619"><span class="id" title="binder">A</span></a> <a id="B:620" class="idref" href="#B:620"><span class="id" title="binder">B</span></a>} (<a id="f:621" class="idref" href="#f:621"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:620"><span class="id" title="variable">B</span></a>) <a id="l:622" class="idref" href="#l:622"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:623" class="idref" href="#i:623"><span class="id" title="binder">i</span></a> (<a id="x:624" class="idref" href="#x:624"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:619"><span class="id" title="variable">A</span></a>) ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:621"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:623"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:622"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:622"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:621"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">f</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">IHl</span>. <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a> (<span class="id" title="keyword">fun</span> <a id="i:625" class="idref" href="#i:625"><span class="id" title="binder"><span id="i:627" class="id"><span id="i:629" class="id">i</span></span></span></a> <a id="x:626" class="idref" href="#x:626"><span class="id" title="binder"><span id="x:628" class="id"><span id="x:630" class="id">x</span></span></span></a> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#i:625"><span class="id" title="variable">i</span></a>) <span class="id" title="var">l</span> 0).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> (<span class="id" title="keyword">fun</span> <a id="i:631" class="idref" href="#i:631"><span class="id" title="binder"><span id="i:633" class="id">i</span></span></a> <a id="x:632" class="idref" href="#x:632"><span class="id" title="binder"><span id="x:634" class="id">x</span></span></a> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#i:631"><span class="id" title="variable">i</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_app"><span class="id" title="lemma">mapi_rec_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">f</span> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:635" class="idref" href="#i:635"><span class="id" title="binder"><span id="i:637" class="id">i</span></span></a> <a id="x:636" class="idref" href="#x:636"><span class="id" title="binder"><span id="x:638" class="id">x</span></span></a> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#i:635"><span class="id" title="variable">i</span></a>) (<span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_irrel_list"><span class="id" title="lemma">mapi_irrel_list</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> /=; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="unfold_length" class="idref" href="#unfold_length"><span class="id" title="lemma">unfold_length</span></a> {<a id="A:639" class="idref" href="#A:639"><span class="id" title="binder">A</span></a>} (<a id="f:640" class="idref" href="#f:640"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:639"><span class="id" title="variable">A</span></a>) <a id="m:641" class="idref" href="#m:641"><span class="id" title="binder">m</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:641"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:640"><span class="id" title="variable">f</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:641"><span class="id" title="variable">m</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> /=; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_unfold" class="idref" href="#nth_error_unfold"><span class="id" title="lemma">nth_error_unfold</span></a> {<a id="A:642" class="idref" href="#A:642"><span class="id" title="binder">A</span></a>} (<a id="f:643" class="idref" href="#f:643"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:642"><span class="id" title="variable">A</span></a>) <a id="m:644" class="idref" href="#m:644"><span class="id" title="binder">m</span></a> <a id="n:645" class="idref" href="#n:645"><span class="id" title="binder">n</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#n:645"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:644"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:644"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:643"><span class="id" title="variable">f</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:645"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:643"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:645"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Classes.eq_dec</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>); [<span class="id" title="tactic">subst</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a> ?<a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> //; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHm</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> /= <a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_unfold_inv" class="idref" href="#nth_error_unfold_inv"><span class="id" title="lemma">nth_error_unfold_inv</span></a> {<a id="A:646" class="idref" href="#A:646"><span class="id" title="binder">A</span></a>} (<a id="f:647" class="idref" href="#f:647"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:646"><span class="id" title="variable">A</span></a>) <a id="m:648" class="idref" href="#m:648"><span class="id" title="binder">m</span></a> <a id="n:649" class="idref" href="#n:649"><span class="id" title="binder">n</span></a> <a id="t:650" class="idref" href="#t:650"><span class="id" title="binder">t</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:648"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:647"><span class="id" title="variable">f</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:649"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#t:650"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#t:650"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#f:647"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:649"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">intros</span> <span class="id" title="var">Hn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="var">Hn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> /= <a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="definition">Classes.eq_dec</span> <span class="id" title="var">n</span> <span class="id" title="var">m</span>); [<span class="id" title="tactic">subst</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /= //; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">simpl</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Hn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a> ?<a class="idref" href="MetaRocq.Utils.MRList.html#unfold_length"><span class="id" title="lemma">unfold_length</span></a> //; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="In_unfold_inj" class="idref" href="#In_unfold_inj"><span class="id" title="lemma">In_unfold_inj</span></a> {<a id="A:651" class="idref" href="#A:651"><span class="id" title="binder">A</span></a>} (<a id="f:652" class="idref" href="#f:652"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:651"><span class="id" title="variable">A</span></a>) <a id="n:653" class="idref" href="#n:653"><span class="id" title="binder">n</span></a> <a id="i:654" class="idref" href="#i:654"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:655" class="idref" href="#i:655"><span class="id" title="binder">i</span></a> <a id="j:656" class="idref" href="#j:656"><span class="id" title="binder">j</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:652"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:655"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:652"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#j:656"><span class="id" title="variable">j</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:655"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#j:656"><span class="id" title="variable">j</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:652"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:654"><span class="id" title="variable">i</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:653"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:652"><span class="id" title="variable">f</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:654"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:653"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_app_or"><span class="id" title="lemma">in_app_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">H</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; [<span class="id" title="tactic">apply</span> <span class="id" title="var">hf</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_unfold" class="idref" href="#forallb_unfold"><span class="id" title="lemma">forallb_unfold</span></a> {<a id="A:657" class="idref" href="#A:657"><span class="id" title="binder">A</span></a>} (<a id="f:658" class="idref" href="#f:658"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:657"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="g:659" class="idref" href="#g:659"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:657"><span class="id" title="variable">A</span></a>) <a id="n:660" class="idref" href="#n:660"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:661" class="idref" href="#x:661"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#x:661"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:660"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:658"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#g:659"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:661"><span class="id" title="variable">x</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:658"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#unfold"><span class="id" title="definition">unfold</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:660"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:659"><span class="id" title="variable">g</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a> <span class="id" title="var">IHn</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">lt</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">fg</span> //. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">fg</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_mapi" class="idref" href="#forallb_mapi"><span class="id" title="lemma">forallb_mapi</span></a> {<a id="A:662" class="idref" href="#A:662"><span class="id" title="binder">A</span></a> <a id="B:663" class="idref" href="#B:663"><span class="id" title="binder">B</span></a>} (<a id="p:664" class="idref" href="#p:664"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:663"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="f:665" class="idref" href="#f:665"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:663"><span class="id" title="variable">B</span></a>) <a id="l:666" class="idref" href="#l:666"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:667" class="idref" href="#i:667"><span class="id" title="binder">i</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#i:667"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:666"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#p:664"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:665"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:667"><span class="id" title="variable">i</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#p:664"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:668" class="idref" href="#i:668"><span class="id" title="binder">i</span></a> (<a id="x:669" class="idref" href="#x:669"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:662"><span class="id" title="variable">A</span></a>) ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:665"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:668"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:666"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hp</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_unfold"><span class="id" title="lemma">mapi_unfold</span></a> <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hp</span> // !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fold_left_andb_forallb" class="idref" href="#fold_left_andb_forallb"><span class="id" title="lemma">fold_left_andb_forallb</span></a> {<a id="A:670" class="idref" href="#A:670"><span class="id" title="binder">A</span></a>} <a id="P:671" class="idref" href="#P:671"><span class="id" title="binder">P</span></a> <a id="l:672" class="idref" href="#l:672"><span class="id" title="binder">l</span></a> <a id="x:673" class="idref" href="#x:673"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_left"><span class="id" title="definition">fold_left</span></a> (<span class="id" title="keyword">fun</span> <a id="b:674" class="idref" href="#b:674"><span class="id" title="binder">b</span></a> <a id="x:675" class="idref" href="#x:675"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#P:671"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:675"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#b:674"><span class="id" title="variable">b</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:672"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#P:671"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:673"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> @<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:670"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#P:671"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#x:673"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:672"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_left_rev_right"><span class="id" title="lemma">fold_left_rev_right</span></a>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <span class="id" title="var">l</span>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl0</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_assoc"><span class="id" title="lemma">andb_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_comm"><span class="id" title="lemma">andb_comm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_nth_error" class="idref" href="#nth_nth_error"><span class="id" title="lemma">nth_nth_error</span></a> {<a id="A:676" class="idref" href="#A:676"><span class="id" title="binder">A</span></a>} <a id="n:677" class="idref" href="#n:677"><span class="id" title="binder">n</span></a> <a id="l:678" class="idref" href="#l:678"><span class="id" title="binder">l</span></a> (<a id="d:679" class="idref" href="#d:679"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:676"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:677"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:678"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:679"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:678"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:677"><span class="id" title="variable">n</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#d:679"><span class="id" title="variable">d</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_default_eq"><span class="id" title="lemma">nth_default_eq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_nth_error'" class="idref" href="#nth_nth_error'"><span class="id" title="lemma">nth_nth_error'</span></a> {<a id="A:680" class="idref" href="#A:680"><span class="id" title="binder">A</span></a>} {<a id="i:681" class="idref" href="#i:681"><span class="id" title="binder">i</span></a>} {<a id="l:682" class="idref" href="#l:682"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:680"><span class="id" title="variable">A</span></a>} {<a id="d:683" class="idref" href="#d:683"><span class="id" title="binder">d</span></a> <a id="v:684" class="idref" href="#v:684"><span class="id" title="binder">v</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:681"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:682"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:683"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:684"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:682"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:681"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:684"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:682"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:681"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:684"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#d:683"><span class="id" title="variable">d</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e03f39daf98516fa530d3f6f5a1b4d92"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">i</span> <span class="id" title="var">v</span>. <span class="id" title="tactic">elim</span>: <span class="id" title="var">l</span> ⇒ [|<span class="id" title="var">hd</span> <span class="id" title="var">tl</span> <span class="id" title="var">IH</span>] //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">case</span> ⇒ /= //; <span class="id" title="var">now</span> <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">case</span> ⇒ /= // <span class="id" title="var">_</span> &lt;-. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_add" class="idref" href="#firstn_add"><span class="id" title="lemma">firstn_add</span></a> {<a id="A:685" class="idref" href="#A:685"><span class="id" title="binder">A</span></a>} <a id="x:686" class="idref" href="#x:686"><span class="id" title="binder">x</span></a> <a id="y:687" class="idref" href="#y:687"><span class="id" title="binder">y</span></a> (<a id="args:688" class="idref" href="#args:688"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:685"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#x:686"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:687"><span class="id" title="variable">y</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#args:688"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:686"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#args:688"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:687"><span class="id" title="variable">y</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:686"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#args:688"><span class="id" title="variable">args</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">y</span>, <span class="id" title="var">args</span> |- ×. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_nil"><span class="id" title="lemma">firstn_nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHx</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_app_left_rem" class="idref" href="#firstn_app_left_rem"><span class="id" title="lemma">firstn_app_left_rem</span></a> (<a id="A:689" class="idref" href="#A:689"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>) (<a id="n:690" class="idref" href="#n:690"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l1:691" class="idref" href="#l1:691"><span class="id" title="binder">l1</span></a> <a id="l2:692" class="idref" href="#l2:692"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:689"><span class="id" title="variable">A</span></a>) <a id="k:693" class="idref" href="#k:693"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#k:693"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:691"><span class="id" title="variable">l1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:690"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#k:693"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l1:691"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:692"><span class="id" title="variable">l2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:691"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:690"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:692"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> -&gt;; <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app_2"><span class="id" title="lemma">firstn_app_2</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_app_left" class="idref" href="#firstn_app_left"><span class="id" title="lemma">firstn_app_left</span></a> {<a id="A:694" class="idref" href="#A:694"><span class="id" title="binder">A</span></a>} <a id="n:695" class="idref" href="#n:695"><span class="id" title="binder">n</span></a> (<a id="l:696" class="idref" href="#l:696"><span class="id" title="binder">l</span></a> <a id="l':697" class="idref" href="#l':697"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:694"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#n:695"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:696"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:695"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:696"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':697"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:696"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app"><span class="id" title="lemma">firstn_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_all"><span class="id" title="lemma">firstn_all</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#firstn_0"><span class="id" title="lemma">firstn_0</span></a> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_all_app_eq" class="idref" href="#skipn_all_app_eq"><span class="id" title="lemma">skipn_all_app_eq</span></a> {<a id="A:698" class="idref" href="#A:698"><span class="id" title="binder">A</span></a>} <a id="n:699" class="idref" href="#n:699"><span class="id" title="binder">n</span></a> (<a id="l:700" class="idref" href="#l:700"><span class="id" title="binder">l</span></a> <a id="l':701" class="idref" href="#l':701"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:698"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#n:699"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:700"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:699"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:700"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':701"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':701"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>→. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_all_app"><span class="id" title="lemma">skipn_all_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_case" class="idref" href="#rev_case"><span class="id" title="lemma">rev_case</span></a> {<a id="A:702" class="idref" href="#A:702"><span class="id" title="binder">A</span></a>} (<a id="P:703" class="idref" href="#P:703"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:702"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#P:703"><span class="id" title="variable">P</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="l:704" class="idref" href="#l:704"><span class="id" title="binder">l</span></a> <a id="x:705" class="idref" href="#x:705"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:703"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:704"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:705"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="l:706" class="idref" href="#l:706"><span class="id" title="binder">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#P:703"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:706"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstn_length_le_inv" class="idref" href="#firstn_length_le_inv"><span class="id" title="lemma">firstn_length_le_inv</span></a> {<a id="A:707" class="idref" href="#A:707"><span class="id" title="binder">A</span></a>} <a id="n:708" class="idref" href="#n:708"><span class="id" title="binder">n</span></a> (<a id="l:709" class="idref" href="#l:709"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:707"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:708"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:709"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:708"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:708"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:709"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">arith</span>. <span class="id" title="tactic">discriminate</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="map2i_rec" class="idref" href="#map2i_rec"><span class="id" title="definition">map2i_rec</span></a> {<a id="A:710" class="idref" href="#A:710"><span class="id" title="binder">A</span></a> <a id="B:711" class="idref" href="#B:711"><span class="id" title="binder">B</span></a> <a id="C:712" class="idref" href="#C:712"><span class="id" title="binder">C</span></a>} (<a id="f:713" class="idref" href="#f:713"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:710"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:711"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:712"><span class="id" title="variable">C</span></a>) <a id="i:714" class="idref" href="#i:714"><span class="id" title="binder">i</span></a> (<a id="l:715" class="idref" href="#l:715"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:710"><span class="id" title="variable">A</span></a>) (<a id="l':716" class="idref" href="#l':716"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:711"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:712"><span class="id" title="variable">C</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Utils.MRList.html#l:715"><span class="id" title="variable">l</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#l':716"><span class="id" title="variable">l'</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span>, <span class="id" title="var">hd'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl'</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:713"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:714"><span class="id" title="variable">i</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">hd'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i_rec:717"><span class="id" title="definition">map2i_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:713"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:714"><span class="id" title="variable">i</span></a>) <span class="id" title="var">tl</span> <span class="id" title="var">tl'</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="map2i" class="idref" href="#map2i"><span class="id" title="definition">map2i</span></a> {<a id="A:720" class="idref" href="#A:720"><span class="id" title="binder">A</span></a> <a id="B:721" class="idref" href="#B:721"><span class="id" title="binder">B</span></a> <a id="C:722" class="idref" href="#C:722"><span class="id" title="binder">C</span></a>} (<a id="f:723" class="idref" href="#f:723"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:720"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:721"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:722"><span class="id" title="variable">C</span></a>) := <a class="idref" href="MetaRocq.Utils.MRList.html#map2i_rec"><span class="id" title="definition">map2i_rec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:723"><span class="id" title="variable">f</span></a> 0.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapi_map2" class="idref" href="#mapi_map2"><span class="id" title="lemma">mapi_map2</span></a> {<a id="A:724" class="idref" href="#A:724"><span class="id" title="binder">A</span></a> <a id="B:725" class="idref" href="#B:725"><span class="id" title="binder">B</span></a> <a id="C:726" class="idref" href="#C:726"><span class="id" title="binder">C</span></a> <a id="D:727" class="idref" href="#D:727"><span class="id" title="binder">D</span></a>} (<a id="f:728" class="idref" href="#f:728"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:724"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:725"><span class="id" title="variable">B</span></a>) (<a id="g:729" class="idref" href="#g:729"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#C:726"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#D:727"><span class="id" title="variable">D</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:724"><span class="id" title="variable">A</span></a>) <a id="l:730" class="idref" href="#l:730"><span class="id" title="binder">l</span></a> <a id="l':731" class="idref" href="#l':731"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:728"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:729"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:730"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':731"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a> (<span class="id" title="keyword">fun</span> <a id="i:732" class="idref" href="#i:732"><span class="id" title="binder">i</span></a> <a id="x:733" class="idref" href="#x:733"><span class="id" title="binder">x</span></a> <a id="y:734" class="idref" href="#y:734"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:728"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:732"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#g:729"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:733"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:734"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:730"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':731"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a>. <span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_mapi" class="idref" href="#map2_mapi"><span class="id" title="lemma">map2_mapi</span></a> {<a id="A:735" class="idref" href="#A:735"><span class="id" title="binder">A</span></a> <a id="A':736" class="idref" href="#A':736"><span class="id" title="binder">A'</span></a> <a id="B:737" class="idref" href="#B:737"><span class="id" title="binder">B</span></a> <a id="B':738" class="idref" href="#B':738"><span class="id" title="binder">B'</span></a> <a id="C:739" class="idref" href="#C:739"><span class="id" title="binder">C</span></a>} (<a id="f:740" class="idref" href="#f:740"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:735"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:737"><span class="id" title="variable">B</span></a>) (<a id="f':741" class="idref" href="#f':741"><span class="id" title="binder">f'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A':736"><span class="id" title="variable">A'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B':738"><span class="id" title="variable">B'</span></a>) (<a id="g:742" class="idref" href="#g:742"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:737"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B':738"><span class="id" title="variable">B'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:739"><span class="id" title="variable">C</span></a>) <a id="l:743" class="idref" href="#l:743"><span class="id" title="binder">l</span></a> <a id="l':744" class="idref" href="#l':744"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:742"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:740"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:743"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f':741"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':744"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a> (<span class="id" title="keyword">fun</span> <a id="i:745" class="idref" href="#i:745"><span class="id" title="binder">i</span></a> <a id="x:746" class="idref" href="#x:746"><span class="id" title="binder">x</span></a> <a id="y:747" class="idref" href="#y:747"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:742"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:740"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:745"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:746"><span class="id" title="variable">x</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#f':741"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:745"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:747"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#l:743"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':744"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a>. <span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2i_ext" class="idref" href="#map2i_ext"><span class="id" title="lemma">map2i_ext</span></a> {<a id="A:748" class="idref" href="#A:748"><span class="id" title="binder">A</span></a> <a id="B:749" class="idref" href="#B:749"><span class="id" title="binder">B</span></a> <a id="C:750" class="idref" href="#C:750"><span class="id" title="binder">C</span></a>} (<a id="f:751" class="idref" href="#f:751"><span class="id" title="binder">f</span></a> <a id="g:752" class="idref" href="#g:752"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:748"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:749"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:750"><span class="id" title="variable">C</span></a>) <a id="l:753" class="idref" href="#l:753"><span class="id" title="binder">l</span></a> <a id="l':754" class="idref" href="#l':754"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:755" class="idref" href="#i:755"><span class="id" title="binder">i</span></a> <a id="x:756" class="idref" href="#x:756"><span class="id" title="binder">x</span></a> <a id="y:757" class="idref" href="#y:757"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:751"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:755"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:756"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:757"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:752"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#i:755"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:756"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:757"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:751"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:753"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':754"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:752"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:753"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':754"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map2i"><span class="id" title="definition">map2i</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_inj_length_r" class="idref" href="#app_inj_length_r"><span class="id" title="lemma">app_inj_length_r</span></a> {<a id="A:758" class="idref" href="#A:758"><span class="id" title="binder">A</span></a>} (<a id="l:759" class="idref" href="#l:759"><span class="id" title="binder">l</span></a> <a id="l':760" class="idref" href="#l':760"><span class="id" title="binder">l'</span></a> <a id="r:761" class="idref" href="#r:761"><span class="id" title="binder">r</span></a> <a id="r':762" class="idref" href="#r':762"><span class="id" title="binder">r'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:758"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:759"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r:761"><span class="id" title="variable">r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':760"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r':762"><span class="id" title="variable">r'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#r:761"><span class="id" title="variable">r</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#r':762"><span class="id" title="variable">r'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:759"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':760"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r:761"><span class="id" title="variable">r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r':762"><span class="id" title="variable">r'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">r</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">l'</span>, <span class="id" title="var">r'</span> |- ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">r'</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">r'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">l</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">r</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">l</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">r</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">l'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">a0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">r'</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">l'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">r'</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">injection</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_inj_tail"><span class="id" title="lemma">app_inj_tail</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [-&gt; -&gt;].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_inj_length_l" class="idref" href="#app_inj_length_l"><span class="id" title="lemma">app_inj_length_l</span></a> {<a id="A:763" class="idref" href="#A:763"><span class="id" title="binder">A</span></a>} (<a id="l:764" class="idref" href="#l:764"><span class="id" title="binder">l</span></a> <a id="l':765" class="idref" href="#l':765"><span class="id" title="binder">l'</span></a> <a id="r:766" class="idref" href="#r:766"><span class="id" title="binder">r</span></a> <a id="r':767" class="idref" href="#r':767"><span class="id" title="binder">r'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:763"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:764"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r:766"><span class="id" title="variable">r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':765"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r':767"><span class="id" title="variable">r'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:764"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':765"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:764"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':765"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r:766"><span class="id" title="variable">r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#r':767"><span class="id" title="variable">r'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>, <span class="id" title="var">r'</span>, <span class="id" title="var">l'</span> |- ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">discriminate</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">injection</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [= → ?].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">IHl</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Equations</span> <a id="map_In" class="idref" href="#map_In"><span class="id" title="definition">map_In</span></a> {<a id="A:768" class="idref" href="#A:768"><span class="id" title="binder">A</span></a> <a id="B:769" class="idref" href="#B:769"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l:770" class="idref" href="#l:770"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:768"><span class="id" title="variable">A</span></a>) (<a id="f:772" class="idref" href="#f:772"><span class="id" title="binder">f</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:771" class="idref" href="#x:771"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:768"><span class="id" title="variable">A</span></a>), <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:771"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:770"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:769"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">B</span> :=<br/>
<a class="idref" href="MetaRocq.Utils.MRList.html#map_In:774"><span class="id" title="definition">map_In</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">_</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
<a class="idref" href="MetaRocq.Utils.MRList.html#map_In:778"><span class="id" title="definition">map_In</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:776"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:777"><span class="id" title="variable">xs</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#f:775"><span class="id" title="variable">f</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#map_In:773"><span class="id" title="definition">map_In</span></a> <span class="id" title="var">xs</span> (<span class="id" title="keyword">fun</span> <a id="x:779" class="idref" href="#x:779"><span class="id" title="binder">x</span></a> <a id="H:780" class="idref" href="#H:780"><span class="id" title="binder">H</span></a> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:779"><span class="id" title="variable">x</span></a> <span class="id" title="var">_</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_In_spec" class="idref" href="#map_In_spec"><span class="id" title="lemma">map_In_spec</span></a> {<a id="A:781" class="idref" href="#A:781"><span class="id" title="binder">A</span></a> <a id="B:782" class="idref" href="#B:782"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:783" class="idref" href="#f:783"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:781"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:782"><span class="id" title="variable">B</span></a>) (<a id="l:784" class="idref" href="#l:784"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:781"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:784"><span class="id" title="variable">l</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:785" class="idref" href="#x:785"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:781"><span class="id" title="variable">A</span></a>) (<span class="id" title="var">_</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:785"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:784"><span class="id" title="variable">l</span></a>) ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:783"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:785"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:783"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:784"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> (<a id="x:786" class="idref" href="#x:786"><span class="id" title="binder"><span id="x:787" class="id">x</span></span></a> : <span class="id" title="var">A</span>) (<span class="id" title="var">_</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:786"><span class="id" title="variable">x</span></a> <span class="id" title="var">l</span>) ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:786"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <span class="id" title="var">l</span> <span class="id" title="var">g</span>) ⇒ //; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H</span> <span class="id" title="var">f0</span>); <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_map_In" class="idref" href="#map_map_In"><span class="id" title="lemma">map_map_In</span></a> {<a id="X:788" class="idref" href="#X:788"><span class="id" title="binder">X</span></a> <a id="Y:789" class="idref" href="#Y:789"><span class="id" title="binder">Y</span></a> <a id="Z:790" class="idref" href="#Z:790"><span class="id" title="binder">Z</span></a>} <a id="xs:791" class="idref" href="#xs:791"><span class="id" title="binder">xs</span></a> (<a id="f:793" class="idref" href="#f:793"><span class="id" title="binder">f</span></a> : <span class="id" title="keyword">∀</span> (<a id="x:792" class="idref" href="#x:792"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#X:788"><span class="id" title="variable">X</span></a>), <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:792"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:791"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Y:789"><span class="id" title="variable">Y</span></a>) (<a id="g:794" class="idref" href="#g:794"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#Y:789"><span class="id" title="variable">Y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Z:790"><span class="id" title="variable">Z</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:794"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:791"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:793"><span class="id" title="variable">f</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:791"><span class="id" title="variable">xs</span></a> (<span class="id" title="keyword">fun</span> <a id="x:795" class="idref" href="#x:795"><span class="id" title="binder">x</span></a> <a id="isin:796" class="idref" href="#isin:796"><span class="id" title="binder">isin</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:794"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:793"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:795"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#isin:796"><span class="id" title="variable">isin</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xs</span>, <span class="id" title="var">f</span> |- *; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHxs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_In_ext" class="idref" href="#map_In_ext"><span class="id" title="lemma">map_In_ext</span></a> {<a id="X:797" class="idref" href="#X:797"><span class="id" title="binder">X</span></a> <a id="Y:798" class="idref" href="#Y:798"><span class="id" title="binder">Y</span></a> : <span class="id" title="keyword">Type</span>} {<a id="xs:799" class="idref" href="#xs:799"><span class="id" title="binder">xs</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#X:797"><span class="id" title="variable">X</span></a>} {<a id="f:801" class="idref" href="#f:801"><span class="id" title="binder">f</span></a> : <span class="id" title="keyword">∀</span> <a id="x:800" class="idref" href="#x:800"><span class="id" title="binder">x</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:800"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:799"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#Y:798"><span class="id" title="variable">Y</span></a>} <a id="g:802" class="idref" href="#g:802"><span class="id" title="binder">g</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:803" class="idref" href="#x:803"><span class="id" title="binder">x</span></a> <a id="isin:804" class="idref" href="#isin:804"><span class="id" title="binder">isin</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:801"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:803"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#isin:804"><span class="id" title="variable">isin</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:802"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:803"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#isin:804"><span class="id" title="variable">isin</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:799"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:801"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:799"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:802"><span class="id" title="variable">g</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xs</span>, <span class="id" title="var">f</span>, <span class="id" title="var">g</span> |- *; <span class="id" title="tactic">intros</span> <span class="id" title="var">all_eq</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">all_eq</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHxs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">all_eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_mapIn_eq" class="idref" href="#map_mapIn_eq"><span class="id" title="lemma">map_mapIn_eq</span></a> {<a id="A:805" class="idref" href="#A:805"><span class="id" title="binder">A</span></a> <a id="B:806" class="idref" href="#B:806"><span class="id" title="binder">B</span></a>} (<a id="l:807" class="idref" href="#l:807"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:805"><span class="id" title="variable">A</span></a>) <a id="f:808" class="idref" href="#f:808"><span class="id" title="binder">f</span></a> (<a id="g:809" class="idref" href="#g:809"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:805"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:806"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:810" class="idref" href="#x:810"><span class="id" title="binder">x</span></a> <a id="hin:811" class="idref" href="#hin:811"><span class="id" title="binder">hin</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#f:808"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:810"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#hin:811"><span class="id" title="variable">hin</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:809"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:810"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_In"><span class="id" title="definition">map_In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:807"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:808"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:809"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:807"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hin</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Utils.MRList.html#map_In_spec"><span class="id" title="lemma">map_In_spec</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_In_ext"><span class="id" title="lemma">map_In_ext</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_repeat" class="idref" href="#rev_repeat"><span class="id" title="lemma">rev_repeat</span></a> {<a id="A:812" class="idref" href="#A:812"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} (<a id="n:813" class="idref" href="#n:813"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="a:814" class="idref" href="#a:814"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:812"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:814"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:813"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:814"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:813"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">at</span> 2 <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a>]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span>  <span class="id" title="var">IHn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#"><span class="id" title="library">ReflectEq</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="SplitPrefix" class="idref" href="#SplitPrefix"><span class="id" title="section">SplitPrefix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="SplitPrefix.A" class="idref" href="#SplitPrefix.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="MetaRocq.Utils.ReflectEq.html#ReflectEq"><span class="id" title="class">ReflectEq</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:815"><span class="id" title="variable">A</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a id="split_prefix" class="idref" href="#split_prefix"><span class="id" title="definition">split_prefix</span></a> (<a id="l1:817" class="idref" href="#l1:817"><span class="id" title="binder">l1</span></a> <a id="l2:818" class="idref" href="#l2:818"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#l2:821"><span class="id" title="variable">l2</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Utils.MRList.html#l1:822"><span class="id" title="variable">l1</span></a> , <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Utils.MRList.html#a1:824"><span class="id" title="variable">a1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:826"><span class="id" title="variable">l1</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#a2:829"><span class="id" title="variable">a2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:831"><span class="id" title="variable">l2</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">a1</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#12489c9c79e91749bd1f337dd0c899e9"><span class="id" title="notation">==</span></a> <span class="id" title="var">a2</span> ⇒ {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix:819"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span> ⇒ {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#prefix:842"><span class="id" title="variable">prefix</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1':839"><span class="id" title="variable">l1'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2':841"><span class="id" title="variable">l2'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">a1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">prefix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l1</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">a2</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="split_prefix_is_prefix" class="idref" href="#split_prefix_is_prefix"><span class="id" title="lemma">split_prefix_is_prefix</span></a> <a id="l1:848" class="idref" href="#l1:848"><span class="id" title="binder">l1</span></a> <a id="l2:849" class="idref" href="#l2:849"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">prefix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:848"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:849"><span class="id" title="variable">l2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:848"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">prefix</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l1'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l2:849"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">prefix</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">l2'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="var">simp</span> <span class="id" title="var">split_prefix</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">rewrite</span> -?<span class="id" title="var">Heqcall</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1,2: <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_eq"><span class="id" title="lemma">eqb_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq0</span>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_prefix" class="idref" href="#is_prefix"><span class="id" title="definition">is_prefix</span></a> (<a id="l1:850" class="idref" href="#l1:850"><span class="id" title="binder">l1</span></a> <a id="l2:851" class="idref" href="#l2:851"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="l':852" class="idref" href="#l':852"><span class="id" title="binder">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:851"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:850"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':852"><span class="id" title="variable">l'</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nil_prefix" class="idref" href="#nil_prefix"><span class="id" title="lemma">nil_prefix</span></a> <a id="l:853" class="idref" href="#l:853"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:853"><span class="id" title="variable">l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">l</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cons_prefix" class="idref" href="#cons_prefix"><span class="id" title="lemma">cons_prefix</span></a> <a id="x:854" class="idref" href="#x:854"><span class="id" title="binder">x</span></a> <a id="l1:855" class="idref" href="#l1:855"><span class="id" title="binder">l1</span></a> <a id="l2:856" class="idref" href="#l2:856"><span class="id" title="binder">l2</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:855"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:856"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#x:854"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:855"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#x:854"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:856"><span class="id" title="variable">l2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>. <span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">l</span> -&gt;]; <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">l</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_prefix_nil" class="idref" href="#is_prefix_nil"><span class="id" title="lemma">is_prefix_nil</span></a> <a id="l:857" class="idref" href="#l:857"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:857"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:857"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>. <span class="id" title="tactic">move</span>⇒ [?]; <span class="id" title="tactic">case</span> <span class="id" title="var">l</span>⇒ //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_prefix_cons" class="idref" href="#is_prefix_cons"><span class="id" title="lemma">is_prefix_cons</span></a> <a id="l:858" class="idref" href="#l:858"><span class="id" title="binder">l</span></a> <a id="x:859" class="idref" href="#x:859"><span class="id" title="binder">x</span></a> <a id="xs:860" class="idref" href="#xs:860"><span class="id" title="binder">xs</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:858"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#x:859"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:860"><span class="id" title="variable">xs</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#l:858"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="l':861" class="idref" href="#l':861"><span class="id" title="binder">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:858"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:859"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':861"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':861"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:860"><span class="id" title="variable">xs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">l</span> <span class="id" title="var">x</span> <span class="id" title="var">xs</span>⇒ [|<span class="id" title="var">y</span> <span class="id" title="var">ys</span> ??[<span class="id" title="var">tl</span> [= → -&gt;]]]; [<span class="id" title="var">now</span> <span class="id" title="tactic">left</span>| <span class="id" title="tactic">right</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">ys</span>; <span class="id" title="tactic">split</span>⇒ //; <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">tl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_prefix_cons_inv" class="idref" href="#is_prefix_cons_inv"><span class="id" title="lemma">is_prefix_cons_inv</span></a> <a id="x:862" class="idref" href="#x:862"><span class="id" title="binder">x</span></a> <a id="xs:863" class="idref" href="#xs:863"><span class="id" title="binder">xs</span></a> <a id="y:864" class="idref" href="#y:864"><span class="id" title="binder">y</span></a> <a id="ys:865" class="idref" href="#ys:865"><span class="id" title="binder">ys</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#x:862"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:863"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#y:864"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ys:865"><span class="id" title="variable">ys</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:862"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#y:864"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:863"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ys:865"><span class="id" title="variable">ys</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">tl</span> [= → -&gt;]]; <span class="id" title="tactic">split</span>⇒ //; <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#tl"><span class="id" title="definition">tl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Notation</span> <a id="SplitPrefix.::ssripat_scope:'Simp'" class="idref" href="#SplitPrefix.::ssripat_scope:'Simp'"><span class="id" title="notation">&quot;</span></a>'Simp'" := <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">simp</span> <span class="id" title="var">split_prefix</span>) (<span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">ssripat_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="split_prefix_maximal" class="idref" href="#split_prefix_maximal"><span class="id" title="lemma">split_prefix_maximal</span></a> <a id="l1:866" class="idref" href="#l1:866"><span class="id" title="binder">l1</span></a> <a id="l2:867" class="idref" href="#l2:867"><span class="id" title="binder">l2</span></a> <a id="l:868" class="idref" href="#l:868"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:868"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:866"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:868"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:867"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:868"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:866"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:867"><span class="id" title="variable">l2</span></a>))).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_nil"><span class="id" title="lemma">is_prefix_nil</span></a> → <span class="id" title="var">_</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nil_prefix"><span class="id" title="lemma">nil_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">_</span> /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_nil"><span class="id" title="lemma">is_prefix_nil</span></a> -&gt;; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nil_prefix"><span class="id" title="lemma">nil_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_cons"><span class="id" title="lemma">is_prefix_cons</span></a> [-&gt; ?|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nil_prefix"><span class="id" title="lemma">nil_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [? [-&gt; ?]] /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_cons_inv"><span class="id" title="lemma">is_prefix_cons_inv</span></a> [<span class="id" title="var">eqa</span> ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqa</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_refl"><span class="id" title="lemma">eqb_refl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_cons"><span class="id" title="lemma">is_prefix_cons</span></a> [-&gt; ?|]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nil_prefix"><span class="id" title="lemma">nil_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [? [-&gt; <span class="id" title="var">pr1</span>]] /<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_cons_inv"><span class="id" title="lemma">is_prefix_cons_inv</span></a> [<span class="id" title="var">eqa</span> <span class="id" title="var">pr2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -?<span class="id" title="var">Heqcall</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#cons_prefix"><span class="id" title="lemma">cons_prefix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Heqcall</span> (<span class="id" title="var">Hind</span> <span class="id" title="var">_</span> <span class="id" title="var">pr1</span> <span class="id" title="var">pr2</span>)=&gt; /<a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.::ssripat_scope:'Simp'"><span class="id" title="notation">Simp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqa</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_refl"><span class="id" title="lemma">eqb_refl</span></a>⇒ /<a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.::ssripat_scope:'Simp'"><span class="id" title="notation">Simp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">l1</span> <span class="id" title="var">l2</span>)=&gt; -[[??]?] /<a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix.::ssripat_scope:'Simp'"><span class="id" title="notation">Simp</span></a> [= -&gt;] //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitPrefix"><span class="id" title="section">SplitPrefix</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="SplitSuffix" class="idref" href="#SplitSuffix"><span class="id" title="section">SplitSuffix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="SplitSuffix.A" class="idref" href="#SplitSuffix.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>} `{<a class="idref" href="MetaRocq.Utils.ReflectEq.html#ReflectEq"><span class="id" title="class">ReflectEq</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:869"><span class="id" title="variable">A</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="split_suffix" class="idref" href="#split_suffix"><span class="id" title="definition">split_suffix</span></a> (<a id="l1:871" class="idref" href="#l1:871"><span class="id" title="binder">l1</span></a> <a id="l2:872" class="idref" href="#l2:872"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix.A"><span class="id" title="variable">A</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix.A"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix.A"><span class="id" title="variable">A</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">suffix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l1</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:871"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:872"><span class="id" title="variable">l2</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:871"><span class="id" title="variable">l1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:872"><span class="id" title="variable">l2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">suffix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="split_suffix_is_suffix" class="idref" href="#split_suffix_is_suffix"><span class="id" title="lemma">split_suffix_is_suffix</span></a> <a id="l1:873" class="idref" href="#l1:873"><span class="id" title="binder">l1</span></a> <a id="l2:874" class="idref" href="#l2:874"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">l1'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">l2'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">suffix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#split_suffix"><span class="id" title="definition">split_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:873"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:874"><span class="id" title="variable">l2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l1:873"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l1'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">suffix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l2:874"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">l2'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">suffix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#split_suffix"><span class="id" title="definition">split_suffix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">y</span> := <a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix_is_prefix"><span class="id" title="lemma">split_prefix_is_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l1</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l2</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)=&gt; [[??] ?] [/(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>) + /(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> 2!<a class="idref" href="MetaRocq.Utils.MRList.html#rev_invol"><span class="id" title="lemma">rev_invol</span></a> 2!<a class="idref" href="MetaRocq.Utils.MRList.html#rev_app"><span class="id" title="lemma">rev_app</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_suffix" class="idref" href="#is_suffix"><span class="id" title="definition">is_suffix</span></a> (<a id="l1:875" class="idref" href="#l1:875"><span class="id" title="binder">l1</span></a> <a id="l2:876" class="idref" href="#l2:876"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix.A"><span class="id" title="variable">A</span></a>) := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="l':877" class="idref" href="#l':877"><span class="id" title="binder">l'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:876"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':877"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:875"><span class="id" title="variable">l1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_suffix_is_prefix_rev" class="idref" href="#is_suffix_is_prefix_rev"><span class="id" title="lemma">is_suffix_is_prefix_rev</span></a> <a id="l1:878" class="idref" href="#l1:878"><span class="id" title="binder">l1</span></a> <a id="l2:879" class="idref" href="#l2:879"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix"><span class="id" title="definition">is_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:878"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:879"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:878"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:879"><span class="id" title="variable">l2</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>. <span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">l</span>] /(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>) -&gt;; <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>); <span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Utils.MRList.html#rev_app"><span class="id" title="lemma">rev_app</span></a>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_prefix_rev_is_suffix" class="idref" href="#is_prefix_rev_is_suffix"><span class="id" title="lemma">is_prefix_rev_is_suffix</span></a> <a id="l1:880" class="idref" href="#l1:880"><span class="id" title="binder">l1</span></a> <a id="l2:881" class="idref" href="#l2:881"><span class="id" title="binder">l2</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix"><span class="id" title="definition">is_prefix</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:880"><span class="id" title="variable">l1</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:881"><span class="id" title="variable">l2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix"><span class="id" title="definition">is_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:880"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:881"><span class="id" title="variable">l2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">l</span>] /(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a>); <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_app"><span class="id" title="lemma">rev_app</span></a> 2! <a class="idref" href="MetaRocq.Utils.MRList.html#rev_invol"><span class="id" title="lemma">rev_invol</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ -&gt;; <span class="id" title="tactic">by</span> <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="split_suffix_maximal" class="idref" href="#split_suffix_maximal"><span class="id" title="lemma">split_suffix_maximal</span></a> <a id="l1:882" class="idref" href="#l1:882"><span class="id" title="binder">l1</span></a> <a id="l2:883" class="idref" href="#l2:883"><span class="id" title="binder">l2</span></a> <a id="l:884" class="idref" href="#l:884"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix"><span class="id" title="definition">is_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:884"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:882"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix"><span class="id" title="definition">is_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:884"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:883"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix"><span class="id" title="definition">is_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:884"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#split_suffix"><span class="id" title="definition">split_suffix</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l1:882"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l2:883"><span class="id" title="variable">l2</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ /<a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix_is_prefix_rev"><span class="id" title="lemma">is_suffix_is_prefix_rev</span></a> <span class="id" title="var">ll1</span> /<a class="idref" href="MetaRocq.Utils.MRList.html#is_suffix_is_prefix_rev"><span class="id" title="lemma">is_suffix_is_prefix_rev</span></a> <span class="id" title="var">ll2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Utils.MRList.html#is_prefix_rev_is_suffix"><span class="id" title="lemma">is_prefix_rev_is_suffix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">z</span> := <a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix_maximal"><span class="id" title="lemma">split_prefix_maximal</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l1</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l2</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <span class="id" title="var">l</span>) <span class="id" title="var">ll1</span> <span class="id" title="var">ll2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">z</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#split_suffix"><span class="id" title="definition">split_suffix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.Utils.MRList.html#split_prefix"><span class="id" title="definition">split_prefix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)=&gt; [[??]?] /=; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_invol"><span class="id" title="lemma">rev_invol</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#SplitSuffix"><span class="id" title="section">SplitSuffix</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="AllInP" class="idref" href="#AllInP"><span class="id" title="section">AllInP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="AllInP.A" class="idref" href="#AllInP.A"><span class="id" title="variable">A</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a id="forallb_InP" class="idref" href="#forallb_InP"><span class="id" title="definition">forallb_InP</span></a> (<a id="l:886" class="idref" href="#l:886"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#AllInP.A"><span class="id" title="variable">A</span></a>) (<a id="H:888" class="idref" href="#H:888"><span class="id" title="binder">H</span></a> : <span class="id" title="keyword">∀</span> <a id="x:887" class="idref" href="#x:887"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#AllInP.A"><span class="id" title="variable">A</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:887"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:886"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>, <span class="id" title="var">_</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ;<br/>
&nbsp;&nbsp;| (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:891"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:892"><span class="id" title="variable">xs</span></a>), <a class="idref" href="MetaRocq.Utils.MRList.html#H:893"><span class="id" title="variable">H</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">H</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#forallb_InP:889"><span class="id" title="definition">forallb_InP</span></a> <span class="id" title="var">xs</span> (<span class="id" title="keyword">fun</span> <a id="x:896" class="idref" href="#x:896"><span class="id" title="binder">x</span></a> <a id="inx:897" class="idref" href="#inx:897"><span class="id" title="binder">inx</span></a> ⇒ <span class="id" title="var">H</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:896"><span class="id" title="variable">x</span></a> <span class="id" title="var">_</span>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#AllInP"><span class="id" title="section">AllInP</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_InP_spec" class="idref" href="#forallb_InP_spec"><span class="id" title="lemma">forallb_InP_spec</span></a> {<a id="A:898" class="idref" href="#A:898"><span class="id" title="binder">A</span></a>} (<a id="f:899" class="idref" href="#f:899"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:898"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="l:900" class="idref" href="#l:900"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:898"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_InP"><span class="id" title="definition">forallb_InP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:900"><span class="id" title="variable">l</span></a> (<span class="id" title="keyword">fun</span> <a id="x:901" class="idref" href="#x:901"><span class="id" title="binder">x</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:899"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:901"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">List.forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:899"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:900"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> <a id="x:902" class="idref" href="#x:902"><span class="id" title="binder"><span id="x:903" class="id">x</span></span></a> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:902"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_InP"><span class="id" title="definition">forallb_InP</span></a> <span class="id" title="var">l</span> <span class="id" title="var">g</span>) ⇒ //; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H0</span> <span class="id" title="var">f</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="MapInP" class="idref" href="#MapInP"><span class="id" title="section">MapInP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="MapInP.A" class="idref" href="#MapInP.A"><span class="id" title="variable">A</span></a> <a id="MapInP.B" class="idref" href="#MapInP.B"><span class="id" title="variable">B</span></a> : <span class="id" title="keyword">Type</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Equations</span> <a id="map_InP" class="idref" href="#map_InP"><span class="id" title="definition">map_InP</span></a> (<a id="l:906" class="idref" href="#l:906"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#MapInP.A"><span class="id" title="variable">A</span></a>) (<a id="f:908" class="idref" href="#f:908"><span class="id" title="binder">f</span></a> : <span class="id" title="keyword">∀</span> <a id="x:907" class="idref" href="#x:907"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#MapInP.A"><span class="id" title="variable">A</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:907"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:906"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#MapInP.B"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#MapInP.B"><span class="id" title="variable">B</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP:910"><span class="id" title="definition">map_InP</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">_</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP:914"><span class="id" title="definition">map_InP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:912"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:913"><span class="id" title="variable">xs</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#f:911"><span class="id" title="variable">f</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP:909"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">xs</span> (<span class="id" title="keyword">fun</span> <a id="x:915" class="idref" href="#x:915"><span class="id" title="binder">x</span></a> <a id="inx:916" class="idref" href="#inx:916"><span class="id" title="binder">inx</span></a> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:915"><span class="id" title="variable">x</span></a> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Utils.MRList.html#MapInP"><span class="id" title="section">MapInP</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_InP_spec" class="idref" href="#map_InP_spec"><span class="id" title="lemma">map_InP_spec</span></a> {<a id="A:917" class="idref" href="#A:917"><span class="id" title="binder">A</span></a> <a id="B:918" class="idref" href="#B:918"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:919" class="idref" href="#f:919"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:917"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:918"><span class="id" title="variable">B</span></a>) (<a id="l:920" class="idref" href="#l:920"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:917"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:920"><span class="id" title="variable">l</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:921" class="idref" href="#x:921"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:917"><span class="id" title="variable">A</span></a>) <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:919"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:921"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:919"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:920"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="keyword">fun</span> (<a id="x:922" class="idref" href="#x:922"><span class="id" title="binder"><span id="x:923" class="id">x</span></span></a> : <span class="id" title="var">A</span>) <span class="id" title="var">_</span> ⇒ <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRList.html#x:922"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">g</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">l</span> <span class="id" title="var">g</span>) ⇒ //; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H</span> <span class="id" title="var">f0</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="In_size" class="idref" href="#In_size"><span class="id" title="lemma">In_size</span></a> {<a id="A:924" class="idref" href="#A:924"><span class="id" title="binder">A</span></a> <a id="B:925" class="idref" href="#B:925"><span class="id" title="binder">B</span></a>} {<a id="x:926" class="idref" href="#x:926"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:924"><span class="id" title="variable">A</span></a>} {<a id="l:927" class="idref" href="#l:927"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:924"><span class="id" title="variable">A</span></a>} (<a id="proj:928" class="idref" href="#proj:928"><span class="id" title="binder">proj</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:924"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:925"><span class="id" title="variable">B</span></a>) (<a id="size:929" class="idref" href="#size:929"><span class="id" title="binder">size</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:925"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:926"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:927"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#size:929"><span class="id" title="variable">size</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#proj:928"><span class="id" title="variable">proj</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:926"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#list_size"><span class="id" title="definition">list_size</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#size:929"><span class="id" title="variable">size</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#proj:928"><span class="id" title="variable">proj</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:927"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [-&gt;|<span class="id" title="var">hin</span>]. <span class="id" title="var">lia</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHl</span> <span class="id" title="var">hin</span>); <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="app_tip_nil" class="idref" href="#app_tip_nil"><span class="id" title="lemma">app_tip_nil</span></a> {<a id="A:930" class="idref" href="#A:930"><span class="id" title="binder">A</span></a>} (<a id="l:931" class="idref" href="#l:931"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:930"><span class="id" title="variable">A</span></a>) (<a id="x:932" class="idref" href="#x:932"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:930"><span class="id" title="variable">A</span></a>) : (<a class="idref" href="MetaRocq.Utils.MRList.html#l:931"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:932"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">app_tip_nil</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="remove_last" class="idref" href="#remove_last"><span class="id" title="definition">remove_last</span></a> {<a id="A:933" class="idref" href="#A:933"><span class="id" title="binder">A</span></a>} (<a id="args:934" class="idref" href="#args:934"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:933"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn"><span class="id" title="abbreviation">List.firstn</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#args:934"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> 1) <a class="idref" href="MetaRocq.Utils.MRList.html#args:934"><span class="id" title="variable">args</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="remove_last_app" class="idref" href="#remove_last_app"><span class="id" title="lemma">remove_last_app</span></a> {<a id="A:935" class="idref" href="#A:935"><span class="id" title="binder">A</span></a>} (<a id="l:936" class="idref" href="#l:936"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:935"><span class="id" title="variable">A</span></a>) <a id="x:937" class="idref" href="#x:937"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#remove_last"><span class="id" title="definition">remove_last</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:936"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:937"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:936"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#remove_last"><span class="id" title="definition">remove_last</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a>1) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app"><span class="id" title="lemma">firstn_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_all"><span class="id" title="lemma">firstn_all</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="remove_last_last" class="idref" href="#remove_last_last"><span class="id" title="lemma">remove_last_last</span></a> {<a id="A:938" class="idref" href="#A:938"><span class="id" title="binder">A</span></a>} (<a id="l:939" class="idref" href="#l:939"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:938"><span class="id" title="variable">A</span></a>) (<a id="a:940" class="idref" href="#a:940"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:938"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#l:939"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#l:939"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#remove_last"><span class="id" title="definition">remove_last</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:939"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:939"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:940"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#remove_last_app"><span class="id" title="lemma">remove_last_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last_last"><span class="id" title="lemma">last_last</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_repeat" class="idref" href="#forallb_repeat"><span class="id" title="lemma">forallb_repeat</span></a> {<a id="A:941" class="idref" href="#A:941"><span class="id" title="binder">A</span></a>} {<a id="p:942" class="idref" href="#p:942"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:941"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>} {<a id="a:943" class="idref" href="#a:943"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:941"><span class="id" title="variable">A</span></a>} {<a id="n:944" class="idref" href="#n:944"><span class="id" title="binder">n</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#p:942"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:943"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#p:942"><span class="id" title="variable">p</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:943"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:944"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_repeat" class="idref" href="#map_repeat"><span class="id" title="lemma">map_repeat</span></a> {<a id="A:945" class="idref" href="#A:945"><span class="id" title="binder">A</span></a> <a id="B:946" class="idref" href="#B:946"><span class="id" title="binder">B</span></a>} (<a id="f:947" class="idref" href="#f:947"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:945"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:946"><span class="id" title="variable">B</span></a>) <a id="a:948" class="idref" href="#a:948"><span class="id" title="binder">a</span></a> <a id="n:949" class="idref" href="#n:949"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:947"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:948"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:949"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:947"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#a:948"><span class="id" title="variable">a</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#n:949"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="filter_length" class="idref" href="#filter_length"><span class="id" title="lemma">filter_length</span></a> {<a id="X:950" class="idref" href="#X:950"><span class="id" title="binder">X</span></a>} (<a id="f:951" class="idref" href="#f:951"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#X:950"><span class="id" title="variable">X</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="xs:952" class="idref" href="#xs:952"><span class="id" title="binder">xs</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#X:950"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:951"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#xs:952"><span class="id" title="variable">xs</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#xs:952"><span class="id" title="variable">xs</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span>; [<span class="id" title="var">easy</span>|].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>); <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_length" class="idref" href="#map2_length"><span class="id" title="lemma">map2_length</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:953" class="idref" href="#A:953"><span class="id" title="binder">A</span></a> <a id="B:954" class="idref" href="#B:954"><span class="id" title="binder">B</span></a> <a id="C:955" class="idref" href="#C:955"><span class="id" title="binder">C</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:956" class="idref" href="#f:956"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:953"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:954"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:955"><span class="id" title="variable">C</span></a>) (<a id="l:957" class="idref" href="#l:957"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:953"><span class="id" title="variable">A</span></a>) (<a id="l':958" class="idref" href="#l':958"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:954"><span class="id" title="variable">B</span></a>), <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:956"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:957"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':958"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#min"><span class="id" title="abbreviation">min</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:957"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':958"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_map_l" class="idref" href="#map2_map_l"><span class="id" title="lemma">map2_map_l</span></a> {<a id="A:959" class="idref" href="#A:959"><span class="id" title="binder">A</span></a> <a id="B:960" class="idref" href="#B:960"><span class="id" title="binder">B</span></a> <a id="C:961" class="idref" href="#C:961"><span class="id" title="binder">C</span></a> <a id="D:962" class="idref" href="#D:962"><span class="id" title="binder">D</span></a>} (<a id="f:963" class="idref" href="#f:963"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:959"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:960"><span class="id" title="variable">B</span></a>) (<a id="g:964" class="idref" href="#g:964"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#B:960"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:961"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#D:962"><span class="id" title="variable">D</span></a>) (<a id="l:965" class="idref" href="#l:965"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:959"><span class="id" title="variable">A</span></a>) (<a id="l':966" class="idref" href="#l':966"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#C:961"><span class="id" title="variable">C</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#g:964"><span class="id" title="variable">g</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:963"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:965"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l':966"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:967" class="idref" href="#x:967"><span class="id" title="binder">x</span></a> <a id="y:968" class="idref" href="#y:968"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#g:964"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#f:963"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:967"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#y:968"><span class="id" title="variable">y</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:965"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':966"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_diag" class="idref" href="#map2_diag"><span class="id" title="lemma">map2_diag</span></a> {<a id="A:969" class="idref" href="#A:969"><span class="id" title="binder">A</span></a> <a id="B:970" class="idref" href="#B:970"><span class="id" title="binder">B</span></a>} (<a id="f:971" class="idref" href="#f:971"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#A:969"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:969"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:970"><span class="id" title="variable">B</span></a>) (<a id="l:972" class="idref" href="#l:972"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:969"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#f:971"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:972"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:972"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:973" class="idref" href="#x:973"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#f:971"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:973"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:973"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:972"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">l</span>⇒ [//|? ? /= → //].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_snd" class="idref" href="#map2_snd"><span class="id" title="lemma">map2_snd</span></a> {<a id="A:974" class="idref" href="#A:974"><span class="id" title="binder">A</span></a> <a id="B:975" class="idref" href="#B:975"><span class="id" title="binder">B</span></a>} (<a id="l:976" class="idref" href="#l:976"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:974"><span class="id" title="variable">A</span></a>) (<a id="l':977" class="idref" href="#l':977"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#B:975"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:978" class="idref" href="#x:978"><span class="id" title="binder">x</span></a> <a id="y:979" class="idref" href="#y:979"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#x:978"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#l:976"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l':977"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l':977"><span class="id" title="variable">l'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:976"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">l</span> <span class="id" title="var">l'</span>⇒ [|<span class="id" title="var">x</span> <span class="id" title="var">xs</span> <span class="id" title="var">ih</span>] [|<span class="id" title="var">y</span> <span class="id" title="var">ys</span>] //=; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_nil" class="idref" href="#length_nil"><span class="id" title="lemma">length_nil</span></a> {<a id="A:980" class="idref" href="#A:980"><span class="id" title="binder">A</span></a>} (<a id="l:981" class="idref" href="#l:981"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:980"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#l:981"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:981"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="snoc_view" class="idref" href="#snoc_view"><span class="id" title="definition, inductive"><span id="snoc_view_rect" class="id"><span id="snoc_view_ind" class="id"><span id="snoc_view_rec" class="id"><span id="snoc_view_sind" class="id">snoc_view</span></span></span></span></span></a> {<a id="A:982" class="idref" href="#A:982"><span class="id" title="binder">A</span></a> : <span class="id" title="keyword">Type</span>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <span class="id" title="var">A</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
| <a id="snoc_view_nil" class="idref" href="#snoc_view_nil"><span class="id" title="constructor">snoc_view_nil</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#snoc_view:983"><span class="id" title="inductive">snoc_view</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><br/>
| <a id="snoc_view_snoc" class="idref" href="#snoc_view_snoc"><span class="id" title="constructor">snoc_view_snoc</span></a> <a id="l:985" class="idref" href="#l:985"><span class="id" title="binder">l</span></a> <a id="x:986" class="idref" href="#x:986"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#snoc_view:983"><span class="id" title="inductive">snoc_view</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#l:985"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#x:986"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="snocP" class="idref" href="#snocP"><span class="id" title="lemma">snocP</span></a> {<a id="A:987" class="idref" href="#A:987"><span class="id" title="binder">A</span></a>} (<a id="l:988" class="idref" href="#l:988"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:987"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#snoc_view"><span class="id" title="inductive">snoc_view</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:988"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <span class="id" title="var">l</span>⇒ [|<span class="id" title="var">a</span> <span class="id" title="var">l</span>]; <span class="id" title="tactic">first</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>⇒ [|<span class="id" title="var">l'</span> <span class="id" title="var">z</span>];<br/>
&nbsp;&nbsp;[<span class="id" title="tactic">exact</span>: (<a class="idref" href="MetaRocq.Utils.MRList.html#snoc_view_snoc"><span class="id" title="constructor">snoc_view_snoc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a>) | <span class="id" title="tactic">exact</span>: (<a class="idref" href="MetaRocq.Utils.MRList.html#snoc_view_snoc"><span class="id" title="constructor">snoc_view_snoc</span></a> (<span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l'</span>))].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="hd_error_skipn_iff_In" class="idref" href="#hd_error_skipn_iff_In"><span class="id" title="lemma">hd_error_skipn_iff_In</span></a> {<a id="A:989" class="idref" href="#A:989"><span class="id" title="binder">A</span></a> <a id="v:990" class="idref" href="#v:990"><span class="id" title="binder">v</span></a> <a id="ls:991" class="idref" href="#ls:991"><span class="id" title="binder">ls</span></a>}<br/>
&nbsp;&nbsp;: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="n:992" class="idref" href="#n:992"><span class="id" title="binder">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#hd_error"><span class="id" title="definition">hd_error</span></a> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:989"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:992"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ls:991"><span class="id" title="variable">ls</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:990"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#v:990"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#ls:991"><span class="id" title="variable">ls</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ls</span>; <span class="id" title="tactic">elim</span> ⇒ //=.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_nil"><span class="id" title="lemma">skipn_nil</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ ?? &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> ⇒ [[|?]]; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> ?<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">move</span> ⇒ [-&gt;].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">move</span> ⇒ [-&gt;|[<span class="id" title="var">n</span> <span class="id" title="var">H</span>]]; [ <span class="id" title="tactic">∃</span> 0 | <span class="id" title="tactic">∃</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) ];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> ?<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a> ⇒ //=. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_firstn" class="idref" href="#nth_error_firstn"><span class="id" title="lemma">nth_error_firstn</span></a> <a id="A:993" class="idref" href="#A:993"><span class="id" title="binder">A</span></a> <a id="n:994" class="idref" href="#n:994"><span class="id" title="binder">n</span></a> <a id="m:995" class="idref" href="#m:995"><span class="id" title="binder">m</span></a> (<a id="l:996" class="idref" href="#l:996"><span class="id" title="binder">l</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#A:993"><span class="id" title="variable">A</span></a>) <a id="x:997" class="idref" href="#x:997"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#n:994"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:996"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#m:995"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:997"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#l:996"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#m:995"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#x:997"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">l</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>]; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
