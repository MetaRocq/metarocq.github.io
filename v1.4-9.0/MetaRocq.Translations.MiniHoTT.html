<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Translations.MiniHoTT</h1>

<div class="code">
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden".<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">sigT</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) : <span class="id" title="keyword">Type</span> := <span class="id" title="var">existT</span><br/>
&nbsp;&nbsp;{ <span class="id" title="var">projT1</span> : <span class="id" title="var">A</span> ; <span class="id" title="var">projT2</span> : <span class="id" title="var">P</span> <span class="id" title="var">projT1</span> }.<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Primitive</span> <span class="id" title="var">Projections</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">unit</span> : <span class="id" title="keyword">Type</span> := <span class="id" title="var">tt</span> { }.<br/>

<br/>
<span class="id" title="keyword">Generalizable All Variables</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span>, <span class="id" title="var">A</span> → <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span> := @<span class="id" title="var">eq</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">idpath</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span>, <span class="id" title="var">paths</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">a</span> := @<span class="id" title="var">eq_refl</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths_ind</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> (<span class="id" title="var">P</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, <span class="id" title="var">paths</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">y</span> → <span class="id" title="keyword">Type</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">P</span> <span class="id" title="var">a</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span>) → <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>, <span class="id" title="var">P</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">X</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">paths_ind_beta</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span>, <span class="id" title="var">paths</span> <span class="id" title="var">_</span> (<span class="id" title="var">paths_ind</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">a</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">A</span> <span class="id" title="var">a</span>)) <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;sigT&nbsp;:&nbsp;forall&nbsp;A,&nbsp;(A&nbsp;-&gt;&nbsp;Type)&nbsp;-&gt;&nbsp;Type&nbsp;:=&nbsp;@sigT.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;existT&nbsp;:&nbsp;forall&nbsp;A&nbsp;P&nbsp;x,&nbsp;P&nbsp;x&nbsp;-&gt;&nbsp;sigT&nbsp;A&nbsp;P&nbsp;:=&nbsp;@existT.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;sigT_ind&nbsp;:&nbsp;forall&nbsp;A&nbsp;P&nbsp;(Q&nbsp;:&nbsp;sigT&nbsp;A&nbsp;P&nbsp;-&gt;&nbsp;Type),&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(forall&nbsp;x&nbsp;p,&nbsp;Q&nbsp;(existT&nbsp;A&nbsp;P&nbsp;x&nbsp;p))&nbsp;-&gt;&nbsp;forall&nbsp;s,&nbsp;Q&nbsp;s&nbsp;:=&nbsp;sigT_rect.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;***********************************************&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">sigT</span> {<span class="id" title="var">A</span>}%<span class="id" title="var">_type</span> <span class="id" title="var">P</span>%<span class="id" title="var">_type</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">existT</span> {<span class="id" title="var">A</span>}%<span class="id" title="var">_type</span> <span class="id" title="var">P</span>%<span class="id" title="var">_type</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">projT1</span> {<span class="id" title="var">A</span> <span class="id" title="var">P</span>} <span class="id" title="var">_</span> / .<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">projT2</span> {<span class="id" title="var">A</span> <span class="id" title="var">P</span>} <span class="id" title="var">_</span> / .<br/>
<span class="id" title="keyword">Notation</span> &quot;'exists' x .. y , p" := (<span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ .. (<span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">p</span>)) ..))<br/>
&nbsp;&nbsp;(<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 200, <span class="id" title="var">x</span> <span class="id" title="var">binder</span>, <span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>,<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">format</span> "'[' 'exists'  '/  ' x  ..  y ,  '/  ' p ']'")<br/>
&nbsp;&nbsp;: <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;{ x : A  &amp; P }" := (<span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span> ⇒ <span class="id" title="var">P</span>)) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">relation</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) := <span class="id" title="var">A</span> → <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Reflexive</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">relation</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Symmetric</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">relation</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> → <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Transitive</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">relation</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> → <span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> → <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">PreOrder</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">R</span> : <span class="id" title="var">relation</span> <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;{ <span class="id" title="var">PreOrder_Reflexive</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">R</span> | 2 ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">PreOrder_Transitive</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">R</span> | 2 }.<br/>

<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">PreOrder_Reflexive</span>.<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">PreOrder_Transitive</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="tactic">reflexivity</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="tactic">symmetry</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="tactic">transitivity</span> {<span class="id" title="var">A</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>} / {<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">reflexivity</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="var">Corelib.Init.Ltac.reflexivity</span><br/>
&nbsp;&nbsp;|| (<span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<span class="id" title="tactic">reflexivity</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">pre_proof_term_head</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">x</span>)).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">symmetry</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">x</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">y</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">y</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<span class="id" title="tactic">symmetry</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">proof_term_head</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "etransitivity" <span class="id" title="var">open_constr</span>(<span class="id" title="var">y</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">R</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">R</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">x</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">z</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- ?<span class="id" title="var">R</span> ?<span class="id" title="var">x</span> ?<span class="id" title="var">z</span> ⇒ <span class="id" title="keyword">constr</span>:(<span class="id" title="var">z</span>) <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre_proof_term_head</span> := <span class="id" title="keyword">constr</span>:(@<span class="id" title="tactic">transitivity</span> <span class="id" title="var">_</span> <span class="id" title="var">R</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">proof_term_head</span> := (<span class="id" title="tactic">eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre_proof_term_head</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">proof_term_head</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); [ <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) | <span class="id" title="tactic">change</span> (<span class="id" title="var">R</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>) ].<br/>

<br/>
<span class="id" title="keyword">Tactic Notation</span> "etransitivity" := <span class="id" title="var">etransitivity</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="tactic">transitivity</span> <span class="id" title="var">x</span> := <span class="id" title="var">etransitivity</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">idmap</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span>).<br/>

<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">equiv_scope</span>.<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Declare Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">equiv</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">function_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">function</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">fibration</span>.<br/>
<span class="id" title="keyword">Delimit</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">trunc</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">trunc_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">equiv_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">function_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">core_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span> ⇒ <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;( x ; y )" := (<span class="id" title="var">existT</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Bind Scope</span> <span class="id" title="var">fibration_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">sigT</span>.<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">pr1</span> := <span class="id" title="var">projT1</span>.<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">pr2</span> := <span class="id" title="var">projT2</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x .1" := (<span class="id" title="var">pr1</span> <span class="id" title="var">x</span>) : <span class="id" title="var">fibration_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x .2" := (<span class="id" title="var">pr2</span> <span class="id" title="var">x</span>) : <span class="id" title="var">fibration_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">compose</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="keyword">Notation</span> &quot;g 'o' f" := (<span class="id" title="var">compose</span> <span class="id" title="var">g</span>%<span class="id" title="var">function</span> <span class="id" title="var">f</span>%<span class="id" title="var">function</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">function_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Instance&nbsp;iff_compose&nbsp;:&nbsp;Transitive&nbsp;iff&nbsp;|&nbsp;1&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;fun&nbsp;A&nbsp;B&nbsp;C&nbsp;f&nbsp;g&nbsp;=&gt;&nbsp;(fst&nbsp;g&nbsp;o&nbsp;fst&nbsp;f&nbsp;,&nbsp;snd&nbsp;f&nbsp;o&nbsp;snd&nbsp;g).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Arguments&nbsp;iff_compose&nbsp;{A&nbsp;B&nbsp;C}&nbsp;f&nbsp;g&nbsp;:&nbsp;rename.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Instance&nbsp;iff_inverse&nbsp;:&nbsp;Symmetric&nbsp;iff&nbsp;|&nbsp;1&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;fun&nbsp;A&nbsp;B&nbsp;f&nbsp;=&gt;&nbsp;(snd&nbsp;f&nbsp;,&nbsp;fst&nbsp;f).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Arguments&nbsp;iff_inverse&nbsp;{A&nbsp;B}&nbsp;f&nbsp;:&nbsp;rename.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Instance&nbsp;iff_reflexive&nbsp;:&nbsp;Reflexive&nbsp;iff&nbsp;|&nbsp;1&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;fun&nbsp;A&nbsp;=&gt;&nbsp;(idmap&nbsp;,&nbsp;idmap).&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">composeD</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">C</span> <span class="id" title="var">b</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span> ⇒ <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>).<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">composeD</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>}%<span class="id" title="var">_type_scope</span> (<span class="id" title="var">g</span> <span class="id" title="var">f</span>)%<span class="id" title="var">_function_scope</span> <span class="id" title="var">x</span>.<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <span class="id" title="var">composeD</span> : <span class="id" title="var">core</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;g 'oD' f" := (<span class="id" title="var">composeD</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;x = y :&gt; A" := (<span class="id" title="var">paths</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) : <span class="id" title="var">type_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;x = y" := (<span class="id" title="var">x</span> = <span class="id" title="var">y</span> :&gt;<span class="id" title="var">_</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Bind Scope</span> <span class="id" title="var">path_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paths</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">paths</span> {<span class="id" title="var">A</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">idpath</span> {<span class="id" title="var">A</span> <span class="id" title="var">a</span>} , [<span class="id" title="var">A</span>] <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">paths_ind</span> [<span class="id" title="var">A</span>] <span class="id" title="var">a</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">reflexive_paths</span> {<span class="id" title="var">A</span>} : <span class="id" title="var">Reflexive</span> (@<span class="id" title="var">paths</span> <span class="id" title="var">A</span>) | 0 := @<span class="id" title="var">idpath</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">reflexive_paths</span> / .<br/>
<span class="id" title="keyword">Notation</span> &quot;1" := (<span class="id" title="var">idpath</span> <span class="id" title="var">_</span>) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) : <span class="id" title="var">P</span> <span class="id" title="var">y</span> := <span class="id" title="var">paths_ind</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">P</span> <span class="id" title="var">y</span>) <span class="id" title="var">u</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">transport</span> {<span class="id" title="var">A</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">P</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">_path_scope</span> <span class="id" title="var">u</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_beta</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> <span class="id" title="var">P</span> 1 <span class="id" title="var">u</span> = <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">paths_ind_beta</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">P</span> <span class="id" title="var">y</span>) <span class="id" title="var">u</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p # x" := (<span class="id" title="var">transport</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">x</span>) (<span class="id" title="tactic">right</span> <span class="id" title="keyword">associativity</span>, <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 65, <span class="id" title="var">only</span> <span class="id" title="var">parsing</span>) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inverse</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) : <span class="id" title="var">y</span> = <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x'</span> ⇒ <span class="id" title="var">x'</span> = <span class="id" title="var">x</span>) <span class="id" title="var">p</span> 1.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">symmetric_paths</span> {<span class="id" title="var">A</span>} : <span class="id" title="var">Symmetric</span> (@<span class="id" title="var">paths</span> <span class="id" title="var">A</span>) | 0 := @<span class="id" title="var">inverse</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">symmetric_paths</span> / .<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;:=&nbsp;transport&nbsp;(paths&nbsp;_&nbsp;x)&nbsp;q&nbsp;(transport&nbsp;(fun&nbsp;y&nbsp;=&gt;&nbsp;x&nbsp;=&nbsp;y)&nbsp;p&nbsp;1).&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">concat</span> {<span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>} <span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">transitive_paths</span> {<span class="id" title="var">A</span>} : <span class="id" title="var">Transitive</span> (@<span class="id" title="var">paths</span> <span class="id" title="var">A</span>) | 0 := @<span class="id" title="var">concat</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">transitive_paths</span> / .<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p @ q" := (<span class="id" title="var">concat</span> <span class="id" title="var">p</span>%<span class="id" title="var">path</span> <span class="id" title="var">q</span>%<span class="id" title="var">path</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">path_scope</span>.<br/>
<span class="id" title="keyword">Notation</span> &quot;p ^" := (<span class="id" title="var">inverse</span> <span class="id" title="var">p</span>%<span class="id" title="var">path</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3, <span class="id" title="var">format</span> "p '^'") : <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) : <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> 1.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">_path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pointwise_paths</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">pointwise_paths</span> {<span class="id" title="var">A</span>}%<span class="id" title="var">_type_scope</span> {<span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Unfold</span> <span class="id" title="var">pointwise_paths</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;f == g" := (<span class="id" title="var">pointwise_paths</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 70, <span class="id" title="keyword">no</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">f</span> == <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">h</span> 1.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">apD10</span> {<span class="id" title="var">A</span>%<span class="id" title="var">_type_scope</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">_function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">_path_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) : <span class="id" title="var">f</span> == <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">apD10</span> <span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">ap10</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">_function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">_path_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap11</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>) : <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">ap11</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> {<span class="id" title="var">f</span> <span class="id" title="var">g</span>}%<span class="id" title="var">_function_scope</span> <span class="id" title="var">h</span>%<span class="id" title="var">_path_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">_path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD</span> {<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>):<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> # (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">f</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">paths_ind</span> <span class="id" title="var">x</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> <span class="id" title="var">p</span> ⇒ <span class="id" title="var">p</span> # (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">f</span> <span class="id" title="var">y</span>) (<span class="id" title="var">transport_beta</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">y</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">apD</span> {<span class="id" title="var">A</span>%<span class="id" title="var">_type_scope</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span>%<span class="id" title="var">_path_scope</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">Sect</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">r</span> (<span class="id" title="var">s</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">Sect</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> (<span class="id" title="var">s</span> <span class="id" title="var">r</span>)%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">IsEquiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) := <span class="id" title="var">BuildIsEquiv</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equiv_inv</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eisretr</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">equiv_inv</span> <span class="id" title="var">f</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eissect</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">f</span> <span class="id" title="var">equiv_inv</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eisadj</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">eisretr</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eisretr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eissect</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eisadj</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> {<span class="id" title="var">_</span>} <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">IsEquiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <span class="id" title="var">Equiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> := <span class="id" title="var">BuildEquiv</span> {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equiv_fun</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">equiv_isequiv</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">equiv_fun</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <span class="id" title="var">equiv_fun</span> : <span class="id" title="var">Equiv</span> &gt;-&gt; <span class="id" title="var">Funclass</span>.<br/>

<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">equiv_isequiv</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">equiv_fun</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">equiv_isequiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Bind Scope</span> <span class="id" title="var">equiv_scope</span> <span class="id" title="keyword">with</span> <span class="id" title="var">Equiv</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;A &lt;~&gt; B" := (<span class="id" title="var">Equiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 90) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;f ^-1" := (@<span class="id" title="var">equiv_inv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3, <span class="id" title="var">format</span> "f '^-1'") : <span class="id" title="var">function_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_equiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) : <span class="id" title="var">f</span> == <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> <span class="id" title="var">equiv_fun</span> <span class="id" title="var">h</span>).<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Contr</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) :=<br/>
&nbsp;&nbsp;<span class="id" title="var">BuildContr</span> { <span class="id" title="var">center</span> : <span class="id" title="var">A</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contr</span> : (<span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">center</span> = <span class="id" title="var">y</span>) }.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">center</span> <span class="id" title="var">A</span> {<span class="id" title="var">_</span>}.<br/>

<br/>
<span class="id" title="keyword">Class</span> <span class="id" title="var">Funext</span> := { <span class="id" title="var">isequiv_apD10</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) <span class="id" title="var">f</span> <span class="id" title="var">g</span>, <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) }.<br/>

<br/>
<span class="id" title="keyword">Global Existing Instance</span> <span class="id" title="var">isequiv_apD10</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_forall</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) : <span class="id" title="var">f</span> == <span class="id" title="var">g</span> → <span class="id" title="var">f</span> = <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:= (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)^-1.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">path_forall</span> {<span class="id" title="var">_</span> <span class="id" title="var">A</span>%<span class="id" title="var">_type_scope</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_forall2</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) → <span class="id" title="var">f</span> = <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">E</span> ⇒ <span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">path_forall</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) (<span class="id" title="var">E</span> <span class="id" title="var">x</span>))).<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">path_forall2</span> {<span class="id" title="var">_</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> {<span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="comment">(*&nbsp;PathGroupoid.v&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ 1 = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 @ <span class="id" title="var">p</span> = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">t</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">t</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) = (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">t</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">t</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">r</span> = <span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">p</span>^ = 1.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^ @ <span class="id" title="var">p</span> = 1.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_V_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^ @ (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ (<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">q</span>^ = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pV_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^) @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)^ = <span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span>^.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>)^ = <span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^)^ = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_VV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>^)^ = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inv_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span>^^ = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_Mp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span> → <span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_pM</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ → <span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">q</span> → <span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> → <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">h</span> @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_Mp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> → <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_pM</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">r</span> → <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> → <span class="id" title="var">q</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">r</span> → <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^ = 1 → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span>^ @ <span class="id" title="var">p</span> = 1 → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = 1 → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = 1 → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span> → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ → <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> → <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;1 = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> → <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">h</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span> → <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span> → <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span> → <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span> → <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">idmap</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_p_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_transport_V_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">p</span> # <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_p_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span>^ # <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>)^ = <span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> 1 = 1 :&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">apD</span> <span class="id" title="var">f</span> 1 = 1 :&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_p_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">w</span> : <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">r</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)) = (<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">r</span> 1 1).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pp_p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">w</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">f</span> <span class="id" title="var">z</span> = <span class="id" title="var">w</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)) @ <span class="id" title="var">r</span> = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> (<span class="id" title="var">concat_pp_p</span> 1 1 <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inverse_ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^ = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span>^).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span>^) = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_idmap</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> = <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_compose'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">B</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">z</span>) <span class="id" title="var">p</span> = 1.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_Ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) =  <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA_p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pA1_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_A1_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>) = (<span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ (<span class="id" title="var">q</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_pp_A1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> = (<span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) @ <span class="id" title="var">p</span> <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_p_A1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">s</span> : <span class="id" title="var">g</span> <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> <span class="id" title="var">x</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">q</span> @ <span class="id" title="var">s</span>) = <span class="id" title="var">q</span> @ (<span class="id" title="var">p</span> <span class="id" title="var">y</span> @ <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>, <span class="id" title="var">concat_1p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_1p_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> = 1)<br/>
: <span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> ⇒ 1 @ <span class="id" title="var">p'</span>) <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">inv_V</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := <span class="id" title="var">q</span>^). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_p1_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> = 1)<br/>
: <span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">p'</span> @ 1) <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">inv_V</span> <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">r</span> := <span class="id" title="var">q</span>^). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD10</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">f</span>) <span class="id" title="var">x</span> = 1<br/>
:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">f''</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">f'</span>) (<span class="id" title="var">h'</span>:<span class="id" title="var">f'</span>=<span class="id" title="var">f''</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">h</span> @ <span class="id" title="var">h'</span>) <span class="id" title="var">x</span> = <span class="id" title="var">apD10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">apD10</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">h</span>, <span class="id" title="var">h'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_V</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD10</span> (<span class="id" title="var">h</span>^) <span class="id" title="var">x</span> = (<span class="id" title="var">apD10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)^.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) : <span class="id" title="var">ap10</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">f</span>) <span class="id" title="var">x</span> = 1<br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">f'</span> <span class="id" title="var">f''</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">f'</span>) (<span class="id" title="var">h'</span>:<span class="id" title="var">f'</span>=<span class="id" title="var">f''</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap10</span> (<span class="id" title="var">h</span> @ <span class="id" title="var">h'</span>) <span class="id" title="var">x</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap10</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span><br/>
:= <span class="id" title="var">apD10_pp</span> <span class="id" title="var">h</span> <span class="id" title="var">h'</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_V</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap10</span> (<span class="id" title="var">h</span>^) <span class="id" title="var">x</span> = (<span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>)^<br/>
:= <span class="id" title="var">apD10_V</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_ap_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">h</span> <span class="id" title="var">oD</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">apD10</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_ap_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span> ⇒ <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">apD10_ap_precompose</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_ap_postcompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">apD10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) (<span class="id" title="var">apD10</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap10_ap_postcompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>) <span class="id" title="var">a</span><br/>
: <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>) <span class="id" title="var">p</span>) <span class="id" title="var">a</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap10</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>)<br/>
:= <span class="id" title="var">apD10_ap_postcompose</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">f</span>) <span class="id" title="var">p</span> <span class="id" title="var">a</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: 1 # <span class="id" title="var">u</span> = <span class="id" title="var">u</span><br/>
:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> # <span class="id" title="var">u</span> = <span class="id" title="var">q</span> # <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pV</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">p</span>^ # <span class="id" title="var">z</span> = <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">p</span> <span class="id" title="var">z</span>)^<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>) (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_Vp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ # <span class="id" title="var">p</span> # <span class="id" title="var">z</span> = <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">p</span>^ <span class="id" title="var">z</span>)^<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>) (<span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_p_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">z</span> = <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">e</span> ⇒ <span class="id" title="var">e</span> # <span class="id" title="var">u</span>) (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> (<span class="id" title="var">p@q</span>) <span class="id" title="var">r</span> <span class="id" title="var">u</span>) @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span>) (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">u</span>)<br/>
&nbsp;&nbsp;= (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">q@r</span>) <span class="id" title="var">u</span>) @ (<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> (<span class="id" title="var">p</span>#<span class="id" title="var">u</span>))<br/>
&nbsp;&nbsp;:&gt; ((<span class="id" title="var">p</span> @ (<span class="id" title="var">q</span> @ <span class="id" title="var">r</span>)) # <span class="id" title="var">u</span> = <span class="id" title="var">r</span> # <span class="id" title="var">q</span> # <span class="id" title="var">p</span> # <span class="id" title="var">u</span>) .<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">exact</span> 1.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pVp</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_VpV</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^) (<span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_transport_pV</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">e</span> : <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">e</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> = <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">e</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_transport_V_1</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> (<span class="id" title="var">p</span> # <span class="id" title="var">u</span>) 1 = (<span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap11_is_ap10_ap01</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>} (<span class="id" title="var">h</span>:<span class="id" title="var">f</span>=<span class="id" title="var">g</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap11</span> <span class="id" title="var">h</span> <span class="id" title="var">p</span> = <span class="id" title="var">ap10</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transportD</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">C</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transportD2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">D</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="var">C</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">w</span> : <span class="id" title="var">D</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">D</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span><br/>
:= <span class="id" title="var">ap11</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) <span class="id" title="var">q</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap011D</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap01D1</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>), <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="var">C</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD011</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">b</span>:<span class="id" title="var">B</span> <span class="id" title="var">a</span>), <span class="id" title="var">C</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">x'</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) {<span class="id" title="var">y</span> <span class="id" title="var">y'</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x'</span>) <span class="id" title="var">q</span> (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)) = <span class="id" title="var">f</span> <span class="id" title="var">x'</span> <span class="id" title="var">y'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> # <span class="id" title="var">z</span> = <span class="id" title="var">q</span> # <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p'</span> ⇒ <span class="id" title="var">p'</span> # <span class="id" title="var">z</span>) <span class="id" title="var">r</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_is_ap10</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">Q</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span> = <span class="id" title="var">ap10</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Q</span>) <span class="id" title="var">r</span>) <span class="id" title="var">z</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_p2p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r1</span> : <span class="id" title="var">p1</span> = <span class="id" title="var">p2</span>) (<span class="id" title="var">r2</span> : <span class="id" title="var">p2</span> = <span class="id" title="var">p3</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> (<span class="id" title="var">r1</span> @ <span class="id" title="var">r2</span>) <span class="id" title="var">z</span> = <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r1</span> <span class="id" title="var">z</span> @ <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r2</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r1</span>, <span class="id" title="var">r2</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">Q</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> (<span class="id" title="var">r</span>^) <span class="id" title="var">z</span> = (<span class="id" title="var">transport2</span> <span class="id" title="var">Q</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>)^.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_AT</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">z</span> <span class="id" title="var">w</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">z</span> = <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) <span class="id" title="var">s</span>  @  <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">w</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport2</span> <span class="id" title="var">P</span> <span class="id" title="var">r</span> <span class="id" title="var">z</span>  @  <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span>) <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transport</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> → <span class="id" title="var">Q</span> <span class="id" title="var">x</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">f</span> <span class="id" title="var">y</span> (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>) = (<span class="id" title="var">p</span> # (<span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">z</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transportD</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">C1</span> <span class="id" title="var">C2</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">C1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> → <span class="id" title="var">C2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C1</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C1</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C2</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transportD2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">D1</span> <span class="id" title="var">D2</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="var">C</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>, <span class="id" title="var">D1</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> → <span class="id" title="var">D2</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">w</span> : <span class="id" title="var">D1</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>)<br/>
: <span class="id" title="var">f</span> <span class="id" title="var">x2</span> (<span class="id" title="var">p</span> # <span class="id" title="var">y</span>) (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>) (<span class="id" title="var">transportD2</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D1</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transportD2</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D2</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">w</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_transport_pV</span> {<span class="id" title="var">X</span>} (<span class="id" title="var">Y</span> : <span class="id" title="var">X</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">Y</span> <span class="id" title="var">x2</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span>) (<span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span>^) <span class="id" title="var">q</span>) =<br/>
&nbsp;&nbsp;<span class="id" title="var">transport_pV</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span> <span class="id" title="var">y1</span> @ <span class="id" title="var">q</span> @ (<span class="id" title="var">transport_pV</span> <span class="id" title="var">Y</span> <span class="id" title="var">p</span> <span class="id" title="var">y2</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pV_ap</span> {<span class="id" title="var">X</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">X</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x2</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">q</span>) (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_V</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^ = <span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">B</span>) <span class="id" title="var">p</span> <span class="id" title="var">y</span> = <span class="id" title="var">y</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">exact</span> 1.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport2_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport_const</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span> = <span class="id" title="var">transport2</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">B</span>) <span class="id" title="var">r</span> <span class="id" title="var">y</span> @ <span class="id" title="var">transport_const</span> <span class="id" title="var">q</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">z</span>  =  <span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transportD_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">A'</span>} <span class="id" title="var">B</span> {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A'</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">A'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) <span class="id" title="var">y</span> (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">transportD</span> (<span class="id" title="var">B</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) (<span class="id" title="var">C</span> <span class="id" title="var">oD</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> (<span class="id" title="var">f</span> <span class="id" title="var">x'</span>)) (<span class="id" title="var">transport_compose</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">y</span>)^ (<span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) <span class="id" title="var">y</span> <span class="id" title="var">z</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_apD_transportD</span> {<span class="id" title="var">A</span>} <span class="id" title="var">B</span> (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>))<br/>
: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> # <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">g</span> = <span class="id" title="var">g'</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span> ⇒ <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> = <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span> 1 =<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_idmap_ap</span> <span class="id" title="var">A</span> (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) <span class="id" title="var">x</span> <span class="id" title="var">y</span> (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Sometimes, it's useful to have the goal be in terms of <span class="inlinecode"><span class="id" title="var">ap</span></span>, so we can use lemmas about <span class="inlinecode"><span class="id" title="var">ap</span></span>.  However, we can't just <span class="inlinecode"><span class="id" title="tactic">rewrite</span></span> <span class="inlinecode">!<span class="id" title="var">transport_idmap_ap</span></span>, as that's likely to loop.  So, instead, we provide a tactic <span class="inlinecode"><span class="id" title="var">transport_to_ap</span></span>, that replaces all <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MREquality.html#transport"><span class="id" title="definition">transport</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> with <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MREquality.html#transport"><span class="id" title="definition">transport</span></a></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a>)</span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> for non-<span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">transport_to_ap</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">transport</span> ?<span class="id" title="var">P</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">u</span>] ]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">P</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">idmap</span> ⇒ <span class="id" title="tactic">fail</span> 1 <span class="comment">(*&nbsp;we&nbsp;don't&nbsp;want&nbsp;to&nbsp;turn&nbsp;<span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span>)</span>&nbsp;into&nbsp;<span class="inlinecode"><span class="id" title="var">transport</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">idmap</span></span> <span class="inlinecode">(<span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><span class="id" title="var">_</span>))</span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">progress</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">transport_idmap_ap</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_transport</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">c</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x2</span>) <span class="id" title="var">q</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y1</span>) <span class="id" title="var">p</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y2</span>) <span class="id" title="var">p</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x1</span>) <span class="id" title="var">q</span> <span class="id" title="var">c</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">apD_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">p</span>: <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport_const</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">h'</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p'</span> @ <span class="id" title="var">q'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">h'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p @@ q" := (<span class="id" title="var">concat2</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)%<span class="id" title="var">path</span> (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 20) : <span class="id" title="var">path_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">concat2</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat2_ap_ap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x'</span> <span class="id" title="var">y'</span> <span class="id" title="var">z'</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → (<span class="id" title="var">x'</span> = <span class="id" title="var">y'</span>)) (<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → (<span class="id" title="var">y'</span> = <span class="id" title="var">z'</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @@ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">u</span> @ <span class="id" title="var">g</span> <span class="id" title="var">u</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">inverse2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>^<br/>
:= <span class="id" title="var">ap</span> <span class="id" title="var">inverse</span> <span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_pV</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">p</span>^ @ ((1 @@ <span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">concat_pV</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_pp_concat_Vp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>^ <span class="id" title="var">p</span> @ ((<span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @@ 1) @ <span class="id" title="var">concat_Vp</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_pV_inverse2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
: (<span class="id" title="var">r</span> @@ <span class="id" title="var">inverse2</span> <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_pV</span> <span class="id" title="var">q</span> = <span class="id" title="var">concat_pV</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">concat_Vp_inverse2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
: (<span class="id" title="var">inverse2</span> <span class="id" title="var">r</span> @@ <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_Vp</span> <span class="id" title="var">q</span> = <span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">q</span> = <span class="id" title="var">r</span>) : <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
:= 1 @@ <span class="id" title="var">h</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) : <span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span><br/>
:= <span class="id" title="var">h</span> @@ 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span>) → (<span class="id" title="var">q</span> = <span class="id" title="var">r</span>)<br/>
:= <span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ <span class="id" title="var">h</span> @ (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) → (<span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>)^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> <span class="id" title="var">r</span>^ @ (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>) ^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> 1 @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span> = <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">whiskerR</span> 1 <span class="id" title="var">q</span> = 1 :&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> 1 = 1 :&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>) ^ @ <span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">h</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span> = <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_p1_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> 1 = <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">h</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_1p_1</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">h</span> = <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">h</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">refine</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat2_p1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">h</span> @@ 1 = <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> 1 :&gt; (<span class="id" title="var">p</span> @ 1 = <span class="id" title="var">q</span> @ 1).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat2_1p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>) :<br/>
&nbsp;&nbsp;1 @@ <span class="id" title="var">h</span> = <span class="id" title="var">whiskerL</span> 1 <span class="id" title="var">h</span> :&gt; (1 @ <span class="id" title="var">p</span> = 1 @ <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancel2L</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">h</span> <span class="id" title="var">k</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">g</span> @@ <span class="id" title="var">h</span> = <span class="id" title="var">g</span> @@ <span class="id" title="var">k</span>) → (<span class="id" title="var">h</span> = <span class="id" title="var">k</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">h</span>)^ @ <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">k</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancel2R</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> <span class="id" title="var">h</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">g</span> @@ <span class="id" title="var">k</span> = <span class="id" title="var">h</span> @@ <span class="id" title="var">k</span>) → (<span class="id" title="var">g</span> = <span class="id" title="var">h</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">k</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">g</span>)^ @ <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">q''</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">q'</span> = <span class="id" title="var">q''</span>)<br/>
: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">s</span>) = <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_pp</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">p'</span> = <span class="id" title="var">p''</span>)<br/>
: <span class="id" title="var">whiskerR</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">s</span>) <span class="id" title="var">q</span> = <span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span> @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">s</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_VpL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerL_pVL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>)<br/>
: (<span class="id" title="var">concat_p_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ <span class="id" title="var">r</span>) @ <span class="id" title="var">concat_p_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q'</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_pVR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span>) <span class="id" title="var">q</span>^ @ <span class="id" title="var">concat_pp_V</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">whiskerR_VpR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">concat_pV_p</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)^ @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerR</span> <span class="id" title="var">r</span> <span class="id" title="var">q</span>^) <span class="id" title="var">q</span> @ <span class="id" title="var">concat_pV_p</span> <span class="id" title="var">p'</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_concat2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span> <span class="id" title="var">q''</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">p'</span> = <span class="id" title="var">p''</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) (<span class="id" title="var">d</span> : <span class="id" title="var">q'</span> = <span class="id" title="var">q''</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">a</span> @@ <span class="id" title="var">c</span>) @ (<span class="id" title="var">b</span> @@ <span class="id" title="var">d</span>) = (<span class="id" title="var">a</span> @ <span class="id" title="var">b</span>) @@ (<span class="id" title="var">c</span> @ <span class="id" title="var">d</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">concat_whisker</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">p'</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">q'</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">a</span> : <span class="id" title="var">p</span> = <span class="id" title="var">p'</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">q</span> = <span class="id" title="var">q'</span>) :<br/>
&nbsp;&nbsp;(<span class="id" title="var">whiskerR</span> <span class="id" title="var">a</span> <span class="id" title="var">q</span>) @ (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p'</span> <span class="id" title="var">b</span>) = (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">b</span>) @ (<span class="id" title="var">whiskerR</span> <span class="id" title="var">a</span> <span class="id" title="var">q'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>, <span class="id" title="var">a</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pentagon</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">v</span> = <span class="id" title="var">w</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">w</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">s</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> (<span class="id" title="var">q@r</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">s</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">r@s</span>) @ <span class="id" title="var">concat_p_pp</span> (<span class="id" title="var">p@q</span>) <span class="id" title="var">r</span> <span class="id" title="var">s</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>, <span class="id" title="var">r</span>, <span class="id" title="var">s</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">triangulator</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">p</span> 1 <span class="id" title="var">q</span> @ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>) <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eckmann_hilton</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span>:<span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : 1 = 1 :&gt; (<span class="id" title="var">x</span> = <span class="id" title="var">x</span>)) : <span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> :=<br/>
&nbsp;&nbsp;(<span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">p</span> @@ <span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">q</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_whisker</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;@ (<span class="id" title="var">whiskerL_1p</span> <span class="id" title="var">q</span> @@ <span class="id" title="var">whiskerR_p1</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">q</span>) : <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02_pp</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">p''</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">p'</span>) (<span class="id" title="var">r'</span>:<span class="id" title="var">p'</span>=<span class="id" title="var">p''</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r</span> @ <span class="id" title="var">r'</span>) = <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span> @ <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">r</span>, <span class="id" title="var">r'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap02_p2p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span>:<span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">p'</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span>} {<span class="id" title="var">q</span> <span class="id" title="var">q'</span>:<span class="id" title="var">y</span>=<span class="id" title="var">z</span>} (<span class="id" title="var">r</span>:<span class="id" title="var">p</span>=<span class="id" title="var">p'</span>) (<span class="id" title="var">s</span>:<span class="id" title="var">q</span>=<span class="id" title="var">q'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r</span> @@ <span class="id" title="var">s</span>) =   <span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span>  @@  <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">s</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span> <span class="id" title="var">r</span>, <span class="id" title="var">s</span>, <span class="id" title="var">p</span>, <span class="id" title="var">q</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> = <span class="id" title="var">transport2</span> <span class="id" title="var">B</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @ <span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">concat_1p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02_const</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
: <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span> = (<span class="id" title="var">apD_const</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">transport2_const</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) @@ <span class="id" title="var">ap02</span> <span class="id" title="var">f</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">whiskerL</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">_</span> <span class="id" title="var">r</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">apD_const</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>)^).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD02_pp</span> {<span class="id" title="var">A</span>} (<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">p3</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">r1</span> : <span class="id" title="var">p1</span> = <span class="id" title="var">p2</span>) (<span class="id" title="var">r2</span> : <span class="id" title="var">p2</span> = <span class="id" title="var">p3</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> (<span class="id" title="var">r1</span> @ <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r1</span><br/>
&nbsp;&nbsp;@ <span class="id" title="var">whiskerL</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">B</span> <span class="id" title="var">r1</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">apD02</span> <span class="id" title="var">f</span> <span class="id" title="var">r2</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">concat_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;@ (<span class="id" title="var">whiskerR</span> (<span class="id" title="var">transport2_p2p</span> <span class="id" title="var">B</span> <span class="id" title="var">r1</span> <span class="id" title="var">r2</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))^ (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p3</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r1</span>, <span class="id" title="var">r2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_Vp_idmap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">A</span> = <span class="id" title="var">B</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">p</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span>^) (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> <span class="id" title="var">z</span>) <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> (<span class="id" title="var">p</span> # <span class="id" title="var">z</span>)) (<span class="id" title="var">inverse2</span> <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">transport_Vp</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport_Vp</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_transport_pV_idmap</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">A</span> = <span class="id" title="var">B</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">q</span> = <span class="id" title="var">p</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">B</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span>) (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span>^ <span class="id" title="var">z</span>) <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">idmap</span> <span class="id" title="var">s</span> (<span class="id" title="var">p</span>^ # <span class="id" title="var">z</span>)) <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;@ <span class="id" title="var">transport_pV</span> <span class="id" title="var">idmap</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport_pV</span> <span class="id" title="var">idmap</span> <span class="id" title="var">q</span> <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>, <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <span class="id" title="var">concatR</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">concat</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span>).<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span><br/>
&nbsp;&nbsp;<span class="id" title="var">concat_1p</span> <span class="id" title="var">concat_p1</span> <span class="id" title="var">concat_p_pp</span><br/>
&nbsp;&nbsp;<span class="id" title="var">inv_pp</span> <span class="id" title="var">inv_V</span><br/>
&nbsp;: <span class="id" title="var">path_hints</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span><br/>
@<span class="id" title="var">concat_p1</span><br/>
@<span class="id" title="var">concat_1p</span><br/>
@<span class="id" title="var">concat_p_pp</span> <span class="comment">(*&nbsp;there&nbsp;is&nbsp;a&nbsp;choice&nbsp;here&nbsp;!*)</span><br/>
@<span class="id" title="var">concat_pV</span><br/>
@<span class="id" title="var">concat_Vp</span><br/>
@<span class="id" title="var">concat_V_pp</span><br/>
@<span class="id" title="var">concat_p_Vp</span><br/>
@<span class="id" title="var">concat_pp_V</span><br/>
@<span class="id" title="var">concat_pV_p</span><br/>
<span class="comment">(*@inv_pp*)</span> <span class="comment">(*&nbsp;I&nbsp;am&nbsp;not&nbsp;sure&nbsp;about&nbsp;this&nbsp;one&nbsp;*)</span><br/>
@<span class="id" title="var">inv_V</span><br/>
@<span class="id" title="var">moveR_Mp</span><br/>
@<span class="id" title="var">moveR_pM</span><br/>
@<span class="id" title="var">moveL_Mp</span><br/>
@<span class="id" title="var">moveL_pM</span><br/>
@<span class="id" title="var">moveL_1M</span><br/>
@<span class="id" title="var">moveL_M1</span><br/>
@<span class="id" title="var">moveR_M1</span><br/>
@<span class="id" title="var">moveR_1M</span><br/>
@<span class="id" title="var">ap_1</span><br/>
<span class="comment">(*&nbsp;@ap_pp<br/>
@ap_p_pp&nbsp;?*)</span><br/>
@<span class="id" title="var">inverse_ap</span><br/>
@<span class="id" title="var">ap_idmap</span><br/>
<span class="comment">(*&nbsp;@ap_compose<br/>
@ap_compose'*)</span><br/>
@<span class="id" title="var">ap_const</span><br/>
<span class="comment">(*&nbsp;Unsure&nbsp;about&nbsp;naturality&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">ap</span></span>,&nbsp;was&nbsp;absent&nbsp;in&nbsp;the&nbsp;old&nbsp;implementation*)</span><br/>
@<span class="id" title="var">apD10_1</span><br/>
:<span class="id" title="var">paths</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">hott_simpl</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">paths</span> <span class="id" title="tactic">in</span> × |- × ; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">path_hints</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Contractible.v&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
If a space is contractible, then any two points in it are connected by a path in a canonical way. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_contr</span> `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">x</span> = <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">contr</span> <span class="id" title="var">x</span>)^ @ (<span class="id" title="var">contr</span> <span class="id" title="var">y</span>).<br/>

<br/>
</div>

<div class="doc">
Similarly, any two parallel paths in a contractible space are homotopic, which is just the principle UIP. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path2_contr</span> `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) : <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">K</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>), <span class="id" title="var">r</span> = <span class="id" title="var">path_contr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_Vp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">path_contr</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">K</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">K</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
It follows that any space of paths in a contractible space is contractible.  Because <span class="inlinecode"><span class="id" title="var">Contr</span></span> is a notation, and <span class="inlinecode"><span class="id" title="var">Contr_internal</span></span> is the record, we need to iota expand to fool Rocq's typeclass machinery into accepting supposedly "mismatched" contexts. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">contr_paths_contr</span> `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">Contr</span> (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) | 10000 := <span class="id" title="keyword">let</span> <span class="id" title="var">c</span> := {|<br/>
&nbsp;&nbsp;<span class="id" title="var">center</span> := (<span class="id" title="var">contr</span> <span class="id" title="var">x</span>)^ @ <span class="id" title="var">contr</span> <span class="id" title="var">y</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">contr</span> := <span class="id" title="var">path2_contr</span> ((<span class="id" title="var">contr</span> <span class="id" title="var">x</span>)^ @ <span class="id" title="var">contr</span> <span class="id" title="var">y</span>)<br/>
|} <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>

<br/>
</div>

<div class="doc">
Also, the total space of any based path space is contractible.  We define the <span class="inlinecode"><span class="id" title="var">contr</span></span> fields as separate definitions, so that we can give them <span class="inlinecode"><span class="id" title="tactic">simpl</span></span> <span class="inlinecode"><span class="id" title="var">nomatch</span></span> annotations. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_basedpaths</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">x</span>;1) = (<span class="id" title="var">y</span>;<span class="id" title="var">p</span>) :&gt; {<span class="id" title="var">z</span>:<span class="id" title="var">X</span> &amp; <span class="id" title="var">x</span>=<span class="id" title="var">z</span>}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">path_basedpaths</span> {<span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">contr_basedpaths</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">Contr</span> {<span class="id" title="var">y</span> : <span class="id" title="var">X</span> &amp; <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} | 100.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">x</span> ; 1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_basedpaths</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;???&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_basedpaths'</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: @<span class="id" title="var">existT</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> ⇒ @<span class="id" title="var">paths</span> <span class="id" title="var">X</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span> 1 = (<span class="id" title="var">y</span>; <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">contr_basedpaths'</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">X</span>) : <span class="id" title="var">Contr</span> {<span class="id" title="var">y</span> : <span class="id" title="var">X</span> &amp; <span class="id" title="var">y</span> = <span class="id" title="var">x</span>} | 100.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">BuildContr</span> <span class="id" title="var">_</span> (@<span class="id" title="var">existT</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> ⇒ @<span class="id" title="var">paths</span> <span class="id" title="var">X</span> <span class="id" title="var">z</span> <span class="id" title="var">x</span>) <span class="id" title="var">x</span> 1) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">y</span> <span class="id" title="var">p</span>]; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_basedpaths'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">path_basedpaths'</span> {<span class="id" title="var">X</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} <span class="id" title="var">p</span> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">nomatch</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pr1_path_contr_basedpaths</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>)<br/>
: <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">path_contr</span> ((<span class="id" title="var">y</span>;<span class="id" title="var">p</span>):{<span class="id" title="var">y'</span>:<span class="id" title="var">X</span> &amp; <span class="id" title="var">x</span> = <span class="id" title="var">y'</span>}) (<span class="id" title="var">z</span>;<span class="id" title="var">q</span>)) = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>,<span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pr1_path_contr_basedpaths'</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">path_contr</span> ((<span class="id" title="var">y</span>;<span class="id" title="var">p</span>):{<span class="id" title="var">y'</span>:<span class="id" title="var">X</span> &amp; <span class="id" title="var">y'</span> = <span class="id" title="var">x</span>}) (<span class="id" title="var">z</span>;<span class="id" title="var">q</span>)) = <span class="id" title="var">p</span> @ <span class="id" title="var">q</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>,<span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pr1_path_basedpaths</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">path_basedpaths</span> <span class="id" title="var">p</span>) = <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pr1_path_basedpaths'</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">X</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">path_basedpaths'</span> <span class="id" title="var">p</span>) = <span class="id" title="var">p</span>^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
If the domain is contractible, the function is propositionally constant. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">contr_dom_equiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>, <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> ((<span class="id" title="var">contr</span> <span class="id" title="var">x</span>)^ @ <span class="id" title="var">contr</span> <span class="id" title="var">y</span>).<br/>

<br/>
<span class="comment">(*&nbsp;Equivalences.v&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_idmap</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">idmap</span> | 0 :=<br/>
&nbsp;&nbsp;<span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">idmap</span> <span class="id" title="var">idmap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_idmap</span> (<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>) : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">A</span> := <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">A</span> <span class="id" title="var">idmap</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">equiv_idmap</span> {<span class="id" title="var">A</span>} , <span class="id" title="var">A</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;1" := <span class="id" title="var">equiv_idmap</span> : <span class="id" title="var">equiv_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">reflexive_equiv</span> : <span class="id" title="var">Reflexive</span> <span class="id" title="var">Equiv</span> | 0 := @<span class="id" title="var">equiv_idmap</span>.<br/>

<br/>
</div>

<div class="doc">
The composition of equivalences is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_compose</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">g</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) | 1000<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">compose</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">g</span>^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">g</span>^-1 <span class="id" title="var">c</span>)) @ <span class="id" title="var">eisretr</span> <span class="id" title="var">g</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">ap</span> (<span class="id" title="var">f</span>^-1) (<span class="id" title="var">eissect</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) @ <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> (<span class="id" title="var">eisadj</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))) @<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap_pp</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^ @<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap02</span> <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) (<span class="id" title="var">eissect</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)))^ @<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">f</span> <span class="id" title="var">_</span> @@ <span class="id" title="var">eisadj</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>) @<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) @<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;).<br/>

<br/>
<span class="comment">(*&nbsp;An&nbsp;alias&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">isequiv_compose</span></span>,&nbsp;with&nbsp;some&nbsp;arguments&nbsp;explicit;&nbsp;often&nbsp;convenient&nbsp;when&nbsp;type&nbsp;class&nbsp;search&nbsp;fails.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_compose'</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">_</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) (<span class="id" title="var">_</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_compose</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_compose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">g</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_compose'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
We put <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> in <span class="inlinecode"><span class="id" title="var">equiv_scope</span></span> explcitly.  This is a partial work-around for https://coq.inria.fr/bugs/show_bug.cgi?id=3990, which is that implicitly bound scopes don't nest well. 
</div>
<div class="code">
<span class="id" title="keyword">Notation</span> &quot;g 'oE' f" := (<span class="id" title="var">equiv_compose'</span> <span class="id" title="var">g</span>%<span class="id" title="var">equiv</span> <span class="id" title="var">f</span>%<span class="id" title="var">equiv</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 40, <span class="id" title="tactic">left</span> <span class="id" title="keyword">associativity</span>) : <span class="id" title="var">equiv_scope</span>.<br/>

<br/>
<span class="comment">(*&nbsp;The&nbsp;TypeClass&nbsp;<span class="inlinecode"><span class="id" title="var">Transitive</span></span>&nbsp;has&nbsp;a&nbsp;different&nbsp;order&nbsp;of&nbsp;parameters&nbsp;than&nbsp;<span class="inlinecode"><span class="id" title="var">equiv_compose</span></span>.&nbsp;&nbsp;Thus&nbsp;in&nbsp;declaring&nbsp;the&nbsp;instance&nbsp;we&nbsp;have&nbsp;to&nbsp;switch&nbsp;the&nbsp;order&nbsp;of&nbsp;arguments.&nbsp;*)</span><br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">transitive_equiv</span> : <span class="id" title="var">Transitive</span> <span class="id" title="var">Equiv</span> | 0 :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> ⇒ <span class="id" title="var">equiv_compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
Anything homotopic to an equivalence is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <span class="id" title="var">IsEquivHomotopic</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hypothesis</span> <span class="id" title="var">h</span> : <span class="id" title="var">f</span> == <span class="id" title="var">g</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <span class="id" title="var">sect</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span> ⇒ (<span class="id" title="var">h</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))^ @ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <span class="id" title="var">retr</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span> ⇒ (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">h</span> <span class="id" title="var">a</span>))^ @ <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;We&nbsp;prove&nbsp;the&nbsp;triangle&nbsp;identity&nbsp;with&nbsp;rewrite&nbsp;tactics.&nbsp;&nbsp;Since&nbsp;we&nbsp;lose&nbsp;control&nbsp;over&nbsp;the&nbsp;proof&nbsp;term&nbsp;that&nbsp;way,&nbsp;we&nbsp;make&nbsp;the&nbsp;result&nbsp;opaque&nbsp;with&nbsp;"Qed".&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <span class="id" title="var">adj</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">sect</span> (<span class="id" title="var">g</span> <span class="id" title="var">a</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">retr</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">sect</span>, <span class="id" title="var">retr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_pp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p_pp</span>, &lt;- <span class="id" title="var">concat_Ap</span>, <span class="id" title="var">concat_pp_p</span>, &lt;- <span class="id" title="var">concat_Ap</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_V</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_compose</span>; <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) (<span class="id" title="var">h</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">whiskerR</span>, <span class="id" title="var">eisadj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;should&nbsp;not&nbsp;be&nbsp;an&nbsp;instance;&nbsp;it&nbsp;can&nbsp;cause&nbsp;the&nbsp;unifier&nbsp;to&nbsp;spin&nbsp;forever&nbsp;searching&nbsp;for&nbsp;functions&nbsp;to&nbsp;be&nbsp;hoomotpic&nbsp;to.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_homotopic</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> ^-1) <span class="id" title="var">sect</span> <span class="id" title="var">retr</span> <span class="id" title="var">adj</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_homotopic</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span> <span class="id" title="var">isequiv_homotopic</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">IsEquivHomotopic</span>.<br/>

<br/>
</div>

<div class="doc">
The inverse of an equivalence is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <span class="id" title="var">EquivInverse</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">feq</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Theorem</span> <span class="id" title="var">other_adj</span> (<span class="id" title="var">b</span> : <span class="id" title="var">B</span>) : <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;First&nbsp;we&nbsp;set&nbsp;up&nbsp;the&nbsp;mess.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_1p</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_Vp</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">whiskerR</span> (<span class="id" title="var">inverse2</span> (<span class="id" title="var">ap02</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisadj</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>)))) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> (<span class="id" title="var">concat_1p</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_Vp</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> (<span class="id" title="var">concat_1p</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>)))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_pV</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_M1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Now&nbsp;we&nbsp;apply&nbsp;lots&nbsp;of&nbsp;naturality&nbsp;and&nbsp;cancel&nbsp;things.&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_pp_A1</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)^) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ap_compose'</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span>^-1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">ap_p_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_pp</span>, <span class="id" title="var">concat_p_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_pp_V</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_V</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- (<span class="id" title="var">concat_pA1</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_compose'</span>, &lt;- (<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">f</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_p_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_A1p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p_Vp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_pA1_p</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_pV_p</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_Vp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_inverse</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>^-1 | 10000<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">f</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span>) (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) <span class="id" title="var">other_adj</span>.<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">EquivInverse</span>.<br/>

<br/>
</div>

<div class="doc">
If the goal is <span class="inlinecode"><span class="id" title="var">IsEquiv</span></span> <span class="inlinecode"><span class="id" title="var">_</span>^-1</span>, then use <span class="inlinecode"><span class="id" title="var">isequiv_inverse</span></span>; otherwise, don't pretend worry about if the goal is an evar and we want to add a <span class="inlinecode">^-1</span>. 
</div>
<div class="code">
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 0 (<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span>^-1) ⇒ <span class="id" title="tactic">apply</span> @<span class="id" title="var">isequiv_inverse</span> : <span class="id" title="var">typeclass_instances</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MRFSets.html#W.Equiv"><span class="id" title="definition">Equiv</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span> is a symmetric relation. 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">equiv_inverse</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} : (<span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) → (<span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">A</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">e</span>^-1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_inverse</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;e ^-1" := (@<span class="id" title="var">equiv_inverse</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">e</span>) : <span class="id" title="var">equiv_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">symmetric_equiv</span> : <span class="id" title="var">Symmetric</span> <span class="id" title="var">Equiv</span> | 0 := @<span class="id" title="var">equiv_inverse</span>.<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode">\<a class="idref" href="MetaRocq.Erasure.EProgram.html#TransformExt.Opt.o"><span class="id" title="variable">o</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> are equivalences, so is <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span>.  This is not an Instance because it would require Rocq to guess <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelR_isequiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_homotopic</span> (<span class="id" title="var">compose</span> (<span class="id" title="var">compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) <span class="id" title="var">f</span>^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelR_equiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">C</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">g</span> (<span class="id" title="var">cancelR_isequiv</span> <span class="id" title="var">f</span>).<br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode">\<a class="idref" href="MetaRocq.Erasure.EProgram.html#TransformExt.Opt.o"><span class="id" title="variable">o</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> are equivalences, so is <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelL_isequiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">g</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_homotopic</span> (<span class="id" title="var">compose</span> <span class="id" title="var">g</span>^-1 (<span class="id" title="var">compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">eissect</span> <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">cancelL_equiv</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">g</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">C</span> (<span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> (<span class="id" title="var">cancelL_isequiv</span> <span class="id" title="var">g</span>).<br/>

<br/>
</div>

<div class="doc">
Combining these with <span class="inlinecode"><span class="id" title="var">isequiv_compose</span></span>, we see that equivalences can be transported across commutative squares. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_commsq</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> → <span class="id" title="var">D</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">A</span> → <span class="id" title="var">C</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">B</span> → <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span> == <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span>}<br/>
: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">g</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">cancelR_isequiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span> <span class="id" title="var">g</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_homotopic</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_commsq'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">C</span> → <span class="id" title="var">D</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">A</span> → <span class="id" title="var">C</span>) (<span class="id" title="var">k</span> : <span class="id" title="var">B</span> → <span class="id" title="var">D</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span> == <span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">g</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>} `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span>}<br/>
: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">cancelL_isequiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_homotopic</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Transporting is an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Section</span> <span class="id" title="var">EquivTransport</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_transport</span> : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) | 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> (<span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">transport_pV</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">transport_Vp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) (<span class="id" title="var">transport_pVp</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_transport</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span> &lt;~&gt; <span class="id" title="var">P</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">EquivTransport</span>.<br/>

<br/>
</div>

<div class="doc">
In all the above cases, we were able to directly construct all the structure of an equivalence.  However, as is evident, sometimes it is quite difficult to prove the adjoint law.

<div class="paragraph"> </div>

   The following adjointification theorem allows us to be lazy about this if we wish.  It says that if we have all the data of an (adjoint) equivalence except the triangle identity, then we can always obtain the triangle identity by modifying the datum <span class="inlinecode"><span class="id" title="var">equiv_is_section</span></span> (or <span class="inlinecode"><span class="id" title="var">equiv_is_retraction</span></span>).  The proof is the same as the standard categorical argument that any equivalence can be improved to an adjoint equivalence.

<div class="paragraph"> </div>

   As a stylistic matter, we try to avoid using adjointification in the library whenever possible, to preserve the homotopies specified by the user.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">Adjointify</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<span class="id" title="var">isretr</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) (<span class="id" title="var">issect</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;This&nbsp;is&nbsp;the&nbsp;modified&nbsp;<span class="inlinecode"><span class="id" title="var">eissect</span></span>.&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <span class="id" title="var">issect'</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">issect</span> <span class="id" title="var">x</span>)^)  @  <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">isretr</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>))  @  <span class="id" title="var">issect</span> <span class="id" title="var">x</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <span class="id" title="var">is_adjoint'</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) : <span class="id" title="var">isretr</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>) = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">issect'</span> <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">issect'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_M1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_pp</span>, <span class="id" title="var">concat_p_pp</span>; <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">ap_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_pA1</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ (<span class="id" title="var">isretr</span> <span class="id" title="var">b</span>)^) (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> (<span class="id" title="var">issect</span> <span class="id" title="var">a</span>)^)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_pp_p</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_V</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_Vp</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_p_pp</span>, &lt;- <span class="id" title="var">ap_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">concat_pA1</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ (<span class="id" title="var">isretr</span> <span class="id" title="var">b</span>)^) (<span class="id" title="var">isretr</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">concat_pV</span>, <span class="id" title="var">concat_1p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We don't make this a typeclass instance, because we want to control when we are applying it. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_adjointify</span> : <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">isretr</span> <span class="id" title="var">issect'</span> <span class="id" title="var">is_adjoint'</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_adjointify</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">Adjointify</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">isequiv_adjointify</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span> <span class="id" title="var">isretr</span> <span class="id" title="var">issect</span>.<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">equiv_adjointify</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>}%<span class="id" title="var">_type_scope</span> (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span> <span class="id" title="var">isretr</span> <span class="id" title="var">issect</span>.<br/>

<br/>
</div>

<div class="doc">
An involution is an endomap that is its own inverse. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_involution</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> → <span class="id" title="var">X</span>) (<span class="id" title="var">isinvol</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span>)<br/>
: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> <span class="id" title="var">isinvol</span> <span class="id" title="var">isinvol</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_involution</span> {<span class="id" title="var">X</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">X</span> → <span class="id" title="var">X</span>) (<span class="id" title="var">isinvol</span> : <span class="id" title="var">Sect</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span>)<br/>
: <span class="id" title="var">X</span> &lt;~&gt; <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_adjointify</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> <span class="id" title="var">isinvol</span> <span class="id" title="var">isinvol</span>.<br/>

<br/>
</div>

<div class="doc">
Several lemmas useful for rewriting. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">f</span>^-1 <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">f</span>^-1 <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^ @ <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap</span> (<span class="id" title="var">f</span>^-1) <span class="id" title="var">p</span> @ <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">y</span> = <span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^ @ <span class="id" title="var">ap</span> (<span class="id" title="var">f</span>^-1) <span class="id" title="var">p</span>.<br/>

<br/>
</div>

<div class="doc">
Equivalence preserves contractibility (which of course is trivial under univalence). 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">contr_equiv</span> <span class="id" title="var">A</span> {<span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">Contr</span> <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">f</span> (<span class="id" title="var">center</span> <span class="id" title="var">A</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_equiv_M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">contr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">contr_equiv'</span> <span class="id" title="var">A</span> {<span class="id" title="var">B</span>} `(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">Contr</span> <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">contr_equiv</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>.<br/>

<br/>
</div>

<div class="doc">
Any two contractible types are equivalent. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_contr_contr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} `{<span class="id" title="var">Contr</span> <span class="id" title="var">B</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ (<span class="id" title="var">center</span> <span class="id" title="var">A</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">path_contr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">path_contr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">path_contr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">equiv_contr_contr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} `{<span class="id" title="var">Contr</span> <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_adjointify</span> <span class="id" title="keyword">with</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">center</span> <span class="id" title="var">B</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="var">center</span> <span class="id" title="var">A</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?; <span class="id" title="tactic">apply</span> <span class="id" title="var">contr</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Assuming function extensionality, composing with an equivalence is itself an equivalence 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_precompose</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">B</span>→<span class="id" title="var">C</span>) ⇒ <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) | 1000<br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">B</span>→<span class="id" title="var">C</span>) ⇒ <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">ap</span> <span class="id" title="var">h</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> ⇒ <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_precompose</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">B</span> → <span class="id" title="var">C</span>) &lt;~&gt; (<span class="id" title="var">A</span> → <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">B</span>→<span class="id" title="var">C</span>) ⇒ <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_precompose'</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">B</span> → <span class="id" title="var">C</span>) &lt;~&gt; (<span class="id" title="var">A</span> → <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">B</span>→<span class="id" title="var">C</span>) ⇒ <span class="id" title="var">g</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_postcompose</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) ⇒ <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) | 1000<br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) ⇒ <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">f</span>^-1 <span class="id" title="var">o</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> ⇒ <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> (<span class="id" title="var">g</span> <span class="id" title="var">y</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_postcompose</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">A</span> → <span class="id" title="var">B</span>) &lt;~&gt; (<span class="id" title="var">A</span> → <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) ⇒ <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_postcompose'</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">A</span> → <span class="id" title="var">B</span>) &lt;~&gt; (<span class="id" title="var">A</span> → <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">g</span>:<span class="id" title="var">A</span>→<span class="id" title="var">B</span>) ⇒ <span class="id" title="var">f</span> <span class="id" title="var">o</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Conversely, if pre- or post-composing with a function is always an equivalence, then that function is also an equivalence.  It's convenient to know that we only need to assume the equivalence when the other type is the domain or the codomain. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_isequiv_precompose</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">precomp</span> := (<span class="id" title="keyword">fun</span> (<span class="id" title="var">C</span> : <span class="id" title="keyword">Type</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">B</span> → <span class="id" title="var">C</span>) ⇒ <span class="id" title="var">h</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>))<br/>
&nbsp;&nbsp;(<span class="id" title="var">Aeq</span> : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">A</span>)) (<span class="id" title="var">Beq</span> : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">B</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> <span class="id" title="var">f</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">C</span> <span class="id" title="var">D</span> : <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Ceq</span> : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">C</span>)) (<span class="id" title="var">Deq</span> : <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">D</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="var">C</span> → <span class="id" title="var">D</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">A</span> → <span class="id" title="var">C</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">k</span> <span class="id" title="var">o</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">C</span>)^-1 <span class="id" title="var">h</span> = (<span class="id" title="var">precomp</span> <span class="id" title="var">D</span>)^-1 (<span class="id" title="var">k</span> <span class="id" title="var">o</span> <span class="id" title="var">h</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> ? ? <span class="id" title="var">k</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">D</span>)^-1 (<span class="id" title="var">k</span> <span class="id" title="var">o</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">C</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">C</span>)^-1 <span class="id" title="var">h</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">transitivity</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">D</span>)^-1 (<span class="id" title="var">precomp</span> <span class="id" title="var">D</span> (<span class="id" title="var">k</span> <span class="id" title="var">o</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">C</span>)^-1 <span class="id" title="var">h</span>)))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">eissect</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">D</span>) <span class="id" title="var">_</span>); <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">eisretr</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">C</span>) <span class="id" title="var">h</span>); <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">f</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">A</span>)^-1 <span class="id" title="var">idmap</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">f</span> <span class="id" title="var">o</span> (<span class="id" title="var">precomp</span> <span class="id" title="var">A</span>)^-1 <span class="id" title="var">idmap</span>) <span class="id" title="var">x</span> = <span class="id" title="var">idmap</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">H</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">Aeq</span> <span class="id" title="var">Beq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">B</span>)^-1 (<span class="id" title="var">precomp</span> <span class="id" title="var">B</span> <span class="id" title="var">idmap</span>) = <span class="id" title="var">idmap</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eissect</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">A</span> ((<span class="id" title="var">precomp</span> <span class="id" title="var">A</span>)^-1 <span class="id" title="var">idmap</span>)) <span class="id" title="var">x</span> = <span class="id" title="var">idmap</span> <span class="id" title="var">x</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap10</span>, <span class="id" title="var">eisretr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="comment">(*<br/>
Definition&nbsp;isequiv_isequiv_postcompose&nbsp;{A&nbsp;B&nbsp;:&nbsp;Type}&nbsp;(f&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;B)<br/>
&nbsp;&nbsp;(postcomp&nbsp;:=&nbsp;(fun&nbsp;(C&nbsp;:&nbsp;Type)&nbsp;(h&nbsp;:&nbsp;C&nbsp;-&gt;&nbsp;A)&nbsp;=&gt;&nbsp;f&nbsp;o&nbsp;h))<br/>
&nbsp;&nbsp;(feq&nbsp;:&nbsp;forall&nbsp;C:Type,&nbsp;IsEquiv&nbsp;(postcomp&nbsp;C))<br/>
&nbsp;&nbsp;:&nbsp;IsEquiv&nbsp;f.<br/>
<span class="comment">(*&nbsp;TODO&nbsp;*)</span><br/>
*)</span><br/>

<br/>
</div>

<div class="doc">
If <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> is an equivalence, then so is <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span>.  We are lazy and use <span class="inlinecode"><span class="id" title="var">adjointify</span></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_ap</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) | 1000<br/>
&nbsp;&nbsp;:= <span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)^  @  <span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">q</span>  @  <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">ap_pp</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ ((<span class="id" title="var">ap_V</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> @ <span class="id" title="var">inverse2</span> (<span class="id" title="var">eisadj</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@ (<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">f</span> <span class="id" title="var">_</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@@ (<span class="id" title="var">eisadj</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span>)^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_pA1_p</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">whiskerR</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap_compose</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span>^-1 <span class="id" title="var">_</span>)^) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_pA1_p</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerR</span> (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>).<br/>

<br/>
</div>

<div class="doc">
The function <span class="inlinecode"><span class="id" title="var">equiv_ind</span></span> says that given an equivalence <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span>, and a hypothesis from <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span>, one may always assume that the hypothesis is in the image of <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.e"><span class="id" title="variable">e</span></a></span>.

<div class="paragraph"> </div>

In fibrational terms, if we have a fibration over <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span> which has a section once pulled back along an equivalence <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">&lt;~&gt;</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span>, then it has a section over all of <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span>.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_ind</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) → <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>:<span class="id" title="var">B</span>, <span class="id" title="var">P</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>) (<span class="id" title="var">g</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">y</span>)).<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">equiv_ind</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span>} <span class="id" title="var">f</span> {<span class="id" title="var">_</span>} <span class="id" title="var">P</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_ind_comp</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">df</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>:<span class="id" title="var">A</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">equiv_ind</span> <span class="id" title="var">f</span> <span class="id" title="var">P</span> <span class="id" title="var">df</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">df</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">equiv_ind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eisadj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">transport_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">apD</span> <span class="id" title="var">df</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Using <span class="inlinecode"><span class="id" title="var">equiv_ind</span></span>, we define a handy little tactic which introduces a variable and simultaneously substitutes it along an equivalence. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">equiv_intro</span> <span class="id" title="var">E</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>, @?<span class="id" title="var">Q</span> <span class="id" title="var">y</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_ind</span> <span class="id" title="var">E</span> <span class="id" title="var">Q</span> <span class="id" title="var">_</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">equiv_composeR'</span></span>, a flipped version of <span class="inlinecode"><span class="id" title="var">equiv_compose'</span></span>, is (like <span class="inlinecode"><span class="id" title="var">concatR</span></span>) most often useful partially applied, to give the “first half” of an equivalence one is constructing and leave the rest as a subgoal. One could similarly define <span class="inlinecode"><span class="id" title="var">equiv_composeR</span></span> as a flip of <span class="inlinecode"><span class="id" title="var">equiv_compose</span></span>, but it doesn’t seem so useful since it doesn’t leave the remaining equivalence as a subgoal. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_composeR'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span>} (<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_compose'</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Shouldn't&nbsp;this&nbsp;become&nbsp;transitivity&nbsp;mid&nbsp;?&nbsp;*)</span><br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">equiv_via</span> <span class="id" title="var">mid</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> @<span class="id" title="var">equiv_composeR'</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">B</span> := <span class="id" title="var">mid</span>).<br/>

<br/>
</div>

<div class="doc">
It's often convenient when constructing a chain of equivalences to use <span class="inlinecode"><span class="id" title="var">equiv_compose'</span></span>, etc.  But when we treat an <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MRFSets.html#W.Equiv"><span class="id" title="definition">Equiv</span></a></span> object constructed in that way as a function, via the coercion <span class="inlinecode"><span class="id" title="var">equiv_fun</span></span>, Rocq sometimes needs a little help to realize that the result is the same as ordinary composition.  This tactic provides that help. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">ev_equiv</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">equiv_fun</span> (<span class="id" title="var">equiv_compose'</span> ?<span class="id" title="var">g</span> ?<span class="id" title="var">f</span>) ?<span class="id" title="var">a</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">equiv_compose'</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) <span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">equiv_fun</span> (<span class="id" title="var">equiv_compose</span> ?<span class="id" title="var">g</span> ?<span class="id" title="var">f</span>) ?<span class="id" title="var">a</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">equiv_compose</span> <span class="id" title="var">g</span> <span class="id" title="var">f</span>) <span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <span class="id" title="keyword">context</span>[<span class="id" title="var">equiv_fun</span> (<span class="id" title="var">equiv_inverse</span> ?<span class="id" title="var">f</span>) ?<span class="id" title="var">a</span>] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> ((<span class="id" title="var">equiv_inverse</span> <span class="id" title="var">f</span>) <span class="id" title="var">a</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Types/Paths.v&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_l</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_r</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_lr</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>)^ @ (<span class="id" title="var">concat_p1</span> (1 @ <span class="id" title="var">q</span>))^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_Fl</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">f</span> <span class="id" title="var">x1</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_Fr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">q</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">concat_p1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_FlFr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">f</span> <span class="id" title="var">x1</span> = <span class="id" title="var">g</span> <span class="id" title="var">x1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">q</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>)^ @ (<span class="id" title="var">concat_p1</span> (1 @ <span class="id" title="var">q</span>))^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_FlFr_D</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">f</span> <span class="id" title="var">x1</span> = <span class="id" title="var">g</span> <span class="id" title="var">x1</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">B</span> <span class="id" title="var">p</span>) <span class="id" title="var">q</span> @ (<span class="id" title="var">apD</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">ap_idmap</span> <span class="id" title="var">_</span>)^ @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^ @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_FFlr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>) = <span class="id" title="var">x1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>))^ @ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>)^ @ (<span class="id" title="var">concat_p1</span> (1 @ <span class="id" title="var">q</span>))^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths_lFFr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">p</span>^ @ <span class="id" title="var">q</span> @ (<span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">q</span>)^ @ (<span class="id" title="var">concat_p1</span> (1 @ <span class="id" title="var">q</span>))^).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_paths2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">idpath</span> <span class="id" title="var">a</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">a</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;=  (<span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>^ ((<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">concat_Vp</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">concat_1p</span> <span class="id" title="var">_</span>)^).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">H</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : 1 = <span class="id" title="var">p</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">q</span> @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>)^) @ (<span class="id" title="var">concat_1p</span> (<span class="id" title="var">p</span> @ 1))^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">whiskerL</span> (<span class="id" title="var">idpath</span> <span class="id" title="var">x</span>) (<span class="id" title="var">idpath</span> 1 @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">q</span> 1 @ <span class="id" title="var">idpath</span> (<span class="id" title="var">p</span> @ 1))).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span> <span class="id" title="var">q'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">q'</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">q</span> @ (<span class="id" title="var">concat_p1</span> 1)^ @ (<span class="id" title="var">concat_1p</span> 1)^).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">exact</span> ((<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^ @ (<span class="id" title="var">concat_p1</span> <span class="id" title="var">_</span>)^). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">H</span> 1 <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_ap</span> `(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">equiv_ap</span> (<span class="id" title="var">A</span> <span class="id" title="var">B</span>)%<span class="id" title="var">_type_scope</span> <span class="id" title="var">f</span>%<span class="id" title="var">_function_scope</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_ap'</span> `(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_ap</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>.<br/>

<br/>
<span class="comment">(*&nbsp;TODO:&nbsp;Is&nbsp;this&nbsp;really&nbsp;necessary?&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_inj</span> `(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>) → (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>)^-1.<br/>

<br/>
</div>

<div class="doc">
<a id="lab171"></a><h2 class="section">Path operations are equivalences</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_path_inverse</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">inverse</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">inverse</span> <span class="id" title="var">A</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">inv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">y</span> <span class="id" title="var">x</span>) (@<span class="id" title="var">inv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_path_inverse</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">inverse</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_concat_l</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>:&gt;<span class="id" title="var">A</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="tactic">transitivity</span> <span class="id" title="var">A</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">p</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">concat</span> <span class="id" title="var">p</span>^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">concat_p_Vp</span> <span class="id" title="var">p</span>) (<span class="id" title="var">concat_V_pp</span> <span class="id" title="var">p</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_concat_l</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">y</span> = <span class="id" title="var">z</span>) &lt;~&gt; (<span class="id" title="var">x</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">concat</span> <span class="id" title="var">p</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_concat_r</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">BuildIsEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">concat_pV_p</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">concat_pp_V</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_concat_r</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">x</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_concat_lr</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x'</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span> ⇒ <span class="id" title="var">p</span> @ <span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) | 0<br/>
&nbsp;&nbsp;:= @<span class="id" title="var">isequiv_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> ⇒ <span class="id" title="var">p</span> @ <span class="id" title="var">r</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> ⇒ <span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_concat_lr</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> <span class="id" title="var">y</span> <span class="id" title="var">y'</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x'</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">x'</span> = <span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span>:<span class="id" title="var">x</span>=<span class="id" title="var">y</span> ⇒ <span class="id" title="var">p</span> @ <span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_whiskerL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) {<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>}<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">whiskerL</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">cancelL</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">cancelL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="var">whiskerL_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">_</span> @@ 1 @@ <span class="id" title="var">_</span>) @ <span class="id" title="var">whiskerL_pVL</span> <span class="id" title="var">p</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">cancelL</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">_</span> @@ 1 @@ <span class="id" title="var">_</span>) @ <span class="id" title="var">whiskerL_VpL</span> <span class="id" title="var">p</span> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_whiskerL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">q</span> = <span class="id" title="var">r</span>) &lt;~&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_cancelL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span>) &lt;~&gt; (<span class="id" title="var">q</span> = <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_inverse</span> (<span class="id" title="var">equiv_whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_cancelL</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> <span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">cancelL</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">equiv_cancelL</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>)); <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_whiskerR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>} (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ @<span class="id" title="var">whiskerR</span> <span class="id" title="var">A</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">h</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">cancelR</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">cancelR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<span class="id" title="var">whiskerR_pp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">_</span> @@ 1 @@ <span class="id" title="var">_</span>) @ <span class="id" title="var">whiskerR_VpR</span> <span class="id" title="var">k</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">cancelR</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">_</span> @@ 1 @@ <span class="id" title="var">_</span>) @ <span class="id" title="var">whiskerR_pVR</span> <span class="id" title="var">k</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">r</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_whiskerR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> = <span class="id" title="var">q</span>) &lt;~&gt; (<span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> ⇒ <span class="id" title="var">whiskerR</span> <span class="id" title="var">h</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_cancelR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">r</span>) &lt;~&gt; (<span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_inverse</span> (<span class="id" title="var">equiv_whiskerR</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_cancelR</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">cancelR</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">equiv_cancelR</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>)); <span class="id" title="tactic">exact</span> <span class="id" title="var">_</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
We can use these to build up more complicated equivalences.

<div class="paragraph"> </div>

In particular, all of the <span class="inlinecode"><span class="id" title="tactic">move</span></span> family are equivalences.

<div class="paragraph"> </div>

(Note: currently, some but not all of these <span class="inlinecode"><span class="id" title="var">isequiv_</span></span> lemmas have corresponding <span class="inlinecode"><span class="id" title="var">equiv_</span></span> lemmas.  Also, they do *not* currently contain the computational content that e.g. the inverse of <span class="inlinecode"><span class="id" title="var">moveR_Mp</span></span> is <span class="inlinecode"><span class="id" title="var">moveL_Vp</span></span>; perhaps it would be useful if they did? 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_Mp</span><br/>
&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_Mp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_Mp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: (<span class="id" title="var">p</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span>) &lt;~&gt; (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_Mp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_pM</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_pM</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_pM</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: (<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^) &lt;~&gt; (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_pM</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_Vp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_Vp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">p</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">q</span>) &lt;~&gt; (<span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span> = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_pV</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_pV</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_pV</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: (<span class="id" title="var">r</span> = <span class="id" title="var">q</span> @ <span class="id" title="var">p</span>) &lt;~&gt; (<span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">q</span>)<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_pV</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_Mp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_Mp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_Mp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: (<span class="id" title="var">r</span>^ @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span>) &lt;~&gt; (<span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>)<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveL_Mp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveL_pM</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_pM</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_pM</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">q</span> @ <span class="id" title="var">p</span>^ = <span class="id" title="var">r</span> &lt;~&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_moveL_pM</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_Vp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_Vp</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">r</span> @ <span class="id" title="var">q</span> = <span class="id" title="var">p</span> &lt;~&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span>^ @ <span class="id" title="var">p</span><br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveL_Vp</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_pV</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_pV</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<span class="id" title="var">isequiv_compose'</span> <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_l</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> (<span class="id" title="var">isequiv_concat_r</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_pV</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">z</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">z</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">r</span> &lt;~&gt; <span class="id" title="var">q</span> = <span class="id" title="var">r</span> @ <span class="id" title="var">p</span>^<br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveL_pV</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> <span class="id" title="var">r</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveL_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_1M</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveL_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_M1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveL_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_1V</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveL_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_V1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_l</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveR_M1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_M1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveR_1M</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_1M</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveR_1V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_1V</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">isequiv_moveR_V1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_V1</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">isequiv_concat_r</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_moveL_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_moveR_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> (<span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_transport_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_moveL_transport_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_moveR_transport_p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">v</span> &lt;~&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">v</span><br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveR_moveL_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> (<span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">moveL_moveR_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> (<span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">q</span>) = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_transport_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_moveL_transport_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_moveR_transport_V</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span> &lt;~&gt; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">u</span> = <span class="id" title="var">v</span><br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveR_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_transport_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_moveR_transport_p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_moveL_transport_V</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_transport_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> = <span class="id" title="var">v</span> &lt;~&gt; <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">v</span><br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveL_transport_V</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">isequiv_adjointify</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_transport_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveL_moveR_transport_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_moveL_transport_p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_transport_p</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">v</span> : <span class="id" title="var">P</span> <span class="id" title="var">y</span>)<br/>
: <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span>^ <span class="id" title="var">u</span> = <span class="id" title="var">v</span> &lt;~&gt; <span class="id" title="var">u</span> = <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">v</span><br/>
:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">moveL_transport_p</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">moveR_equiv_M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">moveR_equiv_M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">isequiv_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">f</span>^-1 <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">moveR_equiv_M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveR_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">moveR_equiv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">moveR_equiv_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">isequiv_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> @ <span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveR_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">x</span> = <span class="id" title="var">f</span> <span class="id" title="var">y</span>) &lt;~&gt; (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">moveR_equiv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">moveL_equiv_M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">moveL_equiv_M</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">isequiv_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^ @ <span class="id" title="var">q</span>) <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_equiv_M</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span>^-1 <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) &lt;~&gt; (<span class="id" title="var">y</span> = <span class="id" title="var">f</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">moveL_equiv_M</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_moveL_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">moveL_equiv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">moveL_equiv_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (@<span class="id" title="var">isequiv_compose</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span>^-1) <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">y</span>)^ @ <span class="id" title="var">q</span>) <span class="id" title="var">_</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_moveL_equiv_V</span> `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} (<span class="id" title="var">x</span> : <span class="id" title="var">B</span>) (<span class="id" title="var">y</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span> <span class="id" title="var">y</span> = <span class="id" title="var">x</span>) &lt;~&gt; (<span class="id" title="var">y</span> = <span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">moveL_equiv_V</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span> <span class="id" title="var">_</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab172"></a><h3 class="section">Dependent paths</h3>

<div class="paragraph"> </div>

 Usually, a dependent path over <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a>:<span class="id" title="var">x1</span>=<span class="id" title="var">x2</span></span> in <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a>:<a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a>→<span class="id" title="keyword">Type</span></span> between <span class="inlinecode"><span class="id" title="var">y1</span>:<a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x1</span></span> and <span class="inlinecode"><span class="id" title="var">y2</span>:<a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x2</span></span> is a path <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MREquality.html#transport"><span class="id" title="definition">transport</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><span class="id" title="var">y1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y2</span></span> in <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x2</span></span>.  However, when <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> is a path space, these dependent paths have a more convenient description: rather than transporting the left side both forwards and backwards, we transport both sides of the equation forwards, forming a sort of "naturality square".

<div class="paragraph"> </div>

   We use the same naming scheme as for the transport lemmas. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_l</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x2</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_r</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y1</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_lr</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x1</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x2</span> = <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">q</span> @ 1 = <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) (<span class="id" title="var">q</span> @ 1)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_Fl</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y</span> : <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">f</span> <span class="id" title="var">x1</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">f</span> <span class="id" title="var">x2</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_Fr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">x</span> : <span class="id" title="var">B</span>} {<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y1</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span> = <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_FlFr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">f</span> <span class="id" title="var">x1</span> = <span class="id" title="var">g</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">f</span> <span class="id" title="var">x2</span> = <span class="id" title="var">g</span> <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">x</span> = <span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">q</span> @ 1 = <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) (<span class="id" title="var">q</span> @ 1)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_FFlr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>) = <span class="id" title="var">x1</span>) (<span class="id" title="var">r</span> : <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x2</span>) = <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">p</span> = <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>) = <span class="id" title="var">x</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">q</span> @ 1 = <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) (<span class="id" title="var">q</span> @ 1)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_path_lFFr</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>} {<span class="id" title="var">g</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x1</span>)) (<span class="id" title="var">r</span> : <span class="id" title="var">x2</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x2</span>))<br/>
&nbsp;&nbsp;: <span class="id" title="var">q</span> @ <span class="id" title="var">ap</span> <span class="id" title="var">g</span> (<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>) = <span class="id" title="var">p</span> @ <span class="id" title="var">r</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">x</span> = <span class="id" title="var">g</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">q</span> @ 1 = <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_r</span> (<span class="id" title="var">concat_1p</span> <span class="id" title="var">r</span>) (<span class="id" title="var">q</span> @ 1)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_concat_l</span> (<span class="id" title="var">concat_p1</span> <span class="id" title="var">q</span>)^ <span class="id" title="var">r</span>).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_paths2</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">x</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">idpath</span> <span class="id" title="var">y</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">y</span>)<br/>
: (<span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">whiskerR</span> <span class="id" title="var">q</span> <span class="id" title="var">p</span> @ <span class="id" title="var">concat_1p</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;= (<span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span>)^ @ <span class="id" title="var">whiskerL</span> <span class="id" title="var">p</span> <span class="id" title="var">r</span> @ <span class="id" title="var">concat_p1</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">idpath</span> <span class="id" title="var">a</span> = <span class="id" title="var">idpath</span> <span class="id" title="var">a</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span> = <span class="id" title="var">r</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">equiv_whiskerR</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 1)^-1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> <span class="id" title="var">oE</span> (<span class="id" title="var">equiv_whiskerL</span> 1 <span class="id" title="var">_</span> <span class="id" title="var">_</span>)^-1).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_concat_lr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">whiskerR_p1_1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">whiskerL_1p_1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab173"></a><h2 class="section">Universal mapping property</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_paths_ind</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, (<span class="id" title="var">a</span> = <span class="id" title="var">x</span>) → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">paths_ind</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">paths_ind</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">a</span> 1) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">u</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_paths_ind</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">P</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, (<span class="id" title="var">a</span> = <span class="id" title="var">x</span>) → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">P</span> <span class="id" title="var">a</span> 1 &lt;~&gt; <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">paths_ind</span> <span class="id" title="var">a</span> <span class="id" title="var">P</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Types/Forall.v&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">AssumeFunext</span>.<br/>
<span class="id" title="keyword">Context</span> `{<span class="id" title="var">Funext</span>}.<br/>

<br/>
</div>

<div class="doc">
<a id="lab174"></a><h2 class="section">Paths</h2>

<div class="paragraph"> </div>

 Paths <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> in a function type <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>:<a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#bigprod.X"><span class="id" title="variable">X</span></a>,</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> are equivalent to functions taking values in path types, <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">∀</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>:<a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#bigprod.X"><span class="id" title="variable">X</span></a>,</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">=</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span>, or concisely, <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.f"><span class="id" title="variable">f</span></a></span> <span class="inlinecode">==</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadOperations.g"><span class="id" title="variable">g</span></a></span>.

<div class="paragraph"> </div>

This equivalence, however, is just the combination of <span class="inlinecode"><span class="id" title="var">apD10</span></span> and function extensionality <span class="inlinecode"><span class="id" title="var">funext</span></span>, and as such, <span class="inlinecode"><span class="id" title="var">path_forall</span></span>, et seq. are given in the <span class="inlinecode"><span class="id" title="var">Overture</span></span>:  
<div class="paragraph"> </div>

 Now we show how these things compute. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD10_path_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">f</span> == <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">apD10</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>) == <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">apD10</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">apD10</span> <span class="id" title="var">h</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta_path_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">apD10</span> <span class="id" title="var">p</span>) = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">eissect</span> <span class="id" title="var">apD10</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_forall_1</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ 1)) = 1<br/>
&nbsp;&nbsp;:= <span class="id" title="var">eta_path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">f</span> 1.<br/>

<br/>
</div>

<div class="doc">
The identification of the path space of a dependent function space, up to equivalence, is of course just funext. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_apD10</span> `{<span class="id" title="var">Funext</span>} {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) <span class="id" title="var">f</span> <span class="id" title="var">g</span><br/>
: (<span class="id" title="var">f</span> = <span class="id" title="var">g</span>) &lt;~&gt; (<span class="id" title="var">f</span> == <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_path_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) | 0<br/>
&nbsp;&nbsp;:= @<span class="id" title="var">isequiv_inverse</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_path_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">f</span> == <span class="id" title="var">g</span>)  &lt;~&gt;  (<span class="id" title="var">f</span> = <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Global Arguments</span> <span class="id" title="var">equiv_path_forall</span> {<span class="id" title="var">A</span>%<span class="id" title="var">_type_scope</span> <span class="id" title="var">P</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span>)%<span class="id" title="var">_function_scope</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab175"></a><h2 class="section">Path algebra</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_forall_pp</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> == <span class="id" title="var">g</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">g</span> == <span class="id" title="var">h</span>)<br/>
: <span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">h</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">p</span> <span class="id" title="var">x</span> @ <span class="id" title="var">q</span> <span class="id" title="var">x</span>) = <span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">p</span> @ <span class="id" title="var">path_forall</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span> <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">equiv_intro</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">equiv_intro</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">g</span> <span class="id" title="var">h</span>) <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">h</span> (<span class="id" title="var">apD10</span> (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>))).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">apD10_pp</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">eta_path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">concat2</span>; <span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">eta_path_forall</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_forall_V</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">f</span> == <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ (<span class="id" title="var">p</span> <span class="id" title="var">x</span>)^) = (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ (<span class="id" title="var">apD10</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>) <span class="id" title="var">x</span>)^)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">ap</span>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> (@<span class="id" title="var">ap</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> <span class="id" title="var">x</span> ⇒ (<span class="id" title="var">h</span> <span class="id" title="var">x</span>)^)). <span class="id" title="tactic">apply</span> <span class="id" title="var">eisretr</span>.<br/>
&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">apD10</span> (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>)^)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">inverse</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">apD10_V</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eissect</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab176"></a><h2 class="section">Transport</h2>

<div class="paragraph"> </div>

 The concrete description of transport in sigmas and pis is rather trickier than in the other types. In particular, these cannot be described just in terms of transport in simpler types; they require the full Id-elim rule by way of "dependent transport" <span class="inlinecode"><span class="id" title="var">transportD</span></span>.

<div class="paragraph"> </div>

  In particular this indicates why "transport" alone cannot be fully defined by induction on the structure of types, although Id-elim/transportD can be (cf. Observational Type Theory). A more thorough set of lemmas, along the lines of the present ones but dealing with Id-elim rather than just transport, might be nice to have eventually? 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_forall</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">P</span> <span class="id" title="var">x</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">P</span> <span class="id" title="var">x1</span>, <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x2</span>) (<span class="id" title="var">transport_pV</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) (<span class="id" title="var">transportD</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span> (<span class="id" title="var">f</span> (<span class="id" title="var">p</span>^ # <span class="id" title="var">y</span>)))).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
A special case of <span class="inlinecode"><span class="id" title="var">transport_forall</span></span> where the type <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> does not depend on <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span>,
    and so it is just a fixed type <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.COMBINE.B"><span class="id" title="variable">B</span></a></span>. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_forall_constant</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">f</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;== (<span class="id" title="keyword">fun</span> <span class="id" title="var">y</span> ⇒ <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">y</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">apD_transport_forall_constant</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;{<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">B</span>} (<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
: <span class="id" title="var">apD</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span> : <span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">f</span>) <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> (<span class="id" title="var">C</span> <span class="id" title="var">x2</span>) <span class="id" title="var">q</span>) (<span class="id" title="var">transport_forall_constant</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">transport_transport</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">f</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> : <span class="id" title="var">A</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y2</span>) <span class="id" title="var">p</span>) (<span class="id" title="var">apD</span> <span class="id" title="var">f</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;@ (<span class="id" title="var">transport_forall_constant</span> <span class="id" title="var">p</span> <span class="id" title="var">f</span> <span class="id" title="var">y2</span>)^.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab177"></a><h2 class="section">Maps on paths</h2>

<div class="paragraph"> </div>

 The action of maps given by application. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_apply_lD</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) (<span class="id" title="var">z</span> : <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">z</span>) <span class="id" title="var">p</span> = <span class="id" title="var">apD10</span> <span class="id" title="var">p</span> <span class="id" title="var">z</span><br/>
:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_apply_lD2</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} { <span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span>, <span class="id" title="var">B</span> <span class="id" title="var">x</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">f</span> <span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">f</span> = <span class="id" title="var">g</span>) (<span class="id" title="var">z1</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">z2</span> : <span class="id" title="var">B</span> <span class="id" title="var">z1</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">z1</span> <span class="id" title="var">z2</span>) <span class="id" title="var">p</span> = <span class="id" title="var">apD10</span> (<span class="id" title="var">apD10</span> <span class="id" title="var">p</span> <span class="id" title="var">z1</span>) <span class="id" title="var">z2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The action of maps given by lambda. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_lambdaD</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">C</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>) (<span class="id" title="var">M</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">C</span> <span class="id" title="var">b</span>) :<br/>
&nbsp;&nbsp;<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">M</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">p</span> =<br/>
&nbsp;&nbsp;<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">M</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) <span class="id" title="var">p</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall_1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab178"></a><h2 class="section">Dependent paths</h2>

<div class="paragraph"> </div>

 Usually, a dependent path over <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a>:<span class="id" title="var">x1</span>=<span class="id" title="var">x2</span></span> in <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a>:<a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a>→<span class="id" title="keyword">Type</span></span> between <span class="inlinecode"><span class="id" title="var">y1</span>:<a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x1</span></span> and <span class="inlinecode"><span class="id" title="var">y2</span>:<a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x2</span></span> is a path <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.MREquality.html#transport"><span class="id" title="definition">transport</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.All_Forall.html#alli.p"><span class="id" title="variable">p</span></a></span> <span class="inlinecode"><span class="id" title="var">y1</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">y2</span></span> in <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><span class="id" title="var">x2</span></span>.  However, when <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> is a function space, these dependent paths have a more convenient description: rather than transporting the argument of <span class="inlinecode"><span class="id" title="var">y1</span></span> forwards and backwards, we transport only forwards but on both sides of the equation, yielding a "naturality square". 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_forall</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span>:<span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">C</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x1</span> <span class="id" title="var">x2</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">p</span>:<span class="id" title="var">x1</span>=<span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">y1</span>:<span class="id" title="var">B</span> <span class="id" title="var">x1</span>, <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>) (<span class="id" title="var">g</span>:<span class="id" title="keyword">∀</span> (<span class="id" title="var">y2</span>:<span class="id" title="var">B</span> <span class="id" title="var">x2</span>), <span class="id" title="var">C</span> <span class="id" title="var">x2</span> <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> (<span class="id" title="var">y1</span>:<span class="id" title="var">B</span> <span class="id" title="var">x1</span>), <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">p</span> <span class="id" title="var">y1</span> (<span class="id" title="var">f</span> <span class="id" title="var">y1</span>) = <span class="id" title="var">g</span> (<span class="id" title="var">transport</span> <span class="id" title="var">B</span> <span class="id" title="var">p</span> <span class="id" title="var">y1</span>))<br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>:<span class="id" title="var">B</span> <span class="id" title="var">x</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">f</span> = <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_path_forall</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_forall_constant</span><br/>
&nbsp;&nbsp;{<span class="id" title="var">A</span> <span class="id" title="var">B</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x1</span> <span class="id" title="var">x2</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">p</span>:<span class="id" title="var">x1</span>=<span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span>:<span class="id" title="keyword">∀</span> (<span class="id" title="var">y1</span>:<span class="id" title="var">B</span>), <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y1</span>) (<span class="id" title="var">g</span>:<span class="id" title="keyword">∀</span> (<span class="id" title="var">y2</span>:<span class="id" title="var">B</span>), <span class="id" title="var">C</span> <span class="id" title="var">x2</span> <span class="id" title="var">y2</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> (<span class="id" title="var">y1</span>:<span class="id" title="var">B</span>), <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y1</span>) <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">y1</span>) = <span class="id" title="var">g</span> <span class="id" title="var">y1</span>)<br/>
&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">∀</span> <span class="id" title="var">y</span>:<span class="id" title="var">B</span>, <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>) <span class="id" title="var">p</span> <span class="id" title="var">f</span> = <span class="id" title="var">g</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">equiv_path_forall</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab179"></a><h2 class="section">Functorial action</h2>

<div class="paragraph"> </div>

 The functoriality of <span class="inlinecode"><span class="id" title="keyword">∀</span></span> is slightly subtle: it is contravariant in the domain type and covariant in the codomain, but the codomain is dependent on the domain. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f0</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>) (<span class="id" title="var">f1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f0</span> <span class="id" title="var">b</span>) → <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) → (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">f1</span> <span class="id" title="var">_</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f0</span> <span class="id" title="var">b</span>))).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_functor_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f0</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>) (<span class="id" title="var">f1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f0</span> <span class="id" title="var">b</span>) → <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> <span class="id" title="var">g'</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) (<span class="id" title="var">h</span> : <span class="id" title="var">g</span> == <span class="id" title="var">g'</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f0</span> <span class="id" title="var">f1</span>) (<span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">path_forall</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span> ⇒ (<span class="id" title="var">ap</span> (<span class="id" title="var">f1</span> <span class="id" title="var">b</span>) (<span class="id" title="var">h</span> (<span class="id" title="var">f0</span> <span class="id" title="var">b</span>)))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">h</span>. <span class="id" title="var">equiv_intro</span> (@<span class="id" title="var">apD10</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">g</span> <span class="id" title="var">g'</span>) <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">transitivity</span> (<span class="id" title="var">idpath</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f0</span> <span class="id" title="var">f1</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">ap</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f0</span> <span class="id" title="var">f1</span>)) (<span class="id" title="var">path_forall_1</span> <span class="id" title="var">g</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall_1</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_forall_compose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">R</span> : <span class="id" title="var">C</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f0</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>) (<span class="id" title="var">f1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>:<span class="id" title="var">B</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f0</span> <span class="id" title="var">b</span>) → <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g0</span> : <span class="id" title="var">C</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">c</span>:<span class="id" title="var">C</span>, <span class="id" title="var">Q</span> (<span class="id" title="var">g0</span> <span class="id" title="var">c</span>) → <span class="id" title="var">R</span> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">k</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">functor_forall</span> <span class="id" title="var">g0</span> <span class="id" title="var">g1</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f0</span> <span class="id" title="var">f1</span> <span class="id" title="var">k</span>) == <span class="id" title="var">functor_forall</span> (<span class="id" title="var">f0</span> <span class="id" title="var">o</span> <span class="id" title="var">g0</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">c</span> ⇒ <span class="id" title="var">g1</span> <span class="id" title="var">c</span> <span class="id" title="var">o</span> <span class="id" title="var">f1</span> (<span class="id" title="var">g0</span> <span class="id" title="var">c</span>)) <span class="id" title="var">k</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ 1.<br/>

<br/>
</div>

<div class="doc">
<a id="lab180"></a><h2 class="section">Equivalences</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_functor_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>} `{<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, @<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)) (<span class="id" title="var">Q</span> <span class="id" title="var">b</span>) (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) | 1000.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">functor_forall</span> (<span class="id" title="var">f</span>^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">x</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">y</span>:<span class="id" title="var">Q</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>)) ⇒ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span> # (<span class="id" title="var">g</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>))^-1 <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>; <span class="comment">(*&nbsp;https://coq.inria.fr/bugs/show_bug.cgi?id=3848&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_forall</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eisadj</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">transport_compose</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ap_transport</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eisretr</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">apD</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">unfold</span> <span class="id" title="var">functor_forall</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eissect</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">apD</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> → <span class="id" title="var">A</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">B</span> <span class="id" title="var">A</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>) → <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, @<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>)) (<span class="id" title="var">Q</span> <span class="id" title="var">b</span>) (<span class="id" title="var">g</span> <span class="id" title="var">b</span>)}<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall'</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">A</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>) &lt;~&gt; <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_forall</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall_id</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> &lt;~&gt; <span class="id" title="var">Q</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">Q</span> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_forall</span> (<span class="id" title="var">equiv_idmap</span> <span class="id" title="var">A</span>) <span class="id" title="var">g</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall_pb</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> (<span class="id" title="var">f</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_forall'</span> (<span class="id" title="var">Q</span> := <span class="id" title="var">P</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>) <span class="id" title="var">f</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">equiv_idmap</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall_pf</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">A</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, (<span class="id" title="var">Q</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">a</span>))) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_functor_forall'</span> (<span class="id" title="var">P</span> := <span class="id" title="var">Q</span> <span class="id" title="var">o</span> <span class="id" title="var">f</span>^-1) <span class="id" title="var">f</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">equiv_transport</span> <span class="id" title="var">Q</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
There is another way to make forall functorial that acts on on equivalences only. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall_covariant</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> &lt;~&gt; <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_adjointify</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<span class="id" title="var">k</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) <span class="id" title="var">b</span> ⇒ <span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> # (<span class="id" title="var">g</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>) (<span class="id" title="var">k</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">b</span>))))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">h</span> <span class="id" title="var">a</span> ⇒ (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)^-1 (<span class="id" title="var">h</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">apD</span> <span class="id" title="var">h</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ap</span>, <span class="id" title="var">eisretr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">k</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ <span class="id" title="var">apD</span> <span class="id" title="var">k</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">moveR_equiv_V</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">ap_transport</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>) <span class="id" title="var">g</span> (<span class="id" title="var">k</span> (<span class="id" title="var">f</span>^-1 (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))))^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">_</span> @ (<span class="id" title="var">transport_compose</span> <span class="id" title="var">Q</span> <span class="id" title="var">f</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>) <span class="id" title="var">_</span>)^).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">Q</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span>) (<span class="id" title="var">eisadj</span> <span class="id" title="var">f</span> <span class="id" title="var">a</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_forall_covariant_compose</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">R</span> : <span class="id" title="var">C</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f0</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>) (<span class="id" title="var">f1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> &lt;~&gt; <span class="id" title="var">Q</span> (<span class="id" title="var">f0</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g0</span> : <span class="id" title="var">B</span> &lt;~&gt; <span class="id" title="var">C</span>) (<span class="id" title="var">g1</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">b</span>, <span class="id" title="var">Q</span> <span class="id" title="var">b</span> &lt;~&gt; <span class="id" title="var">R</span> (<span class="id" title="var">g0</span> <span class="id" title="var">b</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">h</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">equiv_functor_forall_covariant</span> <span class="id" title="var">g0</span> <span class="id" title="var">g1</span> (<span class="id" title="var">equiv_functor_forall_covariant</span> <span class="id" title="var">f0</span> <span class="id" title="var">f1</span> <span class="id" title="var">h</span>) <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;= <span class="id" title="var">equiv_functor_forall_covariant</span> (<span class="id" title="var">g0</span> <span class="id" title="var">oE</span> <span class="id" title="var">f0</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">g1</span> (<span class="id" title="var">f0</span> <span class="id" title="var">a</span>) <span class="id" title="var">oE</span> <span class="id" title="var">f1</span> <span class="id" title="var">a</span>) <span class="id" title="var">h</span> <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">ap_transport</span> <span class="id" title="var">_</span> <span class="id" title="var">g1</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">transport_compose</span> <span class="id" title="var">R</span> <span class="id" title="var">g0</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">transport_pp</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab181"></a><h2 class="section">Truncatedness: any dependent product of n-types is an n-type</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">contr_forall</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">Contr</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>)}<br/>
&nbsp;&nbsp;: <span class="id" title="var">Contr</span> (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) | 100.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">center</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">contr</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Global&nbsp;Instance&nbsp;trunc_forall&nbsp;`{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;`{forall&nbsp;a,&nbsp;IsTrunc&nbsp;n&nbsp;(P&nbsp;a)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:&nbsp;IsTrunc&nbsp;n&nbsp;(forall&nbsp;a,&nbsp;P&nbsp;a)&nbsp;|&nbsp;100.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;generalize&nbsp;dependent&nbsp;P.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;simple_induction&nbsp;n&nbsp;n&nbsp;IH;&nbsp;simpl;&nbsp;intros&nbsp;P&nbsp;?.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;case&nbsp;<span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">-2</span>,&nbsp;i.e.&nbsp;contractibility&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;exact&nbsp;_.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;case&nbsp;n&nbsp;=&nbsp;n'.+1&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&nbsp;intros&nbsp;f&nbsp;g;&nbsp;apply&nbsp;(trunc_equiv&nbsp;_&nbsp;(apD10&nbsp;^-1)).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
<a id="lab182"></a><h2 class="section">Contractibility: A product over a contractible type is equivalent to the fiber over the center.</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_contr_forall</span> `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>} `(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>)<br/>
: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) &lt;~&gt; <span class="id" title="var">P</span> (<span class="id" title="var">center</span> <span class="id" title="var">A</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_adjointify</span> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">f</span>:<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span>) ⇒ <span class="id" title="var">f</span> (<span class="id" title="var">center</span> <span class="id" title="var">A</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">exact</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> (<span class="id" title="var">path_contr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">transport2</span> <span class="id" title="var">P</span> (<span class="id" title="var">q</span> := 1) <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">path_contr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">path_forall</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">apD</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab183"></a><h2 class="section">Symmetry of curried arguments</h2>

<div class="paragraph"> </div>

 Using the standard Haskell name for this, as it’s a handy utility function.

<div class="paragraph"> </div>

Note: not sure if <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> will usually be deducible, or whether it would be better explicit. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">flip</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) → (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">f</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_flip</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">flip</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">flip_P</span> := @<span class="id" title="var">flip</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">flip_P_inv</span> := @<span class="id" title="var">flip</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">flip</span> <span class="id" title="var">P</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">flip_P_is_sect</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">f</span> ⇒ 1) : <span class="id" title="var">Sect</span> <span class="id" title="var">flip_P</span> <span class="id" title="var">flip_P_inv</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">flip_P_is_retr</span> := (<span class="id" title="keyword">fun</span> <span class="id" title="var">g</span> ⇒ 1) : <span class="id" title="var">Sect</span> <span class="id" title="var">flip_P_inv</span> <span class="id" title="var">flip_P</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">flip_P_inv</span> <span class="id" title="var">flip_P_is_retr</span> <span class="id" title="var">flip_P_is_sect</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">g</span>. <span class="id" title="tactic">exact</span> 1.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_flip</span> `(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>) &lt;~&gt; (<span class="id" title="keyword">∀</span> <span class="id" title="var">b</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (@<span class="id" title="var">flip</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">AssumeFunext</span>.<br/>

<br/>
<span class="comment">(*&nbsp;Types/Sigma.v&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
In homotopy type theory, We think of elements of <span class="inlinecode"><span class="id" title="keyword">Type</span></span> as spaces, homotopy types, or weak omega-groupoids. A type family <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">→</span> <span class="inlinecode"><span class="id" title="keyword">Type</span></span> corresponds to a fibration whose base is <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> and whose fiber over <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> is <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span>.

<div class="paragraph"> </div>

From such a <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> we can build a total space over the base space <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> so that the fiber over <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> is <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span>. This is just Rocq's dependent sum construction, written as <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Specif.html#sigT"><span class="id" title="inductive">sigT</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> or <span class="inlinecode">{<a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>}</span>. The elements of <span class="inlinecode">{<a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>}</span> are pairs, written <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.y"><span class="id" title="variable">y</span></a></span> in Rocq, where <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.y"><span class="id" title="variable">y</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span>.  In <span class="inlinecode"><span class="id" title="var">Common.v</span></span> we defined the notation <span class="inlinecode">(<a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>;<a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.y"><span class="id" title="variable">y</span></a>)</span> to mean <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.y"><span class="id" title="variable">y</span></a></span>.

<div class="paragraph"> </div>

The base and fiber components of a point in the total space are extracted with the two projections <span class="inlinecode"><span class="id" title="projection">pr1</span></span> and <span class="inlinecode"><span class="id" title="projection">pr2</span></span>. 
<div class="paragraph"> </div>

<a id="lab184"></a><h2 class="section">Unpacking</h2>

<div class="paragraph"> </div>

 Sometimes we would like to prove <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.monad_utils.html#MonadAllAll.Q"><span class="id" title="variable">Q</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> where <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode">{<a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a></span> <span class="inlinecode">:</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Examples.add_constructor.html#A"><span class="id" title="module">A</span></a></span> <span class="inlinecode">&amp;</span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.canonicaltries.CanonicalTries.html#PTree.TREE_IND.P"><span class="id" title="variable">P</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.Utils.wGraph.html#WeightedGraph.RelabelWrtEdge.RelabelWrtEdge.RelabelCoefs.x"><span class="id" title="variable">x</span></a>}</span> by writing <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> as a pair <span class="inlinecode">(<span class="id" title="projection">pr1</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> <span class="inlinecode">;</span> <span class="inlinecode"><span class="id" title="projection">pr2</span></span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a>)</span>. This is accomplished by <span class="inlinecode"><span class="id" title="var">sigT_unpack</span></span>. We want tight control over the proof, so we just write it down even though is looks a bit scary. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">unpack_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">Q</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
: <span class="id" title="var">Q</span> (<span class="id" title="var">u</span>.1; <span class="id" title="var">u</span>.2) → <span class="id" title="var">Q</span> <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">idmap</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">unpack_sigma</span> / .<br/>

<br/>
</div>

<div class="doc">
<a id="lab185"></a><h2 class="section">Eta conversion</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">u</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: (<span class="id" title="var">u</span>.1; <span class="id" title="var">u</span>.2) = <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eta_sigma</span> / .<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta2_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span> <span class="id" title="var">a</span>), <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">sigT</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>)))<br/>
&nbsp;&nbsp;: (<span class="id" title="var">u</span>.1; (<span class="id" title="var">u</span>.2.1; <span class="id" title="var">u</span>.2.2)) = <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eta2_sigma</span> / .<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta3_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="keyword">∀</span> (<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">b</span> : <span class="id" title="var">B</span> <span class="id" title="var">a</span>) (<span class="id" title="var">c</span> : <span class="id" title="var">C</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>), <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">u</span> : <span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ <span class="id" title="var">sigT</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">sigT</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span>))))<br/>
&nbsp;&nbsp;: (<span class="id" title="var">u</span>.1; (<span class="id" title="var">u</span>.2.1; (<span class="id" title="var">u</span>.2.2.1; <span class="id" title="var">u</span>.2.2.2))) = <span class="id" title="var">u</span><br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <span class="id" title="var">eta3_sigma</span> / .<br/>

<br/>
</div>

<div class="doc">
<a id="lab186"></a><h2 class="section">Paths</h2>

<div class="paragraph"> </div>

 A path in a total space is commonly shown component wise. Because we use this over and over, we write down the proofs by hand to make sure they are what we think they should be. 
<div class="paragraph"> </div>

 With this version of the function, we often have to give <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a></span> explicitly, so we make them explicit arguments. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma_uncurried</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pq</span> : {<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2})<br/>
: <span class="id" title="var">u</span> = <span class="id" title="var">v</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>, <span class="id" title="var">v</span>, <span class="id" title="var">pq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">projT7</span>, <span class="id" title="var">projT8</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This is the curried one you usually want to use in practice.  We define it in terms of the uncurried one, since it's the uncurried one that is proven below to be an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
: <span class="id" title="var">u</span> = <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> (<span class="id" title="var">p</span>;<span class="id" title="var">q</span>).<br/>

<br/>
</div>

<div class="doc">
A contravariant instance of <span class="inlinecode"><span class="id" title="var">path_sigma_uncurried</span></span> 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma_uncurried_contra</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pq</span> : {<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">u</span>.2 = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>.2})<br/>
: <span class="id" title="var">u</span> = <span class="id" title="var">v</span><br/>
&nbsp;&nbsp;:= (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">P</span> <span class="id" title="var">v</span> <span class="id" title="var">u</span> (<span class="id" title="var">pq</span>.1^;<span class="id" title="var">pq</span>.2^))^.<br/>

<br/>
</div>

<div class="doc">
A variant of <span class="inlinecode"><span class="id" title="var">Forall.dpath_forall</span></span> from which uses dependent sums to package things. It cannot go into <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a></span> because <span class="inlinecode"><a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICInstConv.html#Sigma"><span class="id" title="section">Sigma</span></a></span> depends on <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">dpath_forall'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span> } (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">Q</span>: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">h</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">p</span>, <span class="id" title="var">Q</span> (<span class="id" title="var">x</span> ; <span class="id" title="var">p</span>)) (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">p</span>, <span class="id" title="var">Q</span> (<span class="id" title="var">y</span> ; <span class="id" title="var">p</span>))<br/>
:<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span>, <span class="id" title="var">transport</span> <span class="id" title="var">Q</span> (<span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> (<span class="id" title="var">x</span> ; <span class="id" title="var">p</span>) (<span class="id" title="var">y</span>; <span class="id" title="var">_</span>) <span class="id" title="var">h</span> 1) (<span class="id" title="var">f</span> <span class="id" title="var">p</span>) = <span class="id" title="var">g</span> (<span class="id" title="var">h</span> # <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&lt;~&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <span class="id" title="var">p</span>, <span class="id" title="var">transportD</span> <span class="id" title="var">P</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒ <span class="id" title="var">Q</span> ( <span class="id" title="var">x</span> ; <span class="id" title="var">p</span>)) <span class="id" title="var">h</span> <span class="id" title="var">p</span> (<span class="id" title="var">f</span> <span class="id" title="var">p</span>) = <span class="id" title="var">g</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">h</span> <span class="id" title="var">p</span>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> 1%<span class="id" title="var">equiv</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This version produces only paths between pairs, as opposed to paths between arbitrary inhabitants of dependent sum types.  But it has the advantage that the components of those pairs can more often be inferred, so we make them implicit arguments. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma'</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">x</span> <span class="id" title="var">x'</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">y</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>} {<span class="id" title="var">y'</span> : <span class="id" title="var">P</span> <span class="id" title="var">x'</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">x'</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">y</span> = <span class="id" title="var">y'</span>)<br/>
: (<span class="id" title="var">x</span>;<span class="id" title="var">y</span>) = (<span class="id" title="var">x'</span>;<span class="id" title="var">y'</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> (<span class="id" title="var">x</span>;<span class="id" title="var">y</span>) (<span class="id" title="var">x'</span>;<span class="id" title="var">y'</span>) <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>

<br/>
</div>

<div class="doc">
Projections of paths from a total space. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
: <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1<br/>
&nbsp;&nbsp;:=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> <span class="id" title="var">p</span>.<br/>
<span class="comment">(*&nbsp;match&nbsp;p&nbsp;with&nbsp;idpath&nbsp;=&gt;&nbsp;1&nbsp;end.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p ..1" := (<span class="id" title="var">pr1_path</span> <span class="id" title="var">p</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3) : <span class="id" title="var">fibration_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr2_path</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
: <span class="id" title="var">p</span>..1 # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2<br/>
&nbsp;&nbsp;:= (<span class="id" title="var">transport_compose</span> <span class="id" title="var">P</span> <span class="id" title="var">pr1</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>.2)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (@<span class="id" title="var">apD</span> {<span class="id" title="var">x</span>:<span class="id" title="var">A</span> &amp; <span class="id" title="var">P</span> <span class="id" title="var">x</span>} <span class="id" title="var">_</span> <span class="id" title="var">pr2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>

<br/>
<span class="id" title="keyword">Notation</span> &quot;p ..2" := (<span class="id" title="var">pr2_path</span> <span class="id" title="var">p</span>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 3) : <span class="id" title="var">fibration_scope</span>.<br/>

<br/>
</div>

<div class="doc">
Now we show how these things compute. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path_sigma_uncurried</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pq</span> : { <span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2 })<br/>
: (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pq</span>)..1 = <span class="id" title="var">pq</span>.1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u1</span> <span class="id" title="var">u2</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr2_path_sigma_uncurried</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pq</span> : { <span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2 })<br/>
: (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pq</span>)..2<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">s</span> <span class="id" title="var">u</span>.2) (<span class="id" title="var">pr1_path_sigma_uncurried</span> <span class="id" title="var">pq</span>) @ <span class="id" title="var">pq</span>.2.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u1</span> <span class="id" title="var">u2</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta_path_sigma_uncurried</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
: <span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">p</span>..1; <span class="id" title="var">p</span>..2) = <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">transport_pr1_path_sigma_uncurried</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">pq</span> : { <span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2 })<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Q</span><br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>.1) (@<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">pq</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> <span class="id" title="var">_</span> <span class="id" title="var">pq</span>.1.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pq</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">p</span> <span class="id" title="var">q</span>], <span class="id" title="var">u</span>, <span class="id" title="var">v</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
: (<span class="id" title="var">path_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)..1 = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr1_path_sigma_uncurried</span> (<span class="id" title="var">p</span>; <span class="id" title="var">q</span>).<br/>

<br/>
<span class="comment">(*&nbsp;Writing&nbsp;it&nbsp;the&nbsp;other&nbsp;way&nbsp;can&nbsp;help&nbsp;<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>.&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_pr1_path_sigma</span> {<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> <span class="id" title="var">pr1</span> (<span class="id" title="var">path_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr1_path_sigma</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr2_path_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
: (<span class="id" title="var">path_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)..2<br/>
&nbsp;&nbsp;= <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">s</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">s</span> <span class="id" title="var">u</span>.2) (<span class="id" title="var">pr1_path_sigma</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) @ <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">pr2_path_sigma_uncurried</span> (<span class="id" title="var">p</span>; <span class="id" title="var">q</span>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">eta_path_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
: <span class="id" title="var">path_sigma</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">p</span>..1) (<span class="id" title="var">p</span>..2) = <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">eta_path_sigma_uncurried</span> <span class="id" title="var">p</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_pr1_path_sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Q</span><br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">Q</span> <span class="id" title="var">x</span>.1) (@<span class="id" title="var">path_sigma</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">transport_pr1_path_sigma_uncurried</span> (<span class="id" title="var">p</span>; <span class="id" title="var">q</span>) <span class="id" title="var">Q</span>.<br/>

<br/>
</div>

<div class="doc">
This lets us identify the path space of a sigma-type, up to equivalence. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_path_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) | 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simple</span> <span class="id" title="tactic">refine</span> (<span class="id" title="var">BuildIsEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">r</span> ⇒ (<span class="id" title="var">r</span>..1; <span class="id" title="var">r</span>..2))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eta_path_sigma</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>, <span class="id" title="var">v</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">p</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>, <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_path_sigma</span> `(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
: {<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp;  <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2} &lt;~&gt; (<span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">path_sigma_uncurried</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;contravariant&nbsp;version&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">isequiv_path_sigma'</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_path_sigma_contra</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">path_sigma_uncurried_contra</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) | 0.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">path_sigma_uncurried_contra</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">∃</span> 1. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intro</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u1</span> <span class="id" title="var">u2</span>]; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>, <span class="id" title="var">v</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">p</span> <span class="id" title="var">q</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="comment">(*&nbsp;A&nbsp;contravariant&nbsp;version&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">equiv_path_sigma</span></span>&nbsp;*)</span><br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_path_sigma_contra</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} `(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;: {<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1 &amp; <span class="id" title="var">u</span>.2 = <span class="id" title="var">p</span>^ # <span class="id" title="var">v</span>.2} &lt;~&gt; (<span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">path_sigma_uncurried_contra</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span>) <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
This identification respects path concatenation. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma_pp_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) {<span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p1</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q1</span> : <span class="id" title="var">p1</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p2</span> : <span class="id" title="var">v</span>.1 = <span class="id" title="var">w</span>.1) (<span class="id" title="var">q2</span> : <span class="id" title="var">p2</span> # <span class="id" title="var">v</span>.2 = <span class="id" title="var">w</span>.2)<br/>
: <span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">w</span> (<span class="id" title="var">p1</span> @ <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">u</span>.2 @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p2</span>) <span class="id" title="var">q1</span> @ <span class="id" title="var">q2</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">p1</span> <span class="id" title="var">q1</span> @ <span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> <span class="id" title="var">p2</span> <span class="id" title="var">q2</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span>, <span class="id" title="var">v</span>, <span class="id" title="var">w</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p1</span>, <span class="id" title="var">p2</span>, <span class="id" title="var">q1</span>, <span class="id" title="var">q2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma_pp_pp'</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">u1</span> <span class="id" title="var">v1</span> <span class="id" title="var">w1</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">u2</span> : <span class="id" title="var">P</span> <span class="id" title="var">u1</span>} {<span class="id" title="var">v2</span> : <span class="id" title="var">P</span> <span class="id" title="var">v1</span>} {<span class="id" title="var">w2</span> : <span class="id" title="var">P</span> <span class="id" title="var">w1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p1</span> : <span class="id" title="var">u1</span> = <span class="id" title="var">v1</span>) (<span class="id" title="var">q1</span> : <span class="id" title="var">p1</span> # <span class="id" title="var">u2</span> = <span class="id" title="var">v2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p2</span> : <span class="id" title="var">v1</span> = <span class="id" title="var">w1</span>) (<span class="id" title="var">q2</span> : <span class="id" title="var">p2</span> # <span class="id" title="var">v2</span> = <span class="id" title="var">w2</span>)<br/>
: <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> (<span class="id" title="var">p1</span> @ <span class="id" title="var">p2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">transport_pp</span> <span class="id" title="var">P</span> <span class="id" title="var">p1</span> <span class="id" title="var">p2</span> <span class="id" title="var">u2</span> @ <span class="id" title="var">ap</span> (<span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">p2</span>) <span class="id" title="var">q1</span> @ <span class="id" title="var">q2</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> <span class="id" title="var">p1</span> <span class="id" title="var">q1</span> @ <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> <span class="id" title="var">p2</span> <span class="id" title="var">q2</span><br/>
&nbsp;&nbsp;:= @<span class="id" title="var">path_sigma_pp_pp</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span> (<span class="id" title="var">u1</span>;<span class="id" title="var">u2</span>) (<span class="id" title="var">v1</span>;<span class="id" title="var">v2</span>) (<span class="id" title="var">w1</span>;<span class="id" title="var">w2</span>) <span class="id" title="var">p1</span> <span class="id" title="var">q1</span> <span class="id" title="var">p2</span> <span class="id" title="var">q2</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_sigma_p1_1p'</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">u1</span> <span class="id" title="var">v1</span> : <span class="id" title="var">A</span>} {<span class="id" title="var">u2</span> : <span class="id" title="var">P</span> <span class="id" title="var">u1</span>} {<span class="id" title="var">v2</span> : <span class="id" title="var">P</span> <span class="id" title="var">v1</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u1</span> = <span class="id" title="var">v1</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u2</span> = <span class="id" title="var">v2</span>)<br/>
: <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> <span class="id" title="var">p</span> 1 @ <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> 1 <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">pr1_path</span></span> also commutes with the groupoid structure. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path_1</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">u</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
: (<span class="id" title="var">idpath</span> <span class="id" title="var">u</span>) ..1 = <span class="id" title="var">idpath</span> (<span class="id" title="var">u</span> .1)<br/>
&nbsp;&nbsp;:= 1.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path_pp</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">w</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>) (<span class="id" title="var">q</span> : <span class="id" title="var">v</span> = <span class="id" title="var">w</span>)<br/>
: (<span class="id" title="var">p</span> @ <span class="id" title="var">q</span>) ..1 = (<span class="id" title="var">p</span> ..1) @ (<span class="id" title="var">q</span> ..1)<br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap_pp</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">pr1_path_V</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
: <span class="id" title="var">p</span>^ ..1 = (<span class="id" title="var">p</span> ..1)^<br/>
&nbsp;&nbsp;:= <span class="id" title="var">ap_V</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Applying <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Specif.html#existT"><span class="id" title="constructor">existT</span></a></span> to one argument is the same as <span class="inlinecode"><span class="id" title="var">path_sigma</span></span> with reflexivity in the first place. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_existT</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">x</span> : <span class="id" title="var">A</span>) (<span class="id" title="var">y1</span> <span class="id" title="var">y2</span> : <span class="id" title="var">P</span> <span class="id" title="var">x</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">q</span> : <span class="id" title="var">y1</span> = <span class="id" title="var">y2</span>)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">existT</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span>) <span class="id" title="var">q</span> = <span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> 1 <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Dependent transport is the same as transport along a <span class="inlinecode"><span class="id" title="var">path_sigma</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transportD_is_transport</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">A</span>:<span class="id" title="keyword">Type</span>} (<span class="id" title="var">B</span>:<span class="id" title="var">A</span>→<span class="id" title="keyword">Type</span>) (<span class="id" title="var">C</span>:<span class="id" title="var">sigT</span> <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">x1</span> <span class="id" title="var">x2</span>:<span class="id" title="var">A</span>) (<span class="id" title="var">p</span>:<span class="id" title="var">x1</span>=<span class="id" title="var">x2</span>) (<span class="id" title="var">y</span>:<span class="id" title="var">B</span> <span class="id" title="var">x1</span>) (<span class="id" title="var">z</span>:<span class="id" title="var">C</span> (<span class="id" title="var">x1</span>;<span class="id" title="var">y</span>))<br/>
: <span class="id" title="var">transportD</span> <span class="id" title="var">B</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> ⇒ <span class="id" title="var">C</span> (<span class="id" title="var">a</span>;<span class="id" title="var">b</span>)) <span class="id" title="var">p</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span><br/>
&nbsp;&nbsp;= <span class="id" title="var">transport</span> <span class="id" title="var">C</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">B</span> <span class="id" title="var">p</span> 1) <span class="id" title="var">z</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Applying a two variable function to a <span class="inlinecode"><span class="id" title="var">path_sigma</span></span>. 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;ap_path_sigma&nbsp;{A&nbsp;B}&nbsp;(P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type)&nbsp;(F&nbsp;:&nbsp;forall&nbsp;a&nbsp;:&nbsp;A,&nbsp;P&nbsp;a&nbsp;-&gt;&nbsp;B)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{x&nbsp;x'&nbsp;:&nbsp;A}&nbsp;{y&nbsp;:&nbsp;P&nbsp;x}&nbsp;{y'&nbsp;:&nbsp;P&nbsp;x'}&nbsp;(p&nbsp;:&nbsp;x&nbsp;=&nbsp;x')&nbsp;(q&nbsp;:&nbsp;p&nbsp; y = y') *)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:&nbsp;ap&nbsp;(fun&nbsp;w&nbsp;=&gt;&nbsp;F&nbsp;w.1&nbsp;w.2)&nbsp;(path_sigma'&nbsp;P&nbsp;p&nbsp;q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ap&nbsp;_&nbsp;(moveL_transport_V&nbsp;_&nbsp;p&nbsp;_&nbsp;_&nbsp;q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;(transport_arrow_toconst&nbsp;_&nbsp;_&nbsp;_)^&nbsp;@&nbsp;ap10&nbsp;(apD&nbsp;F&nbsp;p)&nbsp;y'.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;p,&nbsp;q;&nbsp;reflexivity.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Remark:&nbsp;this&nbsp;is&nbsp;also&nbsp;equal&nbsp;to:&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;ap10&nbsp;(apD&nbsp;F&nbsp;p^)^&nbsp;y&nbsp;@&nbsp;transport_arrow_toconst&nbsp;_&nbsp;_&nbsp;_&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;ap&nbsp;(F&nbsp;x')&nbsp;(transport2&nbsp;_&nbsp;(inv_V&nbsp;p)&nbsp;y&nbsp;@&nbsp;q).&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
And we can simplify when the first equality is <span class="inlinecode">1</span>. 
</div>
<div class="code">
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">ap_path_sigma_1p</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} (<span class="id" title="var">F</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> → <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">a</span> : <span class="id" title="var">A</span>) {<span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">P</span> <span class="id" title="var">a</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x</span> = <span class="id" title="var">y</span>)<br/>
&nbsp;&nbsp;: <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">w</span> ⇒ <span class="id" title="var">F</span> <span class="id" title="var">w</span>.1 <span class="id" title="var">w</span>.2) (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> 1 <span class="id" title="var">p</span>) = <span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">z</span> ⇒ <span class="id" title="var">F</span> <span class="id" title="var">a</span> <span class="id" title="var">z</span>) <span class="id" title="var">p</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Applying a function constructed with <span class="inlinecode"><span class="id" title="var">sigT_ind</span></span> to a <span class="inlinecode"><span class="id" title="var">path_sigma</span></span> can be computed.  Technically this computation should probably go by way of a 2-variable <span class="inlinecode"><span class="id" title="var">ap</span></span>, and should be done in the dependently typed case. 
</div>
<div class="code">

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;ap_sigT_rec_path_sigma&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;(P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type)&nbsp;{Q&nbsp;:&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(x1&nbsp;x2:A)&nbsp;(p:x1=x2)&nbsp;(y1:P&nbsp;x1)&nbsp;(y2:P&nbsp;x2)&nbsp;(q:p&nbsp; y1 = y2) *)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(d&nbsp;:&nbsp;forall&nbsp;a,&nbsp;P&nbsp;a&nbsp;-&gt;&nbsp;Q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;ap&nbsp;(sigT_ind&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;Q)&nbsp;d)&nbsp;(path_sigma'&nbsp;P&nbsp;p&nbsp;q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;=&nbsp;(transport_const&nbsp;p&nbsp;_)^&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;(ap&nbsp;((transport&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;Q)&nbsp;p)&nbsp;o&nbsp;(d&nbsp;x1))&nbsp;(transport_Vp&nbsp;_&nbsp;p&nbsp;y1))^&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;(transport_arrow&nbsp;p&nbsp;_&nbsp;_)^&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;ap10&nbsp;(apD&nbsp;d&nbsp;p)&nbsp;(p&nbsp; y1) *)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;ap&nbsp;(d&nbsp;x2)&nbsp;q.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;destruct&nbsp;p.&nbsp;destruct&nbsp;q.&nbsp;reflexivity.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
A path between paths in a total space is commonly shown component wise. 
<div class="paragraph"> </div>

 With this version of the function, we often have to give <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a></span> and <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a></span> explicitly, so we make them explicit arguments. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_path_sigma_uncurried</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">rs</span> : {<span class="id" title="var">r</span> : <span class="id" title="var">p</span>..1 = <span class="id" title="var">q</span>..1 &amp; <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2) <span class="id" title="var">r</span> <span class="id" title="var">p</span>..2 = <span class="id" title="var">q</span>..2})<br/>
: <span class="id" title="var">p</span> = <span class="id" title="var">q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">rs</span>, <span class="id" title="var">p</span>, <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; [ | <span class="id" title="tactic">apply</span> <span class="id" title="var">eta_path_sigma</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">projT4</span>, <span class="id" title="var">projT3</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
This is the curried one you usually want to use in practice.  We define it in terms of the uncurried one, since it's the uncurried one that is proven below to be an equivalence. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_path_sigma</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">p</span> <span class="id" title="var">q</span> : <span class="id" title="var">u</span> = <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">r</span> : <span class="id" title="var">p</span>..1 = <span class="id" title="var">q</span>..1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">s</span> : <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">transport</span> <span class="id" title="var">P</span> <span class="id" title="var">x</span> <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2) <span class="id" title="var">r</span> <span class="id" title="var">p</span>..2 = <span class="id" title="var">q</span>..2)<br/>
: <span class="id" title="var">p</span> = <span class="id" title="var">q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">path_path_sigma_uncurried</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span> (<span class="id" title="var">r</span>; <span class="id" title="var">s</span>).<br/>

<br/>
</div>

<div class="doc">
<a id="lab187"></a><h2 class="section">Transport</h2>

<div class="paragraph"> </div>

 The concrete description of transport in sigmas (and also pis) is rather trickier than in the other types.  In particular, these cannot be described just in terms of transport in simpler types; they require also the dependent transport <span class="inlinecode"><span class="id" title="var">transportD</span></span>.

<div class="paragraph"> </div>

  In particular, this indicates why "transport" alone cannot be fully defined by induction on the structure of types, although Id-elim/transportD can be (cf. Observational Type Theory).  A more thorough set of lemmas, along the lines of the present ones but dealing with Id-elim rather than just transport, might be nice to have eventually? 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_sigma</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} {<span class="id" title="var">C</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">yz</span> : { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span> &amp; <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> })<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x</span> &amp; <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> }) <span class="id" title="var">p</span> <span class="id" title="var">yz</span><br/>
&nbsp;&nbsp;= (<span class="id" title="var">p</span> # <span class="id" title="var">yz</span>.1 ; <span class="id" title="var">transportD</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">yz</span>.1 <span class="id" title="var">yz</span>.2).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">yz</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">y</span> <span class="id" title="var">z</span>]. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
The special case when the second variable doesn't depend on the first is simpler. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_sigma'</span> {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>) (<span class="id" title="var">yz</span> : { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> &amp; <span class="id" title="var">C</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> })<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> &amp; <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> }) <span class="id" title="var">p</span> <span class="id" title="var">yz</span> =<br/>
&nbsp;&nbsp;(<span class="id" title="var">yz</span>.1 ; <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">C</span> <span class="id" title="var">x</span> <span class="id" title="var">yz</span>.1) <span class="id" title="var">p</span> <span class="id" title="var">yz</span>.2).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">yz</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
Or if the second variable contains a first component that doesn't depend on the first.  Need to think about the naming of these. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">transport_sigma_'</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">B</span> <span class="id" title="var">C</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">D</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>:<span class="id" title="var">A</span>, <span class="id" title="var">B</span> <span class="id" title="var">a</span> → <span class="id" title="var">C</span> <span class="id" title="var">a</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">x1</span> <span class="id" title="var">x2</span> : <span class="id" title="var">A</span>} (<span class="id" title="var">p</span> : <span class="id" title="var">x1</span> = <span class="id" title="var">x2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">yzw</span> : { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x1</span> &amp; { <span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x1</span> &amp; <span class="id" title="var">D</span> <span class="id" title="var">x1</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> } })<br/>
: <span class="id" title="var">transport</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ { <span class="id" title="var">y</span> : <span class="id" title="var">B</span> <span class="id" title="var">x</span> &amp; { <span class="id" title="var">z</span> : <span class="id" title="var">C</span> <span class="id" title="var">x</span> &amp; <span class="id" title="var">D</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">z</span> } }) <span class="id" title="var">p</span> <span class="id" title="var">yzw</span><br/>
&nbsp;&nbsp;= (<span class="id" title="var">p</span> # <span class="id" title="var">yzw</span>.1 ; (<span class="id" title="var">p</span> # <span class="id" title="var">yzw</span>.2.1 ; <span class="id" title="var">transportD2</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">yzw</span>.1 <span class="id" title="var">yzw</span>.2.1 <span class="id" title="var">yzw</span>.2.2)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab188"></a><h2 class="section">Functorial action</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">functor_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> → <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> → <span class="id" title="var">sigT</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <span class="id" title="var">u</span> ⇒ (<span class="id" title="var">f</span> <span class="id" title="var">u</span>.1 ; <span class="id" title="var">g</span> <span class="id" title="var">u</span>.1 <span class="id" title="var">u</span>.2).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">ap_functor_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) (<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> → <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">u</span> <span class="id" title="var">v</span> : <span class="id" title="var">sigT</span> <span class="id" title="var">P</span>) (<span class="id" title="var">p</span> : <span class="id" title="var">u</span>.1 = <span class="id" title="var">v</span>.1) (<span class="id" title="var">q</span> : <span class="id" title="var">p</span> # <span class="id" title="var">u</span>.2 = <span class="id" title="var">v</span>.2)<br/>
: <span class="id" title="var">ap</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) (<span class="id" title="var">path_sigma</span> <span class="id" title="var">P</span> <span class="id" title="var">u</span> <span class="id" title="var">v</span> <span class="id" title="var">p</span> <span class="id" title="var">q</span>)<br/>
&nbsp;&nbsp;= <span class="id" title="var">path_sigma</span> <span class="id" title="var">Q</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">u</span>) (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ap</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((<span class="id" title="var">transport_compose</span> <span class="id" title="var">Q</span> <span class="id" title="var">f</span> <span class="id" title="var">p</span> (<span class="id" title="var">g</span> <span class="id" title="var">u</span>.1 <span class="id" title="var">u</span>.2))^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ (@<span class="id" title="var">ap_transport</span> <span class="id" title="var">_</span> <span class="id" title="var">P</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> ⇒ <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span> <span class="id" title="var">g</span> <span class="id" title="var">u</span>.2)^<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@ <span class="id" title="var">ap</span> (<span class="id" title="var">g</span> <span class="id" title="var">v</span>.1) <span class="id" title="var">q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u1</span> <span class="id" title="var">u2</span>]; <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v1</span> <span class="id" title="var">v2</span>]; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>, <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">q</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab189"></a><h2 class="section">Equivalences</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_functor_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>} `{<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, @<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>) (<span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)}<br/>
: <span class="id" title="var">IsEquiv</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) | 1000.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">functor_sigma</span> (<span class="id" title="var">f</span>^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> ⇒ ((<span class="id" title="var">g</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>))^-1 ((<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>)^ # <span class="id" title="var">y</span>)))) <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">x</span> <span class="id" title="var">y</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">eisretr</span> (<span class="id" title="var">g</span> (<span class="id" title="var">f</span>^-1 <span class="id" title="var">x</span>)));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_pV</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>) <span class="id" title="var">_</span>); <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="var">ap_transport</span> (<span class="id" title="var">eissect</span> <span class="id" title="var">f</span> <span class="id" title="var">x</span>) (<span class="id" title="keyword">fun</span> <span class="id" title="var">x'</span> ⇒ (<span class="id" title="var">g</span> <span class="id" title="var">x'</span>) ^-1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">transport</span> <span class="id" title="var">Q</span> (<span class="id" title="var">eisretr</span> <span class="id" title="var">f</span> (<span class="id" title="var">f</span> <span class="id" title="var">x</span>)) ^ (<span class="id" title="var">g</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>)))^ @ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">abstract</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">transport_compose</span>, <span class="id" title="var">eisadj</span>, <span class="id" title="var">transport_pV</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">eissect</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_sigma</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> → <span class="id" title="var">B</span>) `{<span class="id" title="var">IsEquiv</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">f</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> → <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, @<span class="id" title="var">IsEquiv</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>) (<span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>)) (<span class="id" title="var">g</span> <span class="id" title="var">a</span>)}<br/>
: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> &lt;~&gt; <span class="id" title="var">sigT</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>) <span class="id" title="var">_</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_sigma'</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">B</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">f</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> &lt;~&gt; <span class="id" title="var">Q</span> (<span class="id" title="var">f</span> <span class="id" title="var">a</span>))<br/>
: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> &lt;~&gt; <span class="id" title="var">sigT</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_sigma</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_functor_sigma_id</span> `{<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>} `{<span class="id" title="var">Q</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">g</span> : <span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">P</span> <span class="id" title="var">a</span> &lt;~&gt; <span class="id" title="var">Q</span> <span class="id" title="var">a</span>)<br/>
: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> &lt;~&gt; <span class="id" title="var">sigT</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">equiv_functor_sigma'</span> 1 <span class="id" title="var">g</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 3.11.9(i): Summing up a contractible family of types does nothing. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Global Instance</span> <span class="id" title="var">isequiv_pr1_contr</span> {<span class="id" title="var">A</span>} {<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">Contr</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>)}<br/>
: <span class="id" title="var">IsEquiv</span> (@<span class="id" title="var">pr1</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>) | 100.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">isequiv_adjointify</span> (@<span class="id" title="var">pr1</span> <span class="id" title="var">A</span> <span class="id" title="var">P</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">a</span> ⇒ (<span class="id" title="var">a</span> ; <span class="id" title="var">center</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>))) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">P</span> 1 (<span class="id" title="var">contr</span> <span class="id" title="var">_</span>)).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_sigma_contr</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{<span class="id" title="keyword">∀</span> <span class="id" title="var">a</span>, <span class="id" title="var">Contr</span> (<span class="id" title="var">P</span> <span class="id" title="var">a</span>)}<br/>
: <span class="id" title="var">sigT</span> <span class="id" title="var">P</span> &lt;~&gt; <span class="id" title="var">A</span><br/>
&nbsp;&nbsp;:= <span class="id" title="var">BuildEquiv</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pr1</span> <span class="id" title="var">_</span>.<br/>

<br/>
</div>

<div class="doc">
Lemma 3.11.9(ii): Dually, summing up over a contractible type does nothing. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_contr_sigma</span> {<span class="id" title="var">A</span> : <span class="id" title="keyword">Type</span>} (<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) `{<span class="id" title="var">Contr</span> <span class="id" title="var">A</span>}<br/>
: { <span class="id" title="var">x</span> : <span class="id" title="var">A</span> &amp; <span class="id" title="var">P</span> <span class="id" title="var">x</span> } &lt;~&gt; <span class="id" title="var">P</span> (<span class="id" title="var">center</span> <span class="id" title="var">A</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">equiv_adjointify</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">xp</span> ⇒ (<span class="id" title="var">contr</span> <span class="id" title="var">xp</span>.1)^ # <span class="id" title="var">xp</span>.2)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">p</span> ⇒ (<span class="id" title="var">center</span> <span class="id" title="var">A</span> ; <span class="id" title="var">p</span>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<span class="id" title="var">ap</span> (<span class="id" title="keyword">fun</span> <span class="id" title="var">q</span> ⇒ <span class="id" title="var">q</span> # <span class="id" title="var">p</span>) (<span class="id" title="var">path_contr</span> <span class="id" title="var">_</span> 1)).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span> <span class="id" title="var">p</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<span class="id" title="var">path_sigma'</span> <span class="id" title="var">_</span> (<span class="id" title="var">contr</span> <span class="id" title="var">a</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">transport_pV</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
</div>

<div class="doc">
<a id="lab190"></a><h2 class="section">Associativity</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">equiv_sigma_assoc</span> `(<span class="id" title="var">P</span> : <span class="id" title="var">A</span> → <span class="id" title="keyword">Type</span>) (<span class="id" title="var">Q</span> : {<span class="id" title="var">a</span> : <span class="id" title="var">A</span> &amp; <span class="id" title="var">P</span> <span class="id" title="var">a</span>} → <span class="id" title="keyword">Type</span>)<br/>
: {<span class="id" title="var">a</span> : <span class="id" title="var">A</span> &amp; {<span class="id" title="var">p</span> : <span class="id" title="var">P</span> <span class="id" title="var">a</span> &amp; <span class="id" title="var">Q</span> (<span class="id" title="var">a</span>;<span class="id" title="var">p</span>)}} &lt;~&gt; <span class="id" title="var">sigT</span> <span class="id" title="var">Q</span><br/>
&nbsp;&nbsp;:= @<span class="id" title="var">BuildEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@<span class="id" title="var">BuildIsEquiv</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<span class="id" title="var">a</span> : <span class="id" title="var">A</span> &amp; {<span class="id" title="var">p</span> : <span class="id" title="var">P</span> <span class="id" title="var">a</span> &amp; <span class="id" title="var">Q</span> (<span class="id" title="var">a</span>;<span class="id" title="var">p</span>)}} (<span class="id" title="var">sigT</span> <span class="id" title="var">Q</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">apq</span> ⇒ ((<span class="id" title="var">apq</span>.1; <span class="id" title="var">apq</span>.2.1); <span class="id" title="var">apq</span>.2.2))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">apq</span> ⇒ (<span class="id" title="var">apq</span>.1.1; (<span class="id" title="var">apq</span>.1.2; <span class="id" title="var">apq</span>.2)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ 1)).<br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigma_prod&nbsp;`(Q&nbsp;:&nbsp;(A&nbsp;*&nbsp;B)&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;{b&nbsp;:&nbsp;B&nbsp;&amp;&nbsp;Q&nbsp;(a,b)}}&nbsp;&lt;~&gt;&nbsp;sigT&nbsp;Q&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;@BuildEquiv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;_&nbsp;_&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(@BuildIsEquiv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;{b&nbsp;:&nbsp;B&nbsp;&amp;&nbsp;Q&nbsp;(a,b)}}&nbsp;(sigT&nbsp;Q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;apq&nbsp;=&gt;&nbsp;((apq.1,&nbsp;apq.2.1);&nbsp;apq.2.2))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;apq&nbsp;=&gt;&nbsp;(fst&nbsp;apq.1;&nbsp;(snd&nbsp;apq.1;&nbsp;apq.2)))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigma_prod0&nbsp;A&nbsp;B&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;B}&nbsp;&lt;~&gt;&nbsp;A&nbsp;*&nbsp;B&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildEquiv&nbsp;_&nbsp;_&nbsp;_&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(BuildIsEquiv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;B}&nbsp;(A&nbsp;*&nbsp;B)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;(ab&nbsp;:&nbsp;{a:A&nbsp;&amp;&nbsp;B})&nbsp;=&gt;&nbsp;(ab.1&nbsp;,&nbsp;ab.2))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;(ab&nbsp;:&nbsp;A*B)&nbsp;=&gt;&nbsp;(fst&nbsp;ab&nbsp;;&nbsp;snd&nbsp;ab))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;**&nbsp;Symmetry&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigma_symm&nbsp;`(P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;B&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;{b&nbsp;:&nbsp;B&nbsp;&amp;&nbsp;P&nbsp;a&nbsp;b}}&nbsp;&lt;~&gt;&nbsp;{b&nbsp;:&nbsp;B&nbsp;&amp;&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;P&nbsp;a&nbsp;b}}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;((equiv_sigma_prod&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;P&nbsp;(snd&nbsp;x)&nbsp;(fst&nbsp;x)))^-1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oE&nbsp;(equiv_functor_sigma'&nbsp;(equiv_prod_symm&nbsp;A&nbsp;B)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;equiv_idmap&nbsp;(P&nbsp;(fst&nbsp;x)&nbsp;(snd&nbsp;x))))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oE&nbsp;(equiv_sigma_prod&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;P&nbsp;(fst&nbsp;x)&nbsp;(snd&nbsp;x))).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigma_symm0&nbsp;(A&nbsp;B&nbsp;:&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{a&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;B}&nbsp;&lt;~&gt;&nbsp;{b&nbsp;:&nbsp;B&nbsp;&amp;&nbsp;A}.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;refine&nbsp;(BuildEquiv&nbsp;_&nbsp;_&nbsp;(fun&nbsp;(w:{a:A&nbsp;&amp;&nbsp;B})&nbsp;=&gt;&nbsp;(w.2&nbsp;;&nbsp;w.1))&nbsp;_).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;simple&nbsp;refine&nbsp;(BuildIsEquiv&nbsp;_&nbsp;_&nbsp;_&nbsp;(fun&nbsp;(z:{b:B&nbsp;&amp;&nbsp;A})&nbsp;=&gt;&nbsp;(z.2&nbsp;;&nbsp;z.1))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;_&nbsp;_);&nbsp;intros&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span>;&nbsp;reflexivity.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;**&nbsp;Universal&nbsp;mapping&nbsp;properties&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;***&nbsp;The&nbsp;positive&nbsp;universal&nbsp;property.&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Global&nbsp;Instance&nbsp;isequiv_sigT_ind&nbsp;`{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Q&nbsp;:&nbsp;sigT&nbsp;P&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsEquiv&nbsp;(sigT_ind&nbsp;Q)&nbsp;|&nbsp;0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildIsEquiv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;_&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sigT_ind&nbsp;Q)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;f&nbsp;x&nbsp;y&nbsp;=&gt;&nbsp;f&nbsp;(x;y))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigT_ind&nbsp;`{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(Q&nbsp;:&nbsp;sigT&nbsp;P&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;(forall&nbsp;(x:A)&nbsp;(y:P&nbsp;x),&nbsp;Q&nbsp;(x;y))&nbsp;&lt;~&gt;&nbsp;(forall&nbsp;xy,&nbsp;Q&nbsp;xy)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildEquiv&nbsp;_&nbsp;_&nbsp;(sigT_ind&nbsp;Q)&nbsp;_.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;***&nbsp;The&nbsp;negative&nbsp;universal&nbsp;property.&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;sigT_coind_uncurried&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{A&nbsp;:&nbsp;X&nbsp;-&gt;&nbsp;Type}&nbsp;(P&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{&nbsp;f&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;&amp;&nbsp;forall&nbsp;x,&nbsp;P&nbsp;x&nbsp;(f&nbsp;x)&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;-&gt;&nbsp;(forall&nbsp;x,&nbsp;sigT&nbsp;(P&nbsp;x))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;fun&nbsp;fg&nbsp;=&gt;&nbsp;fun&nbsp;x&nbsp;=&gt;&nbsp;(fg.1&nbsp;x&nbsp;;&nbsp;fg.2&nbsp;x).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;sigT_coind&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{A&nbsp;:&nbsp;X&nbsp;-&gt;&nbsp;Type}&nbsp;(P&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(f&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x)&nbsp;(g&nbsp;:&nbsp;forall&nbsp;x,&nbsp;P&nbsp;x&nbsp;(f&nbsp;x))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;(forall&nbsp;x,&nbsp;sigT&nbsp;(P&nbsp;x))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;sigT_coind_uncurried&nbsp;P&nbsp;(f;g).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Global&nbsp;Instance&nbsp;isequiv_sigT_coind&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{A&nbsp;:&nbsp;X&nbsp;-&gt;&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsEquiv&nbsp;(sigT_coind_uncurried&nbsp;P)&nbsp;|&nbsp;0&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildIsEquiv&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_&nbsp;_&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sigT_coind_uncurried&nbsp;P)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;h&nbsp;=&gt;&nbsp;existT&nbsp;(fun&nbsp;f&nbsp;=&gt;&nbsp;forall&nbsp;x,&nbsp;P&nbsp;x&nbsp;(f&nbsp;x))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;(h&nbsp;x).1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;x&nbsp;=&gt;&nbsp;(h&nbsp;x).2))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(fun&nbsp;_&nbsp;=&gt;&nbsp;1).&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_sigT_coind&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`(A&nbsp;:&nbsp;X&nbsp;-&gt;&nbsp;Type)&nbsp;(P&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;-&gt;&nbsp;Type)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;{&nbsp;f&nbsp;:&nbsp;forall&nbsp;x,&nbsp;A&nbsp;x&nbsp;&amp;&nbsp;forall&nbsp;x,&nbsp;P&nbsp;x&nbsp;(f&nbsp;x)&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;~&gt;&nbsp;(forall&nbsp;x,&nbsp;sigT&nbsp;(P&nbsp;x))&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildEquiv&nbsp;_&nbsp;_&nbsp;(sigT_coind_uncurried&nbsp;P)&nbsp;_.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;**&nbsp;Sigmas&nbsp;preserve&nbsp;truncation&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Global&nbsp;Instance&nbsp;trunc_sigma&nbsp;`{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{IsTrunc&nbsp;n&nbsp;A}&nbsp;`{forall&nbsp;a,&nbsp;IsTrunc&nbsp;n&nbsp;(P&nbsp;a)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsTrunc&nbsp;n&nbsp;(sigT&nbsp;P)&nbsp;|&nbsp;100.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;generalize&nbsp;dependent&nbsp;A.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;induction&nbsp;n;&nbsp;simpl;&nbsp;intros&nbsp;A&nbsp;P&nbsp;ac&nbsp;Pc.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;{&nbsp;exists&nbsp;(center&nbsp;A;&nbsp;center&nbsp;(P&nbsp;(center&nbsp;A))).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intros&nbsp;<span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">?</span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refine&nbsp;(path_sigma'&nbsp;P&nbsp;(contr&nbsp;a)&nbsp;(path_contr&nbsp;_&nbsp;_)).&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;{&nbsp;intros&nbsp;u&nbsp;v.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;refine&nbsp;(trunc_equiv&nbsp;_&nbsp;(path_sigma_uncurried&nbsp;P&nbsp;u&nbsp;v)).&nbsp;}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;The&nbsp;sigma&nbsp;of&nbsp;an&nbsp;arbitrary&nbsp;family&nbsp;of&nbsp;*disjoint*&nbsp;hprops&nbsp;is&nbsp;an&nbsp;hprop.&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;ishprop_sigma_disjoint&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;`{forall&nbsp;a,&nbsp;IsHProp&nbsp;(P&nbsp;a)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;(forall&nbsp;x&nbsp;y,&nbsp;P&nbsp;x&nbsp;-&gt;&nbsp;P&nbsp;y&nbsp;-&gt;&nbsp;x&nbsp;=&nbsp;y)&nbsp;-&gt;&nbsp;IsHProp&nbsp;{&nbsp;x&nbsp;:&nbsp;A&nbsp;&amp;&nbsp;P&nbsp;x&nbsp;}.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;intros&nbsp;dj;&nbsp;apply&nbsp;hprop_allpath;&nbsp;intros&nbsp;<span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">px</span></span>&nbsp;<span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="var">py</span></span>.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;refine&nbsp;(path_sigma'&nbsp;P&nbsp;(dj&nbsp;x&nbsp;y&nbsp;px&nbsp;py)&nbsp;_).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;apply&nbsp;path_ishprop.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;**&nbsp;Subtypes&nbsp;(sigma&nbsp;types&nbsp;whose&nbsp;second&nbsp;components&nbsp;are&nbsp;hprops)&nbsp;*)</span>&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;To&nbsp;prove&nbsp;equality&nbsp;in&nbsp;a&nbsp;subtype,&nbsp;we&nbsp;only&nbsp;need&nbsp;equality&nbsp;of&nbsp;the&nbsp;first&nbsp;component.&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;path_sigma_hprop&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;u.1&nbsp;=&nbsp;v.1&nbsp;-&gt;&nbsp;u&nbsp;=&nbsp;v&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;path_sigma_uncurried&nbsp;P&nbsp;u&nbsp;v&nbsp;o&nbsp;pr1^-1.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Global&nbsp;Instance&nbsp;isequiv_path_sigma_hprop&nbsp;{A&nbsp;P}&nbsp;`{forall&nbsp;x&nbsp;:&nbsp;A,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;{u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsEquiv&nbsp;(@path_sigma_hprop&nbsp;A&nbsp;P&nbsp;_&nbsp;u&nbsp;v)&nbsp;|&nbsp;100&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;isequiv_compose.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Hint&nbsp;Immediate&nbsp;isequiv_path_sigma_hprop&nbsp;:&nbsp;typeclass_instances.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;equiv_path_sigma_hprop&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{HP&nbsp;:&nbsp;forall&nbsp;a,&nbsp;IsHProp&nbsp;(P&nbsp;a)}&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;(u.1&nbsp;=&nbsp;v.1)&nbsp;&lt;~&gt;&nbsp;(u&nbsp;=&nbsp;v)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;BuildEquiv&nbsp;_&nbsp;_&nbsp;(path_sigma_hprop&nbsp;_&nbsp;_)&nbsp;_.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;isequiv_pr1_path_hprop&nbsp;{A}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;a,&nbsp;IsHProp&nbsp;(P&nbsp;a)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;y&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsEquiv&nbsp;(@pr1_path&nbsp;A&nbsp;P&nbsp;x&nbsp;y)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;_&nbsp;:&nbsp;IsEquiv&nbsp;(path_sigma_hprop&nbsp;x&nbsp;y)^-1.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Hint&nbsp;Immediate&nbsp;isequiv_pr1_path_hprop&nbsp;:&nbsp;typeclass_instances.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;We&nbsp;define&nbsp;this&nbsp;for&nbsp;ease&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">SearchAbout</span></span> <span class="inlinecode"><span class="id" title="var">IsEquiv</span></span> <span class="inlinecode"><span class="id" title="var">ap</span></span> <span class="inlinecode"><span class="id" title="var">pr1</span></span>&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;isequiv_ap_pr1_hprop&nbsp;{A}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;a,&nbsp;IsHProp&nbsp;(P&nbsp;a)}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;y&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;IsEquiv&nbsp;(@ap&nbsp;_&nbsp;_&nbsp;(@pr1&nbsp;A&nbsp;P)&nbsp;x&nbsp;y)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;_.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;Definition&nbsp;path_sigma_hprop_1&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;(u&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;path_sigma_hprop&nbsp;u&nbsp;u&nbsp;1&nbsp;=&nbsp;1.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Proof.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unfold&nbsp;path_sigma_hprop.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;unfold&nbsp;isequiv_pr1_contr;&nbsp;simpl.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;<span class="comment">(**&nbsp;Ugh&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;refine&nbsp;(ap&nbsp;(fun&nbsp;p&nbsp;=&gt;&nbsp;match&nbsp;p&nbsp;in&nbsp;(_&nbsp;=&nbsp;v2)&nbsp;return&nbsp;(u&nbsp;=&nbsp;(u.1;&nbsp;v2))&nbsp;with&nbsp;1&nbsp;=&gt;&nbsp;1&nbsp;end)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(contr&nbsp;(idpath&nbsp;u.2))).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Defined.&nbsp;*)</span><br/>

<br/>
<span class="comment">(*&nbsp;<span class="comment">(**&nbsp;The&nbsp;inverse&nbsp;of&nbsp;<span class="inlinecode"><span class="id" title="var">path_sigma_hprop</span></span>&nbsp;has&nbsp;its&nbsp;own&nbsp;name,&nbsp;so&nbsp;we&nbsp;give&nbsp;special&nbsp;names&nbsp;to&nbsp;the&nbsp;section&nbsp;and&nbsp;retraction&nbsp;homotopies&nbsp;to&nbsp;help&nbsp;<span class="inlinecode"><span class="id" title="tactic">rewrite</span></span>&nbsp;out.&nbsp;*)</span>&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;path_sigma_hprop_ap_pr1&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;(p&nbsp;:&nbsp;u&nbsp;=&nbsp;v)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;path_sigma_hprop&nbsp;u&nbsp;v&nbsp;(ap&nbsp;pr1&nbsp;p)&nbsp;=&nbsp;p&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;eisretr&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v)&nbsp;p.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;path_sigma_hprop_pr1_path&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;(p&nbsp;:&nbsp;u&nbsp;=&nbsp;v)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;path_sigma_hprop&nbsp;u&nbsp;v&nbsp;p..1&nbsp;=&nbsp;p&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;eisretr&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v)&nbsp;p.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;ap_pr1_path_sigma_hprop&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;(p&nbsp;:&nbsp;u.1&nbsp;=&nbsp;v.1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;ap&nbsp;pr1&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v&nbsp;p)&nbsp;=&nbsp;p&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;eissect&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v)&nbsp;p.&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Definition&nbsp;pr1_path_path_sigma_hprop&nbsp;{A&nbsp;:&nbsp;Type}&nbsp;{P&nbsp;:&nbsp;A&nbsp;-&gt;&nbsp;Type}&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`{forall&nbsp;x,&nbsp;IsHProp&nbsp;(P&nbsp;x)}&nbsp;(u&nbsp;v&nbsp;:&nbsp;sigT&nbsp;P)&nbsp;(p&nbsp;:&nbsp;u.1&nbsp;=&nbsp;v.1)&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;:&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v&nbsp;p)..1&nbsp;=&nbsp;p&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;&nbsp;&nbsp;:=&nbsp;eissect&nbsp;(path_sigma_hprop&nbsp;u&nbsp;v)&nbsp;p.&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_unit</span> (<span class="id" title="var">z</span> <span class="id" title="var">z'</span> : <span class="id" title="var">unit</span>) : <span class="id" title="var">z</span> = <span class="id" title="var">z'</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">z</span>, <span class="id" title="var">z'</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <span class="id" title="var">path_equiv</span> (<span class="id" title="var">fx</span> : <span class="id" title="var">Funext</span>) {<span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Type</span>} {<span class="id" title="var">e1</span> <span class="id" title="var">e2</span> : <span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>}<br/>
&nbsp;&nbsp;: (<span class="id" title="var">e1</span> = <span class="id" title="var">e2</span> :&gt; (<span class="id" title="var">A</span> → <span class="id" title="var">B</span>)) → (<span class="id" title="var">e1</span> = <span class="id" title="var">e2</span> :&gt; (<span class="id" title="var">A</span> &lt;~&gt; <span class="id" title="var">B</span>)).<br/>
<span class="id" title="var">Admitted</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
