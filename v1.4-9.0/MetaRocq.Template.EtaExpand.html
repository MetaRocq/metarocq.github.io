<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Template.EtaExpand</h1>

<div class="code">
</div>

<div class="doc">
<a id="lab97"></a><h1 class="section">Eta-expansion and proof generation</h1>

<div class="paragraph"> </div>

 We perform eta-expansion of template-rocq terms and generate proofs that
    we terms are equal to the originals. Since eta-conversion is part of the
    Rocq's conversion, the proof is essentially <span class="inlinecode"><span class="id" title="var">eq_refl</span></span>.
    All dependencies are also expanded.
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#"><span class="id" title="library">Bool</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#"><span class="id" title="library">monad_utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.uGraph.html#"><span class="id" title="library">uGraph</span></a>        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#"><span class="id" title="library">BasicAst</span></a>      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.config.html#"><span class="id" title="library">config</span></a>. <span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Export</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#"><span class="id" title="library">Ast</span></a>           <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.AstUtils.html#"><span class="id" title="library">AstUtils</span></a>      <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Induction.html#"><span class="id" title="library">Induction</span></a>     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.LiftSubst.html#"><span class="id" title="library">LiftSubst</span></a>     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.UnivSubst.html#"><span class="id" title="library">UnivSubst</span></a>     <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#"><span class="id" title="library">Typing</span></a>        <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#"><span class="id" title="library">TemplateEnvMap</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.TemplateProgram.html#"><span class="id" title="library">TemplateProgram</span></a>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bs</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Template.Ast.html#"><span class="id" title="module">Template.Ast</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="Eta" class="idref" href="#Eta"><span class="id" title="section">Eta</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="460a611b4a70ebb551b39947ff02a16d" class="idref" href="#460a611b4a70ebb551b39947ff02a16d"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>).<br/>

<br/>

<br/>
</div>

<div class="doc">
Eta-expands the given term of the form <span class="inlinecode">(<span class="id" title="var">t</span></span> <span class="inlinecode"><span class="id" title="var">args</span>)</span>.

<div class="paragraph"> </div>

      <span class="inlinecode"><span class="id" title="var">t</span></span> -- a term;
      <span class="inlinecode"><span class="id" title="var">args</span></span> -- arguments to which the term is applied;
      <span class="inlinecode"><span class="id" title="var">ty</span></span> -- the term's type;
      <span class="inlinecode"><span class="id" title="var">count</span></span> -- number of arguments 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eta_single" class="idref" href="#eta_single"><span class="id" title="definition">eta_single</span></a> (<a id="t:2" class="idref" href="#t:2"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">Ast.term</span></a>) (<a id="args:3" class="idref" href="#args:3"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">Ast.term</span></a>) (<a id="ty:4" class="idref" href="#ty:4"><span class="id" title="binder">ty</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">Ast.term</span></a>) (<a id="count:5" class="idref" href="#count:5"><span class="id" title="binder">count</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>): <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="needed:6" class="idref" href="#needed:6"><span class="id" title="binder">needed</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#count:5"><span class="id" title="variable">count</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:3"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="prev_args:7" class="idref" href="#prev_args:7"><span class="id" title="binder">prev_args</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#needed:6"><span class="id" title="variable">needed</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:3"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="eta_args:8" class="idref" href="#eta_args:8"><span class="id" title="binder">eta_args</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a> 0 <a class="idref" href="MetaRocq.Template.EtaExpand.html#needed:6"><span class="id" title="variable">needed</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="remaining:9" class="idref" href="#remaining:9"><span class="id" title="binder">remaining</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#needed:6"><span class="id" title="variable">needed</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:3"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:4"><span class="id" title="variable">ty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>))) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="remaining_subst:10" class="idref" href="#remaining_subst:10"><span class="id" title="binder">remaining_subst</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:3"><span class="id" title="variable">args</span></a>) 0 (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#remaining:9"><span class="id" title="variable">remaining</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> <a id="d:11" class="idref" href="#d:11"><span class="id" title="binder">d</span></a> <a id="b:12" class="idref" href="#b:12"><span class="id" title="binder">b</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">Ast.tLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:11"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:11"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#b:12"><span class="id" title="variable">b</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#needed:6"><span class="id" title="variable">needed</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:2"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#prev_args:7"><span class="id" title="variable">prev_args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_args:8"><span class="id" title="variable">eta_args</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#remaining_subst:10"><span class="id" title="variable">remaining_subst</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eta_constructor" class="idref" href="#eta_constructor"><span class="id" title="definition">eta_constructor</span></a> (<a id="ind:13" class="idref" href="#ind:13"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) <a id="c:14" class="idref" href="#c:14"><span class="id" title="binder">c</span></a> <a id="u:15" class="idref" href="#u:15"><span class="id" title="binder">u</span></a> <a id="args:16" class="idref" href="#args:16"><span class="id" title="binder">args</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor"><span class="id" title="definition">GlobalEnvMap.lookup_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#460a611b4a70ebb551b39947ff02a16d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:13"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:14"><span class="id" title="variable">c</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mdecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">idecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ty:17" class="idref" href="#ty:17"><span class="id" title="binder">ty</span></a> := (<a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">cdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:13"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:14"><span class="id" title="variable">c</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:15"><span class="id" title="variable">u</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="n:18" class="idref" href="#n:18"><span class="id" title="binder">n</span></a> := (<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">Ast.tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:13"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:14"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:15"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:16"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:17"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:18"><span class="id" title="variable">n</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="eta_fixpoint" class="idref" href="#eta_fixpoint"><span class="id" title="definition">eta_fixpoint</span></a> (<a id="def:19" class="idref" href="#def:19"><span class="id" title="binder">def</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="i:20" class="idref" href="#i:20"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:21" class="idref" href="#d:21"><span class="id" title="binder">d</span></a> (<a id="args:22" class="idref" href="#args:22"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:19"><span class="id" title="variable">def</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:20"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:22"><span class="id" title="variable">args</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#d:21"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>)) (1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:21"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_ctx" class="idref" href="#lift_ctx"><span class="id" title="definition">lift_ctx</span></a> <a id="n:23" class="idref" href="#n:23"><span class="id" title="binder">n</span></a> <a id="k:24" class="idref" href="#k:24"><span class="id" title="binder">k</span></a> (<a id="8ca488d962adcdfae0a5af1368ee12c6" class="idref" href="#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>))) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:26" class="idref" href="#i:26"><span class="id" title="binder">i</span></a> <a id="x:27" class="idref" href="#x:27"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:23"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#k:24"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:26"><span class="id" title="variable">i</span></a>))) <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:27"><span class="id" title="variable">x</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#rev"><span class="id" title="definition">rev</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="up" class="idref" href="#up"><span class="id" title="definition">up</span></a> (<a id="6e093fd9af49d42270cd626602782b21" class="idref" href="#6e093fd9af49d42270cd626602782b21"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>))) := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#6e093fd9af49d42270cd626602782b21"><span class="id" title="variable">Γ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="eta_expand" class="idref" href="#eta_expand"><span class="id" title="definition">eta_expand</span></a> (<a id="0b505d350bf3c4269fbe0253bf0ba4a2" class="idref" href="#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>))) (<a id="t:30" class="idref" href="#t:30"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:30"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tSort"><span class="id" title="constructor">tSort</span></a> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tProd"><span class="id" title="constructor">tProd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tConst"><span class="id" title="constructor">tConst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tInd"><span class="id" title="constructor">tInd</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:30"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">ty</span>) <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">args</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">hd</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">u</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor"><span class="id" title="definition">eta_constructor</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">u</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">args</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <span class="id" title="var">res</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> ("Error: lookup of an inductive failed for "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.bytestring.html#da3fc5e689cedcb9491dd6dad17e0422"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Common.Kernames.html#string_of_kername"><span class="id" title="definition">string_of_kername</span></a> <span class="id" title="var">ind</span>.(<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">def</span> <span class="id" title="var">i</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="def':38" class="idref" href="#def':38"><span class="id" title="binder">def'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="d:34" class="idref" href="#d:34"><span class="id" title="binder">d</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctx:37" class="idref" href="#ctx:37"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<a id="i:35" class="idref" href="#i:35"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:36" class="idref" href="#d:36"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:36"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:35"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:36"><span class="id" title="variable">d</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>) <span class="id" title="var">def</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:34"><span class="id" title="variable">d</span></a> ; <a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:34"><span class="id" title="variable">d</span></a> ; <a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:37"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:34"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) ; <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:34"><span class="id" title="variable">d</span></a> |})<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">def</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def':38"><span class="id" title="variable">def'</span></a> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_fixpoint"><span class="id" title="definition">eta_fixpoint</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def':38"><span class="id" title="variable">def'</span></a> <span class="id" title="var">i</span> <span class="id" title="var">d</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> ("Error: lookup of a fixpoint failed")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">n</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">c</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">args</span>) (<a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">ty</span>) <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">args</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">n</span> <span class="id" title="var">ts</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">n</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">ty</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">ty</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#up"><span class="id" title="definition">up</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">ty</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">val</span>) <span class="id" title="var">ty</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#up"><span class="id" title="definition">up</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">ci</span> <span class="id" title="var">p</span> <span class="id" title="var">disc</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':39" class="idref" href="#p':39"><span class="id" title="binder">p'</span></a> := <a class="idref" href="MetaRocq.Template.Ast.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">p</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="brs':41" class="idref" href="#brs':41"><span class="id" title="binder">brs'</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="b:40" class="idref" href="#b:40"><span class="id" title="binder">b</span></a> ⇒ {| <a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> := <a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b:40"><span class="id" title="variable">b</span></a>; <a class="idref" href="MetaRocq.Template.Ast.html#bbody"><span class="id" title="projection">bbody</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#b:40"><span class="id" title="variable">b</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#b:40"><span class="id" title="variable">b</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bbody"><span class="id" title="projection">bbody</span></a>) |}) <span class="id" title="var">brs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p':39"><span class="id" title="variable">p'</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">disc</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#brs':41"><span class="id" title="variable">brs'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">p</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:30"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">def</span> <span class="id" title="var">i</span> ⇒ <span class="id" title="keyword">let</span> <a id="def':46" class="idref" href="#def':46"><span class="id" title="binder">def'</span></a> := (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="d:42" class="idref" href="#d:42"><span class="id" title="binder">d</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctx:45" class="idref" href="#ctx:45"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<a id="i:43" class="idref" href="#i:43"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:44" class="idref" href="#d:44"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:44"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:43"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:44"><span class="id" title="variable">d</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a>) <span class="id" title="var">def</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:42"><span class="id" title="variable">d</span></a> ; <a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:42"><span class="id" title="variable">d</span></a> ; <a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:45"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:42"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) ; <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> := <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:42"><span class="id" title="variable">d</span></a> |}) <span class="id" title="var">def</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def':46"><span class="id" title="variable">def'</span></a> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">d</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_fixpoint"><span class="id" title="definition">eta_fixpoint</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def':46"><span class="id" title="variable">def'</span></a> <span class="id" title="var">i</span> <span class="id" title="var">d</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> ("Error: lookup of a fixpoint failed ")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">def</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">def</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>))) <span class="id" title="var">def</span>) <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">u</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor"><span class="id" title="definition">eta_constructor</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">u</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">res</span> ⇒ <span class="id" title="var">res</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> ("Error: lookup of an inductive failed for "<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.bytestring.html#da3fc5e689cedcb9491dd6dad17e0422"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Common.Kernames.html#string_of_kername"><span class="id" title="definition">string_of_kername</span></a> <span class="id" title="var">ind</span>.(<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tCast"><span class="id" title="constructor">tCast</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">k</span> <span class="id" title="var">t2</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tCast"><span class="id" title="constructor">tCast</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">t1</span>) <span class="id" title="var">k</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">t2</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tArray"><span class="id" title="constructor">tArray</span></a> <span class="id" title="var">u</span> <span class="id" title="var">arr</span> <span class="id" title="var">def</span> <span class="id" title="var">ty</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tArray"><span class="id" title="constructor">tArray</span></a> <span class="id" title="var">u</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">arr</span>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">def</span>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand:31"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">ty</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tInt"><span class="id" title="constructor">tInt</span></a> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tFloat"><span class="id" title="constructor">tFloat</span></a> <span class="id" title="var">_</span> | <a class="idref" href="MetaRocq.Template.Ast.html#tString"><span class="id" title="constructor">tString</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:30"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#Eta"><span class="id" title="section">Eta</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_global_decl" class="idref" href="#eta_global_decl"><span class="id" title="definition">eta_global_decl</span></a> <a id="0f349382f796b4f2cbdf3887d61145a1" class="idref" href="#0f349382f796b4f2cbdf3887d61145a1"><span class="id" title="binder">Σ</span></a> <a id="cb:48" class="idref" href="#cb:48"><span class="id" title="binder">cb</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_type"><span class="id" title="projection">cst_type</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0f349382f796b4f2cbdf3887d61145a1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cb:48"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_type"><span class="id" title="projection">cst_type</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_universes"><span class="id" title="projection">cst_universes</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#cb:48"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_universes"><span class="id" title="projection">cst_universes</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_body"><span class="id" title="projection">cst_body</span></a> := <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cb:48"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_body"><span class="id" title="projection">cst_body</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">b</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0f349382f796b4f2cbdf3887d61145a1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_relevance"><span class="id" title="projection">cst_relevance</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#cb:48"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_relevance"><span class="id" title="projection">cst_relevance</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_decl_body" class="idref" href="#map_decl_body"><span class="id" title="definition">map_decl_body</span></a> {<a id="term:49" class="idref" href="#term:49"><span class="id" title="binder">term</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:50" class="idref" href="#f:50"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#term:49"><span class="id" title="variable">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#term:49"><span class="id" title="variable">term</span></a>) <a id="decl:51" class="idref" href="#decl:51"><span class="id" title="binder">decl</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:51"><span class="id" title="variable">decl</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:51"><span class="id" title="variable">decl</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:50"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:51"><span class="id" title="variable">decl</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="fold_context_k_defs" class="idref" href="#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> {<a id="term:52" class="idref" href="#term:52"><span class="id" title="binder">term</span></a> : <span class="id" title="keyword">Type</span>} (<a id="f:53" class="idref" href="#f:53"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#term:52"><span class="id" title="variable">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#term:52"><span class="id" title="variable">term</span></a>) (<a id="c89e33bdbed75848428cf76e1403e603" class="idref" href="#c89e33bdbed75848428cf76e1403e603"><span class="id" title="binder">Γ</span></a>: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#context_decl"><span class="id" title="record">BasicAst.context_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#term:52"><span class="id" title="variable">term</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c89e33bdbed75848428cf76e1403e603"><span class="id" title="variable">Γ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">d</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Γ</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#map_decl_body"><span class="id" title="definition">map_decl_body</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#f:53"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#c89e33bdbed75848428cf76e1403e603"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">d</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs:55"><span class="id" title="definition">fold_context_k_defs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:53"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c89e33bdbed75848428cf76e1403e603"><span class="id" title="variable">Γ</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_fold_context_k_defs" class="idref" href="#context_assumptions_fold_context_k_defs"><span class="id" title="lemma">context_assumptions_fold_context_k_defs</span></a> {<a id="f:57" class="idref" href="#f:57"><span class="id" title="binder">f</span></a> : <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>} {<a id="5eea4560b18f98a58cb3519774a6b1ed" class="idref" href="#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="binder">Γ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:57"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5eea4560b18f98a58cb3519774a6b1ed"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fold_context_k_defs_length" class="idref" href="#fold_context_k_defs_length"><span class="id" title="lemma">fold_context_k_defs_length</span></a> {<a id="f:59" class="idref" href="#f:59"><span class="id" title="binder">f</span></a> : <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>} <a id="0fd58672988bb7094daf640098f3cbf6" class="idref" href="#0fd58672988bb7094daf640098f3cbf6"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:59"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0fd58672988bb7094daf640098f3cbf6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#0fd58672988bb7094daf640098f3cbf6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_context" class="idref" href="#eta_context"><span class="id" title="definition">eta_context</span></a> <a id="77616297ab8389c2db18b8aa996822b8" class="idref" href="#77616297ab8389c2db18b8aa996822b8"><span class="id" title="binder">Σ</span></a> <a id="ad797e72248915d9212fa4589483d7f6" class="idref" href="#ad797e72248915d9212fa4589483d7f6"><span class="id" title="binder">Γ</span></a> <a id="ctx:63" class="idref" href="#ctx:63"><span class="id" title="binder">ctx</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> (<span class="id" title="keyword">fun</span> <a id="n:64" class="idref" href="#n:64"><span class="id" title="binder">n</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#77616297ab8389c2db18b8aa996822b8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#n:64"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad797e72248915d9212fa4589483d7f6"><span class="id" title="variable">Γ</span></a>))) <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:63"><span class="id" title="variable">ctx</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_constructor_decl" class="idref" href="#eta_constructor_decl"><span class="id" title="definition">eta_constructor_decl</span></a> <a id="b7d14475a959a414c26c016f9aef0e47" class="idref" href="#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="binder">Σ</span></a> <a id="mdecl:66" class="idref" href="#mdecl:66"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:67" class="idref" href="#cdecl:67"><span class="id" title="binder">cdecl</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_name"><span class="id" title="projection">cstr_name</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:67"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_name"><span class="id" title="projection">cstr_name</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:66"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:66"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:67"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:67"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_indices"><span class="id" title="projection">cstr_indices</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_type"><span class="id" title="projection">cstr_type</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:66"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:67"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_type"><span class="id" title="projection">cstr_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_arity"><span class="id" title="projection">cstr_arity</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:67"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_arity"><span class="id" title="projection">cstr_arity</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_inductive_decl" class="idref" href="#eta_inductive_decl"><span class="id" title="definition">eta_inductive_decl</span></a> <a id="8d0ba020def2f27826d5cbe2d613c0cf" class="idref" href="#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="binder">Σ</span></a> <a id="mdecl:69" class="idref" href="#mdecl:69"><span class="id" title="binder">mdecl</span></a> <a id="idecl:70" class="idref" href="#idecl:70"><span class="id" title="binder">idecl</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_name"><span class="id" title="projection">ind_name</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_name"><span class="id" title="projection">ind_name</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_indices"><span class="id" title="projection">ind_indices</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_indices"><span class="id" title="projection">ind_indices</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_sort"><span class="id" title="projection">ind_sort</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_sort"><span class="id" title="projection">ind_sort</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_type"><span class="id" title="projection">ind_type</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_type"><span class="id" title="projection">ind_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_kelim"><span class="id" title="projection">ind_kelim</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_kelim"><span class="id" title="projection">ind_kelim</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_ctors"><span class="id" title="projection">ind_ctors</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor_decl"><span class="id" title="definition">eta_constructor_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:69"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_ctors"><span class="id" title="projection">ind_ctors</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_projs"><span class="id" title="projection">ind_projs</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_projs"><span class="id" title="projection">ind_projs</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_relevance"><span class="id" title="projection">ind_relevance</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:70"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_relevance"><span class="id" title="projection">ind_relevance</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_minductive_decl" class="idref" href="#eta_minductive_decl"><span class="id" title="definition">eta_minductive_decl</span></a> <a id="71207c1fa4df2a6ffd92a3b175d4607f" class="idref" href="#71207c1fa4df2a6ffd92a3b175d4607f"><span class="id" title="binder">Σ</span></a> <a id="mdecl:72" class="idref" href="#mdecl:72"><span class="id" title="binder">mdecl</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_finite"><span class="id" title="projection">ind_finite</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_finite"><span class="id" title="projection">ind_finite</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#71207c1fa4df2a6ffd92a3b175d4607f"><span class="id" title="variable">Σ</span></a> 0 <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_inductive_decl"><span class="id" title="definition">eta_inductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#71207c1fa4df2a6ffd92a3b175d4607f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_universes"><span class="id" title="projection">ind_universes</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_universes"><span class="id" title="projection">ind_universes</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_variance"><span class="id" title="projection">ind_variance</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:72"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_variance"><span class="id" title="projection">ind_variance</span></a>); |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_global_declaration" class="idref" href="#eta_global_declaration"><span class="id" title="definition">eta_global_declaration</span></a> (<a id="6326b77571469372847db81b20e33788" class="idref" href="#6326b77571469372847db81b20e33788"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>) <a id="decl:74" class="idref" href="#decl:74"><span class="id" title="binder">decl</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:74"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#Env.ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cb</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#Env.ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_decl"><span class="id" title="definition">eta_global_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">cb</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#Env.InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">idecl</span> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#Env.InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_minductive_decl"><span class="id" title="definition">eta_minductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#6326b77571469372847db81b20e33788"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">idecl</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_global_declarations" class="idref" href="#eta_global_declarations"><span class="id" title="definition">eta_global_declarations</span></a> (<a id="0e0d57bbddb84fea16244eabbdac2294" class="idref" href="#0e0d57bbddb84fea16244eabbdac2294"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>) (<a id="decls:77" class="idref" href="#decls:77"><span class="id" title="binder">decls</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_declarations"><span class="id" title="definition">global_declarations</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declaration"><span class="id" title="definition">eta_global_declaration</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0e0d57bbddb84fea16244eabbdac2294"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#decls:77"><span class="id" title="variable">decls</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_expand_global_env" class="idref" href="#eta_expand_global_env"><span class="id" title="definition">eta_expand_global_env</span></a> (<a id="2639e8676b80946ed652087283a1b245" class="idref" href="#2639e8676b80946ed652087283a1b245"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>) : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#2639e8676b80946ed652087283a1b245"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a>); <a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declarations"><span class="id" title="definition">eta_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2639e8676b80946ed652087283a1b245"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2639e8676b80946ed652087283a1b245"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#2639e8676b80946ed652087283a1b245"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="eta_expand_program" class="idref" href="#eta_expand_program"><span class="id" title="definition">eta_expand_program</span></a> (<a id="p:79" class="idref" href="#p:79"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Template.TemplateProgram.html#template_program_env"><span class="id" title="definition">template_program_env</span></a>) : <a class="idref" href="MetaRocq.Template.Ast.html#Env.program"><span class="id" title="definition">Ast.Env.program</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="4fa1468f2bf110c18d95153418d31f41" class="idref" href="#4fa1468f2bf110c18d95153418d31f41"><span class="id" title="binder">Σ'</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_global_env"><span class="id" title="definition">eta_expand_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:79"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#4fa1468f2bf110c18d95153418d31f41"><span class="id" title="variable">Σ'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:79"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:79"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="isConstruct" class="idref" href="#isConstruct"><span class="id" title="definition">isConstruct</span></a> <a id="t:81" class="idref" href="#t:81"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:81"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="isFix" class="idref" href="#isFix"><span class="id" title="definition">isFix</span></a> <a id="t:83" class="idref" href="#t:83"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:83"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Definition</span> <a id="isRel" class="idref" href="#isRel"><span class="id" title="definition">isRel</span></a> <a id="t:85" class="idref" href="#t:85"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:85"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="expanded" class="idref" href="#expanded"><span class="id" title="section">expanded</span></a>.<br/>

<br/>
<span class="id" title="keyword">Variable</span> <a id="b050a63a19f598d196b72e0b67029d79" class="idref" href="#b050a63a19f598d196b72e0b67029d79"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Unset</span> <span class="id" title="var">Elimination</span> <span class="id" title="var">Schemes</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="expanded" class="idref" href="#expanded"><span class="id" title="inductive">expanded</span></a> (<a id="27d9827c9a99dcd0f67a42a48d6a2a25" class="idref" href="#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>): <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="expanded_tRel" class="idref" href="#expanded_tRel"><span class="id" title="constructor">expanded_tRel</span></a> (<a id="n:92" class="idref" href="#n:92"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:92"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:92"><span class="id" title="variable">n</span></a>)<br/>
| <a id="expanded_tRel_app" class="idref" href="#expanded_tRel_app"><span class="id" title="constructor">expanded_tRel_app</span></a> (<a id="n:93" class="idref" href="#n:93"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="args:94" class="idref" href="#args:94"><span class="id" title="binder">args</span></a> <a id="m:95" class="idref" href="#m:95"><span class="id" title="binder">m</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:93"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:95"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:95"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:94"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:94"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:93"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:94"><span class="id" title="variable">args</span></a>)<br/>
| <a id="expanded_tVar" class="idref" href="#expanded_tVar"><span class="id" title="constructor">expanded_tVar</span></a> (<a id="id:96" class="idref" href="#id:96"><span class="id" title="binder">id</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#ident"><span class="id" title="definition">ident</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#id:96"><span class="id" title="variable">id</span></a>)<br/>
| <a id="expanded_tEvar" class="idref" href="#expanded_tEvar"><span class="id" title="constructor">expanded_tEvar</span></a> (<a id="ev:97" class="idref" href="#ev:97"><span class="id" title="binder">ev</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="args:98" class="idref" href="#args:98"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:98"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ev:97"><span class="id" title="variable">ev</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:98"><span class="id" title="variable">args</span></a>)<br/>
| <a id="expanded_tSort" class="idref" href="#expanded_tSort"><span class="id" title="constructor">expanded_tSort</span></a> (<a id="s:99" class="idref" href="#s:99"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#sort"><span class="id" title="abbreviation">sort</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:99"><span class="id" title="variable">s</span></a>)<br/>
| <a id="expanded_tCast" class="idref" href="#expanded_tCast"><span class="id" title="constructor">expanded_tCast</span></a> (<a id="t:100" class="idref" href="#t:100"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="kind:101" class="idref" href="#kind:101"><span class="id" title="binder">kind</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#cast_kind"><span class="id" title="inductive">cast_kind</span></a>) (<a id="v:102" class="idref" href="#v:102"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#v:102"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCast"><span class="id" title="constructor">tCast</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:100"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kind:101"><span class="id" title="variable">kind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#v:102"><span class="id" title="variable">v</span></a>)<br/>
| <a id="expanded_tProd" class="idref" href="#expanded_tProd"><span class="id" title="constructor">expanded_tProd</span></a> (<a id="na:103" class="idref" href="#na:103"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="ty:104" class="idref" href="#ty:104"><span class="id" title="binder">ty</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="body:105" class="idref" href="#body:105"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :  <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:103"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:104"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:105"><span class="id" title="variable">body</span></a>)<br/>
| <a id="expanded_tLambda" class="idref" href="#expanded_tLambda"><span class="id" title="constructor">expanded_tLambda</span></a> (<a id="na:106" class="idref" href="#na:106"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="ty:107" class="idref" href="#ty:107"><span class="id" title="binder">ty</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="body:108" class="idref" href="#body:108"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) :  <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:108"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:106"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:107"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:108"><span class="id" title="variable">body</span></a>)<br/>
| <a id="expanded_tLetIn" class="idref" href="#expanded_tLetIn"><span class="id" title="constructor">expanded_tLetIn</span></a> (<a id="na:109" class="idref" href="#na:109"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="def:110" class="idref" href="#def:110"><span class="id" title="binder">def</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="def_ty:111" class="idref" href="#def_ty:111"><span class="id" title="binder">def_ty</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="body:112" class="idref" href="#body:112"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:110"><span class="id" title="variable">def</span></a>  <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:112"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:109"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:110"><span class="id" title="variable">def</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def_ty:111"><span class="id" title="variable">def_ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:112"><span class="id" title="variable">body</span></a>)<br/>
| <a id="expanded_tApp" class="idref" href="#expanded_tApp"><span class="id" title="constructor">expanded_tApp</span></a> (<a id="f:113" class="idref" href="#f:113"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="args:114" class="idref" href="#args:114"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#isConstruct"><span class="id" title="definition">isConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:113"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isFix"><span class="id" title="definition">isFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:113"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isRel"><span class="id" title="definition">isRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:113"><span class="id" title="variable">f</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:113"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:114"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:113"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:114"><span class="id" title="variable">args</span></a>)<br/>
| <a id="expanded_tConst" class="idref" href="#expanded_tConst"><span class="id" title="constructor">expanded_tConst</span></a> (<a id="c:115" class="idref" href="#c:115"><span class="id" title="binder">c</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) (<a id="u:116" class="idref" href="#u:116"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConst"><span class="id" title="constructor">tConst</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:115"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:116"><span class="id" title="variable">u</span></a>)<br/>
| <a id="expanded_tInd" class="idref" href="#expanded_tInd"><span class="id" title="constructor">expanded_tInd</span></a> (<a id="ind:117" class="idref" href="#ind:117"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="u:118" class="idref" href="#u:118"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tInd"><span class="id" title="constructor">tInd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:117"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:118"><span class="id" title="variable">u</span></a>)<br/>
| <a id="expanded_tConstruct" class="idref" href="#expanded_tConstruct"><span class="id" title="constructor">expanded_tConstruct</span></a> (<a id="ind:119" class="idref" href="#ind:119"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="idx:120" class="idref" href="#idx:120"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="u:121" class="idref" href="#u:121"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>) <a id="mind:122" class="idref" href="#mind:122"><span class="id" title="binder">mind</span></a> <a id="idecl:123" class="idref" href="#idecl:123"><span class="id" title="binder">idecl</span></a> <a id="cdecl:124" class="idref" href="#cdecl:124"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b050a63a19f598d196b72e0b67029d79"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:119"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:120"><span class="id" title="variable">idx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:122"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:123"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:124"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:122"><span class="id" title="variable">mind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:124"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:119"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:120"><span class="id" title="variable">idx</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:121"><span class="id" title="variable">u</span></a>)<br/>
| <a id="expanded_tCase" class="idref" href="#expanded_tCase"><span class="id" title="constructor">expanded_tCase</span></a> (<a id="ci:125" class="idref" href="#ci:125"><span class="id" title="binder">ci</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#case_info"><span class="id" title="record">case_info</span></a>) (<a id="type_info:126" class="idref" href="#type_info:126"><span class="id" title="binder">type_info</span></a>:<a class="idref" href="MetaRocq.Template.Ast.html#predicate"><span class="id" title="record">predicate</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="discr:127" class="idref" href="#discr:127"><span class="id" title="binder">discr</span></a>:<a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="branches:128" class="idref" href="#branches:128"><span class="id" title="binder">branches</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#discr:127"><span class="id" title="variable">discr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#type_info:126"><span class="id" title="variable">type_info</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="br:129" class="idref" href="#br:129"><span class="id" title="binder">br</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#br:129"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#br:129"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bbody"><span class="id" title="projection">bbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#branches:128"><span class="id" title="variable">branches</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ci:125"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#type_info:126"><span class="id" title="variable">type_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#discr:127"><span class="id" title="variable">discr</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#branches:128"><span class="id" title="variable">branches</span></a>)<br/>
| <a id="expanded_tProj" class="idref" href="#expanded_tProj"><span class="id" title="constructor">expanded_tProj</span></a> (<a id="proj:130" class="idref" href="#proj:130"><span class="id" title="binder">proj</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#projection"><span class="id" title="record">projection</span></a>) (<a id="t:131" class="idref" href="#t:131"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:131"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tProj"><span class="id" title="constructor">tProj</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#proj:130"><span class="id" title="variable">proj</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:131"><span class="id" title="variable">t</span></a>)<br/>
| <a id="expanded_tFix" class="idref" href="#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a> (<a id="mfix:132" class="idref" href="#mfix:132"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="idx:133" class="idref" href="#idx:133"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="args:134" class="idref" href="#args:134"><span class="id" title="binder">args</span></a> <a id="d:135" class="idref" href="#d:135"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#d:135"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:135"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:136" class="idref" href="#d:136"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:136"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctx:139" class="idref" href="#ctx:139"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<a id="i:137" class="idref" href="#i:137"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:138" class="idref" href="#d:138"><span class="id" title="binder">d</span></a> ⇒ 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:138"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:132"><span class="id" title="variable">mfix</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:139"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:136"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:132"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:134"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#args:134"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:132"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:133"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:135"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:134"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:135"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:132"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:133"><span class="id" title="variable">idx</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:134"><span class="id" title="variable">args</span></a>)<br/>
| <a id="expanded_tCoFix" class="idref" href="#expanded_tCoFix"><span class="id" title="constructor">expanded_tCoFix</span></a> (<a id="mfix:140" class="idref" href="#mfix:140"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="idx:141" class="idref" href="#idx:141"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:142" class="idref" href="#d:142"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:140"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:142"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:140"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:140"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:141"><span class="id" title="variable">idx</span></a>)<br/>
| <a id="expanded_tConstruct_app" class="idref" href="#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a> <a id="ind:143" class="idref" href="#ind:143"><span class="id" title="binder">ind</span></a> <a id="c:144" class="idref" href="#c:144"><span class="id" title="binder">c</span></a> <a id="u:145" class="idref" href="#u:145"><span class="id" title="binder">u</span></a> <a id="mind:146" class="idref" href="#mind:146"><span class="id" title="binder">mind</span></a> <a id="idecl:147" class="idref" href="#idecl:147"><span class="id" title="binder">idecl</span></a> <a id="cdecl:148" class="idref" href="#cdecl:148"><span class="id" title="binder">cdecl</span></a> <a id="args:149" class="idref" href="#args:149"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b050a63a19f598d196b72e0b67029d79"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:143"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:144"><span class="id" title="variable">c</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:146"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:147"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:148"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:149"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:146"><span class="id" title="variable">mind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:148"><span class="id" title="variable">cdecl</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:149"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:143"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:144"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:145"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:149"><span class="id" title="variable">args</span></a>)<br/>
| <a id="expanded_tInt" class="idref" href="#expanded_tInt"><span class="id" title="constructor">expanded_tInt</span></a> <a id="i:150" class="idref" href="#i:150"><span class="id" title="binder">i</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tInt"><span class="id" title="constructor">tInt</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:150"><span class="id" title="variable">i</span></a>)<br/>
| <a id="expanded_tFloat" class="idref" href="#expanded_tFloat"><span class="id" title="constructor">expanded_tFloat</span></a> <a id="f:151" class="idref" href="#f:151"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFloat"><span class="id" title="constructor">tFloat</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:151"><span class="id" title="variable">f</span></a>)<br/>
| <a id="expanded_tString" class="idref" href="#expanded_tString"><span class="id" title="constructor">expanded_tString</span></a> <a id="s:152" class="idref" href="#s:152"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tString"><span class="id" title="constructor">tString</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:152"><span class="id" title="variable">s</span></a>)<br/>
| <a id="expanded_tArray" class="idref" href="#expanded_tArray"><span class="id" title="constructor">expanded_tArray</span></a> <a id="u:153" class="idref" href="#u:153"><span class="id" title="binder">u</span></a> <a id="arr:154" class="idref" href="#arr:154"><span class="id" title="binder">arr</span></a> <a id="def:155" class="idref" href="#def:155"><span class="id" title="binder">def</span></a> <a id="ty:156" class="idref" href="#ty:156"><span class="id" title="binder">ty</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#arr:154"><span class="id" title="variable">arr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:155"><span class="id" title="variable">def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:156"><span class="id" title="variable">ty</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded:90"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#27d9827c9a99dcd0f67a42a48d6a2a25"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tArray"><span class="id" title="constructor">tArray</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:153"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#arr:154"><span class="id" title="variable">arr</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:155"><span class="id" title="variable">def</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:156"><span class="id" title="variable">ty</span></a>).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="section">expanded</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_ind" class="idref" href="#expanded_ind"><span class="id" title="lemma">expanded_ind</span></a> :<br/>
<span class="id" title="keyword">∀</span> (<a id="996801865fff84df7746f7d16aabfe4b" class="idref" href="#996801865fff84df7746f7d16aabfe4b"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>) (<a id="P:158" class="idref" href="#P:158"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>),<br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="00fa08a48618f45bbe35fe42185c5c1e" class="idref" href="#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> <a id="n:160" class="idref" href="#n:160"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:160"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#00fa08a48618f45bbe35fe42185c5c1e"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:160"><span class="id" title="variable">n</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="60c1812e910bcee912eb74f4b2c4aecd" class="idref" href="#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> <a id="n:162" class="idref" href="#n:162"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>, <span class="id" title="keyword">∀</span> <a id="args:163" class="idref" href="#args:163"><span class="id" title="binder">args</span></a>, <span class="id" title="keyword">∀</span> <a id="m:164" class="idref" href="#m:164"><span class="id" title="binder">m</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:162"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:164"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="Heq:165" class="idref" href="#Heq:165"><span class="id" title="binder">Heq</span></a> :  <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:164"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:163"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:163"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:163"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#60c1812e910bcee912eb74f4b2c4aecd"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:162"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:163"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="612ccdfb9614510cc025f5f344f765fe" class="idref" href="#612ccdfb9614510cc025f5f344f765fe"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> <a id="id:167" class="idref" href="#id:167"><span class="id" title="binder">id</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#ident"><span class="id" title="definition">ident</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#612ccdfb9614510cc025f5f344f765fe"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#id:167"><span class="id" title="variable">id</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="bc5cfc972b7195980b84752fe01958c5" class="idref" href="#bc5cfc972b7195980b84752fe01958c5"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="ev:169" class="idref" href="#ev:169"><span class="id" title="binder">ev</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="args:170" class="idref" href="#args:170"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>), <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bc5cfc972b7195980b84752fe01958c5"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:170"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bc5cfc972b7195980b84752fe01958c5"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:170"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bc5cfc972b7195980b84752fe01958c5"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ev:169"><span class="id" title="variable">ev</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:170"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="cebcdde4cf278c2497d80b5952bddf81" class="idref" href="#cebcdde4cf278c2497d80b5952bddf81"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> <a id="s:172" class="idref" href="#s:172"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#sort"><span class="id" title="abbreviation">sort</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cebcdde4cf278c2497d80b5952bddf81"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:172"><span class="id" title="variable">s</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="c78756a1f6abcb48e68e03dbf5894050" class="idref" href="#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="t:174" class="idref" href="#t:174"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="kind:175" class="idref" href="#kind:175"><span class="id" title="binder">kind</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#cast_kind"><span class="id" title="inductive">cast_kind</span></a>) (<a id="v:176" class="idref" href="#v:176"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:174"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:174"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#v:176"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#v:176"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c78756a1f6abcb48e68e03dbf5894050"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCast"><span class="id" title="constructor">tCast</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:174"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kind:175"><span class="id" title="variable">kind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#v:176"><span class="id" title="variable">v</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="af268844c60779e48b049eaa6fd88099" class="idref" href="#af268844c60779e48b049eaa6fd88099"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="na:178" class="idref" href="#na:178"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="ty:179" class="idref" href="#ty:179"><span class="id" title="binder">ty</span></a> <a id="body:180" class="idref" href="#body:180"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>), <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#af268844c60779e48b049eaa6fd88099"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:178"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:179"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:180"><span class="id" title="variable">body</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="bec8080d891bb4c9bb44cd1cc5bbd275" class="idref" href="#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="na:182" class="idref" href="#na:182"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="ty:183" class="idref" href="#ty:183"><span class="id" title="binder">ty</span></a> <a id="body:184" class="idref" href="#body:184"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>), <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:184"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:184"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#bec8080d891bb4c9bb44cd1cc5bbd275"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:182"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:183"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:184"><span class="id" title="variable">body</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="c54608f68d4895f682706a0240e95d0a" class="idref" href="#c54608f68d4895f682706a0240e95d0a"><span class="id" title="binder">Γ</span></a> (<a id="na:186" class="idref" href="#na:186"><span class="id" title="binder">na</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="def:187" class="idref" href="#def:187"><span class="id" title="binder">def</span></a> <a id="def_ty:188" class="idref" href="#def_ty:188"><span class="id" title="binder">def_ty</span></a> <a id="body:189" class="idref" href="#body:189"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c54608f68d4895f682706a0240e95d0a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:187"><span class="id" title="variable">def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c54608f68d4895f682706a0240e95d0a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:187"><span class="id" title="variable">def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c54608f68d4895f682706a0240e95d0a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:189"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c54608f68d4895f682706a0240e95d0a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:189"><span class="id" title="variable">body</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c54608f68d4895f682706a0240e95d0a"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#na:186"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:187"><span class="id" title="variable">def</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def_ty:188"><span class="id" title="variable">def_ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#body:189"><span class="id" title="variable">body</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="b838c91eeed7d5415552bab7722f140b" class="idref" href="#b838c91eeed7d5415552bab7722f140b"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="f7:191" class="idref" href="#f7:191"><span class="id" title="binder">f7</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="args:192" class="idref" href="#args:192"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>),<br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#isConstruct"><span class="id" title="definition">isConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isFix"><span class="id" title="definition">isFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isRel"><span class="id" title="definition">isRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isRel"><span class="id" title="definition">isRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b838c91eeed7d5415552bab7722f140b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b838c91eeed7d5415552bab7722f140b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b838c91eeed7d5415552bab7722f140b"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:192"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b838c91eeed7d5415552bab7722f140b"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:192"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b838c91eeed7d5415552bab7722f140b"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7:191"><span class="id" title="variable">f7</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:192"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="ac5d8d48b7be54da12b37241ba2f5040" class="idref" href="#ac5d8d48b7be54da12b37241ba2f5040"><span class="id" title="binder">Γ</span></a> (<a id="c:194" class="idref" href="#c:194"><span class="id" title="binder">c</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) (<a id="u:195" class="idref" href="#u:195"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>), <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ac5d8d48b7be54da12b37241ba2f5040"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConst"><span class="id" title="constructor">tConst</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:194"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:195"><span class="id" title="variable">u</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="0e542b5e41283602863de8f36ac43b3a" class="idref" href="#0e542b5e41283602863de8f36ac43b3a"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="ind:197" class="idref" href="#ind:197"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="u:198" class="idref" href="#u:198"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>), <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0e542b5e41283602863de8f36ac43b3a"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tInd"><span class="id" title="constructor">tInd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:197"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:198"><span class="id" title="variable">u</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="76c4b0292dca32d04f813338d8b3cc72" class="idref" href="#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> (<a id="ind:200" class="idref" href="#ind:200"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="idx:201" class="idref" href="#idx:201"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="u:202" class="idref" href="#u:202"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="mind:203" class="idref" href="#mind:203"><span class="id" title="binder">mind</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) (<a id="idecl:204" class="idref" href="#idecl:204"><span class="id" title="binder">idecl</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="cdecl:205" class="idref" href="#cdecl:205"><span class="id" title="binder">cdecl</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.constructor_body"><span class="id" title="record">constructor_body</span></a>),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:200"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:201"><span class="id" title="variable">idx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:203"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:204"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:205"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:203"><span class="id" title="variable">mind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:205"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:200"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:201"><span class="id" title="variable">idx</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:202"><span class="id" title="variable">u</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="2a8cf6d089ac10dd7be69b56b732374d" class="idref" href="#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="binder">Γ</span></a> (<a id="ci:207" class="idref" href="#ci:207"><span class="id" title="binder">ci</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#case_info"><span class="id" title="record">case_info</span></a>) (<a id="type_info:208" class="idref" href="#type_info:208"><span class="id" title="binder">type_info</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#predicate"><span class="id" title="record">predicate</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="discr:209" class="idref" href="#discr:209"><span class="id" title="binder">discr</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="branches:210" class="idref" href="#branches:210"><span class="id" title="binder">branches</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#discr:209"><span class="id" title="variable">discr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#discr:209"><span class="id" title="variable">discr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#type_info:208"><span class="id" title="variable">type_info</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#type_info:208"><span class="id" title="variable">type_info</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="br:211" class="idref" href="#br:211"><span class="id" title="binder">br</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#br:211"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#bbody"><span class="id" title="projection">bbody</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#br:211"><span class="id" title="variable">br</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#branches:210"><span class="id" title="variable">branches</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="br:212" class="idref" href="#br:212"><span class="id" title="binder">br</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#branch"><span class="id" title="record">branch</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#br:212"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> (<a class="idref" href="MetaRocq.Template.Ast.html#bbody"><span class="id" title="projection">bbody</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#br:212"><span class="id" title="variable">br</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#branches:210"><span class="id" title="variable">branches</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ci:207"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#type_info:208"><span class="id" title="variable">type_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#discr:209"><span class="id" title="variable">discr</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#branches:210"><span class="id" title="variable">branches</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="737c3e90618745cab505c1b4fbacd6e6" class="idref" href="#737c3e90618745cab505c1b4fbacd6e6"><span class="id" title="binder">Γ</span></a> (<a id="proj:214" class="idref" href="#proj:214"><span class="id" title="binder">proj</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#projection"><span class="id" title="record">projection</span></a>) (<a id="t:215" class="idref" href="#t:215"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#737c3e90618745cab505c1b4fbacd6e6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:215"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#737c3e90618745cab505c1b4fbacd6e6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:215"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#737c3e90618745cab505c1b4fbacd6e6"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tProj"><span class="id" title="constructor">tProj</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#proj:214"><span class="id" title="variable">proj</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:215"><span class="id" title="variable">t</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="e94552e84324b5892c5ac140d3d1c118" class="idref" href="#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="binder">Γ</span></a> (<a id="mfix:217" class="idref" href="#mfix:217"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="idx:218" class="idref" href="#idx:218"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:219" class="idref" href="#d:219"><span class="id" title="binder">d</span></a> <a id="args:220" class="idref" href="#args:220"><span class="id" title="binder">args</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#d:219"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:219"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:221" class="idref" href="#d:221"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:221"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">let</span> <a id="ctx:224" class="idref" href="#ctx:224"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<a id="i:222" class="idref" href="#i:222"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:223" class="idref" href="#d:223"><span class="id" title="binder">d</span></a> ⇒ 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:223"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:224"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:221"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:225" class="idref" href="#d:225"><span class="id" title="binder">d</span></a> ⇒ <span class="id" title="keyword">let</span> <a id="ctx:228" class="idref" href="#ctx:228"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<a id="i:226" class="idref" href="#i:226"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a id="d:227" class="idref" href="#d:227"><span class="id" title="binder">d</span></a> ⇒ 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:227"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:228"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:225"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:220"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:220"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#args:220"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:218"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:219"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:220"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:219"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e94552e84324b5892c5ac140d3d1c118"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:217"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:218"><span class="id" title="variable">idx</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:220"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="9ad2b50a24cb26b00905e5d872037c4c" class="idref" href="#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="binder">Γ</span></a> (<a id="mfix:230" class="idref" href="#mfix:230"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) (<a id="idx:231" class="idref" href="#idx:231"><span class="id" title="binder">idx</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:232" class="idref" href="#d:232"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:230"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:232"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:230"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d:233" class="idref" href="#d:233"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:230"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:233"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:230"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:230"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:231"><span class="id" title="variable">idx</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="0328fd687cee8e3ffffa92b16cc78e89" class="idref" href="#0328fd687cee8e3ffffa92b16cc78e89"><span class="id" title="binder">Γ</span></a> (<a id="ind:235" class="idref" href="#ind:235"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="c:236" class="idref" href="#c:236"><span class="id" title="binder">c</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="u:237" class="idref" href="#u:237"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="mind:238" class="idref" href="#mind:238"><span class="id" title="binder">mind</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) (<a id="idecl:239" class="idref" href="#idecl:239"><span class="id" title="binder">idecl</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a id="cdecl:240" class="idref" href="#cdecl:240"><span class="id" title="binder">cdecl</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.constructor_body"><span class="id" title="record">constructor_body</span></a>) (<a id="args:241" class="idref" href="#args:241"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>),<br/>
&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:235"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:236"><span class="id" title="variable">c</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:238"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:239"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:240"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:241"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:238"><span class="id" title="variable">mind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:240"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0328fd687cee8e3ffffa92b16cc78e89"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:241"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0328fd687cee8e3ffffa92b16cc78e89"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:241"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#0328fd687cee8e3ffffa92b16cc78e89"><span class="id" title="variable">Γ</span></a>(<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:235"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:236"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:237"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:241"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="570e3711a725ac9b838f519a4a277354" class="idref" href="#570e3711a725ac9b838f519a4a277354"><span class="id" title="binder">Γ</span></a> <a id="i:243" class="idref" href="#i:243"><span class="id" title="binder">i</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#570e3711a725ac9b838f519a4a277354"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tInt"><span class="id" title="constructor">tInt</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:243"><span class="id" title="variable">i</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="106fc6ce7472546bbf9056f996d95905" class="idref" href="#106fc6ce7472546bbf9056f996d95905"><span class="id" title="binder">Γ</span></a> <a id="f:245" class="idref" href="#f:245"><span class="id" title="binder">f</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFloat"><span class="id" title="constructor">tFloat</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:245"><span class="id" title="variable">f</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="2b367ef3a86264a075d7d0769f5a51c0" class="idref" href="#2b367ef3a86264a075d7d0769f5a51c0"><span class="id" title="binder">Γ</span></a> <a id="s:247" class="idref" href="#s:247"><span class="id" title="binder">s</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2b367ef3a86264a075d7d0769f5a51c0"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tString"><span class="id" title="constructor">tString</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:247"><span class="id" title="variable">s</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="a65a72488b7a60e3e728e5337190d1b4" class="idref" href="#a65a72488b7a60e3e728e5337190d1b4"><span class="id" title="binder">Γ</span></a> <a id="u:249" class="idref" href="#u:249"><span class="id" title="binder">u</span></a> <a id="arr:250" class="idref" href="#arr:250"><span class="id" title="binder">arr</span></a> <a id="def:251" class="idref" href="#def:251"><span class="id" title="binder">def</span></a> <a id="ty:252" class="idref" href="#ty:252"><span class="id" title="binder">ty</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a65a72488b7a60e3e728e5337190d1b4"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#arr:250"><span class="id" title="variable">arr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a65a72488b7a60e3e728e5337190d1b4"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:251"><span class="id" title="variable">def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a65a72488b7a60e3e728e5337190d1b4"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:252"><span class="id" title="variable">ty</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a65a72488b7a60e3e728e5337190d1b4"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tArray"><span class="id" title="constructor">tArray</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:249"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#arr:250"><span class="id" title="variable">arr</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#def:251"><span class="id" title="variable">def</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:252"><span class="id" title="variable">ty</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<span class="id" title="keyword">∀</span> <a id="8ea3abb1296c9ee6a4358e5f99a49ac0" class="idref" href="#8ea3abb1296c9ee6a4358e5f99a49ac0"><span class="id" title="binder">Γ</span></a>, <span class="id" title="keyword">∀</span> <a id="t:254" class="idref" href="#t:254"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#996801865fff84df7746f7d16aabfe4b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8ea3abb1296c9ee6a4358e5f99a49ac0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:254"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:158"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8ea3abb1296c9ee6a4358e5f99a49ac0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:254"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">P</span> <span class="id" title="var">HRel</span> <span class="id" title="var">HRel_app</span> <span class="id" title="var">HVar</span> <span class="id" title="var">HEvar</span> <span class="id" title="var">HSort</span> <span class="id" title="var">HCast</span> <span class="id" title="var">HProd</span> <span class="id" title="var">HLamdba</span> <span class="id" title="var">HLetIn</span> <span class="id" title="var">HApp</span> <span class="id" title="var">HConst</span> <span class="id" title="var">HInd</span> <span class="id" title="var">HConstruct</span> <span class="id" title="var">HCase</span> <span class="id" title="var">HProj</span> <span class="id" title="var">HFix</span> <span class="id" title="var">HCoFix</span> <span class="id" title="var">HConstruct_app</span> <span class="id" title="keyword">Hint</span> <span class="id" title="var">Hfloat</span> <span class="id" title="var">Hstring</span> <span class="id" title="var">Harr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> 3.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">Hexp</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Hexp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="keyword">let</span> <span class="id" title="var">all</span> := <span class="id" title="tactic">fresh</span> "all" <span class="id" title="tactic">in</span> <span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">all</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HRel_app</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span> <span class="id" title="var">all</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HEvar</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span> <span class="id" title="var">all</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HApp</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HCase</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="var">P</span> <span class="id" title="var">Γ</span>) <span class="id" title="var">args</span>). { <span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span> <span class="id" title="var">all</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">HFix</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">mfix</span> <span class="id" title="tactic">at</span> 1 3. <span class="id" title="tactic">intros</span> <span class="id" title="var">mfix0</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HCoFix</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">all</span>. <span class="id" title="tactic">clear</span> - <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">mfix</span> <span class="id" title="tactic">at</span> 1 3. <span class="id" title="tactic">intros</span> <span class="id" title="var">mfix0</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">HConstruct_app</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">all</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">Harr</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">all</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">all</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Hint Constructors</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="expanded_constant_decl" class="idref" href="#expanded_constant_decl"><span class="id" title="record">expanded_constant_decl</span></a> <a id="909d71ef3eb6d1f9583fd04358b814cb" class="idref" href="#909d71ef3eb6d1f9583fd04358b814cb"><span class="id" title="binder">Σ</span></a> (<a id="cb:256" class="idref" href="#cb:256"><span class="id" title="binder">cb</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.constant_body"><span class="id" title="record">Ast.Env.constant_body</span></a>) : <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;{ <a id="expanded_body" class="idref" href="#expanded_body"><span class="id" title="projection">expanded_body</span></a> : <a class="idref" href="MetaRocq.Utils.MROption.html#on_Some_or_None"><span class="id" title="definition">on_Some_or_None</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#909d71ef3eb6d1f9583fd04358b814cb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cb:256"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_body"><span class="id" title="projection">Ast.Env.cst_body</span></a>); }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expanded_context" class="idref" href="#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a id="94d0c84ed07cc9827b73907d01f025a5" class="idref" href="#94d0c84ed07cc9827b73907d01f025a5"><span class="id" title="binder">Σ</span></a> <a id="a54d2d50b80047a260a1ff9aef9408a2" class="idref" href="#a54d2d50b80047a260a1ff9aef9408a2"><span class="id" title="binder">Γ</span></a> <a id="ctx:261" class="idref" href="#ctx:261"><span class="id" title="binder">ctx</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="c5f6c0a3831263fdd5ef7f39c01b961f" class="idref" href="#c5f6c0a3831263fdd5ef7f39c01b961f"><span class="id" title="binder">Δ</span></a> <a id="d:263" class="idref" href="#d:263"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MROption.html#ForOption"><span class="id" title="inductive">ForOption</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#94d0c84ed07cc9827b73907d01f025a5"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#c5f6c0a3831263fdd5ef7f39c01b961f"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a54d2d50b80047a260a1ff9aef9408a2"><span class="id" title="variable">Γ</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:263"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:261"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="expanded_constructor_decl" class="idref" href="#expanded_constructor_decl"><span class="id" title="record">expanded_constructor_decl</span></a> <a id="749c6f5b74080e309a38b3d99d675867" class="idref" href="#749c6f5b74080e309a38b3d99d675867"><span class="id" title="binder">Σ</span></a> <a id="mdecl:265" class="idref" href="#mdecl:265"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:266" class="idref" href="#cdecl:266"><span class="id" title="binder">cdecl</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="expanded_cstr_args" class="idref" href="#expanded_cstr_args"><span class="id" title="projection">expanded_cstr_args</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#749c6f5b74080e309a38b3d99d675867"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:265"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:265"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:266"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="expanded_cstr_type" class="idref" href="#expanded_cstr_type"><span class="id" title="projection">expanded_cstr_type</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#749c6f5b74080e309a38b3d99d675867"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:265"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:266"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_type"><span class="id" title="projection">cstr_type</span></a>) }.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="expanded_inductive_decl" class="idref" href="#expanded_inductive_decl"><span class="id" title="record">expanded_inductive_decl</span></a> <a id="4e55f902055574206974ced071a2f4cb" class="idref" href="#4e55f902055574206974ced071a2f4cb"><span class="id" title="binder">Σ</span></a> <a id="mdecl:271" class="idref" href="#mdecl:271"><span class="id" title="binder">mdecl</span></a> <a id="idecl:272" class="idref" href="#idecl:272"><span class="id" title="binder">idecl</span></a> :=<br/>
&nbsp;&nbsp;{ <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="expanded_ind_ctors" class="idref" href="#expanded_ind_ctors"><span class="id" title="projection">expanded_ind_ctors</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_constructor_decl"><span class="id" title="record">expanded_constructor_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4e55f902055574206974ced071a2f4cb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:271"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:272"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_ctors"><span class="id" title="projection">ind_ctors</span></a>) }.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="expanded_minductive_decl" class="idref" href="#expanded_minductive_decl"><span class="id" title="record">expanded_minductive_decl</span></a> <a id="a30eea3a9237187b162f4293473b8a7d" class="idref" href="#a30eea3a9237187b162f4293473b8a7d"><span class="id" title="binder">Σ</span></a> <a id="mdecl:276" class="idref" href="#mdecl:276"><span class="id" title="binder">mdecl</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="expanded_params" class="idref" href="#expanded_params"><span class="id" title="projection">expanded_params</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a30eea3a9237187b162f4293473b8a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:276"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="expanded_ind_bodies" class="idref" href="#expanded_ind_bodies"><span class="id" title="projection">expanded_ind_bodies</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_inductive_decl"><span class="id" title="record">expanded_inductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a30eea3a9237187b162f4293473b8a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:276"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:276"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a>) }.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expanded_decl" class="idref" href="#expanded_decl"><span class="id" title="definition">expanded_decl</span></a> <a id="16d5a522716a87cb2083ccb2eeedfdc3" class="idref" href="#16d5a522716a87cb2083ccb2eeedfdc3"><span class="id" title="binder">Σ</span></a> <a id="d:281" class="idref" href="#d:281"><span class="id" title="binder">d</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:281"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#Env.ConstantDecl"><span class="id" title="constructor">Ast.Env.ConstantDecl</span></a> <span class="id" title="var">cb</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_constant_decl"><span class="id" title="record">expanded_constant_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#16d5a522716a87cb2083ccb2eeedfdc3"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">cb</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#Env.InductiveDecl"><span class="id" title="constructor">Ast.Env.InductiveDecl</span></a> <span class="id" title="var">idecl</span> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_minductive_decl"><span class="id" title="record">expanded_minductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#16d5a522716a87cb2083ccb2eeedfdc3"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">idecl</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="expanded_global_declarations" class="idref" href="#expanded_global_declarations"><span class="id" title="definition, inductive"><span id="expanded_global_declarations_ind" class="id"><span id="expanded_global_declarations_sind" class="id">expanded_global_declarations</span></span></span></a> (<a id="univs:283" class="idref" href="#univs:283"><span class="id" title="binder">univs</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#ContextSet.t"><span class="id" title="definition">ContextSet.t</span></a>) (<a id="retro:284" class="idref" href="#retro:284"><span class="id" title="binder">retro</span></a> : <a class="idref" href="MetaRocq.Common.Environment.html#Retroknowledge.t"><span class="id" title="record">Environment.Retroknowledge.t</span></a>) : <span class="id" title="keyword">∀</span> (<a id="ecfbdabaddf4e5284d914e21ad7ca23c" class="idref" href="#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_declarations"><span class="id" title="definition">Ast.Env.global_declarations</span></a>), <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="expanded_global_nil" class="idref" href="#expanded_global_nil"><span class="id" title="constructor">expanded_global_nil</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_declarations:286"><span class="id" title="inductive">expanded_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#univs:283"><span class="id" title="variable">univs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#retro:284"><span class="id" title="variable">retro</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
| <a id="expanded_global_cons" class="idref" href="#expanded_global_cons"><span class="id" title="constructor">expanded_global_cons</span></a> <a id="decl:288" class="idref" href="#decl:288"><span class="id" title="binder">decl</span></a> <a id="ad88ea6a66ae7eba2e65699d3219222e" class="idref" href="#ad88ea6a66ae7eba2e65699d3219222e"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_declarations:286"><span class="id" title="inductive">expanded_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#univs:283"><span class="id" title="variable">univs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#retro:284"><span class="id" title="variable">retro</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad88ea6a66ae7eba2e65699d3219222e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a> {| <a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">Ast.Env.universes</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#univs:283"><span class="id" title="variable">univs</span></a>; <a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">Ast.Env.declarations</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad88ea6a66ae7eba2e65699d3219222e"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">Ast.Env.retroknowledge</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#retro:284"><span class="id" title="variable">retro</span></a> |} <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:288"><span class="id" title="variable">decl</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_declarations:286"><span class="id" title="inductive">expanded_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#univs:283"><span class="id" title="variable">univs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#retro:284"><span class="id" title="variable">retro</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:288"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad88ea6a66ae7eba2e65699d3219222e"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expanded_global_env" class="idref" href="#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a> (<a id="g:290" class="idref" href="#g:290"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">Ast.Env.global_env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_declarations"><span class="id" title="inductive">expanded_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#g:290"><span class="id" title="variable">g</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">Ast.Env.universes</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#g:290"><span class="id" title="variable">g</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">Ast.Env.retroknowledge</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#g:290"><span class="id" title="variable">g</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">Ast.Env.declarations</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="expanded_program" class="idref" href="#expanded_program"><span class="id" title="definition">expanded_program</span></a> (<a id="p:291" class="idref" href="#p:291"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.program"><span class="id" title="definition">Ast.Env.program</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:291"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:291"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#p:291"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="isFix_app" class="idref" href="#isFix_app"><span class="id" title="definition">isFix_app</span></a> <a id="t:292" class="idref" href="#t:292"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:292"><span class="id" title="variable">t</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="isRel_app" class="idref" href="#isRel_app"><span class="id" title="definition">isRel_app</span></a> <a id="t:293" class="idref" href="#t:293"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:293"><span class="id" title="variable">t</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_fold_lambda" class="idref" href="#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a> <a id="d2959ac75b6e0d36cc79e21b63eb81d5" class="idref" href="#d2959ac75b6e0d36cc79e21b63eb81d5"><span class="id" title="binder">Σ</span></a> <a id="650d8606e8d060c2403a37901cccc7f8" class="idref" href="#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="binder">Γ</span></a> <a id="t:296" class="idref" href="#t:296"><span class="id" title="binder">t</span></a> <a id="l:297" class="idref" href="#l:297"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d2959ac75b6e0d36cc79e21b63eb81d5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="variable">Γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> <a id="d:298" class="idref" href="#d:298"><span class="id" title="binder">d</span></a> (<a id="b:299" class="idref" href="#b:299"><span class="id" title="binder">b</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:298"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:298"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#b:299"><span class="id" title="variable">b</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:296"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:297"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a>   <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d2959ac75b6e0d36cc79e21b63eb81d5"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#l:297"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#650d8606e8d060c2403a37901cccc7f8"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:296"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [ | []] <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>, <span class="id" title="var">Γ</span> |- *; <span class="id" title="var">cbn</span> - [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_mkApps_tConstruct" class="idref" href="#expanded_mkApps_tConstruct"><span class="id" title="lemma">expanded_mkApps_tConstruct</span></a> <a id="4e5abe9f83af3c7b054a6daf55c8c3da" class="idref" href="#4e5abe9f83af3c7b054a6daf55c8c3da"><span class="id" title="binder">Σ</span></a> <a id="e991ebbaabb06c88d25b8e54c028289b" class="idref" href="#e991ebbaabb06c88d25b8e54c028289b"><span class="id" title="binder">Γ</span></a> <a id="mind:302" class="idref" href="#mind:302"><span class="id" title="binder">mind</span></a> <a id="idecl:303" class="idref" href="#idecl:303"><span class="id" title="binder">idecl</span></a> <a id="cdecl:304" class="idref" href="#cdecl:304"><span class="id" title="binder">cdecl</span></a> <a id="ind:305" class="idref" href="#ind:305"><span class="id" title="binder">ind</span></a> <a id="idx:306" class="idref" href="#idx:306"><span class="id" title="binder">idx</span></a> <a id="u:307" class="idref" href="#u:307"><span class="id" title="binder">u</span></a> <a id="args:308" class="idref" href="#args:308"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4e5abe9f83af3c7b054a6daf55c8c3da"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:305"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:306"><span class="id" title="variable">idx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:302"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:303"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:304"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:308"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mind:302"><span class="id" title="variable">mind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:304"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4e5abe9f83af3c7b054a6daf55c8c3da"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e991ebbaabb06c88d25b8e54c028289b"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:308"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4e5abe9f83af3c7b054a6daf55c8c3da"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e991ebbaabb06c88d25b8e54c028289b"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:305"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:306"><span class="id" title="variable">idx</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:307"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:308"><span class="id" title="variable">args</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdecl</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_mkApps_tFix" class="idref" href="#expanded_mkApps_tFix"><span class="id" title="lemma">expanded_mkApps_tFix</span></a> <a id="777265ea0cda54bd118fda01709e8a38" class="idref" href="#777265ea0cda54bd118fda01709e8a38"><span class="id" title="binder">Σ</span></a> <a id="9a65bf4ad7d36f3ffe676c94fa1431d2" class="idref" href="#9a65bf4ad7d36f3ffe676c94fa1431d2"><span class="id" title="binder">Γ</span></a> <a id="mfix:311" class="idref" href="#mfix:311"><span class="id" title="binder">mfix</span></a> <a id="idx:312" class="idref" href="#idx:312"><span class="id" title="binder">idx</span></a> <a id="d:313" class="idref" href="#d:313"><span class="id" title="binder">d</span></a> <a id="args:314" class="idref" href="#args:314"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#d:313"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:313"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:311"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:312"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:313"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:314"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#d:313"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d0:315" class="idref" href="#d0:315"><span class="id" title="binder">d0</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d0:315"><span class="id" title="variable">d0</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctx:317" class="idref" href="#ctx:317"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">_</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="d1:316" class="idref" href="#d1:316"><span class="id" title="binder">d1</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒ 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d1:316"><span class="id" title="variable">d1</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:311"><span class="id" title="variable">mfix</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#777265ea0cda54bd118fda01709e8a38"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:317"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9a65bf4ad7d36f3ffe676c94fa1431d2"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d0:315"><span class="id" title="variable">d0</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:311"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#777265ea0cda54bd118fda01709e8a38"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9a65bf4ad7d36f3ffe676c94fa1431d2"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:314"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#args:314"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#777265ea0cda54bd118fda01709e8a38"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9a65bf4ad7d36f3ffe676c94fa1431d2"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:311"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:312"><span class="id" title="variable">idx</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:314"><span class="id" title="variable">args</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdecl</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_mkApps_tFix_inv" class="idref" href="#expanded_mkApps_tFix_inv"><span class="id" title="lemma">expanded_mkApps_tFix_inv</span></a> <a id="dcf172020ed7587215e246e9a220e523" class="idref" href="#dcf172020ed7587215e246e9a220e523"><span class="id" title="binder">Σ</span></a> <a id="3bc431e75147981d79d593ac2495617b" class="idref" href="#3bc431e75147981d79d593ac2495617b"><span class="id" title="binder">Γ</span></a> <a id="mfix:320" class="idref" href="#mfix:320"><span class="id" title="binder">mfix</span></a> <a id="idx:321" class="idref" href="#idx:321"><span class="id" title="binder">idx</span></a> <a id="args:322" class="idref" href="#args:322"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#dcf172020ed7587215e246e9a220e523"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3bc431e75147981d79d593ac2495617b"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:320"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:321"><span class="id" title="variable">idx</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:322"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="d0:323" class="idref" href="#d0:323"><span class="id" title="binder">d0</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d0:323"><span class="id" title="variable">d0</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="keyword">let</span> <a id="ctx:325" class="idref" href="#ctx:325"><span class="id" title="binder">ctx</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> (<span class="id" title="var">_</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="d1:324" class="idref" href="#d1:324"><span class="id" title="binder">d1</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒ 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d1:324"><span class="id" title="variable">d1</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:320"><span class="id" title="variable">mfix</span></a>) <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#dcf172020ed7587215e246e9a220e523"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:325"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3bc431e75147981d79d593ac2495617b"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d0:323"><span class="id" title="variable">d0</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:320"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">inversion</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_tApp_args" class="idref" href="#expanded_tApp_args"><span class="id" title="lemma">expanded_tApp_args</span></a> <a id="4a71d8014be45b8930cc05a0c5ed961a" class="idref" href="#4a71d8014be45b8930cc05a0c5ed961a"><span class="id" title="binder">Σ</span></a> <a id="8ed1a83ac26c1460fed0a5fb655f16c8" class="idref" href="#8ed1a83ac26c1460fed0a5fb655f16c8"><span class="id" title="binder">Γ</span></a> <a id="t:328" class="idref" href="#t:328"><span class="id" title="binder">t</span></a> <a id="args:329" class="idref" href="#args:329"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4a71d8014be45b8930cc05a0c5ed961a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8ed1a83ac26c1460fed0a5fb655f16c8"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:328"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:329"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4a71d8014be45b8930cc05a0c5ed961a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8ed1a83ac26c1460fed0a5fb655f16c8"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:329"><span class="id" title="variable">args</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_tApps_inv" class="idref" href="#expanded_tApps_inv"><span class="id" title="lemma">expanded_tApps_inv</span></a> <a id="17491d5d06775fe5ed36d397c3f63bad" class="idref" href="#17491d5d06775fe5ed36d397c3f63bad"><span class="id" title="binder">Σ</span></a> <a id="1cf167e642e54758d845c690d9c664ed" class="idref" href="#1cf167e642e54758d845c690d9c664ed"><span class="id" title="binder">Γ</span></a> <a id="t:332" class="idref" href="#t:332"><span class="id" title="binder">t</span></a> <a id="args:333" class="idref" href="#args:333"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#17491d5d06775fe5ed36d397c3f63bad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1cf167e642e54758d845c690d9c664ed"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:332"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:333"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="args':334" class="idref" href="#args':334"><span class="id" title="binder">args'</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args':334"><span class="id" title="variable">args'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:333"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#17491d5d06775fe5ed36d397c3f63bad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1cf167e642e54758d845c690d9c664ed"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args':334"><span class="id" title="variable">args'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#17491d5d06775fe5ed36d397c3f63bad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1cf167e642e54758d845c690d9c664ed"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:332"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args':334"><span class="id" title="variable">args'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">invs</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>, <span class="id" title="var">args'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span> || <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_mkApps_inv" class="idref" href="#expanded_mkApps_inv"><span class="id" title="lemma">expanded_mkApps_inv</span></a> <a id="a5111a3f630bd5066ff170052ff5725b" class="idref" href="#a5111a3f630bd5066ff170052ff5725b"><span class="id" title="binder">Σ</span></a> <a id="f27b974bed4a71ab6ac44fa8943c1022" class="idref" href="#f27b974bed4a71ab6ac44fa8943c1022"><span class="id" title="binder">Γ</span></a> <a id="t:337" class="idref" href="#t:337"><span class="id" title="binder">t</span></a> <a id="args:338" class="idref" href="#args:338"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a5111a3f630bd5066ff170052ff5725b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f27b974bed4a71ab6ac44fa8943c1022"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:337"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:338"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="args':339" class="idref" href="#args':339"><span class="id" title="binder">args'</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args':339"><span class="id" title="variable">args'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#args:338"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a5111a3f630bd5066ff170052ff5725b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f27b974bed4a71ab6ac44fa8943c1022"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args':339"><span class="id" title="variable">args'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a5111a3f630bd5066ff170052ff5725b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f27b974bed4a71ab6ac44fa8943c1022"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:337"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args':339"><span class="id" title="variable">args'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>, <span class="id" title="var">args</span>, <span class="id" title="var">H</span>, <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApps_inv"><span class="id" title="lemma">expanded_tApps_inv</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invs</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApps_inv"><span class="id" title="lemma">expanded_tApps_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#app_Forall"><span class="id" title="lemma">app_Forall</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApp_args"><span class="id" title="lemma">expanded_tApp_args</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">invs</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApps_inv"><span class="id" title="lemma">expanded_tApps_inv</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApps_inv"><span class="id" title="lemma">expanded_tApps_inv</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#app_Forall"><span class="id" title="lemma">app_Forall</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tApp_args"><span class="id" title="lemma">expanded_tApp_args</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_app"><span class="id" title="lemma">Forall_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_mkApps" class="idref" href="#expanded_mkApps"><span class="id" title="lemma">expanded_mkApps</span></a> <a id="75f23cbb2e43fc6dcdac1d76f0872a8d" class="idref" href="#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="binder">Σ</span></a> <a id="ffb18a72f25d3c5701a2687258c75b54" class="idref" href="#ffb18a72f25d3c5701a2687258c75b54"><span class="id" title="binder">Γ</span></a> <a id="f:342" class="idref" href="#f:342"><span class="id" title="binder">f</span></a> <a id="args:343" class="idref" href="#args:343"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ffb18a72f25d3c5701a2687258c75b54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:342"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ffb18a72f25d3c5701a2687258c75b54"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:343"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#75f23cbb2e43fc6dcdac1d76f0872a8d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ffb18a72f25d3c5701a2687258c75b54"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:342"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:343"><span class="id" title="variable">args</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_inv"><span class="id" title="lemma">expanded_mkApps_inv</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">args</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Local Hint Rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_combine"><span class="id" title="lemma">length_combine</span></a> : <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Local Hint Rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> : <span class="id" title="var">list</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="apply_expanded" class="idref" href="#apply_expanded"><span class="id" title="lemma">apply_expanded</span></a> <a id="a8de0272f306b256250e5189e52eca25" class="idref" href="#a8de0272f306b256250e5189e52eca25"><span class="id" title="binder">Σ</span></a> <a id="5555876ff6e84fc977aae9dbc224f192" class="idref" href="#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="binder">Γ</span></a> <a id="3266b4e9f36d54d7c1616e5c9e6fb823" class="idref" href="#3266b4e9f36d54d7c1616e5c9e6fb823"><span class="id" title="binder">Γ'</span></a> <a id="t:347" class="idref" href="#t:347"><span class="id" title="binder">t</span></a> <a id="t':348" class="idref" href="#t':348"><span class="id" title="binder">t'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a8de0272f306b256250e5189e52eca25"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:347"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5555876ff6e84fc977aae9dbc224f192"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3266b4e9f36d54d7c1616e5c9e6fb823"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:347"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t':348"><span class="id" title="variable">t'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a8de0272f306b256250e5189e52eca25"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3266b4e9f36d54d7c1616e5c9e6fb823"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t':348"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ext_lift" class="idref" href="#ext_lift"><span class="id" title="lemma">ext_lift</span></a> <a id="n:349" class="idref" href="#n:349"><span class="id" title="binder">n</span></a> <a id="m:350" class="idref" href="#m:350"><span class="id" title="binder">m</span></a> <a id="n':351" class="idref" href="#n':351"><span class="id" title="binder">n'</span></a> <a id="m':352" class="idref" href="#m':352"><span class="id" title="binder">m'</span></a> <a id="t:353" class="idref" href="#t:353"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#n':351"><span class="id" title="variable">n'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:349"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m':352"><span class="id" title="variable">m'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:350"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:349"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:350"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:353"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n':351"><span class="id" title="variable">n'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m':352"><span class="id" title="variable">m'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:353"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decompose_prod_lift" class="idref" href="#decompose_prod_lift"><span class="id" title="lemma">decompose_prod_lift</span></a> <a id="t:354" class="idref" href="#t:354"><span class="id" title="binder">t</span></a> <a id="n:355" class="idref" href="#n:355"><span class="id" title="binder">n</span></a> <a id="m:356" class="idref" href="#m:356"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:354"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:355"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:356"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:354"><span class="id" title="variable">t</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">m</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> <span class="id" title="var">t2</span>) <span class="id" title="keyword">as</span> [[]]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHt2</span> <span class="id" title="var">n</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <span class="id" title="var">n</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">t2</span>)) <span class="id" title="keyword">as</span> [[]]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_lift'" class="idref" href="#context_assumptions_lift'"><span class="id" title="lemma">context_assumptions_lift'</span></a> <a id="t:357" class="idref" href="#t:357"><span class="id" title="binder">t</span></a> <a id="4df62c979e3abd2ab398ba933d53992f" class="idref" href="#4df62c979e3abd2ab398ba933d53992f"><span class="id" title="binder">Γ</span></a> <a id="79fee11711c039043fcb21a4d5091bb5" class="idref" href="#79fee11711c039043fcb21a4d5091bb5"><span class="id" title="binder">Γ'</span></a> <a id="n:360" class="idref" href="#n:360"><span class="id" title="binder">n</span></a> <a id="m:361" class="idref" href="#m:361"><span class="id" title="binder">m</span></a> :<br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4df62c979e3abd2ab398ba933d53992f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#79fee11711c039043fcb21a4d5091bb5"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4df62c979e3abd2ab398ba933d53992f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:357"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#79fee11711c039043fcb21a4d5091bb5"><span class="id" title="variable">Γ'</span></a>  (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:360"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:361"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:357"><span class="id" title="variable">t</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span>, <span class="id" title="var">Γ'</span>, <span class="id" title="var">Hlen</span>, <span class="id" title="var">n</span>, <span class="id" title="var">m</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt2</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt3</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_lift" class="idref" href="#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a> <a id="t:362" class="idref" href="#t:362"><span class="id" title="binder">t</span></a> <a id="n:363" class="idref" href="#n:363"><span class="id" title="binder">n</span></a> <a id="m:364" class="idref" href="#m:364"><span class="id" title="binder">m</span></a> :<br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:362"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:363"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:364"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:362"><span class="id" title="variable">t</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift'"><span class="id" title="lemma">context_assumptions_lift'</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isLambda_unlift" class="idref" href="#isLambda_unlift"><span class="id" title="lemma">isLambda_unlift</span></a> <a id="n:365" class="idref" href="#n:365"><span class="id" title="binder">n</span></a> <a id="k:366" class="idref" href="#k:366"><span class="id" title="binder">k</span></a> <a id="t:367" class="idref" href="#t:367"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:365"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k:366"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:367"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:367"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_unlift" class="idref" href="#expanded_unlift"><span class="id" title="lemma">expanded_unlift</span></a> {<a id="1faea04b7104a714a32901c1d6de2dd3" class="idref" href="#1faea04b7104a714a32901c1d6de2dd3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>} <a id="0f249b6894bdb3c94914a8118ef6274a" class="idref" href="#0f249b6894bdb3c94914a8118ef6274a"><span class="id" title="binder">Γ'</span></a> <a id="b6a7220aa657de598906097279eeef5e" class="idref" href="#b6a7220aa657de598906097279eeef5e"><span class="id" title="binder">Γ''</span></a> <a id="7b55871794ee753afdd3fa8de0585697" class="idref" href="#7b55871794ee753afdd3fa8de0585697"><span class="id" title="binder">Γ</span></a> <a id="t:372" class="idref" href="#t:372"><span class="id" title="binder">t</span></a> <a id="f5b08d89eb2bf2c6ce0808859619209e" class="idref" href="#f5b08d89eb2bf2c6ce0808859619209e"><span class="id" title="binder">Γgoal</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1faea04b7104a714a32901c1d6de2dd3"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#0f249b6894bdb3c94914a8118ef6274a"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b6a7220aa657de598906097279eeef5e"><span class="id" title="variable">Γ''</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7b55871794ee753afdd3fa8de0585697"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#b6a7220aa657de598906097279eeef5e"><span class="id" title="variable">Γ''</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#0f249b6894bdb3c94914a8118ef6274a"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:372"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.EtaExpand.html#0f249b6894bdb3c94914a8118ef6274a"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7b55871794ee753afdd3fa8de0585697"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f5b08d89eb2bf2c6ce0808859619209e"><span class="id" title="variable">Γgoal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1faea04b7104a714a32901c1d6de2dd3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f5b08d89eb2bf2c6ce0808859619209e"><span class="id" title="variable">Γgoal</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:372"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hexp</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">Γ'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ''</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ</span>)%<span class="id" title="var">list</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Γ_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> ((<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ''</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">t</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">t_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Hexp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ'</span>, <span class="id" title="var">Γ''</span>, <span class="id" title="var">Γ</span>, <span class="id" title="var">HeqΓ_</span>, <span class="id" title="var">Heqt_</span>, <span class="id" title="var">t</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">invs</span> <span class="id" title="var">Heqt_</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rename</span> <span class="id" title="var">n0</span> <span class="id" title="var">into</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">econstructor</span>. 3:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map_inv"><span class="id" title="lemma">Forall_map_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">Heq</span>. <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHexp</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHHexp2</span>. 2: <span class="id" title="var">now</span> <span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_inv"><span class="id" title="lemma">All_map_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">solve_all</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">b</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ'</span>)%<span class="id" title="var">list</span> <span class="id" title="var">Γ''</span> <span class="id" title="var">Γ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="var">now</span>  <span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">mfix0</span> <span class="id" title="var">idx0</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">EE</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map_inv"><span class="id" title="lemma">Forall_map_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>, <span class="id" title="var">H1</span>, <span class="id" title="var">H3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isLambda_unlift"><span class="id" title="lemma">isLambda_unlift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">args0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">revert</span> <span class="id" title="var">H6</span>. <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H6</span>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="var">list</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_lift" class="idref" href="#expanded_lift"><span class="id" title="lemma">expanded_lift</span></a> {<a id="36ee07bc0a26d587610e463347205779" class="idref" href="#36ee07bc0a26d587610e463347205779"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>} <a id="0a4f7affa92769769768425e78b0fd3e" class="idref" href="#0a4f7affa92769769768425e78b0fd3e"><span class="id" title="binder">Γ'</span></a> <a id="34a8944fa4cc492a17afef1395532caa" class="idref" href="#34a8944fa4cc492a17afef1395532caa"><span class="id" title="binder">Γ''</span></a> <a id="cd31d2c1f73acfd70b63c94c1423b42c" class="idref" href="#cd31d2c1f73acfd70b63c94c1423b42c"><span class="id" title="binder">Γ</span></a> <a id="t:378" class="idref" href="#t:378"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#36ee07bc0a26d587610e463347205779"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#0a4f7affa92769769768425e78b0fd3e"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cd31d2c1f73acfd70b63c94c1423b42c"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:378"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#36ee07bc0a26d587610e463347205779"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#0a4f7affa92769769768425e78b0fd3e"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#34a8944fa4cc492a17afef1395532caa"><span class="id" title="variable">Γ''</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cd31d2c1f73acfd70b63c94c1423b42c"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#34a8944fa4cc492a17afef1395532caa"><span class="id" title="variable">Γ''</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#0a4f7affa92769769768425e78b0fd3e"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:378"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">remember</span> (<span class="id" title="var">Γ'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ</span>)%<span class="id" title="var">list</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Γ_</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">Γ'</span>, <span class="id" title="var">Γ''</span>, <span class="id" title="var">Γ</span>, <span class="id" title="var">HeqΓ_</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. 3: <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHexpanded</span>. <span class="id" title="var">now</span> <span class="id" title="var">simpl_list</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_comm_cons"><span class="id" title="lemma">app_comm_cons</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHexpanded2</span>. <span class="id" title="var">now</span> <span class="id" title="var">simpl_list</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">f7</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">a</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ'</span>)%<span class="id" title="var">list</span> <span class="id" title="var">Γ''</span> <span class="id" title="var">Γ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="var">now</span>  <span class="id" title="tactic">eapply</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#apply_expanded"><span class="id" title="lemma">apply_expanded</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">list</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>, <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">a</span> (<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">list</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). 5: <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">shelve</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="var">list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map"><span class="id" title="lemma">Forall_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_lift'" class="idref" href="#expanded_lift'"><span class="id" title="lemma">expanded_lift'</span></a> {<a id="1a1a7f505fd4e19c418fac28d7be95d2" class="idref" href="#1a1a7f505fd4e19c418fac28d7be95d2"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>} <a id="72749857707465c155fd8128753f7d4e" class="idref" href="#72749857707465c155fd8128753f7d4e"><span class="id" title="binder">Γ'</span></a> <a id="5582cdd53c0521e9a2308cf4da9f3f18" class="idref" href="#5582cdd53c0521e9a2308cf4da9f3f18"><span class="id" title="binder">Γ''</span></a> <a id="05d67ada0e96bf50a6c570f2e22e4153" class="idref" href="#05d67ada0e96bf50a6c570f2e22e4153"><span class="id" title="binder">Γ</span></a> <a id="t:383" class="idref" href="#t:383"><span class="id" title="binder">t</span></a> <a id="f7d70024d28ec1237612d4486341dd5e" class="idref" href="#f7d70024d28ec1237612d4486341dd5e"><span class="id" title="binder">Γassum</span></a> <a id="c2b5b117bc67fa29b06b0dae0889b114" class="idref" href="#c2b5b117bc67fa29b06b0dae0889b114"><span class="id" title="binder">Γgoal</span></a> <a id="n:386" class="idref" href="#n:386"><span class="id" title="binder">n</span></a> <a id="m:387" class="idref" href="#m:387"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.EtaExpand.html#72749857707465c155fd8128753f7d4e"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#05d67ada0e96bf50a6c570f2e22e4153"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7d70024d28ec1237612d4486341dd5e"><span class="id" title="variable">Γassum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.EtaExpand.html#72749857707465c155fd8128753f7d4e"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5582cdd53c0521e9a2308cf4da9f3f18"><span class="id" title="variable">Γ''</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#05d67ada0e96bf50a6c570f2e22e4153"><span class="id" title="variable">Γ</span></a>)%<span class="id" title="var">list</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c2b5b117bc67fa29b06b0dae0889b114"><span class="id" title="variable">Γgoal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#5582cdd53c0521e9a2308cf4da9f3f18"><span class="id" title="variable">Γ''</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:386"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#72749857707465c155fd8128753f7d4e"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:387"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1a1a7f505fd4e19c418fac28d7be95d2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f7d70024d28ec1237612d4486341dd5e"><span class="id" title="variable">Γassum</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:383"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1a1a7f505fd4e19c418fac28d7be95d2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c2b5b117bc67fa29b06b0dae0889b114"><span class="id" title="variable">Γgoal</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:386"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#m:387"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:383"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_lift"><span class="id" title="lemma">expanded_lift</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Forall_typing_spine_Forall" class="idref" href="#Forall_typing_spine_Forall"><span class="id" title="lemma">Forall_typing_spine_Forall</span></a> {<a id="cf:388" class="idref" href="#cf:388"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">config.checker_flags</span></a>} <a id="ae1a5a42f92694272fba9fe4c3e0e4cb" class="idref" href="#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="binder">Σ</span></a> <a id="afe455686b2e85f8e8164be9ed14cd9c" class="idref" href="#afe455686b2e85f8e8164be9ed14cd9c"><span class="id" title="binder">Γ</span></a> (<a id="P:391" class="idref" href="#P:391"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="t_ty:392" class="idref" href="#t_ty:392"><span class="id" title="binder">t_ty</span></a> <a id="l:393" class="idref" href="#l:393"><span class="id" title="binder">l</span></a> <a id="t':394" class="idref" href="#t':394"><span class="id" title="binder">t'</span></a> <a id="s:395" class="idref" href="#s:395"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#Forall_typing_spine"><span class="id" title="inductive">Forall_typing_spine</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#afe455686b2e85f8e8164be9ed14cd9c"><span class="id" title="variable">Γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="t:396" class="idref" href="#t:396"><span class="id" title="binder">t</span></a> <span class="id" title="var">_</span> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:391"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:396"><span class="id" title="variable">t</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#t_ty:392"><span class="id" title="variable">t_ty</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:393"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t':394"><span class="id" title="variable">t'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:395"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:391"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:393"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_map'" class="idref" href="#nth_map'"><span class="id" title="lemma">nth_map'</span></a> {<a id="A:397" class="idref" href="#A:397"><span class="id" title="binder">A</span></a> <a id="B:398" class="idref" href="#B:398"><span class="id" title="binder">B</span></a>} (<a id="f:399" class="idref" href="#f:399"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#A:397"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#B:398"><span class="id" title="variable">B</span></a>) <a id="n:400" class="idref" href="#n:400"><span class="id" title="binder">n</span></a> <a id="l:401" class="idref" href="#l:401"><span class="id" title="binder">l</span></a> <a id="d:402" class="idref" href="#d:402"><span class="id" title="binder">d</span></a> <a id="d':403" class="idref" href="#d':403"><span class="id" title="binder">d'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#d':403"><span class="id" title="variable">d'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:399"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:402"><span class="id" title="variable">d</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:400"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:399"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:401"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d':403"><span class="id" title="variable">d'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:399"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:400"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:401"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:402"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decompose_prod12" class="idref" href="#decompose_prod12"><span class="id" title="lemma">decompose_prod12</span></a> <a id="t:404" class="idref" href="#t:404"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:404"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:404"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> <span class="id" title="keyword">as</span> [[]]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mkApps_tRel" class="idref" href="#mkApps_tRel"><span class="id" title="lemma">mkApps_tRel</span></a>:<br/>
<span class="id" title="keyword">∀</span> (<a id="n:405" class="idref" href="#n:405"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:406" class="idref" href="#l:406"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>), <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:406"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:405"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#l:406"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:405"><span class="id" title="variable">n</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#l:406"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_eta_single_tRel_app" class="idref" href="#expanded_eta_single_tRel_app"><span class="id" title="lemma">expanded_eta_single_tRel_app</span></a> <a id="ad42728839b7178c36e2d172736d5462" class="idref" href="#ad42728839b7178c36e2d172736d5462"><span class="id" title="binder">Σ0</span></a> <a id="n:408" class="idref" href="#n:408"><span class="id" title="binder">n</span></a> <a id="l:409" class="idref" href="#l:409"><span class="id" title="binder">l</span></a> <a id="n0:410" class="idref" href="#n0:410"><span class="id" title="binder">n0</span></a> <a id="966aa9cfbe54623f5766a163a4c89ffa" class="idref" href="#966aa9cfbe54623f5766a163a4c89ffa"><span class="id" title="binder">Γ'</span></a> <a id="T:412" class="idref" href="#T:412"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad42728839b7178c36e2d172736d5462"><span class="id" title="variable">Σ0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:413" class="idref" href="#x:413"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:413"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span> ⇒ <span class="id" title="keyword">let</span> (<a id="n1:415" class="idref" href="#n1:415"><span class="id" title="binder">n1</span></a>, <span class="id" title="var">_</span>) := <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n1:415"><span class="id" title="variable">n1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#966aa9cfbe54623f5766a163a4c89ffa"><span class="id" title="variable">Γ'</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:408"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#T:412"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n0:410"><span class="id" title="variable">n0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad42728839b7178c36e2d172736d5462"><span class="id" title="variable">Σ0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:416" class="idref" href="#x:416"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:416"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span> ⇒ <span class="id" title="keyword">let</span> (<a id="n1:418" class="idref" href="#n1:418"><span class="id" title="binder">n1</span></a>, <span class="id" title="var">_</span>) := <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n1:418"><span class="id" title="variable">n1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#966aa9cfbe54623f5766a163a4c89ffa"><span class="id" title="variable">Γ'</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:409"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#n0:410"><span class="id" title="variable">n0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#T:412"><span class="id" title="variable">T</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad42728839b7178c36e2d172736d5462"><span class="id" title="variable">Σ0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:419" class="idref" href="#x:419"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:419"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span> ⇒ <span class="id" title="keyword">let</span> (<a id="n1:421" class="idref" href="#n1:421"><span class="id" title="binder">n1</span></a>, <span class="id" title="var">_</span>) := <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n1:421"><span class="id" title="variable">n1</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#966aa9cfbe54623f5766a163a4c89ffa"><span class="id" title="variable">Γ'</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:408"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#l:409"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#T:412"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n0:410"><span class="id" title="variable">n0</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">Hl</span> <span class="id" title="var">Hlen</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">invs</span> <span class="id" title="var">H</span>. <span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps"><span class="id" title="lemma">expanded_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mkApps_tRel"><span class="id" title="lemma">mkApps_tRel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. 2:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#seq_app"><span class="id" title="lemma">seq_app</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invs</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="var">list</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#min"><span class="id" title="definition">Init.Nat.min</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">T</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>))) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. 2:{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_seq"><span class="id" title="lemma">length_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift0</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mkApps_tRel"><span class="id" title="lemma">mkApps_tRel</span></a>. 2:{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#min"><span class="id" title="definition">Init.Nat.min</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">T</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>))) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). 2:{ <span class="id" title="var">len</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>. 2,3: <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H3</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_seq"><span class="id" title="lemma">length_seq</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#app_Forall"><span class="id" title="lemma">app_Forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="keyword">Opaque</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#sub"><span class="id" title="definition">minus</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_lift'"><span class="id" title="lemma">expanded_lift'</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="var">cbn</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">reflexivity</span>. 2: <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">change</span> ((0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a> 1 <span class="id" title="var">n0</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a> 0 (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>)) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">HH</span> | <span class="id" title="var">HH</span>] <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">EE</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> 0 <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">EE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#seq_app"><span class="id" title="lemma">seq_app</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_app"><span class="id" title="lemma">Forall_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> []. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.min_l"><span class="id" title="lemma">Nat.min_l</span></a>. 2: <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">EE</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.min_l"><span class="id" title="lemma">Nat.min_l</span></a>. 2:<span class="id" title="var">len</span>;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> |- ×. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">H1</span>). <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_rev"><span class="id" title="lemma">in_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (? &amp; &lt;- &amp; [<span class="id" title="var">_</span> ?] % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invs</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>. 2: <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <a id="to_extended_list_k_map_subst" class="idref" href="#to_extended_list_k_map_subst"><span class="id" title="lemma">to_extended_list_k_map_subst</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="n:422" class="idref" href="#n:422"><span class="id" title="binder">n</span></a> (<a id="k:423" class="idref" href="#k:423"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="c:424" class="idref" href="#c:424"><span class="id" title="binder">c</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.context"><span class="id" title="definition">context</span></a>) <a id="k':425" class="idref" href="#k':425"><span class="id" title="binder">k'</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#c:424"><span class="id" title="variable">c</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k':425"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k:423"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:424"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k':425"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:422"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k:423"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:424"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#k':425"><span class="id" title="variable">k'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">k</span> <span class="id" title="var">c</span> <span class="id" title="var">k'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.to_extended_list_k_spec"><span class="id" title="lemma">to_extended_list_k_spec</span></a> <span class="id" title="var">c</span> <span class="id" title="var">k'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">x'</span> [-&gt; <span class="id" title="var">Hx'</span>]]. <span class="id" title="tactic">intuition</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRArith.html#leb_spec_Set"><span class="id" title="lemma">leb_spec_Set</span></a> <span class="id" title="var">k</span> <span class="id" title="var">x'</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;<span class="id" title="keyword">Lemma</span> <a id="subst_cstr_concl_head" class="idref" href="#subst_cstr_concl_head"><span class="id" title="lemma">subst_cstr_concl_head</span></a> <a id="ind:426" class="idref" href="#ind:426"><span class="id" title="binder">ind</span></a> <a id="u:427" class="idref" href="#u:427"><span class="id" title="binder">u</span></a> <a id="mdecl:428" class="idref" href="#mdecl:428"><span class="id" title="binder">mdecl</span></a> (<a id="arity:429" class="idref" href="#arity:429"><span class="id" title="binder">arity</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.context"><span class="id" title="definition">context</span></a>) <a id="args:430" class="idref" href="#args:430"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;<span class="id" title="keyword">let</span> <a id="head:431" class="idref" href="#head:431"><span class="id" title="binder">head</span></a> := <a class="idref" href="MetaRocq.Template.Ast.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:426"><span class="id" title="variable">ind</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#arity:429"><span class="id" title="variable">arity</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;<span class="id" title="keyword">let</span> <a id="s:432" class="idref" href="#s:432"><span class="id" title="binder">s</span></a> := (<a class="idref" href="MetaRocq.Template.Ast.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:426"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:427"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:426"><span class="id" title="variable">ind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:432"><span class="id" title="variable">s</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#arity:429"><span class="id" title="variable">arity</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:427"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#head:431"><span class="id" title="variable">head</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#arity:429"><span class="id" title="variable">arity</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:430"><span class="id" title="variable">args</span></a>)))<br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#tInd"><span class="id" title="constructor">tInd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:426"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:427"><span class="id" title="variable">u</span></a>) (<a class="idref" href="MetaRocq.Template.Ast.html#Env.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#arity:429"><span class="id" title="variable">arity</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#s:432"><span class="id" title="variable">s</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#arity:429"><span class="id" title="variable">arity</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:428"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:427"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#args:430"><span class="id" title="variable">args</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.UnivSubst.html#subst_instance_mkApps"><span class="id" title="lemma">subst_instance_mkApps</span></a>, <a class="idref" href="MetaRocq.Template.LiftSubst.html#subst_mkApps"><span class="id" title="lemma">subst_mkApps</span></a>.<br/>
&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">head</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a>. <span class="id" title="var">cbn</span>[<a class="idref" href="MetaRocq.Template.Ast.html#subst_instance_constr"><span class="id" title="instance">subst_instance_constr</span></a>].<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Template.LiftSubst.html#subst_rel_eq"><span class="id" title="lemma">subst_rel_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <span class="id" title="var">ind</span>)) (<a class="idref" href="MetaRocq.Template.Ast.html#tInd"><span class="id" title="constructor">tInd</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">u</span>)); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.Ast.html#inds_spec"><span class="id" title="lemma">inds_spec</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#rev_mapi"><span class="id" title="lemma">rev_mapi</span></a>, <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_spec"><span class="id" title="lemma">nth_error_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ind</span>; <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.UnivSubst.html#map_subst_instance_to_extended_list_k"><span class="id" title="lemma">map_subst_instance_to_extended_list_k</span></a>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#to_extended_list_k_map_subst"><span class="id" title="lemma">to_extended_list_k_map_subst</span></a> <span class="id" title="tactic">at</span> 2.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="decompose_type_of_constructor" class="idref" href="#decompose_type_of_constructor"><span class="id" title="lemma">decompose_type_of_constructor</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="cf:433" class="idref" href="#cf:433"><span class="id" title="binder">cf</span></a>: <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">config.checker_flags</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="55e6ed7d62dbcb84cc0f58df96ac124f" class="idref" href="#55e6ed7d62dbcb84cc0f58df96ac124f"><span class="id" title="binder">Σ0</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="80ea740c41e41800c496a188f884dd67" class="idref" href="#80ea740c41e41800c496a188f884dd67"><span class="id" title="binder">wfΣ</span></a>: <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#55e6ed7d62dbcb84cc0f58df96ac124f"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="ind:436" class="idref" href="#ind:436"><span class="id" title="binder">ind</span></a>: <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="i:437" class="idref" href="#i:437"><span class="id" title="binder">i</span></a>: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="u:438" class="idref" href="#u:438"><span class="id" title="binder">u</span></a>: <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Instance.t</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="mdecl:439" class="idref" href="#mdecl:439"><span class="id" title="binder">mdecl</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#Env.mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="idecl:440" class="idref" href="#idecl:440"><span class="id" title="binder">idecl</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#Env.one_inductive_body"><span class="id" title="record">one_inductive_body</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="cdecl:441" class="idref" href="#cdecl:441"><span class="id" title="binder">cdecl</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#Env.constructor_body"><span class="id" title="record">constructor_body</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="isdecl':442" class="idref" href="#isdecl':442"><span class="id" title="binder">isdecl'</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#55e6ed7d62dbcb84cc0f58df96ac124f"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:436"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:437"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:439"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:440"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:441"><span class="id" title="variable">cdecl</span></a>,<br/>
<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:439"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:441"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:436"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#i:437"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:438"><span class="id" title="variable">u</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:439"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:441"><span class="id" title="variable">cdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">isdecl'</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Hmdecl</span> <span class="id" title="var">Hidecl</span>] <span class="id" title="var">Hcdecl</span>]. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmdecl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global_Some_iff_In_NoDup"><span class="id" title="lemma">lookup_global_Some_iff_In_NoDup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmdecl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;2: <span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#NoDup_on_global_decls"><span class="id" title="lemma">NoDup_on_global_decls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#lookup_on_global_env"><span class="id" title="lemma">lookup_on_global_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hmdecl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hmdecl</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">Σ'</span> &amp; <span class="id" title="var">wfΣ'</span> &amp; <span class="id" title="var">Hext</span> &amp; [<span class="id" title="var">Hind</span> <span class="id" title="var">Hparam</span> <span class="id" title="var">Hnpars</span> <span class="id" title="var">Hvar</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_alli"><span class="id" title="lemma">nth_error_alli</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hind</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hind</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onConstructors</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_nth_error_Some"><span class="id" title="lemma">All2_nth_error_Some</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onConstructors</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onConstructors</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">univs</span> &amp; <span class="id" title="var">Hnth</span> &amp; <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Template.UnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Template.LiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.Ast.html#Env.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum_it_mkProd"><span class="id" title="lemma">decompose_prod_assum_it_mkProd</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>, !<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions_app"><span class="id" title="lemma">context_assumptions_app</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a>, <a class="idref" href="MetaRocq.Template.Typing.html#cstr_concl_head"><span class="id" title="definition">cstr_concl_head</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#subst_cstr_concl_head"><span class="id" title="lemma">subst_cstr_concl_head</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.AstUtils.html#is_ind_app_head_mkApps"><span class="id" title="lemma">is_ind_app_head_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_fixpoint_rarg" class="idref" href="#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="cf:443" class="idref" href="#cf:443"><span class="id" title="binder">cf</span></a>: <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">config.checker_flags</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="a2af065834adcf5fb172ee8977e0b04b" class="idref" href="#a2af065834adcf5fb172ee8977e0b04b"><span class="id" title="binder">Σ0</span></a>: <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="73c21240ff8966f64ffdf09352008d0c" class="idref" href="#73c21240ff8966f64ffdf09352008d0c"><span class="id" title="binder">wfΣ</span></a>: <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a2af065834adcf5fb172ee8977e0b04b"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="mfix:446" class="idref" href="#mfix:446"><span class="id" title="binder">mfix</span></a>: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)<br/>
, <span class="id" title="keyword">∀</span> <a id="decl:447" class="idref" href="#decl:447"><span class="id" title="binder">decl</span></a>: <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a><br/>
, <span class="id" title="keyword">∀</span> <a id="H2:448" class="idref" href="#H2:448"><span class="id" title="binder">H2</span></a>: <a class="idref" href="MetaRocq.Template.Typing.html#wf_fixpoint"><span class="id" title="definition">wf_fixpoint</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a2af065834adcf5fb172ee8977e0b04b"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:446"><span class="id" title="variable">mfix</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#In"><span class="id" title="definition">In</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:447"><span class="id" title="variable">decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:446"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
<a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:447"><span class="id" title="variable">decl</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>  <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:447"><span class="id" title="variable">decl</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#wf_fixpoint"><span class="id" title="definition">wf_fixpoint</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#andb_and"><span class="id" title="lemma">andb_and</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">E2</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">E2</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">clear</span> <span class="id" title="var">E2</span> <span class="id" title="var">H2</span> <span class="id" title="var">k</span> <span class="id" title="var">l0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">mfix</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">E</span>, <span class="id" title="var">H</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.Typing.html#check_one_fix"><span class="id" title="definition">check_one_fix</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ea</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [-&gt; | <span class="id" title="var">H</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#check_one_fix"><span class="id" title="definition">check_one_fix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ea</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Eprod</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#destInd"><span class="id" title="definition">destInd</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Enth</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Enth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Enth</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> <span class="id" title="var">eqn</span>:?; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHmfix</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="typing_wf_fixpoint" class="idref" href="#typing_wf_fixpoint"><span class="id" title="lemma">typing_wf_fixpoint</span></a> {<a id="cf:449" class="idref" href="#cf:449"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">config.checker_flags</span></a>} <a id="f50f6645f9e642ce1bfbaada222a31d7" class="idref" href="#f50f6645f9e642ce1bfbaada222a31d7"><span class="id" title="binder">Σ0</span></a> <a id="4386bbd061ee2aaaf04933f3eafbf3d8" class="idref" href="#4386bbd061ee2aaaf04933f3eafbf3d8"><span class="id" title="binder">Γ0</span></a> <a id="mfix:452" class="idref" href="#mfix:452"><span class="id" title="binder">mfix</span></a> <a id="idx:453" class="idref" href="#idx:453"><span class="id" title="binder">idx</span></a> <a id="t_ty:454" class="idref" href="#t_ty:454"><span class="id" title="binder">t_ty</span></a>  :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#f50f6645f9e642ce1bfbaada222a31d7"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4386bbd061ee2aaaf04933f3eafbf3d8"><span class="id" title="variable">Γ0</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:452"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:453"><span class="id" title="variable">idx</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t_ty:454"><span class="id" title="variable">t_ty</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#wf_fixpoint"><span class="id" title="definition">wf_fixpoint</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f50f6645f9e642ce1bfbaada222a31d7"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mfix:452"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depind</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isLambda_eta_expand" class="idref" href="#isLambda_eta_expand"><span class="id" title="lemma">isLambda_eta_expand</span></a> <a id="e965474e6b22765bf196476d81220dfd" class="idref" href="#e965474e6b22765bf196476d81220dfd"><span class="id" title="binder">Σ</span></a> <a id="ed0ab27a87ddbdcc1f4191fb00e8aedb" class="idref" href="#ed0ab27a87ddbdcc1f4191fb00e8aedb"><span class="id" title="binder">Γ</span></a> <a id="t:457" class="idref" href="#t:457"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:457"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#e965474e6b22765bf196476d81220dfd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ed0ab27a87ddbdcc1f4191fb00e8aedb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:457"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.EnvMap.html#"><span class="id" title="module">EnvMap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="repr_decls" class="idref" href="#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a id="326248f7138d795e76a4ef0aa9d60741" class="idref" href="#326248f7138d795e76a4ef0aa9d60741"><span class="id" title="binder">Σg</span></a> <a id="6528c559b6f1077d6da4e89ae9510d33" class="idref" href="#6528c559b6f1077d6da4e89ae9510d33"><span class="id" title="binder">Σ</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="kn:460" class="idref" href="#kn:460"><span class="id" title="binder">kn</span></a> <a id="d:461" class="idref" href="#d:461"><span class="id" title="binder">d</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#6528c559b6f1077d6da4e89ae9510d33"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:460"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:461"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_env"><span class="id" title="definition">GlobalEnvMap.lookup_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#326248f7138d795e76a4ef0aa9d60741"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:460"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:461"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="module">ssreflect</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repr_lookup_constructor" class="idref" href="#repr_lookup_constructor"><span class="id" title="lemma">repr_lookup_constructor</span></a> {<a id="8cdcc68a0ccace0422d85f916b9e1383" class="idref" href="#8cdcc68a0ccace0422d85f916b9e1383"><span class="id" title="binder">Σg</span></a> <a id="014499d3f44fae28c61aeffa49869fee" class="idref" href="#014499d3f44fae28c61aeffa49869fee"><span class="id" title="binder">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8cdcc68a0ccace0422d85f916b9e1383"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#014499d3f44fae28c61aeffa49869fee"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="ind:464" class="idref" href="#ind:464"><span class="id" title="binder">ind</span></a> <a id="idx:465" class="idref" href="#idx:465"><span class="id" title="binder">idx</span></a> <a id="r:466" class="idref" href="#r:466"><span class="id" title="binder">r</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#014499d3f44fae28c61aeffa49869fee"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:464"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:465"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#r:466"><span class="id" title="variable">r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor"><span class="id" title="definition">GlobalEnvMap.lookup_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8cdcc68a0ccace0422d85f916b9e1383"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:464"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:465"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#r:466"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span> <span class="id" title="var">ind</span> <span class="id" title="var">idx</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor_gen"><span class="id" title="definition">lookup_constructor_gen</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_inductive_gen"><span class="id" title="definition">lookup_inductive_gen</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.Template.Ast.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_minductive_gen"><span class="id" title="definition">lookup_minductive_gen</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hrepr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor"><span class="id" title="definition">GlobalEnvMap.lookup_constructor</span></a> /<a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_inductive"><span class="id" title="definition">GlobalEnvMap.lookup_inductive</span></a> /<a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_minductive"><span class="id" title="definition">GlobalEnvMap.lookup_minductive</span></a> <span class="id" title="var">hl</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.bytestring.html#String"><span class="id" title="module">bytestring.String</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bs</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="constructor_declared" class="idref" href="#constructor_declared"><span class="id" title="lemma">constructor_declared</span></a> {<a id="cf:467" class="idref" href="#cf:467"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="aaa0634f5ca3bf65eccdf23621ce2c8b" class="idref" href="#aaa0634f5ca3bf65eccdf23621ce2c8b"><span class="id" title="binder">Σ</span></a> :<a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="da2b1c4efe836884a898e75383bc76e5" class="idref" href="#da2b1c4efe836884a898e75383bc76e5"><span class="id" title="binder">Γ</span></a> <a id="ind:470" class="idref" href="#ind:470"><span class="id" title="binder">ind</span></a> <a id="idx:471" class="idref" href="#idx:471"><span class="id" title="binder">idx</span></a> <a id="u:472" class="idref" href="#u:472"><span class="id" title="binder">u</span></a> <a id="ty:473" class="idref" href="#ty:473"><span class="id" title="binder">ty</span></a>} {<a id="ff1a08f2793236768d9a10483387e2d5" class="idref" href="#ff1a08f2793236768d9a10483387e2d5"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#aaa0634f5ca3bf65eccdf23621ce2c8b"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>}:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#aaa0634f5ca3bf65eccdf23621ce2c8b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#da2b1c4efe836884a898e75383bc76e5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:470"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:471"><span class="id" title="variable">idx</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#u:472"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#41b22a1465690d4777852776dc1e5d8d"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ty:473"><span class="id" title="variable">ty</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="r:475" class="idref" href="#r:475"><span class="id" title="binder">r</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#aaa0634f5ca3bf65eccdf23621ce2c8b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:470"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:471"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#r:475"><span class="id" title="variable">r</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depind</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor_lookup_gen"><span class="id" title="lemma">declared_constructor_lookup_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_expand_expanded" class="idref" href="#eta_expand_expanded"><span class="id" title="lemma">eta_expand_expanded</span></a> {<a id="cf:476" class="idref" href="#cf:476"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">config.checker_flags</span></a>} {<a id="7d035d716cf98a52dc7e4907482920eb" class="idref" href="#7d035d716cf98a52dc7e4907482920eb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} <a id="51186e59ea6cdee7bcac548d2f9f8964" class="idref" href="#51186e59ea6cdee7bcac548d2f9f8964"><span class="id" title="binder">Γ</span></a> <a id="14c4d17be746b2c5697596258017b51b" class="idref" href="#14c4d17be746b2c5697596258017b51b"><span class="id" title="binder">Γ'</span></a> <a id="t:480" class="idref" href="#t:480"><span class="id" title="binder">t</span></a> <a id="T:481" class="idref" href="#T:481"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7d035d716cf98a52dc7e4907482920eb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7d035d716cf98a52dc7e4907482920eb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#51186e59ea6cdee7bcac548d2f9f8964"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:480"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#T:481"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:482" class="idref" href="#x:482"><span class="id" title="binder">x</span></a> <a id="y:483" class="idref" href="#y:483"><span class="id" title="binder">y</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:482"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#y:483"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:480"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#y:483"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <span class="id" title="var">n</span> | <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a> <span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#14c4d17be746b2c5697596258017b51b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#51186e59ea6cdee7bcac548d2f9f8964"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="7249c05777b2eb2b1feab8e3b2af4e94" class="idref" href="#7249c05777b2eb2b1feab8e3b2af4e94"><span class="id" title="binder">Σg</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7249c05777b2eb2b1feab8e3b2af4e94"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7d035d716cf98a52dc7e4907482920eb"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7d035d716cf98a52dc7e4907482920eb"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:486" class="idref" href="#x:486"><span class="id" title="binder">x</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:486"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">n</span> | <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0 <span class="id" title="keyword">end</span> ) <a class="idref" href="MetaRocq.Template.EtaExpand.html#14c4d17be746b2c5697596258017b51b"><span class="id" title="variable">Γ'</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7249c05777b2eb2b1feab8e3b2af4e94"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#14c4d17be746b2c5697596258017b51b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:480"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">Hty</span>. <span class="id" title="var">revert</span> <span class="id" title="var">Γ'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.Template.Typing.html#typing_ind_env"><span class="id" title="lemma">typing_ind_env</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">t</span> := <span class="id" title="var">t</span>) (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">P</span> := <span class="id" title="keyword">fun</span> (<a id="ad6cf9aeed6659b264e9a32dad4cb301" class="idref" href="#ad6cf9aeed6659b264e9a32dad4cb301"><span class="id" title="binder"><span id="6bee4781d5b40459e6b310af5b24678a" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="33f85ed2e1f35df463c12b79297b839d" class="idref" href="#33f85ed2e1f35df463c12b79297b839d"><span class="id" title="binder"><span id="47b98dfbf66cede49815386cddecd960" class="id">Γ</span></span></a> <a id="t:490" class="idref" href="#t:490"><span class="id" title="binder"><span id="t:512" class="id">t</span></span></a> <a id="T:491" class="idref" href="#T:491"><span class="id" title="binder"><span id="T:513" class="id">T</span></span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="5b521994296f8879e0f54b164d3285a2" class="idref" href="#5b521994296f8879e0f54b164d3285a2"><span class="id" title="binder"><span id="e405a978f6ddcd78eda083adadf3c091" class="id">Γ'</span></span></a>,  <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:493" class="idref" href="#x:493"><span class="id" title="binder"><span id="x:515" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)) (<a id="y:494" class="idref" href="#y:494"><span class="id" title="binder"><span id="y:516" class="id">y</span></span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_decl"><span class="id" title="abbreviation">context_decl</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:493"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#y:494"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#5b521994296f8879e0f54b164d3285a2"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#33f85ed2e1f35df463c12b79297b839d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="09ee948cbed5393e9a8c367861878b20" class="idref" href="#09ee948cbed5393e9a8c367861878b20"><span class="id" title="binder"><span id="53c8650d5fe4d81c24cd48e8d7b259f0" class="id">Σg</span></span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#09ee948cbed5393e9a8c367861878b20"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad6cf9aeed6659b264e9a32dad4cb301"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ad6cf9aeed6659b264e9a32dad4cb301"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:497" class="idref" href="#x:497"><span class="id" title="binder"><span id="x:519" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:497"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#5b521994296f8879e0f54b164d3285a2"><span class="id" title="variable">Γ'</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#09ee948cbed5393e9a8c367861878b20"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5b521994296f8879e0f54b164d3285a2"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:490"><span class="id" title="variable">t</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Pj</span> := <span class="id" title="keyword">fun</span> (<a id="8c187d27a8490e47e17ade40975bd27f" class="idref" href="#8c187d27a8490e47e17ade40975bd27f"><span class="id" title="binder"><span id="36057eec56567c86c732eb0989b3c741" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="98f71562a6b6e822f78917e3ba9ee793" class="idref" href="#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="binder"><span id="1736d38e537ef5a3fabcbbbd9cc9ab87" class="id">Γ</span></span></a> <a id="j:501" class="idref" href="#j:501"><span class="id" title="binder"><span id="j:523" class="id">j</span></span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MROption.html#option_default"><span class="id" title="definition">option_default</span></a> (<span class="id" title="keyword">fun</span> <a id="t:502" class="idref" href="#t:502"><span class="id" title="binder"><span id="t:524" class="id">t</span></span></a> ⇒ <span class="id" title="keyword">∀</span> <a id="b4dafb2b64fd4e810fc40e40fce74c04" class="idref" href="#b4dafb2b64fd4e810fc40e40fce74c04"><span class="id" title="binder"><span id="bd49e169a7a9f787969294814abf8a71" class="id">Γ'</span></span></a>,  <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:504" class="idref" href="#x:504"><span class="id" title="binder"><span id="x:526" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>)) (<a id="y:505" class="idref" href="#y:505"><span class="id" title="binder"><span id="y:527" class="id">y</span></span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_decl"><span class="id" title="abbreviation">context_decl</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:504"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#y:505"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#b4dafb2b64fd4e810fc40e40fce74c04"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="2fdddce576ca6dac5d0445e0fe51bc9b" class="idref" href="#2fdddce576ca6dac5d0445e0fe51bc9b"><span class="id" title="binder"><span id="6789ee414b7602c954785cd8d04ffd3e" class="id">Σg</span></span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2fdddce576ca6dac5d0445e0fe51bc9b"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8c187d27a8490e47e17ade40975bd27f"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8c187d27a8490e47e17ade40975bd27f"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:508" class="idref" href="#x:508"><span class="id" title="binder"><span id="x:530" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:508"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">n</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#b4dafb2b64fd4e810fc40e40fce74c04"><span class="id" title="variable">Γ'</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#2fdddce576ca6dac5d0445e0fe51bc9b"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b4dafb2b64fd4e810fc40e40fce74c04"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:502"><span class="id" title="variable">t</span></a>)) (<a class="idref" href="MetaRocq.Common.BasicAst.html#j_term"><span class="id" title="projection">j_term</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#j:501"><span class="id" title="variable">j</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">PΓ</span> := <span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| [ |- <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">intro</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> (<span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#j_term"><span class="id" title="projection">j_term</span></a> ⇒ //. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_nth_error_Some_r"><span class="id" title="lemma">Forall2_nth_error_Some_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [[] | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#seq_S"><span class="id" title="lemma">seq_S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>, !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.min_l"><span class="id" title="lemma">Nat.min_l</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n0</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">n</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>  <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_seq"><span class="id" title="lemma">length_seq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> [ | (? &amp; &lt;- &amp; [<span class="id" title="var">_</span> ?] % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a>) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_rev"><span class="id" title="lemma">in_rev</span></a> % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>; <span class="id" title="var">revgoals</span>; [<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>; <span class="id" title="var">lia</span> | <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>; <span class="id" title="var">lia</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">eapply</span> (<span class="id" title="var">H1</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#up"><span class="id" title="definition">up</span></a> <span class="id" title="var">Γ'</span>)); <span class="id" title="var">tea</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> (<span class="id" title="var">H1</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#up"><span class="id" title="definition">up</span></a> <span class="id" title="var">Γ'</span>)); <span class="id" title="var">tea</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a>(<span class="id" title="keyword">fun</span> <a id="t:532" class="idref" href="#t:532"><span class="id" title="binder"><span id="t:536" class="id">t</span></span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <span class="id" title="var">Σ0</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="x:533" class="idref" href="#x:533"><span class="id" title="binder"><span id="x:537" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:533"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">p</span> ⇒ <span class="id" title="keyword">let</span> (<a id="n:535" class="idref" href="#n:535"><span class="id" title="binder"><span id="n:539" class="id">n</span></span></a>, <span class="id" title="var">_</span>) := <span class="id" title="var">p</span> <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:535"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <span class="id" title="var">Γ'</span>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <span class="id" title="var">Σg</span> <span class="id" title="var">Γ'</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:532"><span class="id" title="variable">t</span></a>)) <span class="id" title="var">l</span>). {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">X0</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps"><span class="id" title="lemma">expanded_mkApps</span></a>; [ <span class="id" title="tactic">eauto</span> | <span class="id" title="var">solve_all</span> ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">Γ'</span> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_eta_single_tRel_app"><span class="id" title="lemma">expanded_eta_single_tRel_app</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_nth_error_Some_l"><span class="id" title="lemma">Forall2_nth_error_Some_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?). 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps"><span class="id" title="lemma">expanded_mkApps</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">E</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor"><span class="id" title="definition">eta_constructor</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">Σg</span> <span class="id" title="var">hrepr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor_spec"><span class="id" title="lemma">GlobalEnvMap.lookup_constructor_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span>] <span class="id" title="var">cdecl</span>]| ] <span class="id" title="var">eqn</span>:<span class="id" title="var">E1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">EE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>. <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a>. 3: <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#lift0_p"><span class="id" title="lemma">lift0_p</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_id"><span class="id" title="lemma">map_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#Forall_typing_spine_Forall"><span class="id" title="lemma">Forall_typing_spine_Forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_cons"><span class="id" title="lemma">map_cons</span></a>. <span class="id" title="var">revert</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">generalize</span> (<span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">l'</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#constructor_declared"><span class="id" title="lemma">constructor_declared</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">mdecl'</span> <span class="id" title="var">idecl'</span>] <span class="id" title="var">cdecl'</span>] <span class="id" title="var">hc</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">h</span> := (<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_lookup_constructor"><span class="id" title="lemma">repr_lookup_constructor</span></a> <span class="id" title="var">hrepr</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hc</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor_spec"><span class="id" title="lemma">GlobalEnvMap.lookup_constructor_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_tConstruct"><span class="id" title="lemma">expanded_mkApps_tConstruct</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor_declared_gen"><span class="id" title="lemma">lookup_constructor_declared_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">EE</span>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#Forall_typing_spine_Forall"><span class="id" title="lemma">Forall_typing_spine_Forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">cdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">idx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">u</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decompose_type_of_constructor"><span class="id" title="lemma">decompose_type_of_constructor</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#lookup_constructor_declared_gen"><span class="id" title="lemma">lookup_constructor_declared_gen</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#app_Forall"><span class="id" title="lemma">app_Forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="keyword">Opaque</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#sub"><span class="id" title="definition">minus</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_lift'"><span class="id" title="lemma">expanded_lift'</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). 2: <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="var">EE</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_rev"><span class="id" title="lemma">Forall_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> ? (? &amp; &lt;- &amp; ?) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H4</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="var">EE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span> <span class="id" title="var">EE</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">hrepr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_fixpoint"><span class="id" title="definition">eta_fixpoint</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Eid</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_tFix"><span class="id" title="lemma">expanded_mkApps_tFix</span></a>; <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">Eid</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a>; <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">X</span>. <span class="id" title="var">depind</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_seq"><span class="id" title="lemma">length_seq</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_single"><span class="id" title="definition">eta_single</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">simpl_list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>-[<a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_tFix_inv"><span class="id" title="lemma">expanded_mkApps_tFix_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? (? &amp; &lt;- &amp; (? &amp; &lt;- &amp; ?) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="var">cbn</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. 2:{<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">Hl</span> <span class="id" title="var">H</span>]. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#isLambda_unlift"><span class="id" title="lemma">isLambda_unlift</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#isLambda_lift"><span class="id" title="lemma">isLambda_lift</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#typing_wf_fixpoint"><span class="id" title="lemma">typing_wf_fixpoint</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. 2: <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <span class="id" title="var">d</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f031fe1957c4a4a8e217aa46af2b4e25"><span class="id" title="notation">∨</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <span class="id" title="var">d</span>) )  <span class="id" title="keyword">as</span> [<span class="id" title="var">He</span> | <span class="id" title="var">He</span>] <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> ((<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <span class="id" title="var">d</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)) <span class="id" title="keyword">with</span> 0 <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#lift0_id"><span class="id" title="lemma">lift0_id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_unlift"><span class="id" title="lemma">expanded_unlift</span></a>. 2: <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#apply_expanded"><span class="id" title="lemma">apply_expanded</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">len</span>. 2:{ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">instantiate</span> (1 := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <span class="id" title="var">d</span>))). <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_unlift"><span class="id" title="lemma">expanded_unlift</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ''</span> :=  <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). 2: <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.Template.LiftSubst.html#simpl_lift"><span class="id" title="lemma">simpl_lift</span></a>. 2:{ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#apply_expanded"><span class="id" title="lemma">apply_expanded</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#Forall_typing_spine_Forall"><span class="id" title="lemma">Forall_typing_spine_Forall</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#app_Forall"><span class="id" title="lemma">app_Forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_lift'"><span class="id" title="lemma">expanded_lift'</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">reflexivity</span>. 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#typing_wf_fixpoint"><span class="id" title="lemma">typing_wf_fixpoint</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. 2: <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;** <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_rev"><span class="id" title="lemma">Forall_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> ? (? &amp; &lt;- &amp; ?) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">H4</span>]. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#typing_wf_fixpoint"><span class="id" title="lemma">typing_wf_fixpoint</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. 2: <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.lt_le_trans"><span class="id" title="lemma">Nat.lt_le_trans</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#typing_wf_fixpoint"><span class="id" title="lemma">typing_wf_fixpoint</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. 2: <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;++ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">isdecl</span> <span class="id" title="keyword">as</span> <span class="id" title="var">isdecl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor"><span class="id" title="definition">eta_constructor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor_lookup_gen"><span class="id" title="lemma">declared_constructor_lookup_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_lookup_constructor"><span class="id" title="lemma">repr_lookup_constructor</span></a> <span class="id" title="var">hrepr</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">isdecl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_constructor_spec"><span class="id" title="lemma">GlobalEnvMap.lookup_constructor_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_tConstruct"><span class="id" title="lemma">expanded_mkApps_tConstruct</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">simpl_list</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> -!<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">List.map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> ? (? &amp; &lt;- &amp; ?) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_rev"><span class="id" title="lemma">in_rev</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> ?]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.Typing.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">cdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">u</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <span class="id" title="keyword">as</span> →. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decompose_type_of_constructor"><span class="id" title="lemma">decompose_type_of_constructor</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>. 2:<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#map_branches"><span class="id" title="definition">map_branches</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">hrepr</span> <span class="id" title="var">X1</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Γ''</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Γ'</span>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <span class="id" title="var">Σ0</span> <span class="id" title="var">Γ''</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand"><span class="id" title="definition">eta_expand</span></a> <span class="id" title="var">Σg</span> <span class="id" title="var">Γ'</span>) (<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">indices</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_app"><span class="id" title="lemma">All_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">t1</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">auto</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">b</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">y</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ'</span>))%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_repeat"><span class="id" title="lemma">map_repeat</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2_app"><span class="id" title="lemma">Forall2_app</span></a>; <span class="id" title="var">solve_all</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Ast.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#ci_ind"><span class="id" title="projection">ci_ind</span></a> <span class="id" title="var">ci</span>) <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.Ast.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">x</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">)|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">y</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). { <span class="id" title="tactic">clear</span> - <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map2_length"><span class="id" title="lemma">map2_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.min_l"><span class="id" title="lemma">Nat.min_l</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.subst_context"><span class="id" title="definition">subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#Env.subst_instance_context"><span class="id" title="instance">subst_instance_context</span></a>, <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#fold_context_k_length"><span class="id" title="lemma">fold_context_k_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="var">revert</span> <span class="id" title="var">H9</span>. <span class="id" title="tactic">generalize</span> ((<a class="idref" href="MetaRocq.Template.Ast.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#ci_ind"><span class="id" title="projection">ci_ind</span></a> <span class="id" title="var">ci</span>) <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Template.Ast.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.Ast.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">y</span>) <span class="id" title="var">x</span>)). <span class="id" title="tactic">clear</span> -<span class="id" title="var">hrepr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">y</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>; <span class="id" title="tactic">intros</span> []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_fixpoint"><span class="id" title="definition">eta_fixpoint</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.fst_ctx"><span class="id" title="definition">fst_ctx</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_fold_lambda"><span class="id" title="lemma">expanded_fold_lambda</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <span class="id" title="var">decl</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod"><span class="id" title="definition">decompose_prod</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <span class="id" title="var">decl</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">E1</span>. { <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decompose_prod12"><span class="id" title="lemma">decompose_prod12</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#rarg"><span class="id" title="projection">rarg</span></a> <span class="id" title="var">decl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.AstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <span class="id" title="var">decl</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">E2</span>. { <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_In"><span class="id" title="lemma">nth_error_In</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_mkApps_tFix"><span class="id" title="lemma">expanded_mkApps_tFix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_seq"><span class="id" title="lemma">length_seq</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.Template.Ast.html#lift"><span class="id" title="definition">lift</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<span class="id" title="keyword">fun</span> <a id="x:540" class="idref" href="#x:540"><span class="id" title="binder"><span id="x:541" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Template.Ast.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#x:540"><span class="id" title="variable">x</span></a>)) <span class="id" title="var">mfix</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#andb_and"><span class="id" title="lemma">andb_and</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H2</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">isl</span> <span class="id" title="var">_</span>]. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.LiftSubst.html#isLambda_lift"><span class="id" title="lemma">isLambda_lift</span></a>, <a class="idref" href="MetaRocq.Template.EtaExpand.html#isLambda_eta_expand"><span class="id" title="lemma">isLambda_eta_expand</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>. <span class="id" title="tactic">rewrite</span> → !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.min_l"><span class="id" title="lemma">Nat.min_l</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_lift'"><span class="id" title="lemma">expanded_lift'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5: <span class="id" title="tactic">eapply</span> <span class="id" title="var">a2</span>; <span class="id" title="tactic">eauto</span>. 2: <span class="id" title="tactic">reflexivity</span>. 2: <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_mapi"><span class="id" title="lemma">map_mapi</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2_app"><span class="id" title="lemma">Forall2_app</span></a>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">types</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#fix_context"><span class="id" title="definition">Typing.fix_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_rev"><span class="id" title="lemma">All2_rev</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_mapi"><span class="id" title="lemma">All2_mapi</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_All2_refl"><span class="id" title="lemma">All_All2_refl</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_All"><span class="id" title="lemma">Forall_All</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#wf_fixpoint_rarg"><span class="id" title="lemma">wf_fixpoint_rarg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_lift"><span class="id" title="lemma">context_assumptions_lift</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a>]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_rev"><span class="id" title="lemma">Forall_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall_forall"><span class="id" title="lemma">Forall_forall</span></a>. <span class="id" title="tactic">intros</span> ? (? &amp; &lt;- &amp; ?) % <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_map_iff"><span class="id" title="lemma">in_map_iff</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_seq"><span class="id" title="lemma">in_seq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> ?]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app1"><span class="id" title="lemma">nth_error_app1</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_repeat"><span class="id" title="lemma">nth_error_repeat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>. <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map"><span class="id" title="definition">rev_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#seq"><span class="id" title="definition">seq</span></a>]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_Forall"><span class="id" title="lemma">All_Forall</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X2</span>). <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> ? <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">e0</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ'</span>))%<span class="id" title="var">list</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_repeat"><span class="id" title="lemma">map_repeat</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">e0</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2_app"><span class="id" title="lemma">Forall2_app</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">types</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Typing.html#fix_context"><span class="id" title="definition">Typing.fix_context</span></a> <span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). { <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#fix_context"><span class="id" title="definition">Typing.fix_context</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.Template.Typing.html#fix_context"><span class="id" title="definition">Typing.fix_context</span></a> <span class="id" title="var">mfix</span>). <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>; <span class="id" title="tactic">intros</span> []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="MetaRocq.Template.Ast.html#tVar"><span class="id" title="constructor">tVar</span></a> <span class="id" title="var">_</span>%<span class="id" title="var">_bs</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bs_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="lookup_global_env" class="idref" href="#lookup_global_env"><span class="id" title="definition">lookup_global_env</span></a> (<a id="5919d5c9ad9a2906ebccbeccb4852840" class="idref" href="#5919d5c9ad9a2906ebccbeccb4852840"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_declarations"><span class="id" title="definition">global_declarations</span></a>) (<a id="kn:543" class="idref" href="#kn:543"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">Σ</span>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.global_decl"><span class="id" title="inductive">global_decl</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_declarations"><span class="id" title="definition">global_declarations</span></a>)  :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5919d5c9ad9a2906ebccbeccb4852840"><span class="id" title="variable">Σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">d</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">if</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:543"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#12489c9c79e91749bd1f337dd0c899e9"><span class="id" title="notation">==</span></a> <span class="id" title="var">d</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">then</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">d</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">tl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssreflect.html#::boolean_if_scope:'if'_x_'then'_x_'else'_x"><span class="id" title="notation">else</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_env:544"><span class="id" title="definition">lookup_global_env</span></a> <span class="id" title="var">tl</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:543"><span class="id" title="variable">kn</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_lookup_global_env" class="idref" href="#lookup_lookup_global_env"><span class="id" title="lemma">lookup_lookup_global_env</span></a> <a id="82743ca7028cd8c35adfb1fe7d22ecc9" class="idref" href="#82743ca7028cd8c35adfb1fe7d22ecc9"><span class="id" title="binder">Σ</span></a> <a id="kn:547" class="idref" href="#kn:547"><span class="id" title="binder">kn</span></a> <a id="decl:548" class="idref" href="#decl:548"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#82743ca7028cd8c35adfb1fe7d22ecc9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:547"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:548"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="8d17ff0256becf24da77963cb7ad3373" class="idref" href="#8d17ff0256becf24da77963cb7ad3373"><span class="id" title="binder">Σ'</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_env"><span class="id" title="definition">lookup_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#82743ca7028cd8c35adfb1fe7d22ecc9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:547"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:548"><span class="id" title="variable">decl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8d17ff0256becf24da77963cb7ad3373"><span class="id" title="variable">Σ'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span> ⇒ // /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_specT"><span class="id" title="lemma">eqb_specT</span></a> ⇒ <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;-]. <span class="id" title="tactic">subst</span> <span class="id" title="var">kn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_global_env_lookup" class="idref" href="#lookup_global_env_lookup"><span class="id" title="lemma">lookup_global_env_lookup</span></a> <a id="391875e84e76cffda0d043a934da15bc" class="idref" href="#391875e84e76cffda0d043a934da15bc"><span class="id" title="binder">Σ</span></a> <a id="kn:551" class="idref" href="#kn:551"><span class="id" title="binder">kn</span></a> <a id="1c4872045eebe626f1424c8ac2ef5877" class="idref" href="#1c4872045eebe626f1424c8ac2ef5877"><span class="id" title="binder">dΣ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_env"><span class="id" title="definition">lookup_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#391875e84e76cffda0d043a934da15bc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:551"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1c4872045eebe626f1424c8ac2ef5877"><span class="id" title="variable">dΣ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#391875e84e76cffda0d043a934da15bc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:551"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#1c4872045eebe626f1424c8ac2ef5877"><span class="id" title="variable">dΣ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span> ⇒ // /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_specT"><span class="id" title="lemma">eqb_specT</span></a> ⇒ <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;-]. <span class="id" title="tactic">subst</span> <span class="id" title="var">kn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_lookup_global_env_None" class="idref" href="#lookup_lookup_global_env_None"><span class="id" title="lemma">lookup_lookup_global_env_None</span></a> <a id="08aacca28fd76f8a6f882d581cabe051" class="idref" href="#08aacca28fd76f8a6f882d581cabe051"><span class="id" title="binder">Σ</span></a> <a id="kn:554" class="idref" href="#kn:554"><span class="id" title="binder">kn</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#08aacca28fd76f8a6f882d581cabe051"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:554"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_env"><span class="id" title="definition">lookup_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#08aacca28fd76f8a6f882d581cabe051"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:554"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span> ⇒ // /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_specT"><span class="id" title="lemma">eqb_specT</span></a> ⇒ <span class="id" title="var">eq</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_lookup_global" class="idref" href="#eta_lookup_global"><span class="id" title="lemma">eta_lookup_global</span></a> {<a id="3347747aeb3c55a37cd79983795e3edb" class="idref" href="#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>} <a id="kn:556" class="idref" href="#kn:556"><span class="id" title="binder">kn</span></a> <a id="decl:557" class="idref" href="#decl:557"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:556"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:557"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declarations"><span class="id" title="definition">eta_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:556"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declaration"><span class="id" title="definition">eta_global_declaration</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:557"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_lookup_global_env"><span class="id" title="lemma">lookup_lookup_global_env</span></a> ⇒ [] <span class="id" title="var">Σ'</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">Σ</span>); <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kn'</span> []] ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>. <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">intros</span> [= &lt;- &lt;-] ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>. <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">intros</span> [= &lt;- &lt;-] ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">neq</span>. <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_global_map_on_snd" class="idref" href="#lookup_global_map_on_snd"><span class="id" title="lemma">lookup_global_map_on_snd</span></a> <a id="f:558" class="idref" href="#f:558"><span class="id" title="binder">f</span></a> <a id="decls:559" class="idref" href="#decls:559"><span class="id" title="binder">decls</span></a> <a id="kn:560" class="idref" href="#kn:560"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:558"><span class="id" title="variable">f</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#decls:559"><span class="id" title="variable">decls</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:560"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:558"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decls:559"><span class="id" title="variable">decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:560"><span class="id" title="variable">kn</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">decls</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">neq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_lookup_global_error" class="idref" href="#eta_lookup_global_error"><span class="id" title="lemma">eta_lookup_global_error</span></a> <a id="25d295c39ca185e3d5d964aeb4ce032a" class="idref" href="#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="binder">Σ</span></a> <a id="ind:562" class="idref" href="#ind:562"><span class="id" title="binder">ind</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declarations"><span class="id" title="definition">eta_global_declarations</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>)) (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:562"><span class="id" title="variable">ind</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#25d295c39ca185e3d5d964aeb4ce032a"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>) (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:562"><span class="id" title="variable">ind</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declarations"><span class="id" title="definition">eta_global_declarations</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_map_on_snd"><span class="id" title="lemma">lookup_global_map_on_snd</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_declared_constructor" class="idref" href="#eta_declared_constructor"><span class="id" title="lemma">eta_declared_constructor</span></a> {<a id="cf:563" class="idref" href="#cf:563"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="03c7c2e465b9f20d1b26c7a75db01689" class="idref" href="#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>}<br/>
&nbsp;&nbsp;{<a id="6326241cb67243b25aecdc851372c188" class="idref" href="#6326241cb67243b25aecdc851372c188"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a>} {<a id="ind:566" class="idref" href="#ind:566"><span class="id" title="binder">ind</span></a> <a id="mdecl:567" class="idref" href="#mdecl:567"><span class="id" title="binder">mdecl</span></a> <a id="idecl:568" class="idref" href="#idecl:568"><span class="id" title="binder">idecl</span></a> <a id="cdecl:569" class="idref" href="#cdecl:569"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:566"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:567"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:568"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:569"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_global_env"><span class="id" title="definition">eta_expand_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:566"><span class="id" title="variable">ind</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_minductive_decl"><span class="id" title="definition">eta_minductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:567"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_inductive_decl"><span class="id" title="definition">eta_inductive_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:567"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:568"><span class="id" title="variable">idecl</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_constructor_decl"><span class="id" title="definition">eta_constructor_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03c7c2e465b9f20d1b26c7a75db01689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:567"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:569"><span class="id" title="variable">cdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[] ?].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.Ast.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#declared_inductive_gen"><span class="id" title="definition">declared_inductive_gen</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive"><span class="id" title="definition">declared_minductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive_gen"><span class="id" title="definition">declared_minductive_gen</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_lookup_global"><span class="id" title="lemma">eta_lookup_global</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ind</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <span class="id" title="var">g</span> <span class="id" title="var">heq</span>) ⇒ <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor_gen"><span class="id" title="definition">declared_constructor_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_inductive_gen"><span class="id" title="definition">declared_inductive_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive_gen"><span class="id" title="definition">declared_minductive_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">hl</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H0</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H1</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="module">ssreflect</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssrbool.html#"><span class="id" title="module">ssrbool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="same_cstr_info" class="idref" href="#same_cstr_info"><span class="id" title="definition">same_cstr_info</span></a> <a id="579beec8891f566c71bddf03a34f86d3" class="idref" href="#579beec8891f566c71bddf03a34f86d3"><span class="id" title="binder">Σ</span></a> <a id="c369af626ccd968105f1e0ce06c9aa60" class="idref" href="#c369af626ccd968105f1e0ce06c9aa60"><span class="id" title="binder">Σ'</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="ind:572" class="idref" href="#ind:572"><span class="id" title="binder">ind</span></a> <a id="idx:573" class="idref" href="#idx:573"><span class="id" title="binder">idx</span></a> <a id="mdecl:574" class="idref" href="#mdecl:574"><span class="id" title="binder">mdecl</span></a> <a id="idecl:575" class="idref" href="#idecl:575"><span class="id" title="binder">idecl</span></a> <a id="cdecl:576" class="idref" href="#cdecl:576"><span class="id" title="binder">cdecl</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#579beec8891f566c71bddf03a34f86d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:572"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:573"><span class="id" title="variable">idx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:574"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl:575"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:576"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="mdecl':577" class="idref" href="#mdecl':577"><span class="id" title="binder">mdecl'</span></a> <a id="idecl':578" class="idref" href="#idecl':578"><span class="id" title="binder">idecl'</span></a> <a id="cdecl':579" class="idref" href="#cdecl':579"><span class="id" title="binder">cdecl'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">[/\</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c369af626ccd968105f1e0ce06c9aa60"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ind:572"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idx:573"><span class="id" title="variable">idx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl':577"><span class="id" title="variable">mdecl'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#idecl':578"><span class="id" title="variable">idecl'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl':579"><span class="id" title="variable">cdecl'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl:574"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#mdecl':577"><span class="id" title="variable">mdecl'</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_npars"><span class="id" title="projection">ind_npars</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl:576"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cdecl':579"><span class="id" title="variable">cdecl'</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.cstr_args"><span class="id" title="projection">cstr_args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#d7e433f5d2fe56f5b712860a9ff2a681"><span class="id" title="notation">]</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_env_irrel" class="idref" href="#expanded_env_irrel"><span class="id" title="lemma">expanded_env_irrel</span></a> <a id="392066c5ac7eedb5242664e110e278a0" class="idref" href="#392066c5ac7eedb5242664e110e278a0"><span class="id" title="binder">Σ</span></a> <a id="5db1a2d321e4e331611f90ded85286f9" class="idref" href="#5db1a2d321e4e331611f90ded85286f9"><span class="id" title="binder">Σ'</span></a> <a id="7725853e70c810c0acdcb5647236c57b" class="idref" href="#7725853e70c810c0acdcb5647236c57b"><span class="id" title="binder">Γ</span></a> <a id="t:583" class="idref" href="#t:583"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#same_cstr_info"><span class="id" title="definition">same_cstr_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#392066c5ac7eedb5242664e110e278a0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5db1a2d321e4e331611f90ded85286f9"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#392066c5ac7eedb5242664e110e278a0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7725853e70c810c0acdcb5647236c57b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:583"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#5db1a2d321e4e331611f90ded85286f9"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#7725853e70c810c0acdcb5647236c57b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:583"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_ind"><span class="id" title="lemma">expanded_ind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tRel_app"><span class="id" title="constructor">expanded_tRel_app</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">hrepr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl'</span> [<span class="id" title="var">idecl'</span> [<span class="id" title="var">cdecl'</span> [<span class="id" title="var">hdecl</span> <span class="id" title="var">hpars</span> <span class="id" title="var">hass</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct"><span class="id" title="constructor">expanded_tConstruct</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">hrepr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl'</span> [<span class="id" title="var">idecl'</span> [<span class="id" title="var">cdecl'</span> [<span class="id" title="var">hdecl</span> <span class="id" title="var">hpars</span> <span class="id" title="var">hass</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_context_env_irrel" class="idref" href="#expanded_context_env_irrel"><span class="id" title="lemma">expanded_context_env_irrel</span></a> <a id="439948e174b5ba6d4669d73fbcd595f3" class="idref" href="#439948e174b5ba6d4669d73fbcd595f3"><span class="id" title="binder">Σ</span></a> <a id="72c2dee12cd70e042362b1c3d7317ada" class="idref" href="#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="binder">Σ'</span></a> <a id="74a38e050ccb58f179a739cfa1f954f2" class="idref" href="#74a38e050ccb58f179a739cfa1f954f2"><span class="id" title="binder">Γ</span></a> <a id="t:587" class="idref" href="#t:587"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#same_cstr_info"><span class="id" title="definition">same_cstr_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#439948e174b5ba6d4669d73fbcd595f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#439948e174b5ba6d4669d73fbcd595f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#74a38e050ccb58f179a739cfa1f954f2"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:587"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#74a38e050ccb58f179a739cfa1f954f2"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:587"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span> []; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold_impl"><span class="id" title="lemma">All_fold_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span> ⇒ ?? []; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_env_irrel"><span class="id" title="lemma">expanded_env_irrel</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_decl_env_irrel" class="idref" href="#expanded_decl_env_irrel"><span class="id" title="lemma">expanded_decl_env_irrel</span></a> (<a id="ffce383fbebace80ac969b11b30483f4" class="idref" href="#ffce383fbebace80ac969b11b30483f4"><span class="id" title="binder">Σ</span></a> <a id="4c326e524cdb904aa6c68dfe55fe9b3e" class="idref" href="#4c326e524cdb904aa6c68dfe55fe9b3e"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>) <a id="t:590" class="idref" href="#t:590"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#same_cstr_info"><span class="id" title="definition">same_cstr_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ffce383fbebace80ac969b11b30483f4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4c326e524cdb904aa6c68dfe55fe9b3e"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ffce383fbebace80ac969b11b30483f4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:590"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4c326e524cdb904aa6c68dfe55fe9b3e"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#t:590"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.cst_body"><span class="id" title="projection">cst_body</span></a> <span class="id" title="var">c</span>) ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_env_irrel"><span class="id" title="lemma">expanded_env_irrel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context_env_irrel"><span class="id" title="lemma">expanded_context_env_irrel</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context_env_irrel"><span class="id" title="lemma">expanded_context_env_irrel</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_env_irrel"><span class="id" title="lemma">expanded_env_irrel</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext_wf"><span class="id" title="definition">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext_wf"><span class="id" title="definition">:</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext_wf"><span class="id" title="definition">wf_ext</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext_wf"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext_wf"><span class="id" title="definition">wf</span></a>.<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">cf</span> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>).<br/>
<span class="id" title="keyword">Lemma</span> <a id="All_fold_fold_context_k_defs" class="idref" href="#All_fold_fold_context_k_defs"><span class="id" title="lemma">All_fold_fold_context_k_defs</span></a> <a id="P:591" class="idref" href="#P:591"><span class="id" title="binder">P</span></a> (<a id="f:592" class="idref" href="#f:592"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#term"><span class="id" title="inductive">term</span></a>) <a id="8fc1d1886d1ffca5a21288091bd55f8a" class="idref" href="#8fc1d1886d1ffca5a21288091bd55f8a"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:591"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:592"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8fc1d1886d1ffca5a21288091bd55f8a"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">&lt;~&gt;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="24644519875bf49efa1961dfd1af1adf" class="idref" href="#24644519875bf49efa1961dfd1af1adf"><span class="id" title="binder">Γ</span></a> <a id="d:595" class="idref" href="#d:595"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.Template.EtaExpand.html#P:591"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs"><span class="id" title="definition">fold_context_k_defs</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f:592"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#24644519875bf49efa1961dfd1af1adf"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#map_decl_body"><span class="id" title="definition">map_decl_body</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#f:592"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#24644519875bf49efa1961dfd1af1adf"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:595"><span class="id" title="variable">d</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#8fc1d1886d1ffca5a21288091bd55f8a"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#fold_context_k_defs_length"><span class="id" title="lemma">fold_context_k_defs_length</span></a> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_fold_context_k_defs"><span class="id" title="lemma">context_assumptions_fold_context_k_defs</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Existing Class</span> <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext"><span class="id" title="definition">Typing.wf_ext</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="global_env_ext_map" class="idref" href="#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> := <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#universes_decl"><span class="id" title="inductive">universes_decl</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="global_env_ext_map_global_env_map" class="idref" href="#global_env_ext_map_global_env_map"><span class="id" title="definition">global_env_ext_map_global_env_map</span></a> (<a id="24c30f475245af2335cc2b77bc3a70cf" class="idref" href="#24c30f475245af2335cc2b77bc3a70cf"><span class="id" title="binder">Σgext</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#24c30f475245af2335cc2b77bc3a70cf"><span class="id" title="variable">Σgext</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="global_env_ext_map_global_env_ext" class="idref" href="#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext_map_global_env_ext</span></a> (<a id="4803ef9ca83cadfa7c773a720632dbef" class="idref" href="#4803ef9ca83cadfa7c773a720632dbef"><span class="id" title="binder">Σgext</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#4803ef9ca83cadfa7c773a720632dbef"><span class="id" title="variable">Σgext</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>.(<a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.env"><span class="id" title="projection">GlobalEnvMap.env</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#4803ef9ca83cadfa7c773a720632dbef"><span class="id" title="variable">Σgext</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_map"><span class="id" title="definition">global_env_ext_map_global_env_map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_map"><span class="id" title="definition">:</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_map"><span class="id" title="definition">global_env_ext_map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_map"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_map"><span class="id" title="definition">GlobalEnvMap.t</span></a>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext_map_global_env_ext</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">:</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext_map</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">&gt;-&gt;</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="repr_global_env_map" class="idref" href="#repr_global_env_map"><span class="id" title="lemma">repr_global_env_map</span></a> (<a id="67de764bffed55974836243df065a8d3" class="idref" href="#67de764bffed55974836243df065a8d3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>) : <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#67de764bffed55974836243df065a8d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#67de764bffed55974836243df065a8d3"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">kn</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_env_spec"><span class="id" title="lemma">GlobalEnvMap.lookup_env_spec</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_expand_context" class="idref" href="#eta_expand_context"><span class="id" title="lemma">eta_expand_context</span></a> {<a id="cf:599" class="idref" href="#cf:599"><span class="id" title="binder">cf</span></a>} {<a id="29ee69adea7ff9fc07be85f148e2e34f" class="idref" href="#29ee69adea7ff9fc07be85f148e2e34f"><span class="id" title="binder">Σ</span></a>} {<a id="914fcfe84e8992ecd1dc6e134f0a1ca9" class="idref" href="#914fcfe84e8992ecd1dc6e134f0a1ca9"><span class="id" title="binder">Σg</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>} {<a id="ctx:602" class="idref" href="#ctx:602"><span class="id" title="binder">ctx</span></a>} {<a id="4794eadc700fc81f8800abec2ba8daf4" class="idref" href="#4794eadc700fc81f8800abec2ba8daf4"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext"><span class="id" title="class">Typing.wf_ext</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#29ee69adea7ff9fc07be85f148e2e34f"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#914fcfe84e8992ecd1dc6e134f0a1ca9"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#29ee69adea7ff9fc07be85f148e2e34f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#on_context"><span class="id" title="definition">on_context</span></a> (<a class="idref" href="MetaRocq.Template.Typing.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#29ee69adea7ff9fc07be85f148e2e34f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:602"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#29ee69adea7ff9fc07be85f148e2e34f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#914fcfe84e8992ecd1dc6e134f0a1ca9"><span class="id" title="variable">Σg</span></a> 0 <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:602"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#on_context"><span class="id" title="definition">on_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span> <span class="id" title="keyword">wf</span>. <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#All_fold_fold_context_k_defs"><span class="id" title="lemma">All_fold_fold_context_k_defs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="keyword">wf</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t1</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">t1</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">t2</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t1</span>, <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_expanded"><span class="id" title="lemma">eta_expand_expanded</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) <span class="id" title="var">Γ</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">t1</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">hrepr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_repeat"><span class="id" title="lemma">map_repeat</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_expand_context_sorts" class="idref" href="#eta_expand_context_sorts"><span class="id" title="lemma">eta_expand_context_sorts</span></a> {<a id="cf:604" class="idref" href="#cf:604"><span class="id" title="binder">cf</span></a>} {<a id="9fb98b1a3dddd5864385dfc95ea35340" class="idref" href="#9fb98b1a3dddd5864385dfc95ea35340"><span class="id" title="binder">Σ</span></a>} {<a id="b4cec3a8be4d67129757586366a5b1eb" class="idref" href="#b4cec3a8be4d67129757586366a5b1eb"><span class="id" title="binder">Σg</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>} {<a id="ctx:607" class="idref" href="#ctx:607"><span class="id" title="binder">ctx</span></a> <a id="ctx':608" class="idref" href="#ctx':608"><span class="id" title="binder">ctx'</span></a> <a id="cunivs:609" class="idref" href="#cunivs:609"><span class="id" title="binder">cunivs</span></a>} {<a id="c6b7adb9701c60ca2db9131f59524f1d" class="idref" href="#c6b7adb9701c60ca2db9131f59524f1d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Template.Typing.html#wf_ext"><span class="id" title="class">Typing.wf_ext</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9fb98b1a3dddd5864385dfc95ea35340"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b4cec3a8be4d67129757586366a5b1eb"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9fb98b1a3dddd5864385dfc95ea35340"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#sorts_local_ctx"><span class="id" title="definition">sorts_local_ctx</span></a> (<a class="idref" href="MetaRocq.Template.Typing.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#9fb98b1a3dddd5864385dfc95ea35340"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:607"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx':608"><span class="id" title="variable">ctx'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#cunivs:609"><span class="id" title="variable">cunivs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#9fb98b1a3dddd5864385dfc95ea35340"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:607"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#b4cec3a8be4d67129757586366a5b1eb"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:607"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx':608"><span class="id" title="variable">ctx'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span> <span class="id" title="var">hs</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#All_fold_fold_context_k_defs"><span class="id" title="lemma">All_fold_fold_context_k_defs</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hs</span>, <span class="id" title="var">cunivs</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hs</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hs</span> ?].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHctx'</span> <span class="id" title="var">cunivs</span> <span class="id" title="var">hs</span>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Htm</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_expanded"><span class="id" title="lemma">eta_expand_expanded</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) <span class="id" title="var">_</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">ctx'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">ctx</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">Htm</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_length"><span class="id" title="lemma">app_context_length</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">hrepr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_repeat"><span class="id" title="lemma">map_repeat</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">cunivs</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">hs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_context_length" class="idref" href="#eta_context_length"><span class="id" title="lemma">eta_context_length</span></a> <a id="g:611" class="idref" href="#g:611"><span class="id" title="binder">g</span></a> <a id="n:612" class="idref" href="#n:612"><span class="id" title="binder">n</span></a> <a id="ctx:613" class="idref" href="#ctx:613"><span class="id" title="binder">ctx</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#g:611"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:612"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:613"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.EtaExpand.html#ctx:613"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a>; <span class="id" title="var">len</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">export</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context_length"><span class="id" title="lemma">eta_context_length</span></a> : <span class="id" title="var">len</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_expand_global_decl_expanded" class="idref" href="#eta_expand_global_decl_expanded"><span class="id" title="lemma">eta_expand_global_decl_expanded</span></a> {<a id="cf:614" class="idref" href="#cf:614"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="03b1e7afef797d584980fe1aafbb3a7e" class="idref" href="#03b1e7afef797d584980fe1aafbb3a7e"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="a26245f0caa1cde8abcb3c71874ae5fd" class="idref" href="#a26245f0caa1cde8abcb3c71874ae5fd"><span class="id" title="binder">Σg</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="kn:617" class="idref" href="#kn:617"><span class="id" title="binder">kn</span></a> <a id="d:618" class="idref" href="#d:618"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#repr_decls"><span class="id" title="definition">repr_decls</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a26245f0caa1cde8abcb3c71874ae5fd"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03b1e7afef797d584980fe1aafbb3a7e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#wf_ext"><span class="id" title="class">Typing.wf_ext</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03b1e7afef797d584980fe1aafbb3a7e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#on_global_decl"><span class="id" title="definition">on_global_decl</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#cumul_gen"><span class="id" title="inductive">cumul_gen</span></a> (<a class="idref" href="MetaRocq.Template.Typing.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.Template.Typing.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.Template.EtaExpand.html#03b1e7afef797d584980fe1aafbb3a7e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:617"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:618"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl"><span class="id" title="definition">expanded_decl</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#03b1e7afef797d584980fe1aafbb3a7e"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declaration"><span class="id" title="definition">eta_global_declaration</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#a26245f0caa1cde8abcb3c71874ae5fd"><span class="id" title="variable">Σg</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:618"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hrepr</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#on_constant_decl"><span class="id" title="definition">on_constant_decl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> <span class="id" title="var">body</span> <span class="id" title="var">ty</span> <span class="id" title="var">rel</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">body</span>. <span class="id" title="tactic">constructor</span> ⇒ //; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_expanded"><span class="id" title="lemma">eta_expand_expanded</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">t0</span> <span class="id" title="var">na</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">ond</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>). <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">hrepr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ond</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>]. <span class="id" title="tactic">constructor</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">ond</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">onI</span> <span class="id" title="var">onP</span> <span class="id" title="var">onN</span> <span class="id" title="var">onV</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_context"><span class="id" title="lemma">eta_expand_context</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_All"><span class="id" title="lemma">Alli_All</span></a>; <span class="id" title="var">tea</span> ⇒ <span class="id" title="var">n</span> <span class="id" title="var">idecl</span> <span class="id" title="var">oni</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">oni</span>.(<a class="idref" href="MetaRocq.Template.Typing.html#onConstructors"><span class="id" title="projection">onConstructors</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_All_left"><span class="id" title="lemma">All2_All_left</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span> ⇒ <span class="id" title="var">cdecl</span> <span class="id" title="var">cunivs</span> <span class="id" title="var">onc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">onc</span>.(<a class="idref" href="MetaRocq.Template.Typing.html#on_cargs"><span class="id" title="projection">on_cargs</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_context_sorts"><span class="id" title="lemma">eta_expand_context_sorts</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">hrepr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">onc</span>.(<a class="idref" href="MetaRocq.Template.Typing.html#on_ctype"><span class="id" title="projection">on_ctype</span></a>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">X0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">t0</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_expanded"><span class="id" title="lemma">eta_expand_expanded</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) <span class="id" title="var">_</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Template.Ast.html#Env.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Template.Ast.html#Env.arities_context_length"><span class="id" title="lemma">arities_context_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">induction</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.arities_context"><span class="id" title="definition">arities_context</span></a> <span class="id" title="var">_</span>); <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">hrepr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_repeat"><span class="id" title="lemma">map_repeat</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_context_assumptions" class="idref" href="#eta_context_assumptions"><span class="id" title="lemma">eta_context_assumptions</span></a> <a id="62eb0b21c414bb95ce7b135a3873411d" class="idref" href="#62eb0b21c414bb95ce7b135a3873411d"><span class="id" title="binder">Σ</span></a> <a id="n:620" class="idref" href="#n:620"><span class="id" title="binder">n</span></a> <a id="097fa4dc9de55ff666988a9a17ff0b54" class="idref" href="#097fa4dc9de55ff666988a9a17ff0b54"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#097fa4dc9de55ff666988a9a17ff0b54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Template.Ast.html#Env.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#62eb0b21c414bb95ce7b135a3873411d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#n:620"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#097fa4dc9de55ff666988a9a17ff0b54"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context"><span class="id" title="definition">eta_context</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#context_assumptions_fold_context_k_defs"><span class="id" title="lemma">context_assumptions_fold_context_k_defs</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="same_cstr_info_eta" class="idref" href="#same_cstr_info_eta"><span class="id" title="lemma">same_cstr_info_eta</span></a> {<a id="cf:622" class="idref" href="#cf:622"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="655c3502458f68b9e0f0a9db8acd9720" class="idref" href="#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.global_env"><span class="id" title="record">global_env</span></a>) {<a id="f1317f89c4f5ac6f851ca428c98bdfe5" class="idref" href="#f1317f89c4f5ac6f851ca428c98bdfe5"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="variable">Σ</span></a>} (<a id="f2be8736e2dc9e671c2e5c615a729bb0" class="idref" href="#f2be8736e2dc9e671c2e5c615a729bb0"><span class="id" title="binder">Σg</span></a>: <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.t"><span class="id" title="record">GlobalEnvMap.t</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#same_cstr_info"><span class="id" title="definition">same_cstr_info</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="variable">Σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_global_declaration"><span class="id" title="definition">eta_global_declaration</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#f2be8736e2dc9e671c2e5c615a729bb0"><span class="id" title="variable">Σg</span></a>)) <a class="idref" href="MetaRocq.Template.EtaExpand.html#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaRocq.Template.EtaExpand.html#655c3502458f68b9e0f0a9db8acd9720"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a>) |}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs</span> <span class="id" title="var">Σ</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">ind</span> <span class="id" title="var">idx</span> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive"><span class="id" title="definition">declared_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> ⇒ [[[]]] //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.Ast.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">H</span> <span class="id" title="var">hnth</span>] <span class="id" title="var">hnth'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Typing.html#declared_minductive_to_gen"><span class="id" title="lemma">declared_minductive_to_gen</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive_lookup_gen"><span class="id" title="lemma">declared_minductive_lookup_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">move</span>:<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_inductive_gen"><span class="id" title="definition">lookup_inductive_gen</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> /<a class="idref" href="MetaRocq.Template.Ast.html#lookup_minductive_gen"><span class="id" title="definition">lookup_minductive_gen</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kn</span> <span class="id" title="var">decl</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hind</span> <span class="id" title="var">Hm</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eexists</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global_Some_if_In"><span class="id" title="lemma">lookup_global_Some_if_In</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">hnth</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">hnth'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_context_assumptions"><span class="id" title="lemma">eta_context_assumptions</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">Hind</span> <span class="id" title="var">Hm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">wfΣ'</span> : <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">wf</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{|<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a> := <span class="id" title="var">univs</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">Σ</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <span class="id" title="var">retroknowledge0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|}).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">econstructor</span> =&gt;//.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">o0</span> =&gt;//. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHΣ</span> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">ind</span> <span class="id" title="var">idx</span> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHΣ</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Ast.html#declared_minductive"><span class="id" title="definition">declared_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global_Some_if_In"><span class="id" title="lemma">lookup_global_Some_if_In</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> :<span class="id" title="var">Hm</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> =&gt;//. <span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> - <span class="id" title="var">cf</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">IHΣ</span> <span class="id" title="var">Hind</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHΣ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl'</span> [<span class="id" title="var">idecl'</span> [<span class="id" title="var">cdecl'</span> [[[<span class="id" title="var">H</span> ?] ?] ?]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">mdecl'</span>, <span class="id" title="var">idecl'</span>, <span class="id" title="var">cdecl'</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">right</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_global_Some_fresh" class="idref" href="#lookup_global_Some_fresh"><span class="id" title="lemma">lookup_global_Some_fresh</span></a> <a id="797806febe02c12b80fc7ddf41ddd3f7" class="idref" href="#797806febe02c12b80fc7ddf41ddd3f7"><span class="id" title="binder">Σ</span></a> <a id="c:627" class="idref" href="#c:627"><span class="id" title="binder">c</span></a> <a id="decl:628" class="idref" href="#decl:628"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#797806febe02c12b80fc7ddf41ddd3f7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:627"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:628"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Typing.html#fresh_global"><span class="id" title="definition">fresh_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:627"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#797806febe02c12b80fc7ddf41ddd3f7"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span>; <span class="id" title="var">cbn</span>. 1: <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">c</span> <span class="id" title="var">a</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>); <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [= &lt;-] <span class="id" title="var">H2</span>. <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">contradiction</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΣ</span>; <span class="id" title="var">tas</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">H2</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_env_Some_fresh" class="idref" href="#lookup_env_Some_fresh"><span class="id" title="lemma">lookup_env_Some_fresh</span></a> <a id="8f451b5f5a4d1ab5ba3eaf3a4b9e264d" class="idref" href="#8f451b5f5a4d1ab5ba3eaf3a4b9e264d"><span class="id" title="binder">Σ</span></a> <a id="c:630" class="idref" href="#c:630"><span class="id" title="binder">c</span></a> <a id="decl:631" class="idref" href="#decl:631"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8f451b5f5a4d1ab5ba3eaf3a4b9e264d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:630"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#decl:631"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Template.Typing.html#fresh_global"><span class="id" title="definition">fresh_global</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c:630"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#8f451b5f5a4d1ab5ba3eaf3a4b9e264d"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_Some_fresh"><span class="id" title="lemma">lookup_global_Some_fresh</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_global_extends" class="idref" href="#lookup_global_extends"><span class="id" title="lemma">lookup_global_extends</span></a> <a id="c6b5f9029bb9ca769180d82c0b691063" class="idref" href="#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="binder">Σ</span></a> <a id="13c7af8af228d22b7b09c22a1d224516" class="idref" href="#13c7af8af228d22b7b09c22a1d224516"><span class="id" title="binder">Σ'</span></a> <a id="kn:634" class="idref" href="#kn:634"><span class="id" title="binder">kn</span></a> <a id="d:635" class="idref" href="#d:635"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:634"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:635"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.extends"><span class="id" title="class">extends</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#13c7af8af228d22b7b09c22a1d224516"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.fresh_globals</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#13c7af8af228d22b7b09c22a1d224516"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#13c7af8af228d22b7b09c22a1d224516"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#kn:634"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#d:635"><span class="id" title="variable">d</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.Common.EnvMap.html#EnvMap.fresh_globals_iff_NoDup"><span class="id" title="lemma">EnvMap.fresh_globals_iff_NoDup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.lookup_env_extends_NoDup"><span class="id" title="lemma">lookup_env_extends_NoDup</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eta_expand_global_env_expanded" class="idref" href="#eta_expand_global_env_expanded"><span class="id" title="lemma">eta_expand_global_env_expanded</span></a> {<a id="cf:636" class="idref" href="#cf:636"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="c3c40bbd6ec0986a41e1927d1a1337a4" class="idref" href="#c3c40bbd6ec0986a41e1927d1a1337a4"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Template.EtaExpand.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">Typing.wf</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c3c40bbd6ec0986a41e1927d1a1337a4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_global_env"><span class="id" title="definition">eta_expand_global_env</span></a> <a class="idref" href="MetaRocq.Template.EtaExpand.html#c3c40bbd6ec0986a41e1927d1a1337a4"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">univs</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Template.Typing.html#wf"><span class="id" title="class">Typing.wf</span></a>, <a class="idref" href="MetaRocq.Template.Typing.html#on_global_env"><span class="id" title="definition">Typing.on_global_env</span></a>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> <span class="id" title="var">ond</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> []. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.strictly_extends_decls"><span class="id" title="class">strictly_extends_decls</span></a> <span class="id" title="var">env</span> <span class="id" title="var">env</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">map</span> <span class="id" title="var">repr</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">env</span> <span class="id" title="tactic">at</span> 1 2 4 6 7.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">env</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs'</span> <span class="id" title="var">decls</span> <span class="id" title="var">retro'</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ond</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <span class="id" title="var">IHond</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">equ</span> [<span class="id" title="var">Σ'</span> <span class="id" title="var">ext</span>]]. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ext</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">Σ'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">e</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ'</span> := {| <a class="idref" href="MetaRocq.Template.Ast.html#Env.universes"><span class="id" title="projection">universes</span></a> := <span class="id" title="var">univs'</span>; <a class="idref" href="MetaRocq.Template.Ast.html#Env.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">Σ</span>; <a class="idref" href="MetaRocq.Template.Ast.html#Env.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <span class="id" title="var">retro'</span> |}) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σg</span> := {| <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.env"><span class="id" title="projection">GlobalEnvMap.env</span></a> := <span class="id" title="var">_</span> |}). <span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">equ</span> [<span class="id" title="var">Σ''</span> <span class="id" title="var">ext</span>]]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">env</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs0</span> <span class="id" title="var">env</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">subst</span> <span class="id" title="var">univs0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">env</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">udecl</span> ? <span class="id" title="var">o0</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#eta_expand_global_decl_expanded"><span class="id" title="lemma">eta_expand_global_decl_expanded</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σg</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">univs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">kn'</span> <span class="id" title="var">d'</span> /= <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Template.TemplateEnvMap.html#GlobalEnvMap.lookup_env_spec"><span class="id" title="lemma">GlobalEnvMap.lookup_env_spec</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#lookup_global_extends"><span class="id" title="lemma">lookup_global_extends</span></a> <span class="id" title="var">Σ'</span> (<a class="idref" href="MetaRocq.Template.Ast.html#Env.set_declarations"><span class="id" title="definition">set_declarations</span></a> <span class="id" title="var">Σ'</span> (<span class="id" title="var">Σ''</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Σ</span>)%<span class="id" title="var">list</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Template.Ast.html#Env.extends_decls_extends"><span class="id" title="instance">extends_decls_extends</span></a>, <a class="idref" href="MetaRocq.Template.Ast.html#Env.strictly_extends_decls_extends_decls"><span class="id" title="instance">strictly_extends_decls_extends_decls</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> (<span class="id" title="var">Σ''</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>; <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">split</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">o0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Template.EtaExpand.html#expanded_decl_env_irrel"><span class="id" title="lemma">expanded_decl_env_irrel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Template.EtaExpand.html#same_cstr_info_eta"><span class="id" title="lemma">same_cstr_info_eta</span></a> <span class="id" title="var">Σ'</span> <span class="id" title="var">Σg</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span> =&gt;//.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
