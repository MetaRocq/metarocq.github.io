<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Erasure.Typed.Optimize</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">List</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure.Typed</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.ClosedAux.html#"><span class="id" title="library">ClosedAux</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure.Typed</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#"><span class="id" title="library">ExAst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure.Typed</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.Transform.html#"><span class="id" title="library">Transform</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure.Typed</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.ResultMonad.html#"><span class="id" title="library">ResultMonad</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure.Typed</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#"><span class="id" title="library">Utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#"><span class="id" title="library">EPrimitive</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#"><span class="id" title="library">ELiftSubst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.Kernames.html#"><span class="id" title="module">Kernames</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_subterms" class="idref" href="#map_subterms"><span class="id" title="definition">map_subterms</span></a> (<a id="f:1" class="idref" href="#f:1"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) (<a id="t:2" class="idref" href="#t:2"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:2"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">n</span> <span class="id" title="var">ts</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">n</span> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">ts</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">val</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">arg</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">p</span> <span class="id" title="var">disc</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">disc</span>) (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a>) <span class="id" title="var">brs</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">p</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:2"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">def</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a>) <span class="id" title="var">def</span>) <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">def</span> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a>) <span class="id" title="var">def</span>) <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> (<a class="idref" href="MetaRocq.Erasure.EPrimitive.html#map_prim"><span class="id" title="definition">map_prim</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <span class="id" title="var">p</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:2"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:1"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:2"><span class="id" title="variable">t</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:2"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="bitmask" class="idref" href="#bitmask"><span class="id" title="definition">bitmask</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="has_bit" class="idref" href="#has_bit"><span class="id" title="definition">has_bit</span></a> (<a id="n:4" class="idref" href="#n:4"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="bs:5" class="idref" href="#bs:5"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:4"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:5"><span class="id" title="variable">bs</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="bitmask_not" class="idref" href="#bitmask_not"><span class="id" title="definition">bitmask_not</span></a> (<a id="bs:6" class="idref" href="#bs:6"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:6"><span class="id" title="variable">bs</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="count_zeros" class="idref" href="#count_zeros"><span class="id" title="definition">count_zeros</span></a> (<a id="bs:7" class="idref" href="#bs:7"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> (<span class="id" title="definition">filter</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:7"><span class="id" title="variable">bs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="count_ones" class="idref" href="#count_ones"><span class="id" title="definition">count_ones</span></a> (<a id="bs:8" class="idref" href="#bs:8"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="abbreviation">List.length</span> (<span class="id" title="definition">filter</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:8"><span class="id" title="variable">bs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="bitmask_or" class="idref" href="#bitmask_or"><span class="id" title="definition">bitmask_or</span></a> (<a id="bs1:9" class="idref" href="#bs1:9"><span class="id" title="binder">bs1</span></a> <a id="bs2:10" class="idref" href="#bs2:10"><span class="id" title="binder">bs2</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs1:9"><span class="id" title="variable">bs1</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs2:10"><span class="id" title="variable">bs2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs1</span>, <span class="id" title="var">b2</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs2</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <span class="id" title="var">b2</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask_or:11"><span class="id" title="definition">bitmask_or</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs1:9"><span class="id" title="variable">bs1</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs2:10"><span class="id" title="variable">bs2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="bitmask_and" class="idref" href="#bitmask_and"><span class="id" title="definition">bitmask_and</span></a> (<a id="bs1:14" class="idref" href="#bs1:14"><span class="id" title="binder">bs1</span></a> <a id="bs2:15" class="idref" href="#bs2:15"><span class="id" title="binder">bs2</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs1:14"><span class="id" title="variable">bs1</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs2:15"><span class="id" title="variable">bs2</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs1</span>, <span class="id" title="var">b2</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs2</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">b1</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="var">b2</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask_and:16"><span class="id" title="definition">bitmask_and</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs1:14"><span class="id" title="variable">bs1</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs2:15"><span class="id" title="variable">bs2</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trim_start" class="idref" href="#trim_start"><span class="id" title="definition">trim_start</span></a> (<a id="b:19" class="idref" href="#b:19"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> <a id="bs:20" class="idref" href="#bs:20"><span class="id" title="binder">bs</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:20"><span class="id" title="variable">bs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb"><span class="id" title="method">eqb</span></a> <span class="id" title="var">b'</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#b:19"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:21"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:20"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b'</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:20"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trim_end" class="idref" href="#trim_end"><span class="id" title="definition">trim_end</span></a> (<a id="b:23" class="idref" href="#b:23"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="bs:24" class="idref" href="#bs:24"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">List.rev</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_start"><span class="id" title="definition">trim_start</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#b:23"><span class="id" title="variable">b</span></a> (<span class="id" title="definition">List.rev</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:24"><span class="id" title="variable">bs</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="dearg" class="idref" href="#dearg"><span class="id" title="section">dearg</span></a>.<br/>
<span class="id" title="keyword">Record</span> <a id="mib_masks" class="idref" href="#mib_masks"><span class="id" title="record">mib_masks</span></a> := {<br/>
&nbsp;&nbsp;</div>

<div class="doc">
Bitmask specifying which parameters to remove 
</div>
<div class="code">
&nbsp;&nbsp;<a id="param_mask" class="idref" href="#param_mask"><span class="id" title="projection">param_mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>;<br/>
&nbsp;&nbsp;</div>

<div class="doc">
Bitmask specifying which <i>non-parameter</i> data to remove from
      each constructor. The full mask used for each constructor is the
      concatenation of the param_mask and this mask 
</div>
<div class="code">
&nbsp;&nbsp;<a id="ctor_masks" class="idref" href="#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>); }.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#"><span class="id" title="module">BasicAst</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<a id="dearg.ind_masks" class="idref" href="#dearg.ind_masks"><span class="id" title="variable">ind_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)).<br/>
<span class="id" title="keyword">Context</span> (<a id="dearg.const_masks" class="idref" href="#dearg.const_masks"><span class="id" title="variable">const_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_mib_masks" class="idref" href="#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a id="kn:30" class="idref" href="#kn:30"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> (<span class="id" title="definition">find</span> (<span class="id" title="keyword">fun</span> '<a id="pat:32" class="idref" href="#pat:32"><span class="id" title="binder">(</span></a><a id="kn':31" class="idref" href="#kn':31"><span class="id" title="binder"><span id="pat:32" class="id">kn'</span></span></a><a id="pat:32" class="idref" href="#pat:32"><span class="id" title="binder">,</span></a> <a id="pat:32" class="idref" href="#pat:32"><span class="id" title="binder">_</span></a><a id="pat:32" class="idref" href="#pat:32"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="MetaRocq.Common.Kernames.html#eq_kername"><span class="id" title="abbreviation">eq_kername</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn':31"><span class="id" title="variable">kn'</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:30"><span class="id" title="variable">kn</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg.ind_masks"><span class="id" title="variable">ind_masks</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dearg_single" class="idref" href="#dearg_single"><span class="id" title="definition">dearg_single</span></a> (<a id="mask:33" class="idref" href="#mask:33"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="t:34" class="idref" href="#t:34"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) (<a id="args:35" class="idref" href="#args:35"><span class="id" title="binder">args</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:33"><span class="id" title="variable">mask</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:35"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single:36"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:33"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:35"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single:36"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:33"><span class="id" title="variable">mask</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:34"><span class="id" title="variable">t</span></a> <span class="id" title="var">arg</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:35"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#nAnon"><span class="id" title="constructor">nAnon</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single:36"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:33"><span class="id" title="variable">mask</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:34"><span class="id" title="variable">t</span></a>) <span class="id" title="notation">[]</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#nAnon"><span class="id" title="constructor">nAnon</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single:36"><span class="id" title="definition">dearg_single</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:33"><span class="id" title="variable">mask</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> 1 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:34"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.Erasure.EAst.html#tRel"><span class="id" title="constructor">tRel</span></a> 0)) <span class="id" title="notation">[]</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:34"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:35"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Get the branch for a branch of an inductive, i.e. without including parameters of the inductive 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="get_branch_mask" class="idref" href="#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> (<a id="mm:39" class="idref" href="#mm:39"><span class="id" title="binder">mm</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<a id="ind_index:40" class="idref" href="#ind_index:40"><span class="id" title="binder">ind_index</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="c:41" class="idref" href="#c:41"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">find</span> (<span class="id" title="keyword">fun</span> '<a id="pat:44" class="idref" href="#pat:44"><span class="id" title="binder">(</span></a><a id="ind':43" class="idref" href="#ind':43"><span class="id" title="binder"><span id="pat:44" class="id">ind'</span></span></a><a id="pat:44" class="idref" href="#pat:44"><span class="id" title="binder">,</span></a> <a id="c':42" class="idref" href="#c':42"><span class="id" title="binder"><span id="pat:44" class="id">c'</span></span></a><a id="pat:44" class="idref" href="#pat:44"><span class="id" title="binder">,</span></a> <a id="pat:44" class="idref" href="#pat:44"><span class="id" title="binder">_</span></a><a id="pat:44" class="idref" href="#pat:44"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind':43"><span class="id" title="variable">ind'</span></a> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_index:40"><span class="id" title="variable">ind_index</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c':42"><span class="id" title="variable">c'</span></a> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:41"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:39"><span class="id" title="variable">mm</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">mask</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Get mask for a constructor, i.e. combined parameter and branch mask 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="get_ctor_mask" class="idref" href="#get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> (<a id="ind:45" class="idref" href="#ind:45"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="c:46" class="idref" href="#c:46"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:45"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:45"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:46"><span class="id" title="variable">c</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_const_mask" class="idref" href="#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> (<a id="kn:47" class="idref" href="#kn:47"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="definition">find</span> (<span class="id" title="keyword">fun</span> '<a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">(</span></a><a id="kn':48" class="idref" href="#kn':48"><span class="id" title="binder"><span id="pat:49" class="id">kn'</span></span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">,</span></a> <a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">_</span></a><a id="pat:49" class="idref" href="#pat:49"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="MetaRocq.Common.Kernames.html#eq_kername"><span class="id" title="abbreviation">eq_kername</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn':48"><span class="id" title="variable">kn'</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:47"><span class="id" title="variable">kn</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg.const_masks"><span class="id" title="variable">const_masks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <span class="id" title="var">mask</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">erasure</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="masked" class="idref" href="#masked"><span class="id" title="definition">masked</span></a> {<a id="X:50" class="idref" href="#X:50"><span class="id" title="binder">X</span></a>} (<a id="mask:51" class="idref" href="#mask:51"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="xs:52" class="idref" href="#xs:52"><span class="id" title="binder">xs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#X:50"><span class="id" title="variable">X</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:51"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#xs:52"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#xs:52"><span class="id" title="variable">xs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">xs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">b</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masked:53"><span class="id" title="definition">masked</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:51"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#xs:52"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ⇒ <span class="id" title="var">x</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masked:53"><span class="id" title="definition">masked</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:51"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#xs:52"><span class="id" title="variable">xs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Remove lambda abstractions based on bitmask 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="dearg_lambdas" class="idref" href="#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> (<a id="mask:57" class="idref" href="#mask:57"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="body:58" class="idref" href="#body:58"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:58"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_lambdas:59"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:57"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:58"><span class="id" title="variable">body</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">lam_body</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:57"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> ⇒ <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_lambdas:59"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:57"><span class="id" title="variable">mask</span></a> <span class="id" title="var">lam_body</span><a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">{</span></a> 0 <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">:=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tBox"><span class="id" title="constructor">tBox</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">}</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_lambdas:59"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:57"><span class="id" title="variable">mask</span></a> <span class="id" title="var">lam_body</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:58"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:58"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_branch_body_rec" class="idref" href="#dearg_branch_body_rec"><span class="id" title="definition">dearg_branch_body_rec</span></a> (<a id="i:62" class="idref" href="#i:62"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="mask:63" class="idref" href="#mask:63"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="t:64" class="idref" href="#t:64"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">fold_left</span> (<span class="id" title="keyword">fun</span> '<a id="pat:67" class="idref" href="#pat:67"><span class="id" title="binder">(</span></a><a id="i:66" class="idref" href="#i:66"><span class="id" title="binder"><span id="pat:67" class="id">i</span></span></a><a id="pat:67" class="idref" href="#pat:67"><span class="id" title="binder">,</span></a><a id="t:65" class="idref" href="#t:65"><span class="id" title="binder"><span id="pat:67" class="id">t</span></span></a><a id="pat:67" class="idref" href="#pat:67"><span class="id" title="binder">)</span></a> (<a id="bit:68" class="idref" href="#bit:68"><span class="id" title="binder">bit</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) ⇒ <span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bit:68"><span class="id" title="variable">bit</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:66"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:65"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">{</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:66"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">:=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tBox"><span class="id" title="constructor">tBox</span></a><a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#05a94e814dd3dfc2d0a748b2d951a789"><span class="id" title="notation">}</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:66"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:65"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:63"><span class="id" title="variable">mask</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:62"><span class="id" title="variable">i</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:64"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="dearg_branch_body_rec_count_zeros" class="idref" href="#dearg_branch_body_rec_count_zeros"><span class="id" title="lemma">dearg_branch_body_rec_count_zeros</span></a> <a id="i:69" class="idref" href="#i:69"><span class="id" title="binder">i</span></a> <a id="mask:70" class="idref" href="#mask:70"><span class="id" title="binder">mask</span></a> <a id="t:71" class="idref" href="#t:71"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_branch_body_rec"><span class="id" title="definition">dearg_branch_body_rec</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:69"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:70"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:71"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_zeros"><span class="id" title="definition">count_zeros</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:70"><span class="id" title="variable">mask</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:69"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">mask</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>, <span class="id" title="var">i</span> |- *;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_branch_body_rec"><span class="id" title="definition">dearg_branch_body_rec</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHmask</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_zeros"><span class="id" title="definition">count_zeros</span></a>;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Context masks are build by reversing the original mask and
    prepending <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a></span>, if the original mask is shorter than the contex 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="complete_ctx_mask" class="idref" href="#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a> (<a id="mask:72" class="idref" href="#mask:72"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="ctx:73" class="idref" href="#ctx:73"><span class="id" title="binder">ctx</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#repeat"><span class="id" title="definition">repeat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:73"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:72"><span class="id" title="variable">mask</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="definition">List.rev</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:72"><span class="id" title="variable">mask</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="complete_ctx_mask_length" class="idref" href="#complete_ctx_mask_length"><span class="id" title="lemma">complete_ctx_mask_length</span></a> <a id="mask:74" class="idref" href="#mask:74"><span class="id" title="binder">mask</span></a> <a id="ctx:75" class="idref" href="#ctx:75"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:74"><span class="id" title="variable">mask</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:75"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:74"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:75"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:75"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="lemma">length_app</span>,<span class="id" title="lemma">repeat_length</span>, <span class="id" title="lemma">List.length_rev</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_branch_body" class="idref" href="#dearg_branch_body"><span class="id" title="definition">dearg_branch_body</span></a> (<a id="mask:76" class="idref" href="#mask:76"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="bctx:77" class="idref" href="#bctx:77"><span class="id" title="binder">bctx</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a>) (<a id="t:78" class="idref" href="#t:78"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="bctx_mask:79" class="idref" href="#bctx_mask:79"><span class="id" title="binder">bctx_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:76"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bctx:77"><span class="id" title="variable">bctx</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masked"><span class="id" title="definition">masked</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bctx_mask:79"><span class="id" title="variable">bctx_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bctx:77"><span class="id" title="variable">bctx</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_branch_body_rec"><span class="id" title="definition">dearg_branch_body_rec</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bctx_mask:79"><span class="id" title="variable">bctx_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:78"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="comment">(*&nbsp;Compute&nbsp;dearg_lambdas&nbsp;<span class="inlinecode"><span class="id" title="var">true</span>;<span class="id" title="var">false</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tLambda&nbsp;(nNamed&nbsp;"a")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tLambda&nbsp;(nNamed&nbsp;"b")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tLambda&nbsp;(nNamed&nbsp;"c")<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tApp&nbsp;(tApp&nbsp;(tRel&nbsp;0)&nbsp;(tRel&nbsp;1))&nbsp;(tRel&nbsp;2))))).&nbsp;*)</span><br/>
<span class="comment">(*&nbsp;Compute&nbsp;dearg_branch_body&nbsp;<span class="inlinecode"><span class="id" title="var">true</span>;<span class="id" title="var">false</span></span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="inlinecode"><span class="id" title="var">nNamed</span></span> <span class="inlinecode">&quot;<span class="id" title="var">c</span>&quot;;<span class="id" title="var">nNamed</span></span> <span class="inlinecode">&quot;<span class="id" title="var">b</span>&quot;;</span> <span class="inlinecode"><span class="id" title="var">nNamed</span></span> <span class="inlinecode">&quot;<span class="id" title="var">a</span>&quot;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(tApp&nbsp;(tApp&nbsp;(tRel&nbsp;0)&nbsp;(tRel&nbsp;1))&nbsp;(tRel&nbsp;2)).&nbsp;*)</span><br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearged_npars" class="idref" href="#dearged_npars"><span class="id" title="definition">dearged_npars</span></a> (<a id="mm:80" class="idref" href="#mm:80"><span class="id" title="binder">mm</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<a id="npars:81" class="idref" href="#npars:81"><span class="id" title="binder">npars</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:80"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_zeros"><span class="id" title="definition">count_zeros</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:80"><span class="id" title="variable">mm</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#npars:81"><span class="id" title="variable">npars</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_case_branch" class="idref" href="#dearg_case_branch"><span class="id" title="definition">dearg_case_branch</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="mm:83" class="idref" href="#mm:83"><span class="id" title="binder">mm</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<a id="ind:84" class="idref" href="#ind:84"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="c:85" class="idref" href="#c:85"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="br:86" class="idref" href="#br:86"><span class="id" title="binder">br</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mask:87" class="idref" href="#mask:87"><span class="id" title="binder">mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:83"><span class="id" title="variable">mm</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:84"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:85"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:87"><span class="id" title="variable">mask</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">&lt;=?</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#br:86"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_branch_body"><span class="id" title="definition">dearg_branch_body</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:87"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#br:86"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#br:86"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">else</span> <span class="comment">(*&nbsp;never&nbsp;happens&nbsp;for&nbsp;valid&nbsp;masks&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#br:86"><span class="id" title="variable">br</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_case_branches" class="idref" href="#dearg_case_branches"><span class="id" title="definition">dearg_case_branches</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="mm:88" class="idref" href="#mm:88"><span class="id" title="binder">mm</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ind:89" class="idref" href="#ind:89"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="brs:90" class="idref" href="#brs:90"><span class="id" title="binder">brs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>)) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:88"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_case_branch"><span class="id" title="definition">dearg_case_branch</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:88"><span class="id" title="variable">mm</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:89"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:90"><span class="id" title="variable">brs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:90"><span class="id" title="variable">brs</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearged_proj_arg" class="idref" href="#dearged_proj_arg"><span class="id" title="definition">dearged_proj_arg</span></a> (<a id="mm:92" class="idref" href="#mm:92"><span class="id" title="binder">mm</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) (<a id="ind:93" class="idref" href="#ind:93"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="arg:94" class="idref" href="#arg:94"><span class="id" title="binder">arg</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:92"><span class="id" title="variable">mm</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒ <span class="id" title="keyword">let</span> <a id="mask:96" class="idref" href="#mask:96"><span class="id" title="binder">mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:92"><span class="id" title="variable">mm</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:93"><span class="id" title="variable">ind</span></a>) 0 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#arg:94"><span class="id" title="variable">arg</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_ones"><span class="id" title="definition">count_ones</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#arg:94"><span class="id" title="variable">arg</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:96"><span class="id" title="variable">mask</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#arg:94"><span class="id" title="variable">arg</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_case" class="idref" href="#dearg_case"><span class="id" title="definition">dearg_case</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ind:97" class="idref" href="#ind:97"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="npars:98" class="idref" href="#npars:98"><span class="id" title="binder">npars</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="discr:99" class="idref" href="#discr:99"><span class="id" title="binder">discr</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="brs:100" class="idref" href="#brs:100"><span class="id" title="binder">brs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>)) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mm:101" class="idref" href="#mm:101"><span class="id" title="binder">mm</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:97"><span class="id" title="variable">ind</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:97"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearged_npars"><span class="id" title="definition">dearged_npars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:101"><span class="id" title="variable">mm</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#npars:98"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#discr:99"><span class="id" title="variable">discr</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_case_branches"><span class="id" title="definition">dearg_case_branches</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:101"><span class="id" title="variable">mm</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:97"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:100"><span class="id" title="variable">brs</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_proj" class="idref" href="#dearg_proj"><span class="id" title="definition">dearg_proj</span></a> (<a id="ind:102" class="idref" href="#ind:102"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="npars:103" class="idref" href="#npars:103"><span class="id" title="binder">npars</span></a> <a id="arg:104" class="idref" href="#arg:104"><span class="id" title="binder">arg</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="discr:105" class="idref" href="#discr:105"><span class="id" title="binder">discr</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mm:106" class="idref" href="#mm:106"><span class="id" title="binder">mm</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:102"><span class="id" title="variable">ind</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#mkProjection"><span class="id" title="constructor">mkProjection</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:102"><span class="id" title="variable">ind</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearged_npars"><span class="id" title="definition">dearged_npars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:106"><span class="id" title="variable">mm</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#npars:103"><span class="id" title="variable">npars</span></a>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearged_proj_arg"><span class="id" title="definition">dearged_proj_arg</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:106"><span class="id" title="variable">mm</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:102"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#arg:104"><span class="id" title="variable">arg</span></a>)) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#discr:105"><span class="id" title="variable">discr</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dearg_aux" class="idref" href="#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> (<a id="args:107" class="idref" href="#args:107"><span class="id" title="binder">args</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) (<a id="t:108" class="idref" href="#t:108"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:108"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span> <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a>) <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
NOTE: we don't support constructors-as-blocks at the moment,
          Therefore, we ignore the block argument list assuming it's empty 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:108"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConst"><span class="id" title="constructor">tConst</span></a> <span class="id" title="var">kn</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single"><span class="id" title="definition">dearg_single</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:108"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="discr:111" class="idref" href="#discr:111"><span class="id" title="binder">discr</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span> <span class="id" title="var">discr</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="brs:112" class="idref" href="#brs:112"><span class="id" title="binder">brs</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span>)) <span class="id" title="var">brs</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_case"><span class="id" title="definition">dearg_case</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#discr:111"><span class="id" title="variable">discr</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:112"><span class="id" title="variable">brs</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#mkProjection"><span class="id" title="constructor">mkProjection</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span>) <span class="id" title="var">t</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_proj"><span class="id" title="definition">dearg_proj</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:108"><span class="id" title="variable">t</span></a>)) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#map_subterms"><span class="id" title="definition">map_subterms</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux:109"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:108"><span class="id" title="variable">t</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:107"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg" class="idref" href="#dearg"><span class="id" title="definition">dearg</span></a> (<a id="t:113" class="idref" href="#t:113"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_aux"><span class="id" title="definition">dearg_aux</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:113"><span class="id" title="variable">t</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dearg_cst_type_top" class="idref" href="#dearg_cst_type_top"><span class="id" title="definition">dearg_cst_type_top</span></a> (<a id="mask:114" class="idref" href="#mask:114"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="type:115" class="idref" href="#type:115"><span class="id" title="binder">type</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:114"><span class="id" title="variable">mask</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#type:115"><span class="id" title="variable">type</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">_</span> <span class="id" title="var">cod</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_cst_type_top:116"><span class="id" title="definition">dearg_cst_type_top</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:114"><span class="id" title="variable">mask</span></a> <span class="id" title="var">cod</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span>, <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_cst_type_top:116"><span class="id" title="definition">dearg_cst_type_top</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:114"><span class="id" title="variable">mask</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#type:115"><span class="id" title="variable">type</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Remove lambda abstractions from top level declaration and remove
    all unused args in applications 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="dearg_cst" class="idref" href="#dearg_cst"><span class="id" title="definition">dearg_cst</span></a> (<a id="kn:119" class="idref" href="#kn:119"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) (<a id="cst:120" class="idref" href="#cst:120"><span class="id" title="binder">cst</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mask:121" class="idref" href="#mask:121"><span class="id" title="binder">mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:119"><span class="id" title="variable">kn</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_cst_type_top"><span class="id" title="definition">dearg_cst_type_top</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:121"><span class="id" title="variable">mask</span></a>) (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:120"><span class="id" title="variable">cst</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg"><span class="id" title="definition">dearg</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_lambdas"><span class="id" title="definition">dearg_lambdas</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:121"><span class="id" title="variable">mask</span></a>) (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:120"><span class="id" title="variable">cst</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_ctor" class="idref" href="#dearg_ctor"><span class="id" title="definition">dearg_ctor</span></a> (<a id="par_mask:122" class="idref" href="#par_mask:122"><span class="id" title="binder">par_mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="ctor_mask:123" class="idref" href="#ctor_mask:123"><span class="id" title="binder">ctor_mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="ctor:124" class="idref" href="#ctor:124"><span class="id" title="binder">ctor</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#ident"><span class="id" title="definition">ident</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">name</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">fields</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">orig_arity</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor:124"><span class="id" title="variable">ctor</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">name</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masked"><span class="id" title="definition">masked</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#par_mask:122"><span class="id" title="variable">par_mask</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_mask:123"><span class="id" title="variable">ctor_mask</span></a>) <span class="id" title="var">fields</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">orig_arity</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_ones"><span class="id" title="definition">count_ones</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_mask:123"><span class="id" title="variable">ctor_mask</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_oib" class="idref" href="#dearg_oib"><span class="id" title="definition">dearg_oib</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="mib_masks:126" class="idref" href="#mib_masks:126"><span class="id" title="binder">mib_masks</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="oib_index:127" class="idref" href="#oib_index:127"><span class="id" title="binder">oib_index</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="oib:128" class="idref" href="#oib:128"><span class="id" title="binder">oib</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_name"><span class="id" title="projection">ind_name</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_name"><span class="id" title="projection">ind_name</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_propositional"><span class="id" title="projection">ind_propositional</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_propositional"><span class="id" title="projection">ind_propositional</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_kelim"><span class="id" title="projection">ind_kelim</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_kelim"><span class="id" title="projection">ind_kelim</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="c:129" class="idref" href="#c:129"><span class="id" title="binder">c</span></a> <a id="ctor:130" class="idref" href="#ctor:130"><span class="id" title="binder">ctor</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctor_mask:131" class="idref" href="#ctor_mask:131"><span class="id" title="binder">ctor_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks:126"><span class="id" title="variable">mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib_index:127"><span class="id" title="variable">oib_index</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:129"><span class="id" title="variable">c</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_ctor"><span class="id" title="definition">dearg_ctor</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks:126"><span class="id" title="variable">mib_masks</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_mask:131"><span class="id" title="variable">ctor_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor:130"><span class="id" title="variable">ctor</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctor_mask:132" class="idref" href="#ctor_mask:132"><span class="id" title="binder">ctor_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks:126"><span class="id" title="variable">mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib_index:127"><span class="id" title="variable">oib_index</span></a> 0 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masked"><span class="id" title="definition">masked</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_mask:132"><span class="id" title="variable">ctor_mask</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:128"><span class="id" title="variable">oib</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_mib" class="idref" href="#dearg_mib"><span class="id" title="definition">dearg_mib</span></a> (<a id="kn:133" class="idref" href="#kn:133"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) (<a id="mib:134" class="idref" href="#mib:134"><span class="id" title="binder">mib</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:133"><span class="id" title="variable">kn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mib_masks</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#count_zeros"><span class="id" title="definition">count_zeros</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mib_masks</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_oib"><span class="id" title="definition">dearg_oib</span></a> <span class="id" title="var">mib_masks</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:134"><span class="id" title="variable">mib</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_finite"><span class="id" title="projection">ind_finite</span></a> := (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_finite"><span class="id" title="projection">ind_finite</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:134"><span class="id" title="variable">mib</span></a>) |}<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:134"><span class="id" title="variable">mib</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_decl" class="idref" href="#dearg_decl"><span class="id" title="definition">dearg_decl</span></a> (<a id="kn:135" class="idref" href="#kn:135"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) (<a id="decl:136" class="idref" href="#decl:136"><span class="id" title="binder">decl</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decl:136"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_cst"><span class="id" title="definition">dearg_cst</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:135"><span class="id" title="variable">kn</span></a> <span class="id" title="var">cst</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_mib"><span class="id" title="definition">dearg_mib</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:135"><span class="id" title="variable">kn</span></a> <span class="id" title="var">mib</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decl:136"><span class="id" title="variable">decl</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_env" class="idref" href="#dearg_env"><span class="id" title="definition">dearg_env</span></a> (<a id="1bd0898eaee20c159296788819298653" class="idref" href="#1bd0898eaee20c159296788819298653"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:142" class="idref" href="#pat:142"><span class="id" title="binder">(</span></a><a id="kn:141" class="idref" href="#kn:141"><span class="id" title="binder"><span id="pat:142" class="id">kn</span></span></a><a id="pat:142" class="idref" href="#pat:142"><span class="id" title="binder">,</span></a> <a id="has_deps:140" class="idref" href="#has_deps:140"><span class="id" title="binder"><span id="pat:142" class="id">has_deps</span></span></a><a id="pat:142" class="idref" href="#pat:142"><span class="id" title="binder">,</span></a> <a id="decl:139" class="idref" href="#decl:139"><span class="id" title="binder"><span id="pat:142" class="id">decl</span></span></a><a id="pat:142" class="idref" href="#pat:142"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:141"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#has_deps:140"><span class="id" title="variable">has_deps</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_decl"><span class="id" title="definition">dearg_decl</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:141"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decl:139"><span class="id" title="variable">decl</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
Validity checks used when invoking the pass and to prove it correct 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="is_dead" class="idref" href="#is_dead"><span class="id" title="definition">is_dead</span></a> (<a id="rel:143" class="idref" href="#rel:143"><span class="id" title="binder">rel</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="t:144" class="idref" href="#t:144"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:144"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">i</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<span class="id" title="var">i</span> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">_</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="definition">forallb</span> (<span class="id" title="keyword">fun</span> '<a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">(</span></a><a id="ctx:148" class="idref" href="#ctx:148"><span class="id" title="binder"><span id="pat:149" class="id">ctx</span></span></a><a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">,</span></a><a id="t:147" class="idref" href="#t:147"><span class="id" title="binder"><span id="pat:149" class="id">t</span></span></a><a id="pat:149" class="idref" href="#pat:149"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:148"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:147"><span class="id" title="variable">t</span></a>) <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:144"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">defs</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">EAst.dbody</span></a>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">args</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">args</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#test_prim"><span class="id" title="definition">test_prim</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a>) <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:144"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead:145"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#rel:143"><span class="id" title="variable">rel</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:144"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="valid_dearg_mask" class="idref" href="#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> (<a id="mask:150" class="idref" href="#mask:150"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="body:151" class="idref" href="#body:151"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:151"><span class="id" title="variable">body</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:150"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_dearg_mask:152"><span class="id" title="definition">valid_dearg_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:150"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:151"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">_</span> <span class="id" title="var">body</span>, <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:151"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_dearg_mask:152"><span class="id" title="definition">valid_dearg_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:150"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:151"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
INVARIANT: the mask is completed according to the context with <span class="inlinecode"><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a></span>! 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="valid_dearg_mask_branch" class="idref" href="#valid_dearg_mask_branch"><span class="id" title="definition">valid_dearg_mask_branch</span></a> (<a id="i:155" class="idref" href="#i:155"><span class="id" title="binder">i</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="mask:156" class="idref" href="#mask:156"><span class="id" title="binder">mask</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) (<a id="body:157" class="idref" href="#body:157"><span class="id" title="binder">body</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:156"><span class="id" title="variable">mask</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">mask</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">if</span> <span class="id" title="var">b</span> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_dead"><span class="id" title="definition">is_dead</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:155"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:157"><span class="id" title="variable">body</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_dearg_mask_branch:158"><span class="id" title="definition">valid_dearg_mask_branch</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:155"><span class="id" title="variable">i</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:156"><span class="id" title="variable">mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#body:157"><span class="id" title="variable">body</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_case_masks" class="idref" href="#valid_case_masks"><span class="id" title="definition">valid_case_masks</span></a> (<a id="ind:160" class="idref" href="#ind:160"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="npars:161" class="idref" href="#npars:161"><span class="id" title="binder">npars</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="brs:162" class="idref" href="#brs:162"><span class="id" title="binder">brs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>)) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:160"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#npars:161"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#alli"><span class="id" title="definition">alli</span></a> (<span class="id" title="keyword">fun</span> <a id="c:163" class="idref" href="#c:163"><span class="id" title="binder">c</span></a> '<a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">(</span></a><a id="ctx:165" class="idref" href="#ctx:165"><span class="id" title="binder"><span id="pat:166" class="id">ctx</span></span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">,</span></a> <a id="br:164" class="idref" href="#br:164"><span class="id" title="binder"><span id="pat:166" class="id">br</span></span></a><a id="pat:166" class="idref" href="#pat:166"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ar:167" class="idref" href="#ar:167"><span class="id" title="binder">ar</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:165"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:160"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:163"><span class="id" title="variable">c</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">&lt;=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ar:167"><span class="id" title="variable">ar</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_dearg_mask_branch"><span class="id" title="definition">valid_dearg_mask_branch</span></a> 0 (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#complete_ctx_mask"><span class="id" title="definition">complete_ctx_mask</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:160"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:163"><span class="id" title="variable">c</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctx:165"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#br:164"><span class="id" title="variable">br</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a>) 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:162"><span class="id" title="variable">brs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_proj" class="idref" href="#valid_proj"><span class="id" title="definition">valid_proj</span></a> (<a id="ind:168" class="idref" href="#ind:168"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) (<a id="npars:169" class="idref" href="#npars:169"><span class="id" title="binder">npars</span></a> <a id="arg:170" class="idref" href="#arg:170"><span class="id" title="binder">arg</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:168"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#npars:169"><span class="id" title="variable">npars</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Projected&nbsp;argument&nbsp;must&nbsp;not&nbsp;be&nbsp;removed&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#arg:170"><span class="id" title="variable">arg</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <span class="id" title="var">mm</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:168"><span class="id" title="variable">ind</span></a>) 0) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Check that all cases and projections in a term are valid according
    to the masks. They must have the proper number of parameters, and
<ul class="doclist">
<li> For cases, their branches must be compatible with the masks,
      i.e. when "true" appears in the mask, the parameter is unused

</li>
<li> For projections, the projected argument must not be removed

</li>
<li> For constructors, that they are not blocks 

</li>
</ul>
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="valid_cases" class="idref" href="#valid_cases"><span class="id" title="definition">valid_cases</span></a> (<a id="t:171" class="idref" href="#t:171"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:171"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> ⇒ <span class="id" title="definition">forallb</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">_</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="var">brs</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_case_masks"><span class="id" title="definition">valid_case_masks</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#mkProjection"><span class="id" title="constructor">mkProjection</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span>) <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:171"><span class="id" title="variable">t</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_proj"><span class="id" title="definition">valid_proj</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">EAst.dbody</span></a>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>) ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <span class="comment">(*&nbsp;check&nbsp;whether&nbsp;constructors&nbsp;are&nbsp;not&nbsp;blocks*)</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#test_prim"><span class="id" title="definition">test_prim</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:171"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases:172"><span class="id" title="definition">valid_cases</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:171"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="forallbi" class="idref" href="#forallbi"><span class="id" title="definition">forallbi</span></a> {<a id="A:174" class="idref" href="#A:174"><span class="id" title="binder">A</span></a>} (<a id="f:175" class="idref" href="#f:175"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#A:174"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="n:176" class="idref" href="#n:176"><span class="id" title="binder">n</span></a> <a id="l:177" class="idref" href="#l:177"><span class="id" title="binder">l</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#l:177"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:175"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:176"><span class="id" title="variable">n</span></a> <span class="id" title="var">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#forallbi:178"><span class="id" title="definition">forallbi</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:175"><span class="id" title="variable">f</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:176"><span class="id" title="variable">n</span></a>) <span class="id" title="var">tl</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="check_oib_masks" class="idref" href="#check_oib_masks"><span class="id" title="definition">check_oib_masks</span></a> <a id="masks:180" class="idref" href="#masks:180"><span class="id" title="binder">masks</span></a> <a id="i:181" class="idref" href="#i:181"><span class="id" title="binder">i</span></a> <a id="oib:182" class="idref" href="#oib:182"><span class="id" title="binder">oib</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#forallbi"><span class="id" title="definition">forallbi</span></a> (<span class="id" title="keyword">fun</span> <a id="c:183" class="idref" href="#c:183"><span class="id" title="binder">c</span></a> <a id="cb:184" class="idref" href="#cb:184"><span class="id" title="binder">cb</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masks:180"><span class="id" title="variable">masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:181"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:183"><span class="id" title="variable">c</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#12489c9c79e91749bd1f337dd0c899e9"><span class="id" title="notation">==</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cb:184"><span class="id" title="variable">cb</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:182"><span class="id" title="variable">oib</span></a>.(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:182"><span class="id" title="variable">oib</span></a>.(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mask:185" class="idref" href="#mask:185"><span class="id" title="binder">mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_branch_mask"><span class="id" title="definition">get_branch_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#masks:180"><span class="id" title="variable">masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#i:181"><span class="id" title="variable">i</span></a> 0 <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:185"><span class="id" title="variable">mask</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#12489c9c79e91749bd1f337dd0c899e9"><span class="id" title="notation">==</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:182"><span class="id" title="variable">oib</span></a>.(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="valid_masks_decl" class="idref" href="#valid_masks_decl"><span class="id" title="definition">valid_masks_decl</span></a> (<a id="p:186" class="idref" href="#p:186"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#p:186"><span class="id" title="variable">p</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> {| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> |}<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_dearg_mask"><span class="id" title="definition">valid_dearg_mask</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span>) <span class="id" title="var">body</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_cases"><span class="id" title="definition">valid_cases</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">typ</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">=?</span> 0<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <span class="id" title="var">kn</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mask</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mask</span>.(<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">=?</span> <span class="id" title="var">mib</span>.(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#forallbi"><span class="id" title="definition">forallbi</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#check_oib_masks"><span class="id" title="definition">check_oib_masks</span></a> <span class="id" title="var">mask</span>) 0 <span class="id" title="var">mib</span>.(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Proposition representing whether masks are valid for entire environment.
    We should be able to prove that our analysis produces masks that satisfy
    this predicate. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="valid_masks_env" class="idref" href="#valid_masks_env"><span class="id" title="definition">valid_masks_env</span></a> (<a id="714880f5627db3426d84fcf8ef7a9648" class="idref" href="#714880f5627db3426d84fcf8ef7a9648"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">forallb</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_masks_decl"><span class="id" title="definition">valid_masks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#714880f5627db3426d84fcf8ef7a9648"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
</div>

<div class="doc">
Check if all applications are applied enough to be deboxed without eta expansion. 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="is_expanded_aux" class="idref" href="#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> (<a id="nargs:189" class="idref" href="#nargs:189"><span class="id" title="binder">nargs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="t:190" class="idref" href="#t:190"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:190"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tBox"><span class="id" title="constructor">tBox</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">tVar</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0) <span class="id" title="var">ts</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">_</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">val</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#nargs:189"><span class="id" title="variable">nargs</span></a>) <span class="id" title="var">hd</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConst"><span class="id" title="constructor">tConst</span></a> <span class="id" title="var">kn</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_const_mask"><span class="id" title="definition">get_const_mask</span></a> <span class="id" title="var">kn</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">&lt;=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#nargs:189"><span class="id" title="variable">nargs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
NOTE: we don't support constructors-as-blocks at the moment,
          Therefore, we ignore the block argument list assuming it's empty 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_ctor_mask"><span class="id" title="definition">get_ctor_mask</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">c</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="notation">&lt;=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#nargs:189"><span class="id" title="variable">nargs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <span class="id" title="var">discr</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="var">brs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">_</span> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:190"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> ⇒ <span class="id" title="definition">forallb</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">EAst.dbody</span></a>) <span class="id" title="var">defs</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#test_prim"><span class="id" title="definition">test_prim</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0) <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:190"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux:191"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:190"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Check if all applications are applied enough to be deboxed without eta expansion 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="is_expanded" class="idref" href="#is_expanded"><span class="id" title="definition">is_expanded</span></a> (<a id="t:193" class="idref" href="#t:193"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_aux"><span class="id" title="definition">is_expanded_aux</span></a> 0 <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:193"><span class="id" title="variable">t</span></a>.<br/>

<br/>
</div>

<div class="doc">
Like above, but check all bodies in environment.
    This assumption does not necessarily hold,
    but we should try to make it hold by eta expansion before quoting 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="is_expanded_env" class="idref" href="#is_expanded_env"><span class="id" title="definition">is_expanded_env</span></a> (<a id="32f6d9a9f81b36f8e6632cecdda03ddf" class="idref" href="#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="definition">forallb</span> (<span class="id" title="keyword">fun</span> '<a id="pat:197" class="idref" href="#pat:197"><span class="id" title="binder">(</span></a><a id="kn:196" class="idref" href="#kn:196"><span class="id" title="binder"><span id="pat:197" class="id">kn</span></span></a><a id="pat:197" class="idref" href="#pat:197"><span class="id" title="binder">,</span></a> <a id="decl:195" class="idref" href="#decl:195"><span class="id" title="binder"><span id="pat:197" class="id">decl</span></span></a><a id="pat:197" class="idref" href="#pat:197"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decl:195"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> {| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> |} ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded"><span class="id" title="definition">is_expanded</span></a> <span class="id" title="var">body</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg"><span class="id" title="section">dearg</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="dearg_types" class="idref" href="#dearg_types"><span class="id" title="section">dearg_types</span></a>.<br/>

<br/>
<span class="id" title="keyword">Context</span> (<a id="43d636544fdb72d248c91416b027cea2" class="idref" href="#43d636544fdb72d248c91416b027cea2"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="keep_tvar" class="idref" href="#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <a id="tvar:200" class="idref" href="#tvar:200"><span class="id" title="binder">tvar</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#tvar_is_arity"><span class="id" title="projection">tvar_is_arity</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvar:200"><span class="id" title="variable">tvar</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#tvar_is_logical"><span class="id" title="projection">tvar_is_logical</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvar:200"><span class="id" title="variable">tvar</span></a>).<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="dearg_single_bt" class="idref" href="#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> (<a id="tvars:201" class="idref" href="#tvars:201"><span class="id" title="binder">tvars</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a>) (<a id="t:202" class="idref" href="#t:202"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) (<a id="args:203" class="idref" href="#args:203"><span class="id" title="binder">args</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>)<br/>
&nbsp;&nbsp;: <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvars:201"><span class="id" title="variable">tvars</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:203"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">tvar</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tvars</span>, <span class="id" title="var">arg</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <span class="id" title="var">tvar</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single_bt:204"><span class="id" title="definition">dearg_single_bt</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvars:201"><span class="id" title="variable">tvars</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:202"><span class="id" title="variable">t</span></a> <span class="id" title="var">arg</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:203"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single_bt:204"><span class="id" title="definition">dearg_single_bt</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvars:201"><span class="id" title="variable">tvars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:202"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:203"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mkTApps"><span class="id" title="definition">mkTApps</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:202"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:203"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="get_inductive_tvars" class="idref" href="#get_inductive_tvars"><span class="id" title="definition">get_inductive_tvars</span></a> (<a id="ind:207" class="idref" href="#ind:207"><span class="id" title="binder">ind</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">inductive</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#43d636544fdb72d248c91416b027cea2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:207"><span class="id" title="variable">ind</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">oib</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <span class="id" title="var">oib</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="debox_box_type_aux" class="idref" href="#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> (<a id="args:208" class="idref" href="#args:208"><span class="id" title="binder">args</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) (<a id="bt:209" class="idref" href="#bt:209"><span class="id" title="binder">bt</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:209"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">codom</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type_aux:210"><span class="id" title="definition">debox_box_type_aux</span></a> <span class="id" title="notation">[]</span> <span class="id" title="var">dom</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type_aux:210"><span class="id" title="definition">debox_box_type_aux</span></a> <span class="id" title="notation">[]</span> <span class="id" title="var">codom</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">ty1</span> <span class="id" title="var">ty2</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type_aux:210"><span class="id" title="definition">debox_box_type_aux</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type_aux:210"><span class="id" title="definition">debox_box_type_aux</span></a> <span class="id" title="notation">[]</span> <span class="id" title="var">ty2</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:208"><span class="id" title="variable">args</span></a>) <span class="id" title="var">ty1</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TInd"><span class="id" title="constructor">TInd</span></a> <span class="id" title="var">ind</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_inductive_tvars"><span class="id" title="definition">get_inductive_tvars</span></a> <span class="id" title="var">ind</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:209"><span class="id" title="variable">bt</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:208"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TConst"><span class="id" title="constructor">TConst</span></a> <span class="id" title="var">kn</span> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#43d636544fdb72d248c91416b027cea2"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">vs</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_single_bt"><span class="id" title="definition">dearg_single_bt</span></a> <span class="id" title="var">vs</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:209"><span class="id" title="variable">bt</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:208"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:209"><span class="id" title="variable">bt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mkTApps"><span class="id" title="definition">mkTApps</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:209"><span class="id" title="variable">bt</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:208"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_box_type" class="idref" href="#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> (<a id="bt:212" class="idref" href="#bt:212"><span class="id" title="binder">bt</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type_aux"><span class="id" title="definition">debox_box_type_aux</span></a> <span class="id" title="notation">[]</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:212"><span class="id" title="variable">bt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_type_constant" class="idref" href="#debox_type_constant"><span class="id" title="definition">debox_type_constant</span></a> (<a id="cst:213" class="idref" href="#cst:213"><span class="id" title="binder">cst</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:213"><span class="id" title="variable">cst</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:213"><span class="id" title="variable">cst</span></a>; |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="reindex" class="idref" href="#reindex"><span class="id" title="definition">reindex</span></a> (<a id="tvars:214" class="idref" href="#tvars:214"><span class="id" title="binder">tvars</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#type_var_info"><span class="id" title="record">type_var_info</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">f</span> (<a id="bt:215" class="idref" href="#bt:215"><span class="id" title="binder">bt</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:215"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:216"><span class="id" title="variable">f</span></a> <span class="id" title="var">dom</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:216"><span class="id" title="variable">f</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TApp"><span class="id" title="constructor">TApp</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:216"><span class="id" title="variable">f</span></a> <span class="id" title="var">hd</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:216"><span class="id" title="variable">f</span></a> <span class="id" title="var">arg</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TVar"><span class="id" title="constructor">TVar</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="definition">filter</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <span class="id" title="var">i</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#tvars:214"><span class="id" title="variable">tvars</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:215"><span class="id" title="variable">bt</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_type_oib" class="idref" href="#debox_type_oib"><span class="id" title="definition">debox_type_oib</span></a> (<a id="oib:218" class="idref" href="#oib:218"><span class="id" title="binder">oib</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#one_inductive_body"><span class="id" title="record">one_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="debox:219" class="idref" href="#debox:219"><span class="id" title="binder">debox</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#reindex"><span class="id" title="definition">reindex</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>) <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_name"><span class="id" title="projection">ind_name</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_name"><span class="id" title="projection">ind_name</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_propositional"><span class="id" title="projection">ind_propositional</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_propositional"><span class="id" title="projection">ind_propositional</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_kelim"><span class="id" title="projection">ind_kelim</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_kelim"><span class="id" title="projection">ind_kelim</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> := <span class="id" title="definition">filter</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_type_vars"><span class="id" title="projection">ind_type_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:223" class="idref" href="#pat:223"><span class="id" title="binder">(</span></a><a id="nm:222" class="idref" href="#nm:222"><span class="id" title="binder"><span id="pat:223" class="id">nm</span></span></a><a id="pat:223" class="idref" href="#pat:223"><span class="id" title="binder">,</span></a> <a id="fields:221" class="idref" href="#fields:221"><span class="id" title="binder"><span id="pat:223" class="id">fields</span></span></a><a id="pat:223" class="idref" href="#pat:223"><span class="id" title="binder">,</span></a> <a id="orig_arity:220" class="idref" href="#orig_arity:220"><span class="id" title="binder"><span id="pat:223" class="id">orig_arity</span></span></a><a id="pat:223" class="idref" href="#pat:223"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#nm:222"><span class="id" title="variable">nm</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox:219"><span class="id" title="variable">debox</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#fields:221"><span class="id" title="variable">fields</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#orig_arity:220"><span class="id" title="variable">orig_arity</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox:219"><span class="id" title="variable">debox</span></a>) (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_projs"><span class="id" title="projection">ind_projs</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:218"><span class="id" title="variable">oib</span></a>); |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_type_mib" class="idref" href="#debox_type_mib"><span class="id" title="definition">debox_type_mib</span></a> (<a id="mib:224" class="idref" href="#mib:224"><span class="id" title="binder">mib</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#mutual_inductive_body"><span class="id" title="record">mutual_inductive_body</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:224"><span class="id" title="variable">mib</span></a>; <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> := <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_type_oib"><span class="id" title="definition">debox_type_oib</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:224"><span class="id" title="variable">mib</span></a>); <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_finite"><span class="id" title="projection">ind_finite</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_finite"><span class="id" title="projection">ind_finite</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib:224"><span class="id" title="variable">mib</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_type_decl" class="idref" href="#debox_type_decl"><span class="id" title="definition">debox_type_decl</span></a> (<a id="decl:225" class="idref" href="#decl:225"><span class="id" title="binder">decl</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decl:225"><span class="id" title="variable">decl</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_type_constant"><span class="id" title="definition">debox_type_constant</span></a> <span class="id" title="var">cst</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_type_mib"><span class="id" title="definition">debox_type_mib</span></a> <span class="id" title="var">mib</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">ta</span> ⇒ <span class="id" title="keyword">match</span> <span class="id" title="var">ta</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ty_vars</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ty</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="definition">filter</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#keep_tvar"><span class="id" title="definition">keep_tvar</span></a> <span class="id" title="var">ty_vars</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#reindex"><span class="id" title="definition">reindex</span></a> <span class="id" title="var">ty_vars</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_box_type"><span class="id" title="definition">debox_box_type</span></a> <span class="id" title="var">ty</span>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_types"><span class="id" title="section">dearg_types</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="debox_env_types" class="idref" href="#debox_env_types"><span class="id" title="definition">debox_env_types</span></a> (<a id="4777383971b98f432d32d2aebb274914" class="idref" href="#4777383971b98f432d32d2aebb274914"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_type_decl"><span class="id" title="definition">debox_type_decl</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#4777383971b98f432d32d2aebb274914"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#4777383971b98f432d32d2aebb274914"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="clear_bit" class="idref" href="#clear_bit"><span class="id" title="definition">clear_bit</span></a> (<a id="n:229" class="idref" href="#n:229"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="bs:230" class="idref" href="#bs:230"><span class="id" title="binder">bs</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:229"><span class="id" title="variable">n</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:230"><span class="id" title="variable">bs</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| 0, <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:230"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>, <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">bs</span> ⇒ <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#clear_bit:231"><span class="id" title="definition">clear_bit</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:229"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bs:230"><span class="id" title="variable">bs</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Pair of bitmask and inductive masks.
    The first projection is a bitmask of dead local variables, i.e. when a use is found,
    a bit in this is set to false.
    The second projection is a list of dead constructor datas. When a use of a constructor
    parameter is found, this is set to false. 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="analyze_state" class="idref" href="#analyze_state"><span class="id" title="definition">analyze_state</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="set_used" class="idref" href="#set_used"><span class="id" title="definition">set_used</span></a> (<a id="s:234" class="idref" href="#s:234"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<a id="n:235" class="idref" href="#n:235"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:235"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:234"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:234"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="new_vars" class="idref" href="#new_vars"><span class="id" title="definition">new_vars</span></a> (<a id="s:236" class="idref" href="#s:236"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<a id="n:237" class="idref" href="#n:237"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="abbreviation">List.repeat</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:237"><span class="id" title="variable">n</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:236"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:236"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="new_var" class="idref" href="#new_var"><span class="id" title="definition">new_var</span></a> (<a id="s:238" class="idref" href="#s:238"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:238"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:238"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="remove_vars" class="idref" href="#remove_vars"><span class="id" title="definition">remove_vars</span></a> (<a id="s:239" class="idref" href="#s:239"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<a id="n:240" class="idref" href="#n:240"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:240"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:239"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:239"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="remove_var" class="idref" href="#remove_var"><span class="id" title="definition">remove_var</span></a> (<a id="s:241" class="idref" href="#s:241"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="definition">tl</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:241"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:241"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="update_mib_masks" class="idref" href="#update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="s:242" class="idref" href="#s:242"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="kn:243" class="idref" href="#kn:243"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="mm:244" class="idref" href="#mm:244"><span class="id" title="binder">mm</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="keyword">fix</span> <a id="update_list:248" class="idref" href="#update_list:248"><span class="id" title="binder">update_list</span></a> <a id="l:245" class="idref" href="#l:245"><span class="id" title="binder">l</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#l:245"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mm'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">l</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Common.Kernames.html#eq_kername"><span class="id" title="abbreviation">eq_kername</span></a> <span class="id" title="var">kn'</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:243"><span class="id" title="variable">kn</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#kn:243"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:244"><span class="id" title="variable">mm</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#l:245"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mm'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_list:246"><span class="id" title="variable">update_list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#l:245"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:242"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_list:248"><span class="id" title="variable">update_list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#s:242"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="update_ind_ctor_mask" class="idref" href="#update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ind:249" class="idref" href="#ind:249"><span class="id" title="binder">ind</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c:250" class="idref" href="#c:250"><span class="id" title="binder">c</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ctor_masks:251" class="idref" href="#ctor_masks:251"><span class="id" title="binder">ctor_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="f:252" class="idref" href="#f:252"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:251"><span class="id" title="variable">ctor_masks</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <span class="id" title="notation">[]</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">ctor_masks</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:249"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">c'</span> <span class="id" title="notation">=?</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:250"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:252"><span class="id" title="variable">f</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:251"><span class="id" title="variable">ctor_masks</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">mask'</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_ind_ctor_mask:253"><span class="id" title="definition">update_ind_ctor_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:249"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:250"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:251"><span class="id" title="variable">ctor_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:252"><span class="id" title="variable">f</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fold_lefti" class="idref" href="#fold_lefti"><span class="id" title="definition">fold_lefti</span></a> {<a id="A:255" class="idref" href="#A:255"><span class="id" title="binder">A</span></a> <a id="B:256" class="idref" href="#B:256"><span class="id" title="binder">B</span></a>} (<a id="f:257" class="idref" href="#f:257"><span class="id" title="binder">f</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#A:255"><span class="id" title="variable">A</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#B:256"><span class="id" title="variable">B</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#A:255"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">fold_lefti</span> (<a id="n:258" class="idref" href="#n:258"><span class="id" title="binder">n</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="l:259" class="idref" href="#l:259"><span class="id" title="binder">l</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#B:256"><span class="id" title="variable">B</span></a>) (<a id="a0:260" class="idref" href="#a0:260"><span class="id" title="binder">a0</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#A:255"><span class="id" title="variable">A</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#l:259"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#a0:260"><span class="id" title="variable">a0</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">b</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#fold_lefti:261"><span class="id" title="variable">fold_lefti</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:258"><span class="id" title="variable">n</span></a>) <span class="id" title="var">t</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#f:257"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#n:258"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#a0:260"><span class="id" title="variable">a0</span></a> <span class="id" title="var">b</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="AnalyzeTop" class="idref" href="#AnalyzeTop"><span class="id" title="section">AnalyzeTop</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="AnalyzeTop.analyze" class="idref" href="#AnalyzeTop.analyze"><span class="id" title="variable">analyze</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>).<br/>
</div>

<div class="doc">
Analyze iterated let-in and lambdas to find dead variables inside body.
      Return bitmask of max length n indicating which lambda arguments are unused. 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="analyze_top_level" class="idref" href="#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="state:264" class="idref" href="#state:264"><span class="id" title="binder">state</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="max_lams:265" class="idref" href="#max_lams:265"><span class="id" title="binder">max_lams</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="t:266" class="idref" href="#t:266"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">t</span>} : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:266"><span class="id" title="variable">t</span></a>, <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#max_lams:265"><span class="id" title="variable">max_lams</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span>, <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:270" class="idref" href="#state:270"><span class="id" title="binder">state</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#AnalyzeTop.analyze"><span class="id" title="variable">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:264"><span class="id" title="variable">state</span></a> <span class="id" title="var">val</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="mask:271" class="idref" href="#mask:271"><span class="id" title="binder">mask</span></a>, <a id="state:272" class="idref" href="#state:272"><span class="id" title="binder">state</span></a>) := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_top_level:267"><span class="id" title="definition">analyze_top_level</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:270"><span class="id" title="variable">state</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#max_lams:265"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Add&nbsp;nothing&nbsp;to&nbsp;mask&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:271"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:272"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">body</span>, <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">max_lams</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="mask:273" class="idref" href="#mask:273"><span class="id" title="binder">mask</span></a>, <a id="state:274" class="idref" href="#state:274"><span class="id" title="binder">state</span></a>) := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_top_level:267"><span class="id" title="definition">analyze_top_level</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:264"><span class="id" title="variable">state</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#max_lams:265"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;Add&nbsp;to&nbsp;mask&nbsp;indicating&nbsp;whether&nbsp;this&nbsp;arg&nbsp;is&nbsp;unused&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="definition">hd</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:274"><span class="id" title="variable">state</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:273"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:274"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">t</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">[]</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#AnalyzeTop.analyze"><span class="id" title="variable">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:264"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:266"><span class="id" title="variable">t</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#AnalyzeTop"><span class="id" title="section">AnalyzeTop</span></a>.<br/>

<br/>
</div>

<div class="doc">
NOTE: analysis assumes that constructors are in the form <span class="inlinecode"><a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#OnInductives.ind"><span class="id" title="variable">ind</span></a></span> <span class="inlinecode"><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.i"><span class="id" title="variable">i</span></a></span> <span class="inlinecode">[]</span> <span class="inlinecode"></span>,
    that is, constructors-as-blocks is disabled 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a id="analyze" class="idref" href="#analyze"><span class="id" title="definition">analyze</span></a> (<a id="state:275" class="idref" href="#state:275"><span class="id" title="binder">state</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a>) (<a id="t:276" class="idref" href="#t:276"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) {<span class="id" title="keyword">struct</span> <span class="id" title="var">t</span>} : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_state"><span class="id" title="definition">analyze_state</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:276"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tBox"><span class="id" title="constructor">tBox</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#set_used"><span class="id" title="definition">set_used</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">tVar</span></a> <span class="id" title="var">n</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">ts</span> ⇒ <span class="id" title="definition">fold_left</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <span class="id" title="var">ts</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">_</span> <span class="id" title="var">cod</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a>) <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">val</span> <span class="id" title="var">body</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_var"><span class="id" title="definition">remove_var</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_var"><span class="id" title="definition">new_var</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <span class="id" title="var">val</span>)) <span class="id" title="var">body</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">hd</span> <span class="id" title="var">arg</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <span class="id" title="var">hd</span>) <span class="id" title="var">arg</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConst"><span class="id" title="constructor">tConst</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
NOTE: we don't support constructors-as-blocks at the moment,
          Therefore, we ignore the block argument list assuming it's empty 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">npars</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">discr</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:279" class="idref" href="#state:279"><span class="id" title="binder">state</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <span class="id" title="var">discr</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:279"><span class="id" title="variable">state</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ind</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="analyze_case:286" class="idref" href="#analyze_case:286"><span class="id" title="binder">analyze_case</span></a> <a id="c:280" class="idref" href="#c:280"><span class="id" title="binder">c</span></a> '<a id="pat:283" class="idref" href="#pat:283"><span class="id" title="binder">(</span></a><a id="state:282" class="idref" href="#state:282"><span class="id" title="binder"><span id="pat:283" class="id">state</span></span></a><a id="pat:283" class="idref" href="#pat:283"><span class="id" title="binder">,</span></a> <a id="ctor_masks:281" class="idref" href="#ctor_masks:281"><span class="id" title="binder"><span id="pat:283" class="id">ctor_masks</span></span></a><a id="pat:283" class="idref" href="#pat:283"><span class="id" title="binder">)</span></a> (<a id="brs:284" class="idref" href="#brs:284"><span class="id" title="binder">brs</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">BasicAst.name</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:285" class="idref" href="#state:285"><span class="id" title="binder">state</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_vars"><span class="id" title="definition">new_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:282"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:284"><span class="id" title="variable">brs</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:284"><span class="id" title="variable">brs</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_vars"><span class="id" title="definition">remove_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:285"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#brs:284"><span class="id" title="variable">brs</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:281"><span class="id" title="variable">ctor_masks</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;let&nbsp;mask&nbsp;:=&nbsp;List.rev&nbsp;(firstn&nbsp;|brs.1| state.1) in *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;(remove_vars&nbsp;state&nbsp;|brs.1|, update_ind_ctor_mask (inductive_ind ind) c ctor_masks (bitmask_and mask)) in *)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="state:287" class="idref" href="#state:287"><span class="id" title="binder">state</span></a>, <a id="ctor_masks:288" class="idref" href="#ctor_masks:288"><span class="id" title="binder">ctor_masks</span></a>) := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#fold_lefti"><span class="id" title="definition">fold_lefti</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_case:286"><span class="id" title="variable">analyze_case</span></a> 0 <span class="id" title="var">brs</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:279"><span class="id" title="variable">state</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <span class="id" title="var">mm</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mm:289" class="idref" href="#mm:289"><span class="id" title="binder">mm</span></a> := {| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span>; <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:288"><span class="id" title="variable">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:287"><span class="id" title="variable">state</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ind</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:289"><span class="id" title="variable">mm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:279"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">tProj</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#mkProjection"><span class="id" title="constructor">mkProjection</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">npars</span> <span class="id" title="var">arg</span>) <span class="id" title="var">t</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:290" class="idref" href="#state:290"><span class="id" title="binder">state</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:276"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#get_mib_masks"><span class="id" title="definition">get_mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:290"><span class="id" title="variable">state</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ind</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mm</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctor_masks:291" class="idref" href="#ctor_masks:291"><span class="id" title="binder">ctor_masks</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_ind_ctor_mask"><span class="id" title="definition">update_ind_ctor_mask</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <span class="id" title="var">ind</span>) 0 (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <span class="id" title="var">mm</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> <span class="id" title="var">arg</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mm:292" class="idref" href="#mm:292"><span class="id" title="binder">mm</span></a> := {| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <span class="id" title="var">mm</span>; <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:291"><span class="id" title="variable">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#update_mib_masks"><span class="id" title="definition">update_mib_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:290"><span class="id" title="variable">state</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ind</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:292"><span class="id" title="variable">mm</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:290"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">defs</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:293" class="idref" href="#state:293"><span class="id" title="binder"><span id="state:297" class="id">state</span></span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#new_vars"><span class="id" title="definition">new_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">defs</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="state:296" class="idref" href="#state:296"><span class="id" title="binder"><span id="state:300" class="id">state</span></span></a> := <span class="id" title="definition">fold_left</span> (<span class="id" title="keyword">fun</span> <a id="state:294" class="idref" href="#state:294"><span class="id" title="binder"><span id="state:298" class="id">state</span></span></a> <a id="d:295" class="idref" href="#d:295"><span class="id" title="binder"><span id="d:299" class="id">d</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:294"><span class="id" title="variable">state</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#d:295"><span class="id" title="variable">d</span></a>)) <span class="id" title="var">defs</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:293"><span class="id" title="variable">state</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#remove_vars"><span class="id" title="definition">remove_vars</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:296"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">defs</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#fold_prim"><span class="id" title="definition">fold_prim</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <span class="id" title="var">p</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">tLazy</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:276"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">tForce</span></a> <span class="id" title="var">t</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze:277"><span class="id" title="definition">analyze</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#state:275"><span class="id" title="variable">state</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#t:276"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="decompose_TArr" class="idref" href="#decompose_TArr"><span class="id" title="definition">decompose_TArr</span></a> (<a id="bt:301" class="idref" href="#bt:301"><span class="id" title="binder">bt</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:301"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TArr"><span class="id" title="constructor">TArr</span></a> <span class="id" title="var">dom</span> <span class="id" title="var">cod</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#map_fst"><span class="id" title="definition">map_fst</span></a> (<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#cons"><span class="id" title="constructor">cons</span></a> <span class="id" title="var">dom</span>) (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decompose_TArr:302"><span class="id" title="definition">decompose_TArr</span></a> <span class="id" title="var">cod</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">[]</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:301"><span class="id" title="variable">bt</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_box_or_any" class="idref" href="#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> (<a id="bt:304" class="idref" href="#bt:304"><span class="id" title="binder">bt</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#box_type"><span class="id" title="inductive">box_type</span></a>) : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bt:304"><span class="id" title="variable">bt</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TBox"><span class="id" title="constructor">TBox</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TAny"><span class="id" title="constructor">TAny</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="analyze_constant" class="idref" href="#analyze_constant"><span class="id" title="definition">analyze_constant</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cst:306" class="idref" href="#cst:306"><span class="id" title="binder">cst</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#constant_body"><span class="id" title="record">constant_body</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="inds:307" class="idref" href="#inds:307"><span class="id" title="binder">inds</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">doms</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">codom</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#decompose_TArr"><span class="id" title="definition">decompose_TArr</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_type"><span class="id" title="projection">cst_type</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:306"><span class="id" title="variable">cst</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cst:306"><span class="id" title="variable">cst</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">body</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="max_lams:308" class="idref" href="#max_lams:308"><span class="id" title="binder">max_lams</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">doms</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">inds</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_top_level"><span class="id" title="definition">analyze_top_level</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze"><span class="id" title="definition">analyze</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="notation">[]</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:307"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#max_lams:308"><span class="id" title="variable">max_lams</span></a> <span class="id" title="var">body</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;NOTE:&nbsp;if&nbsp;all&nbsp;the&nbsp;arguments&nbsp;are&nbsp;logical,&nbsp;we&nbsp;keep&nbsp;the&nbsp;first&nbsp;one&nbsp;in&nbsp;order&nbsp;to&nbsp;prevent<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contstans&nbsp;like&nbsp;<span class="inlinecode"><span class="id" title="var">false_rect</span></span>&nbsp;to&nbsp;be&nbsp;evaluated&nbsp;eagerly&nbsp;in&nbsp;the&nbsp;extracted&nbsp;code&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> <span class="id" title="definition">forallb</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <span class="id" title="var">doms</span> <span class="id" title="keyword">then</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#clear_bit"><span class="id" title="definition">clear_bit</span></a> 0 <span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:307"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:307"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <span class="id" title="var">doms</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:307"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="dearg_set" class="idref" href="#dearg_set"><span class="id" title="record">dearg_set</span></a> := {<br/>
&nbsp;&nbsp;<a id="const_masks" class="idref" href="#const_masks"><span class="id" title="projection">const_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>);<br/>
&nbsp;&nbsp;<a id="ind_masks" class="idref" href="#ind_masks"><span class="id" title="projection">ind_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>); }.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="analyze_env" class="idref" href="#analyze_env"><span class="id" title="definition">analyze_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="overridden_masks:312" class="idref" href="#overridden_masks:312"><span class="id" title="binder">overridden_masks</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="c5b21a4ce8a9b5abb84f552f72b80f4d" class="idref" href="#c5b21a4ce8a9b5abb84f552f72b80f4d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_set"><span class="id" title="record">dearg_set</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c5b21a4ce8a9b5abb84f552f72b80f4d"><span class="id" title="variable">Σ</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="notation">[]</span> ⇒ {| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks"><span class="id" title="projection">const_masks</span></a> := <span class="id" title="notation">[]</span>; <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks"><span class="id" title="projection">ind_masks</span></a> := <span class="id" title="notation">[]</span> |}<br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">has_deps</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">decl</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">Σ</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="consts:316" class="idref" href="#consts:316"><span class="id" title="binder">consts</span></a>, <a id="inds:317" class="idref" href="#inds:317"><span class="id" title="binder">inds</span></a>) := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_env:314"><span class="id" title="definition">analyze_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#overridden_masks:312"><span class="id" title="variable">overridden_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c5b21a4ce8a9b5abb84f552f72b80f4d"><span class="id" title="variable">Σ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="consts:327" class="idref" href="#consts:327"><span class="id" title="binder">consts</span></a>, <a id="inds:328" class="idref" href="#inds:328"><span class="id" title="binder">inds</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="var">decl</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cst</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">mask</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">inds</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_constant"><span class="id" title="definition">analyze_constant</span></a> <span class="id" title="var">cst</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:317"><span class="id" title="variable">inds</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mask:319" class="idref" href="#mask:319"><span class="id" title="binder">mask</span></a> := <a class="idref" href="MetaRocq.Utils.MROption.html#option_get"><span class="id" title="definition">option_get</span></a> <span class="id" title="var">mask</span> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#overridden_masks:312"><span class="id" title="variable">overridden_masks</span></a> <span class="id" title="var">kn</span>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">((</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:319"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#consts:316"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:317"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">mib</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ctor_masks:325" class="idref" href="#ctor_masks:325"><span class="id" title="binder">ctor_masks</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="definition">List.concat</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="ind:320" class="idref" href="#ind:320"><span class="id" title="binder">ind</span></a> <a id="oib:321" class="idref" href="#oib:321"><span class="id" title="binder">oib</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="c:322" class="idref" href="#c:322"><span class="id" title="binder">c</span></a> '<a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">(</span></a><a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">_</span></a><a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">,</span></a> <a id="args:323" class="idref" href="#args:323"><span class="id" title="binder"><span id="pat:324" class="id">args</span></span></a><a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">,</span></a> <a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">_</span></a><a id="pat:324" class="idref" href="#pat:324"><span class="id" title="binder">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:320"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:322"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_box_or_any"><span class="id" title="definition">is_box_or_any</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mib</span>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#args:323"><span class="id" title="variable">args</span></a>)<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#oib:321"><span class="id" title="variable">oib</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mib</span>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mm:326" class="idref" href="#mm:326"><span class="id" title="binder">mm</span></a> := {| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> := <span class="id" title="abbreviation">List.repeat</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mib</span>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks:325"><span class="id" title="variable">ctor_masks</span></a> |} <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#consts:316"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:326"><span class="id" title="variable">mm</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:317"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#TypeAliasDecl"><span class="id" title="constructor">TypeAliasDecl</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#consts:316"><span class="id" title="variable">consts</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:317"><span class="id" title="variable">inds</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks"><span class="id" title="projection">const_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#consts:327"><span class="id" title="variable">consts</span></a>; <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks"><span class="id" title="projection">ind_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#inds:328"><span class="id" title="variable">inds</span></a> |}<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Remove trailing "false" bits in masks 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="trim_const_masks" class="idref" href="#trim_const_masks"><span class="id" title="definition">trim_const_masks</span></a> (<a id="cm:329" class="idref" href="#cm:329"><span class="id" title="binder">cm</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_end"><span class="id" title="definition">trim_end</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>)) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cm:329"><span class="id" title="variable">cm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trim_ctor_masks" class="idref" href="#trim_ctor_masks"><span class="id" title="definition">trim_ctor_masks</span></a> (<a id="cm:330" class="idref" href="#cm:330"><span class="id" title="binder">cm</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">(</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:334" class="idref" href="#pat:334"><span class="id" title="binder">(</span></a><a id="ind:333" class="idref" href="#ind:333"><span class="id" title="binder"><span id="pat:334" class="id">ind</span></span></a><a id="pat:334" class="idref" href="#pat:334"><span class="id" title="binder">,</span></a> <a id="c:332" class="idref" href="#c:332"><span class="id" title="binder"><span id="pat:334" class="id">c</span></span></a><a id="pat:334" class="idref" href="#pat:334"><span class="id" title="binder">,</span></a> <a id="mask:331" class="idref" href="#mask:331"><span class="id" title="binder"><span id="pat:334" class="id">mask</span></span></a><a id="pat:334" class="idref" href="#pat:334"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind:333"><span class="id" title="variable">ind</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#c:332"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_end"><span class="id" title="definition">trim_end</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mask:331"><span class="id" title="variable">mask</span></a><a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#cm:330"><span class="id" title="variable">cm</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trim_mib_masks" class="idref" href="#trim_mib_masks"><span class="id" title="definition">trim_mib_masks</span></a> (<a id="mm:335" class="idref" href="#mm:335"><span class="id" title="binder">mm</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#param_mask"><span class="id" title="projection">param_mask</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:335"><span class="id" title="variable">mm</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> := <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_ctor_masks"><span class="id" title="definition">trim_ctor_masks</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ctor_masks"><span class="id" title="projection">ctor_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mm:335"><span class="id" title="variable">mm</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trim_ind_masks" class="idref" href="#trim_ind_masks"><span class="id" title="definition">trim_ind_masks</span></a> (<a id="im:336" class="idref" href="#im:336"><span class="id" title="binder">im</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#mib_masks"><span class="id" title="record">mib_masks</span></a>)) :=<br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_mib_masks"><span class="id" title="definition">trim_mib_masks</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#im:336"><span class="id" title="variable">im</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.monad_utils.html#MRMonadNotation"><span class="id" title="module">MRMonadNotation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="throwIf" class="idref" href="#throwIf"><span class="id" title="definition">throwIf</span></a> (<a id="b:337" class="idref" href="#b:337"><span class="id" title="binder">b</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="err:338" class="idref" href="#err:338"><span class="id" title="binder">err</span></a> : <a class="idref" href="MetaRocq.Utils.bytestring.html#string"><span class="id" title="abbreviation">string</span></a>) : (<span class="id" title="keyword">fun</span> <a id="x:339" class="idref" href="#x:339"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.ResultMonad.html#result"><span class="id" title="inductive">result</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#x:339"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.Utils.bytestring.html#string"><span class="id" title="abbreviation">string</span></a>) <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#b:337"><span class="id" title="variable">b</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.ResultMonad.html#Err"><span class="id" title="constructor">Err</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#err:338"><span class="id" title="variable">err</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="MetaRocq.Erasure.Typed.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">String</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="dearg_transform" class="idref" href="#dearg_transform"><span class="id" title="definition">dearg_transform</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="overridden_masks:340" class="idref" href="#overridden_masks:340"><span class="id" title="binder">overridden_masks</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">kername</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#bitmask"><span class="id" title="definition">bitmask</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
If true, trim ends of constant masks to avoid unnecessary eta expansion. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="do_trim_const_masks:341" class="idref" href="#do_trim_const_masks:341"><span class="id" title="binder">do_trim_const_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
If true, trim ends of constructor masks to avoid unnecessary eta expansion. 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="do_trim_ctor_masks:342" class="idref" href="#do_trim_ctor_masks:342"><span class="id" title="binder">do_trim_ctor_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Check if erased environment is closed 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="check_closed:343" class="idref" href="#check_closed:343"><span class="id" title="binder">check_closed</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Check that environment is expanded enough before dearging 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="check_expanded:344" class="idref" href="#check_expanded:344"><span class="id" title="binder">check_expanded</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</div>

<div class="doc">
Check that the dearg masks generated by analysis are valid for dearging 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="check_valid_masks:345" class="idref" href="#check_valid_masks:345"><span class="id" title="binder">check_valid_masks</span></a> : <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) : <a class="idref" href="MetaRocq.Erasure.Typed.Transform.html#ExtractTransform"><span class="id" title="definition">ExtractTransform</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="20712b40a23e8d6a79d955fdadd0cfe3" class="idref" href="#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#global_env"><span class="id" title="definition">global_env</span></a>) ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#throwIf"><span class="id" title="definition">throwIf</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#check_closed:343"><span class="id" title="variable">check_closed</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ClosedAux.html#env_closed"><span class="id" title="definition">env_closed</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.ExAst.html#trans_env"><span class="id" title="definition">trans_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Erased environment is not closed" <a class="idref" href="MetaRocq.Utils.monad_utils.html#3d31a9d36591ef0fb917aef4149126dc"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="const_masks:347" class="idref" href="#const_masks:347"><span class="id" title="binder">const_masks</span></a>, <a id="ind_masks:348" class="idref" href="#ind_masks:348"><span class="id" title="binder">ind_masks</span></a>) := <a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#timed"><span class="id" title="definition">timed</span></a> "Dearg analysis"%<span class="id" title="var">string</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#analyze_env"><span class="id" title="definition">analyze_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#overridden_masks:340"><span class="id" title="variable">overridden_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>) <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="const_masks:349" class="idref" href="#const_masks:349"><span class="id" title="binder">const_masks</span></a> := (<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#do_trim_const_masks:341"><span class="id" title="variable">do_trim_const_masks</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_const_masks"><span class="id" title="definition">trim_const_masks</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks:347"><span class="id" title="variable">const_masks</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ind_masks:350" class="idref" href="#ind_masks:350"><span class="id" title="binder">ind_masks</span></a> := (<span class="id" title="keyword">if</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#do_trim_ctor_masks:342"><span class="id" title="variable">do_trim_ctor_masks</span></a> <span class="id" title="keyword">then</span> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#trim_ind_masks"><span class="id" title="definition">trim_ind_masks</span></a> <span class="id" title="keyword">else</span> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>) <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks:348"><span class="id" title="variable">ind_masks</span></a> <span class="id" title="tactic">in</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#throwIf"><span class="id" title="definition">throwIf</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#check_expanded:344"><span class="id" title="variable">check_expanded</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#is_expanded_env"><span class="id" title="definition">is_expanded_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks:350"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks:349"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Erased environment is not expanded enough for dearging to be provably correct" <a class="idref" href="MetaRocq.Utils.monad_utils.html#3d31a9d36591ef0fb917aef4149126dc"><span class="id" title="notation">;;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#throwIf"><span class="id" title="definition">throwIf</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#check_valid_masks:345"><span class="id" title="variable">check_valid_masks</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="http://coq.inria.fr/doc/V9.0.0/stdlib//Corelib.Init.Datatypes.html#negb"><span class="id" title="definition">negb</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#valid_masks_env"><span class="id" title="definition">valid_masks_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks:350"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks:349"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Analysis produced masks that ask to remove live arguments" <a class="idref" href="MetaRocq.Utils.monad_utils.html#3d31a9d36591ef0fb917aef4149126dc"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Typed.ResultMonad.html#Ok"><span class="id" title="constructor">Ok</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#debox_env_types"><span class="id" title="definition">debox_env_types</span></a> (<a class="idref" href="MetaRocq.Erasure.Typed.Utils.html#timed"><span class="id" title="definition">timed</span></a> "Dearging" (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#dearg_env"><span class="id" title="definition">dearg_env</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#ind_masks:350"><span class="id" title="variable">ind_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#const_masks:349"><span class="id" title="variable">const_masks</span></a> <a class="idref" href="MetaRocq.Erasure.Typed.Optimize.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>))).<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
