<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.ErasurePlugin.ErasureCorrectness</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Program.Program.html#"><span class="id" title="library">Program</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.Transform.html#"><span class="id" title="library">Transform</span></a> <a class="idref" href="MetaRocq.Common.config.html#"><span class="id" title="library">config</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.bytestring.html#"><span class="id" title="library">bytestring</span></a> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="library">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="library">PCUICAstUtils</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#"><span class="id" title="library">PCUICProgram</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#"><span class="id" title="library">PCUICNormal</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICErrors.html#"><span class="id" title="library">PCUICErrors</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#"><span class="id" title="library">PCUICWfEnvImpl</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#"><span class="id" title="library">EAstUtils</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureCorrectness.html#"><span class="id" title="library">ErasureCorrectness</span></a> <a class="idref" href="MetaRocq.Erasure.EPretty.html#"><span class="id" title="library">EPretty</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#"><span class="id" title="library">Extract</span></a> <a class="idref" href="MetaRocq.Erasure.EProgram.html#"><span class="id" title="library">EProgram</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#"><span class="id" title="library">EConstructorsAsBlocks</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEvalNamed.html#"><span class="id" title="library">EWcbvEvalNamed</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#"><span class="id" title="library">ErasureFunction</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#"><span class="id" title="library">ErasureFunctionProperties</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.ErasurePlugin</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#"><span class="id" title="library">ETransform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#"><span class="id" title="library">Erasure</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EProgram.html#"><span class="id" title="module">EProgram</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#"><span class="id" title="module">PCUICProgram</span></a>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#"><span class="id" title="module">PCUICTransform</span></a> (<span class="id" title="var">template_to_pcuic_transform</span>, <span class="id" title="var">pcuic_expand_lets_transform</span>).<br/>

<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform"><span class="id" title="module">Common.Transform.Transform</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">program_simpl</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="var">Existing</span> <span class="id" title="keyword">Instance</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#extraction_normalizing"><span class="id" title="instance">PCUICSN.extraction_normalizing</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#"><span class="id" title="module">EWcbvEval</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_compose_assoc" class="idref" href="#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a><br/>
&nbsp;&nbsp;{<a id="env:1" class="idref" href="#env:1"><span class="id" title="binder">env</span></a> <a id="env':2" class="idref" href="#env':2"><span class="id" title="binder">env'</span></a> <a id="env'':3" class="idref" href="#env'':3"><span class="id" title="binder">env''</span></a> <a id="env''':4" class="idref" href="#env''':4"><span class="id" title="binder">env'''</span></a> <a id="term:5" class="idref" href="#term:5"><span class="id" title="binder">term</span></a> <a id="term':6" class="idref" href="#term':6"><span class="id" title="binder">term'</span></a> <a id="term'':7" class="idref" href="#term'':7"><span class="id" title="binder">term''</span></a> <a id="term''':8" class="idref" href="#term''':8"><span class="id" title="binder">term'''</span></a> <a id="value:9" class="idref" href="#value:9"><span class="id" title="binder">value</span></a> <a id="value':10" class="idref" href="#value':10"><span class="id" title="binder">value'</span></a> <a id="value'':11" class="idref" href="#value'':11"><span class="id" title="binder">value''</span></a> <a id="value''':12" class="idref" href="#value''':12"><span class="id" title="binder">value'''</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="eval:13" class="idref" href="#eval:13"><span class="id" title="binder">eval</span></a> <a id="eval':14" class="idref" href="#eval':14"><span class="id" title="binder">eval'</span></a> <a id="eval'':15" class="idref" href="#eval'':15"><span class="id" title="binder">eval''</span></a> <a id="eval''':16" class="idref" href="#eval''':16"><span class="id" title="binder">eval'''</span></a>}<br/>
&nbsp;&nbsp;(<a id="o:17" class="idref" href="#o:17"><span class="id" title="binder">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env:1"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env':2"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term:5"><span class="id" title="variable">term</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term':6"><span class="id" title="variable">term'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value:9"><span class="id" title="variable">value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value':10"><span class="id" title="variable">value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval:13"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval':14"><span class="id" title="variable">eval'</span></a>)<br/>
&nbsp;&nbsp;(<a id="o':18" class="idref" href="#o':18"><span class="id" title="binder">o'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env':2"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env'':3"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term':6"><span class="id" title="variable">term'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term'':7"><span class="id" title="variable">term''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value':10"><span class="id" title="variable">value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value'':11"><span class="id" title="variable">value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval':14"><span class="id" title="variable">eval'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval'':15"><span class="id" title="variable">eval''</span></a>)<br/>
&nbsp;&nbsp;(<a id="o'':19" class="idref" href="#o'':19"><span class="id" title="binder">o''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env'':3"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env''':4"><span class="id" title="variable">env'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term'':7"><span class="id" title="variable">term''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term''':8"><span class="id" title="variable">term'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value'':11"><span class="id" title="variable">value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value''':12"><span class="id" title="variable">value'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval'':15"><span class="id" title="variable">eval''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval''':16"><span class="id" title="variable">eval'''</span></a>)<br/>
&nbsp;&nbsp;(<a id="prec:21" class="idref" href="#prec:21"><span class="id" title="binder">prec</span></a> : <span class="id" title="keyword">∀</span> <a id="p:20" class="idref" href="#p:20"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:17"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:20"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':18"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:20"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;(<a id="prec':23" class="idref" href="#prec':23"><span class="id" title="binder">prec'</span></a> : <span class="id" title="keyword">∀</span> <a id="p:22" class="idref" href="#p:22"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':18"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:22"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':19"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:22"><span class="id" title="variable">p</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:24" class="idref" href="#x:24"><span class="id" title="binder">x</span></a> <a id="p1:25" class="idref" href="#p1:25"><span class="id" title="binder">p1</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:17"><span class="id" title="variable">o</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':18"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':19"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec':23"><span class="id" title="variable">prec'</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec:21"><span class="id" title="variable">prec</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:24"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p1:25"><span class="id" title="variable">p1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:17"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':18"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec:21"><span class="id" title="variable">prec</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':19"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec':23"><span class="id" title="variable">prec'</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:24"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p1:25"><span class="id" title="variable">p1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="obseq_compose_assoc" class="idref" href="#obseq_compose_assoc"><span class="id" title="lemma">obseq_compose_assoc</span></a><br/>
&nbsp;&nbsp;{<a id="env:26" class="idref" href="#env:26"><span class="id" title="binder">env</span></a> <a id="env':27" class="idref" href="#env':27"><span class="id" title="binder">env'</span></a> <a id="env'':28" class="idref" href="#env'':28"><span class="id" title="binder">env''</span></a> <a id="env''':29" class="idref" href="#env''':29"><span class="id" title="binder">env'''</span></a> <a id="term:30" class="idref" href="#term:30"><span class="id" title="binder">term</span></a> <a id="term':31" class="idref" href="#term':31"><span class="id" title="binder">term'</span></a> <a id="term'':32" class="idref" href="#term'':32"><span class="id" title="binder">term''</span></a> <a id="term''':33" class="idref" href="#term''':33"><span class="id" title="binder">term'''</span></a> <a id="value:34" class="idref" href="#value:34"><span class="id" title="binder">value</span></a> <a id="value':35" class="idref" href="#value':35"><span class="id" title="binder">value'</span></a> <a id="value'':36" class="idref" href="#value'':36"><span class="id" title="binder">value''</span></a> <a id="value''':37" class="idref" href="#value''':37"><span class="id" title="binder">value'''</span></a> : <span class="id" title="keyword">Type</span>}<br/>
&nbsp;&nbsp;{<a id="eval:38" class="idref" href="#eval:38"><span class="id" title="binder">eval</span></a> <a id="eval':39" class="idref" href="#eval':39"><span class="id" title="binder">eval'</span></a> <a id="eval'':40" class="idref" href="#eval'':40"><span class="id" title="binder">eval''</span></a> <a id="eval''':41" class="idref" href="#eval''':41"><span class="id" title="binder">eval'''</span></a>}<br/>
&nbsp;&nbsp;(<a id="o:42" class="idref" href="#o:42"><span class="id" title="binder">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env:26"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env':27"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term:30"><span class="id" title="variable">term</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term':31"><span class="id" title="variable">term'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value:34"><span class="id" title="variable">value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value':35"><span class="id" title="variable">value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval:38"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval':39"><span class="id" title="variable">eval'</span></a>)<br/>
&nbsp;&nbsp;(<a id="o':43" class="idref" href="#o':43"><span class="id" title="binder">o'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env':27"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env'':28"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term':31"><span class="id" title="variable">term'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term'':32"><span class="id" title="variable">term''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value':35"><span class="id" title="variable">value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value'':36"><span class="id" title="variable">value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval':39"><span class="id" title="variable">eval'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval'':40"><span class="id" title="variable">eval''</span></a>)<br/>
&nbsp;&nbsp;(<a id="o'':44" class="idref" href="#o'':44"><span class="id" title="binder">o''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env'':28"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#env''':29"><span class="id" title="variable">env'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term'':32"><span class="id" title="variable">term''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#term''':33"><span class="id" title="variable">term'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value'':36"><span class="id" title="variable">value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#value''':37"><span class="id" title="variable">value'''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval'':40"><span class="id" title="variable">eval''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#eval''':41"><span class="id" title="variable">eval'''</span></a>)<br/>
&nbsp;&nbsp;(<a id="prec:46" class="idref" href="#prec:46"><span class="id" title="binder">prec</span></a> : <span class="id" title="keyword">∀</span> <a id="p:45" class="idref" href="#p:45"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:42"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:45"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':43"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:45"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;(<a id="prec':48" class="idref" href="#prec':48"><span class="id" title="binder">prec'</span></a> : <span class="id" title="keyword">∀</span> <a id="p:47" class="idref" href="#p:47"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':43"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:47"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':44"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:47"><span class="id" title="variable">p</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="x:49" class="idref" href="#x:49"><span class="id" title="binder">x</span></a> <a id="p1:50" class="idref" href="#p1:50"><span class="id" title="binder">p1</span></a> <a id="p2:51" class="idref" href="#p2:51"><span class="id" title="binder">p2</span></a> <a id="v1:52" class="idref" href="#v1:52"><span class="id" title="binder">v1</span></a> <a id="v2:53" class="idref" href="#v2:53"><span class="id" title="binder">v2</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:42"><span class="id" title="variable">o</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':43"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':44"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec':48"><span class="id" title="variable">prec'</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec:46"><span class="id" title="variable">prec</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:49"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p1:50"><span class="id" title="variable">p1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p2:51"><span class="id" title="variable">p2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v1:52"><span class="id" title="variable">v1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v2:53"><span class="id" title="variable">v2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o:42"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o':43"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec:46"><span class="id" title="variable">prec</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#o'':44"><span class="id" title="variable">o''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prec':48"><span class="id" title="variable">prec'</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:49"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p1:50"><span class="id" title="variable">p1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p2:51"><span class="id" title="variable">p2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v1:52"><span class="id" title="variable">v1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v2:53"><span class="id" title="variable">v2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">firstorder</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">o'</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">prec</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>) (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose_obligation_1"><span class="id" title="lemma">Transform.Transform.compose_obligation_1</span></a> <span class="id" title="var">o</span> <span class="id" title="var">o'</span> <span class="id" title="var">prec</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x1</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x0</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">o'</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>)<br/>
&nbsp;&nbsp;(<span class="id" title="var">prec</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>) (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">o</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose_obligation_1"><span class="id" title="lemma">Transform.Transform.compose_obligation_1</span></a> <span class="id" title="var">o</span> <span class="id" title="var">o'</span> <span class="id" title="var">prec</span> <span class="id" title="var">x</span> <span class="id" title="var">p1</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>). <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap"><span class="id" title="module">EEnvMap.GlobalContextMap</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_compose</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">pre</span>) ?<span class="id" title="var">p</span> ?<span class="id" title="var">pre'</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre''</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#transform_compose"><span class="id" title="definition">transform_compose</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">pre</span> <span class="id" title="var">p</span> <span class="id" title="var">pre'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">pre''</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>; <span class="id" title="var">revert</span> <span class="id" title="var">pre''</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">destruct_compose_no_clear</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;|- <span class="id" title="keyword">context</span> [ <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> ?<span class="id" title="var">x</span> ?<span class="id" title="var">y</span> ?<span class="id" title="var">pre</span>) ?<span class="id" title="var">p</span> ?<span class="id" title="var">pre'</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">pre''</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#transform_compose"><span class="id" title="definition">transform_compose</span></a> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">pre</span> <span class="id" title="var">p</span> <span class="id" title="var">pre'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">pre''</span> <span class="id" title="var">H</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>; <span class="id" title="var">revert</span> <span class="id" title="var">pre''</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rebuild_wf_env_irr" class="idref" href="#rebuild_wf_env_irr"><span class="id" title="lemma">rebuild_wf_env_irr</span></a> {<a id="efl:54" class="idref" href="#efl:54"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EWellformed.EEnvFlags</span></a>} <a id="p:55" class="idref" href="#p:55"><span class="id" title="binder">p</span></a> <a id="wf:56" class="idref" href="#wf:56"><span class="id" title="binder">wf</span></a> <a id="p':57" class="idref" href="#p':57"><span class="id" title="binder">p'</span></a> <a id="wf':58" class="idref" href="#wf':58"><span class="id" title="binder">wf'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:55"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':57"><span class="id" title="variable">p'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env"><span class="id" title="definition">rebuild_wf_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:55"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wf:56"><span class="id" title="variable">wf</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env"><span class="id" title="definition">rebuild_wf_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':57"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wf':58"><span class="id" title="variable">wf'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [], <span class="id" title="var">p'</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.make"><span class="id" title="definition">make</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="obseq_lambdabox" class="idref" href="#obseq_lambdabox"><span class="id" title="lemma">obseq_lambdabox</span></a> (<a id="cc725a5dfa39be978b7cc8721df9ac9d" class="idref" href="#cc725a5dfa39be978b7cc8721df9ac9d"><span class="id" title="binder">Σt</span></a> <a id="ff613fe7351cc67845d265b88b5b5210" class="idref" href="#ff613fe7351cc67845d265b88b5b5210"><span class="id" title="binder">Σ'v</span></a> : <a class="idref" href="MetaRocq.Erasure.EProgram.html#eprogram_env"><span class="id" title="definition">EProgram.eprogram_env</span></a>) <a id="pr:61" class="idref" href="#pr:61"><span class="id" title="binder">pr</span></a> <a id="pr':62" class="idref" href="#pr':62"><span class="id" title="binder">pr'</span></a> <a id="p':63" class="idref" href="#p':63"><span class="id" title="binder">p'</span></a> <a id="v':64" class="idref" href="#v':64"><span class="id" title="binder">v'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ff613fe7351cc67845d265b88b5b5210"><span class="id" title="variable">Σ'v</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cc725a5dfa39be978b7cc8721df9ac9d"><span class="id" title="variable">Σt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cc725a5dfa39be978b7cc8721df9ac9d"><span class="id" title="variable">Σt</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:61"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':63"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ff613fe7351cc67845d265b88b5b5210"><span class="id" title="variable">Σ'v</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':64"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ff613fe7351cc67845d265b88b5b5210"><span class="id" title="variable">Σ'v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr':62"><span class="id" title="variable">pr'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':64"><span class="id" title="variable">v'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ext</span> <span class="id" title="var">obseq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>], <span class="id" title="var">Σ'v</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ'</span> <span class="id" title="var">v</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends'"><span class="id" title="lemma">verified_lambdabox_pipeline_extends'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pr''</span> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">pr</span> <span class="id" title="var">pr'</span> <span class="id" title="var">ext</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[] ?], <span class="id" title="var">pr'</span> <span class="id" title="keyword">as</span> [[] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">red</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#extends_wellformed"><span class="id" title="lemma">EWellformed.extends_wellformed</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H4</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_extends"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_extends</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pr'</span> <span class="id" title="var">pr''</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">ext'</span> -&gt;].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">obseq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? ? ? ? ? ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">decompose</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#prod"><span class="id" title="inductive">prod</span></a>] <span class="id" title="var">obs</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">obs</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_program"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>]. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#rebuild_wf_env_irr"><span class="id" title="lemma">rebuild_wf_env_irr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_program"><span class="id" title="definition">EInlineProjections.optimize_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#rebuild_wf_env_irr"><span class="id" title="lemma">rebuild_wf_env_irr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_program"><span class="id" title="definition">EOptimizePropDiscr.remove_match_on_box_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#rebuild_wf_env_irr"><span class="id" title="lemma">rebuild_wf_env_irr</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.Typed.Erasure.html#"><span class="id" title="library">Erasure</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#"><span class="id" title="library">Extract</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#"><span class="id" title="library">ErasureFunction</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="library">PCUICTyping</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extends_erase_pcuic_program" class="idref" href="#extends_erase_pcuic_program"><span class="id" title="lemma">extends_erase_pcuic_program</span></a> (<a id="efl:65" class="idref" href="#efl:65"><span class="id" title="binder">efl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">EWcbvEval.default_wcbv_flags</span></a>) {<a id="guard:66" class="idref" href="#guard:66"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="7473bf99cf9a3fe22029fde8c9a850a7" class="idref" href="#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="t:68" class="idref" href="#t:68"><span class="id" title="binder">t</span></a> <a id="v:69" class="idref" href="#v:69"><span class="id" title="binder">v</span></a> <a id="nin:70" class="idref" href="#nin:70"><span class="id" title="binder">nin</span></a> <a id="nin':71" class="idref" href="#nin':71"><span class="id" title="binder">nin'</span></a> <a id="nin0:72" class="idref" href="#nin0:72"><span class="id" title="binder">nin0</span></a> <a id="nin0':73" class="idref" href="#nin0':73"><span class="id" title="binder">nin0'</span></a><br/>
&nbsp;&nbsp;<a id="wf:74" class="idref" href="#wf:74"><span class="id" title="binder">wf</span></a> <a id="wf':75" class="idref" href="#wf':75"><span class="id" title="binder">wf'</span></a> <a id="ty:76" class="idref" href="#ty:76"><span class="id" title="binder">ty</span></a> <a id="ty':77" class="idref" href="#ty':77"><span class="id" title="binder">ty'</span></a> <a id="i:78" class="idref" href="#i:78"><span class="id" title="binder">i</span></a> <a id="u:79" class="idref" href="#u:79"><span class="id" title="binder">u</span></a> <a id="args:80" class="idref" href="#args:80"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:68"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:69"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:68"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">PCUICAst.mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tInd"><span class="id" title="constructor">PCUICAst.tInd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:78"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:79"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:80"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env"><span class="id" title="definition">PCUICFirstorder.firstorder_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:78"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="pt:81" class="idref" href="#pt:81"><span class="id" title="binder">pt</span></a> := @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard:66"><span class="id" title="variable">guard</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:68"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin0:72"><span class="id" title="variable">nin0</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin0':73"><span class="id" title="variable">nin0'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wf':75"><span class="id" title="variable">wf'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ty':77"><span class="id" title="variable">ty'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="pv:82" class="idref" href="#pv:82"><span class="id" title="binder">pv</span></a> := @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard:66"><span class="id" title="variable">guard</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:69"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:70"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin':71"><span class="id" title="variable">nin'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wf:74"><span class="id" title="variable">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ty:76"><span class="id" title="variable">ty</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pv:82"><span class="id" title="variable">pv</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pt:81"><span class="id" title="variable">pt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pt:81"><span class="id" title="variable">pt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pt:81"><span class="id" title="variable">pt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pv:82"><span class="id" title="variable">pv</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pt:81"><span class="id" title="variable">pt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pv:82"><span class="id" title="variable">pv</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ev</span> <span class="id" title="var">axf</span> <span class="id" title="var">ht</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf0</span> := (<span class="id" title="keyword">fun</span> (<a id="37dee7c23fbe4d1097c1264b1c53888a" class="idref" href="#37dee7c23fbe4d1097c1264b1c53888a"><span class="id" title="binder"><span id="9714ef05b852548bc552ac83eb2f9245" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">PCUICAst.PCUICEnvironment.global_env</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf1</span> := (<span class="id" title="keyword">fun</span> (<a id="7d1b78378b18c82f8009b064fd54e93c" class="idref" href="#7d1b78378b18c82f8009b064fd54e93c"><span class="id" title="binder"><span id="efe39c28e793c993a1fd21ad0f3549f0" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">PCUICAst.PCUICEnvironment.global_env</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf2</span> := (<span class="id" title="keyword">fun</span> (<a id="fdbafc7c1166af78f8ec246bbfaae220" class="idref" href="#fdbafc7c1166af78f8ec246bbfaae220"><span class="id" title="binder"><span id="a5c6675909547b398406bc5ea7509e31" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">PCUICAst.PCUICEnvironment.global_env</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf3</span> := (<span class="id" title="keyword">fun</span> (<a id="47c74bb8be8cc6c15f7ff22dac776871" class="idref" href="#47c74bb8be8cc6c15f7ff22dac776871"><span class="id" title="binder"><span id="6859dd467ec314af6d8ba06125214b04" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf4</span> := (<span class="id" title="keyword">fun</span> (<a id="0b535ae18f7fa4701b9e1788e65e2d6e" class="idref" href="#0b535ae18f7fa4701b9e1788e65e2d6e"><span class="id" title="binder"><span id="ac57ad8be33549652ef30c21bf70ee9e" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf5</span> := (<span class="id" title="keyword">fun</span> (<a id="73de4b1d1ac50f6aaae7bb2227c30669" class="idref" href="#73de4b1d1ac50f6aaae7bb2227c30669"><span class="id" title="binder"><span id="826861d84975035fb5595c910d6ad6b1" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf6</span> := (<span class="id" title="keyword">fun</span> (<a id="78c5962925123a7699677aca4223fb6d" class="idref" href="#78c5962925123a7699677aca4223fb6d"><span class="id" title="binder"><span id="51af10da7616bdc5ae4ea1524cac5f43" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env'</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">X</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">X'</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf7</span> := (<span class="id" title="keyword">fun</span> (<a id="895ffdc65e7bbad72eb23f89ebc2fb7b" class="idref" href="#895ffdc65e7bbad72eb23f89ebc2fb7b"><span class="id" title="binder"><span id="b1cb349312c4092ccb2a3a7d0525891e" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">PCUICAst.PCUICEnvironment.global_env</span></a>) ⇒ <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">et</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">ErasureFunction.erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">et'</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">ErasureFunction.erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">ext</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<span class="id" title="var">et</span> <span class="id" title="var">et'</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> (<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">norm</span> <span class="id" title="var">eq</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">eq</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? →. }<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> (<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">norm'</span> <span class="id" title="var">eq'</span>];<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">eq'</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? →. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf</span> := (<span class="id" title="keyword">fun</span> (<a id="b115199d8981b1143ba3c3a7d57d6d52" class="idref" href="#b115199d8981b1143ba3c3a7d57d6d52"><span class="id" title="binder"><span id="557c90fc8df04dd60c5c87bb97006c5e" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">PCUICAst.PCUICEnvironment.global_env</span></a>) ⇒ <span class="id" title="var">_</span>)). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">prf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps_irr"><span class="id" title="lemma">ErasureFunction.erase_global_deps_irr</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">EAstUtils.term_global_deps</span></a> <span class="id" title="var">et</span>) <span class="id" title="var">env'</span> <span class="id" title="var">env</span> <span class="id" title="var">_</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? ? → →. }<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">prf0</span> <span class="id" title="var">prf1</span> <span class="id" title="var">prf2</span> <span class="id" title="var">prf3</span> <span class="id" title="var">prf4</span> <span class="id" title="var">prf5</span> <span class="id" title="var">prf6</span> <span class="id" title="var">prf7</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_correct_strong"><span class="id" title="lemma">erase_correct_strong</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">v</span>:=<span class="id" title="var">v</span>) <span class="id" title="var">env</span> <span class="id" title="var">ext</span> <span class="id" title="var">prf2</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">PCUICAst.PCUICEnvironment.declarations</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">norm'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf6</span> <span class="id" title="var">X</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">axf</span> <span class="id" title="var">ht</span> <span class="id" title="var">fo</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="var">unshelve</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#wcbveval_red"><span class="id" title="lemma">PCUICClassification.wcbveval_red</span></a>; <span class="id" title="var">tea</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [? <span class="id" title="var">hr</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormalization.html#firstorder_value_irred"><span class="id" title="lemma">PCUICNormalization.firstorder_value_irred</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_spec"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_spec</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt'</span> [[] <span class="id" title="var">hfo</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_eval"><span class="id" title="lemma">erase_global_deps_eval</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">env</span> <span class="id" title="var">env'</span> <span class="id" title="var">ext</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a> (<span class="id" title="var">X_type</span>:=<a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) (<span class="id" title="var">t</span>:=<span class="id" title="var">v</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">unfold</span> <span class="id" title="var">et'</span>, <span class="id" title="var">et</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a> (<span class="id" title="var">X_type</span>:=<a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) (<span class="id" title="var">t</span>:=<span class="id" title="var">v</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">et</span> <span class="id" title="var">et'</span> <span class="id" title="var">X</span> <span class="id" title="var">X'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a> (<span class="id" title="var">X_type</span>:=<a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) (<span class="id" title="var">t</span>:=<span class="id" title="var">v</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="pcuic_lookup_inductive_pars" class="idref" href="#pcuic_lookup_inductive_pars"><span class="id" title="definition">pcuic_lookup_inductive_pars</span></a> <a id="ef6899f98060b6cec50b8590dfb1a002" class="idref" href="#ef6899f98060b6cec50b8590dfb1a002"><span class="id" title="binder">Σ</span></a> <a id="ind:102" class="idref" href="#ind:102"><span class="id" title="binder">ind</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">PCUICAst.PCUICEnvironment.lookup_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ef6899f98060b6cec50b8590dfb1a002"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">Kernames.inductive_mind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ind:102"><span class="id" title="variable">ind</span></a>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.InductiveDecl"><span class="id" title="constructor">PCUICAst.PCUICEnvironment.InductiveDecl</span></a> <span class="id" title="var">mdecl</span>) ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">mdecl</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICAst.PCUICEnvironment.ind_npars</span></a>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="compile_value_box" class="idref" href="#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> <a id="b0c243fdea575b06d729ab1bfbed1dd2" class="idref" href="#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="binder">Σ</span></a> (<a id="t:104" class="idref" href="#t:104"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) (<a id="acc:105" class="idref" href="#acc:105"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:104"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">PCUICAst.tApp</span></a> <span class="id" title="var">f</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box:106"><span class="id" title="definition">compile_value_box</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">f</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box:106"><span class="id" title="definition">compile_value_box</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:105"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tConstruct"><span class="id" title="constructor">PCUICAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_lookup_inductive_pars"><span class="id" title="definition">pcuic_lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0c243fdea575b06d729ab1bfbed1dd2"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">npars</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <span class="id" title="var">npars</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:105"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> "error"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> "error"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="firstorder_evalue_block" class="idref" href="#firstorder_evalue_block"><span class="id" title="definition, inductive"><span id="firstorder_evalue_block_ind" class="id"><span id="firstorder_evalue_block_sind" class="id">firstorder_evalue_block</span></span></span></a> <a id="bf64b8ca86999443d40a34bdbbcf8d7f" class="idref" href="#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;| <a id="is_fo_block" class="idref" href="#is_fo_block"><span class="id" title="constructor">is_fo_block</span></a> <a id="i:111" class="idref" href="#i:111"><span class="id" title="binder">i</span></a> <a id="n:112" class="idref" href="#n:112"><span class="id" title="binder">n</span></a> <a id="args:113" class="idref" href="#args:113"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:111"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:112"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:113"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block:109"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:113"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block:109"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#bf64b8ca86999443d40a34bdbbcf8d7f"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:111"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:112"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:113"><span class="id" title="variable">args</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstorder_evalue_block_elim" class="idref" href="#firstorder_evalue_block_elim"><span class="id" title="lemma">firstorder_evalue_block_elim</span></a> <a id="ae803507e33f398382020080ee478371" class="idref" href="#ae803507e33f398382020080ee478371"><span class="id" title="binder">Σ</span></a> {<a id="P:115" class="idref" href="#P:115"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:116" class="idref" href="#i:116"><span class="id" title="binder">i</span></a> <a id="n:117" class="idref" href="#n:117"><span class="id" title="binder">n</span></a> <a id="args:118" class="idref" href="#args:118"><span class="id" title="binder">args</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae803507e33f398382020080ee478371"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:117"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:118"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae803507e33f398382020080ee478371"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:118"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#Forall"><span class="id" title="inductive">Forall</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#P:115"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:118"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#P:115"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:116"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:117"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:118"><span class="id" title="variable">args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t:119" class="idref" href="#t:119"><span class="id" title="binder">t</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae803507e33f398382020080ee478371"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:119"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#P:115"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:119"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">aux</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> <span class="id" title="var">fo</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hf</span> ⇒ //. <span class="id" title="tactic">clear</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">args</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fix</span> <span class="id" title="var">aux'</span> 2.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">args</span> []; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">aux</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">aux'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="firstorder_evalue_block_transform" class="idref" href="#firstorder_evalue_block_transform"><span class="id" title="lemma">firstorder_evalue_block_transform</span></a> (<a id="3f8c1c10906746294e3c27001291be1f" class="idref" href="#3f8c1c10906746294e3c27001291be1f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>) <a id="t:121" class="idref" href="#t:121"><span class="id" title="binder">t</span></a>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#3f8c1c10906746294e3c27001291be1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:121"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#3f8c1c10906746294e3c27001291be1f"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:121"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block_elim"><span class="id" title="lemma">firstorder_evalue_block_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">EConstructorsAsBlocks.lookup_constructor_transform_blocks</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block_elim"><span class="id" title="lemma">firstorder_evalue_block_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">EConstructorsAsBlocks.lookup_constructor_transform_blocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#"><span class="id" title="module">EWcbvEval</span></a>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast"><span class="id" title="definition">erase_global_deps_fast</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="PCUICProof" class="idref" href="#PCUICProof"><span class="id" title="section">PCUICProof</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment"><span class="id" title="module">PCUICAst.PCUICEnvironment</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="erase_preserves_inductives" class="idref" href="#erase_preserves_inductives"><span class="id" title="definition">erase_preserves_inductives</span></a> <a id="89c991e573d576d4ce9b4ce8f6af8d89" class="idref" href="#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="binder">Σ</span></a> <a id="48ce752b371cba6a2798dbce3d7ce344" class="idref" href="#48ce752b371cba6a2798dbce3d7ce344"><span class="id" title="binder">Σ'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <a id="kn:124" class="idref" href="#kn:124"><span class="id" title="binder">kn</span></a> <a id="decl:125" class="idref" href="#decl:125"><span class="id" title="binder">decl</span></a> <a id="decl':126" class="idref" href="#decl':126"><span class="id" title="binder">decl'</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#48ce752b371cba6a2798dbce3d7ce344"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:124"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#InductiveDecl"><span class="id" title="constructor">EAst.InductiveDecl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:125"><span class="id" title="variable">decl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#89c991e573d576d4ce9b4ce8f6af8d89"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:124"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.InductiveDecl"><span class="id" title="constructor">PCUICAst.PCUICEnvironment.InductiveDecl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':126"><span class="id" title="variable">decl'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:125"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_mutual_inductive_body"><span class="id" title="definition">erase_mutual_inductive_body</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':126"><span class="id" title="variable">decl'</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="erase_decl_equal" class="idref" href="#erase_decl_equal"><span class="id" title="definition">erase_decl_equal</span></a> <a id="cmp:127" class="idref" href="#cmp:127"><span class="id" title="binder">cmp</span></a> <a id="decl:128" class="idref" href="#decl:128"><span class="id" title="binder">decl</span></a> <a id="decl':129" class="idref" href="#decl':129"><span class="id" title="binder">decl'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:128"><span class="id" title="variable">decl</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':129"><span class="id" title="variable">decl'</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#InductiveDecl"><span class="id" title="constructor">EAst.InductiveDecl</span></a> <span class="id" title="var">decl</span> , <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">decl'</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:128"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cmp:127"><span class="id" title="variable">cmp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':129"><span class="id" title="variable">decl'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#ConstantDecl"><span class="id" title="constructor">EAst.ConstantDecl</span></a> <span class="id" title="var">_</span> , <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> , <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_env_in_erase_global_deps" class="idref" href="#lookup_env_in_erase_global_deps"><span class="id" title="lemma">lookup_env_in_erase_global_deps</span></a> <a id="X_type:132" class="idref" href="#X_type:132"><span class="id" title="binder">X_type</span></a> <a id="X:133" class="idref" href="#X:133"><span class="id" title="binder">X</span></a> <a id="deps:134" class="idref" href="#deps:134"><span class="id" title="binder">deps</span></a> <a id="decls:135" class="idref" href="#decls:135"><span class="id" title="binder">decls</span></a> <a id="kn:136" class="idref" href="#kn:136"><span class="id" title="binder">kn</span></a> <a id="normalization_in:137" class="idref" href="#normalization_in:137"><span class="id" title="binder">normalization_in</span></a> <a id="prf:138" class="idref" href="#prf:138"><span class="id" title="binder">prf</span></a> <a id="decl:139" class="idref" href="#decl:139"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.EnvMap.fresh_globals</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decls:135"><span class="id" title="variable">decls</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#X_type:132"><span class="id" title="variable">X_type</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#deps:134"><span class="id" title="variable">deps</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#X:133"><span class="id" title="variable">X</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decls:135"><span class="id" title="variable">decls</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#normalization_in:137"><span class="id" title="variable">normalization_in</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prf:138"><span class="id" title="variable">prf</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:136"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:139"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="decl':140" class="idref" href="#decl':140"><span class="id" title="binder">decl'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_global"><span class="id" title="definition">lookup_global</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decls:135"><span class="id" title="variable">decls</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:136"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':140"><span class="id" title="variable">decl'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_decl_equal"><span class="id" title="definition">erase_decl_equal</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_mutual_inductive_body"><span class="id" title="definition">erase_mutual_inductive_body</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:139"><span class="id" title="variable">decl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':140"><span class="id" title="variable">decl'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">decls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">deps</span>, <span class="id" title="var">X</span>, <span class="id" title="var">normalization_in</span>, <span class="id" title="var">prf</span> |- *; <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a>] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#knset_mem_spec"><span class="id" title="lemma">knset_mem_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">deps</span>) ⇒ // <span class="id" title="var">hdeps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_global"><span class="id" title="definition">lookup_global</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">k</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">hl</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">hl</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intro</span> <span class="id" title="var">e</span>; <span class="id" title="var">noconf</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdecls</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">hl</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdecls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">k</span>) ⇒ //. <span class="id" title="tactic">subst</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#lookup_global_Some_fresh"><span class="id" title="lemma">PCUICWeakeningEnv.lookup_global_Some_fresh</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">hl'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">hf</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#knset_mem_spec"><span class="id" title="lemma">knset_mem_spec</span></a> <span class="id" title="var">k</span> <span class="id" title="var">deps</span>) ⇒ // <span class="id" title="var">hdeps</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_global"><span class="id" title="definition">lookup_global</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">k</span>) ⇒ //; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">hl</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">k</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hl'</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdecls</span> ⇒ //. <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">hl'</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHdecls</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hf</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">hf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">k</span>) ⇒ //. <span class="id" title="tactic">subst</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#lookup_global_Some_fresh"><span class="id" title="lemma">PCUICWeakeningEnv.lookup_global_Some_fresh</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="erase_tranform_firstorder" class="idref" href="#erase_tranform_firstorder"><span class="id" title="lemma">erase_tranform_firstorder</span></a> (<a id="wfl:141" class="idref" href="#wfl:141"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="p:142" class="idref" href="#p:142"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">Transform.program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>} {<a id="pr:143" class="idref" href="#pr:143"><span class="id" title="binder">pr</span></a> <a id="v:144" class="idref" href="#v:144"><span class="id" title="binder">v</span></a> <a id="i:145" class="idref" href="#i:145"><span class="id" title="binder">i</span></a> <a id="u:146" class="idref" href="#u:146"><span class="id" title="binder">u</span></a> <a id="args:147" class="idref" href="#args:147"><span class="id" title="binder">args</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="normalization_in:148" class="idref" href="#normalization_in:148"><span class="id" title="binder">normalization_in</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="wt:149" class="idref" href="#wt:149"><span class="id" title="binder">wt</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">PCUICAst.mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tInd"><span class="id" title="constructor">PCUICAst.tInd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:145"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:146"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:147"><span class="id" title="variable">args</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env"><span class="id" title="definition">PCUICFirstorder.firstorder_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:145"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:144"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="ep:150" class="idref" href="#ep:150"><span class="id" title="binder">ep</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:143"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:150"><span class="id" title="variable">ep</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_preserves_inductives"><span class="id" title="definition">erase_preserves_inductives</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:142"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:150"><span class="id" title="variable">ep</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">EWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:150"><span class="id" title="variable">ep</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:150"><span class="id" title="variable">ep</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:144"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:150"><span class="id" title="variable">ep</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:144"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ht</span> <span class="id" title="var">ax</span> <span class="id" title="var">fo</span> <span class="id" title="var">ev</span> [<span class="id" title="var">Σe</span> <span class="id" title="var">te</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">obl</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_6"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_6</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">obl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf0</span> := <span class="id" title="keyword">fun</span> (<a id="e47ab086aaad1c43c5259ec55e44bb27" class="idref" href="#e47ab086aaad1c43c5259ec55e44bb27"><span class="id" title="binder"><span id="1fcf6004710fce25fccf315698e96362" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf1</span> := <span class="id" title="keyword">fun</span> (<a id="82cd6b051e1e70014d1d76d21c686c29" class="idref" href="#82cd6b051e1e70014d1d76d21c686c29"><span class="id" title="binder"><span id="bda27967426b1e351785f249bd48a46f" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf2</span> := <span class="id" title="keyword">fun</span> (<a id="8b05799e632698e370514d682afd68fe" class="idref" href="#8b05799e632698e370514d682afd68fe"><span class="id" title="binder"><span id="a2867ff4f69dcbd8751bb3413e62c77b" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf3</span> := <span class="id" title="keyword">fun</span> (<a id="534e9bd8427b2732bc8737264bfce91a" class="idref" href="#534e9bd8427b2732bc8737264bfce91a"><span class="id" title="binder"><span id="65d498de231285fce45ee85e364d0f0a" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf4</span> := <span class="id" title="keyword">fun</span> <a id="n:159" class="idref" href="#n:159"><span class="id" title="binder"><span id="n:161" class="id">n</span></span></a> (<a id="H:160" class="idref" href="#H:160"><span class="id" title="binder"><span id="H:162" class="id">H</span></span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:159"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">gext</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">et</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">g</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hprefix</span>: <span class="id" title="keyword">∀</span> <a id="d2666f4bc860f0bc8d6957112e9d1733" class="idref" href="#d2666f4bc860f0bc8d6957112e9d1733"><span class="id" title="binder"><span id="6166cb638c499c77848419ec6a6237ee" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">PCUICWfEnv.abstract_env_rel</span></a> <span class="id" title="var">g</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d2666f4bc860f0bc8d6957112e9d1733"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d2666f4bc860f0bc8d6957112e9d1733"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">g</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">Σ'</span> <span class="id" title="var">eq</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">EAstUtils.term_global_deps</span></a> <span class="id" title="var">et</span>) <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">g</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">prf4</span> <span class="id" title="var">prf3</span> <span class="id" title="var">hprefix</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">nin'</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eg</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">obl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_correct_strong"><span class="id" title="lemma">erase_correct_strong</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">g</span> <span class="id" title="var">Σ</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <span class="id" title="var">prf0</span> <span class="id" title="var">t</span> <span class="id" title="var">v</span> <span class="id" title="var">i</span> <span class="id" title="var">u</span> <span class="id" title="var">args</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hprefix</span> <span class="id" title="var">prf1</span> <span class="id" title="var">prf2</span> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">ax</span> <span class="id" title="var">ht</span> <span class="id" title="var">fo</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> <span class="id" title="var">pr</span>) <span class="id" title="keyword">as</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#wcbveval_red"><span class="id" title="lemma">PCUICClassification.wcbveval_red</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_spec"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_spec</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> [<span class="id" title="var">v'</span> <span class="id" title="var">redv</span>]. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormalization.html#firstorder_value_irred"><span class="id" title="lemma">PCUICNormalization.firstorder_value_irred</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wt'</span> [<span class="id" title="var">ev'</span> <span class="id" title="var">fo'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span>:=<a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <span class="id" title="var">g</span> <span class="id" title="var">Σ</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <span class="id" title="var">prf0</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">v</span> <span class="id" title="var">wt'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <span class="id" title="var">v</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">prf0</span> <span class="id" title="var">prf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erases_erase"><span class="id" title="lemma">erases_erase</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <span class="id" title="var">wt'</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erases_firstorder'"><span class="id" title="lemma">erases_firstorder'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ev'</span>, <span class="id" title="var">fo'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]; <span class="id" title="tactic">subst</span> <span class="id" title="var">te</span> <span class="id" title="var">Σe</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">eg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">kn</span> <span class="id" title="var">decl</span> <span class="id" title="var">decl'</span> <span class="id" title="var">hl</span> <span class="id" title="var">hl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_env_in_erase_global_deps"><span class="id" title="lemma">lookup_env_in_erase_global_deps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">decl''</span> [<span class="id" title="var">hl</span> <span class="id" title="var">eq'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="var">hl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hl'</span>. <span class="id" title="var">now</span> <span class="id" title="var">noconf</span> <span class="id" title="var">hl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>, <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#PCUICProof"><span class="id" title="section">PCUICProof</span></a>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="erase_transform_fo_gen" class="idref" href="#erase_transform_fo_gen"><span class="id" title="lemma">erase_transform_fo_gen</span></a> (<a id="p:165" class="idref" href="#p:165"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) <a id="pr:166" class="idref" href="#pr:166"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:165"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:165"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="ep:167" class="idref" href="#ep:167"><span class="id" title="binder">ep</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:165"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:166"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:167"><span class="id" title="variable">ep</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ep:167"><span class="id" title="variable">ep</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:165"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>]. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hev</span> <span class="id" title="var">ep</span> &lt;-. <span class="id" title="tactic">move</span>: <span class="id" title="var">hev</span> <span class="id" title="var">pr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fo</span> <span class="id" title="var">pr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf0</span> := <span class="id" title="keyword">fun</span> (<a id="497c825baac928e23633846b8912e65c" class="idref" href="#497c825baac928e23633846b8912e65c"><span class="id" title="binder"><span id="914df725baf0163549663c83f3757329" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf1</span> := <span class="id" title="keyword">fun</span> (<a id="85e473bed6f45f643fb67e091dcf9345" class="idref" href="#85e473bed6f45f643fb67e091dcf9345"><span class="id" title="binder"><span id="4cb26deb77bf16f8f978ab978569e773" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">prf0</span> <span class="id" title="var">prf1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [[]].<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erases_erase"><span class="id" title="lemma">erases_erase</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <span class="id" title="var">prf1</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erases_firstorder'"><span class="id" title="lemma">erases_firstorder'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="erase_transform_fo" class="idref" href="#erase_transform_fo"><span class="id" title="lemma">erase_transform_fo</span></a> (<a id="p:172" class="idref" href="#p:172"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) <a id="pr:173" class="idref" href="#pr:173"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:172"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:172"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:172"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:173"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:172"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:173"><span class="id" title="variable">pr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:172"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tr</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">tr</span> <span class="id" title="keyword">with</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">tr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">tr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_transform_fo_gen"><span class="id" title="lemma">erase_transform_fo_gen</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.Transform.html#"><span class="id" title="module">MetaRocq.Common.Transform</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="ETransformPresFO" class="idref" href="#ETransformPresFO"><span class="id" title="module">ETransformPresFO</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="ETransformPresFO.Opt" class="idref" href="#ETransformPresFO.Opt"><span class="id" title="section">Opt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Opt.env" class="idref" href="#ETransformPresFO.Opt.env"><span class="id" title="variable">env</span></a> <a id="ETransformPresFO.Opt.env'" class="idref" href="#ETransformPresFO.Opt.env'"><span class="id" title="variable">env'</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Opt.eval" class="idref" href="#ETransformPresFO.Opt.eval"><span class="id" title="variable">eval</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Opt.eval'" class="idref" href="#ETransformPresFO.Opt.eval'"><span class="id" title="variable">eval'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Opt.o" class="idref" href="#ETransformPresFO.Opt.o"><span class="id" title="variable">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.eval"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.eval'"><span class="id" title="variable">eval'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Opt.firstorder_value" class="idref" href="#ETransformPresFO.Opt.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Opt.firstorder_value'" class="idref" href="#ETransformPresFO.Opt.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Opt.compile_fo_value" class="idref" href="#ETransformPresFO.Opt.compile_fo_value"><span class="id" title="variable">compile_fo_value</span></a> : <span class="id" title="keyword">∀</span> <a id="p:181" class="idref" href="#p:181"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:181"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:181"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ETransformPresFO.t" class="idref" href="#ETransformPresFO.t"><span class="id" title="record">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="ETransformPresFO.preserves_fo" class="idref" href="#ETransformPresFO.preserves_fo"><span class="id" title="projection">preserves_fo</span></a> : <span class="id" title="keyword">∀</span> <a id="p:184" class="idref" href="#p:184"><span class="id" title="binder">p</span></a> <a id="pr:185" class="idref" href="#pr:185"><span class="id" title="binder">pr</span></a> (<a id="fo:186" class="idref" href="#fo:186"><span class="id" title="binder">fo</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:184"><span class="id" title="variable">p</span></a>), <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.compile_fo_value"><span class="id" title="variable">compile_fo_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:184"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:185"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:186"><span class="id" title="variable">fo</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ETransformPresFO.transform_fo" class="idref" href="#ETransformPresFO.transform_fo"><span class="id" title="projection">transform_fo</span></a> : <span class="id" title="keyword">∀</span> <a id="v:188" class="idref" href="#v:188"><span class="id" title="binder">v</span></a> (<a id="pr:189" class="idref" href="#pr:189"><span class="id" title="binder">pr</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:188"><span class="id" title="variable">v</span></a>) (<a id="fo:190" class="idref" href="#fo:190"><span class="id" title="binder">fo</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:188"><span class="id" title="variable">v</span></a>), <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:188"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:189"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt.compile_fo_value"><span class="id" title="variable">compile_fo_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:188"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:189"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:190"><span class="id" title="variable">fo</span></a> }.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Opt"><span class="id" title="section">Opt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="ETransformPresFO.ExtEq" class="idref" href="#ETransformPresFO.ExtEq"><span class="id" title="section">ExtEq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.ExtEq.env" class="idref" href="#ETransformPresFO.ExtEq.env"><span class="id" title="variable">env</span></a> <a id="ETransformPresFO.ExtEq.env'" class="idref" href="#ETransformPresFO.ExtEq.env'"><span class="id" title="variable">env'</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.ExtEq.eval" class="idref" href="#ETransformPresFO.ExtEq.eval"><span class="id" title="variable">eval</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.ExtEq.eval'" class="idref" href="#ETransformPresFO.ExtEq.eval'"><span class="id" title="variable">eval'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.ExtEq.o" class="idref" href="#ETransformPresFO.ExtEq.o"><span class="id" title="variable">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.eval"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.eval'"><span class="id" title="variable">eval'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.ExtEq.firstorder_value" class="idref" href="#ETransformPresFO.ExtEq.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.ExtEq.firstorder_value'" class="idref" href="#ETransformPresFO.ExtEq.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="ETransformPresFO.proper_pres" class="idref" href="#ETransformPresFO.proper_pres"><span class="id" title="lemma">proper_pres</span></a> (<a id="compile_fo_value:200" class="idref" href="#compile_fo_value:200"><span class="id" title="binder">compile_fo_value</span></a> <a id="compile_fo_value':201" class="idref" href="#compile_fo_value':201"><span class="id" title="binder">compile_fo_value'</span></a> : <span class="id" title="keyword">∀</span> <a id="p:199" class="idref" href="#p:199"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:199"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:199"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="p:202" class="idref" href="#p:202"><span class="id" title="binder">p</span></a> <a id="pre:203" class="idref" href="#pre:203"><span class="id" title="binder">pre</span></a> <a id="fo:204" class="idref" href="#fo:204"><span class="id" title="binder">fo</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value:200"><span class="id" title="variable">compile_fo_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:202"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:203"><span class="id" title="variable">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:204"><span class="id" title="variable">fo</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value':201"><span class="id" title="variable">compile_fo_value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:202"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:203"><span class="id" title="variable">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:204"><span class="id" title="variable">fo</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value:200"><span class="id" title="variable">compile_fo_value</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value':201"><span class="id" title="variable">compile_fo_value'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">move</span>⇒ []; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? ? ?; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">pr</span> ?; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ???; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ???; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Hfg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.ExtEq"><span class="id" title="section">ExtEq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="ETransformPresFO.Comp" class="idref" href="#ETransformPresFO.Comp"><span class="id" title="section">Comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Comp.env" class="idref" href="#ETransformPresFO.Comp.env"><span class="id" title="variable">env</span></a> <a id="ETransformPresFO.Comp.env'" class="idref" href="#ETransformPresFO.Comp.env'"><span class="id" title="variable">env'</span></a> <a id="ETransformPresFO.Comp.env''" class="idref" href="#ETransformPresFO.Comp.env''"><span class="id" title="variable">env''</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Comp.eval" class="idref" href="#ETransformPresFO.Comp.eval"><span class="id" title="variable">eval</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Comp.eval'" class="idref" href="#ETransformPresFO.Comp.eval'"><span class="id" title="variable">eval'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresFO.Comp.eval''" class="idref" href="#ETransformPresFO.Comp.eval''"><span class="id" title="variable">eval''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Comp.firstorder_value" class="idref" href="#ETransformPresFO.Comp.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Comp.firstorder_value'" class="idref" href="#ETransformPresFO.Comp.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Comp.firstorder_value''" class="idref" href="#ETransformPresFO.Comp.firstorder_value''"><span class="id" title="variable">firstorder_value''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresFO.Comp.o" class="idref" href="#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.eval"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.eval'"><span class="id" title="variable">eval'</span></a>) (<a id="ETransformPresFO.Comp.o'" class="idref" href="#ETransformPresFO.Comp.o'"><span class="id" title="variable">o'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.eval'"><span class="id" title="variable">eval'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.eval''"><span class="id" title="variable">eval''</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> <a id="ETransformPresFO.Comp.compile_fo_value" class="idref" href="#ETransformPresFO.Comp.compile_fo_value"><span class="id" title="variable">compile_fo_value</span></a> <a id="ETransformPresFO.Comp.compile_fo_value'" class="idref" href="#ETransformPresFO.Comp.compile_fo_value'"><span class="id" title="variable">compile_fo_value'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ETransformPresFO.Comp.oext" class="idref" href="#ETransformPresFO.Comp.oext"><span class="id" title="variable">oext</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value:216"><span class="id" title="variable">compile_fo_value</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ETransformPresFO.Comp.o'ext" class="idref" href="#ETransformPresFO.Comp.o'ext"><span class="id" title="variable">o'ext</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value'"><span class="id" title="variable">firstorder_value'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value''"><span class="id" title="variable">firstorder_value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_fo_value':217"><span class="id" title="variable">compile_fo_value'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ETransformPresFO.Comp.hpp" class="idref" href="#ETransformPresFO.Comp.hpp"><span class="id" title="variable">hpp</span></a> : (<span class="id" title="keyword">∀</span> <a id="p:220" class="idref" href="#p:220"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:220"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'"><span class="id" title="variable">o'</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:220"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">idtac</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="ETransformPresFO.compose_compile_fo_value" class="idref" href="#ETransformPresFO.compose_compile_fo_value"><span class="id" title="definition">compose_compile_fo_value</span></a> (<a id="p:222" class="idref" href="#p:222"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) (<a id="pr:223" class="idref" href="#pr:223"><span class="id" title="binder">pr</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:222"><span class="id" title="variable">p</span></a>) (<a id="fo:224" class="idref" href="#fo:224"><span class="id" title="binder">fo</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:222"><span class="id" title="variable">p</span></a>) : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.compile_fo_value'"><span class="id" title="variable">compile_fo_value'</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.compile_fo_value"><span class="id" title="variable">compile_fo_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:222"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:223"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:224"><span class="id" title="variable">fo</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_rect_r"><span class="id" title="definition">eq_rect_r</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'"><span class="id" title="variable">o'</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>)) (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.hpp"><span class="id" title="variable">hpp</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:222"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:223"><span class="id" title="variable">pr</span></a>)) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.transform_fo"><span class="id" title="method">transform_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>))) (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.preserves_fo"><span class="id" title="method">preserves_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:222"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:223"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:224"><span class="id" title="variable">fo</span></a>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="ETransformPresFO.compose" class="idref" href="#ETransformPresFO.compose"><span class="id" title="instance">compose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.t"><span class="id" title="class">t</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">Transform.compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.hpp"><span class="id" title="variable">hpp</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value"><span class="id" title="variable">firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.firstorder_value''"><span class="id" title="variable">firstorder_value''</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.compose_compile_fo_value"><span class="id" title="definition">compose_compile_fo_value</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.preserves_fo"><span class="id" title="method">preserves_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.compose_compile_fo_value"><span class="id" title="definition">compose_compile_fo_value</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cor</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o"><span class="id" title="variable">o</span></a> <span class="id" title="var">v</span> <span class="id" title="var">pr</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">cor</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">foo</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_sym"><span class="id" title="lemma">eq_sym</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.transform_fo"><span class="id" title="method">transform_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)). <span class="id" title="var">clearbody</span> <span class="id" title="var">foo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">foo</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">cor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.transform_fo"><span class="id" title="method">transform_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO.Comp"><span class="id" title="section">Comp</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresFO"><span class="id" title="module">ETransformPresFO</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="is_eta_fix_application" class="idref" href="#is_eta_fix_application"><span class="id" title="definition, inductive"><span id="is_eta_fix_application_ind" class="id"><span id="is_eta_fix_application_sind" class="id">is_eta_fix_application</span></span></span></a> <a id="490ea76ac5c86918c37df463e85f2225" class="idref" href="#490ea76ac5c86918c37df463e85f2225"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="mk_is_eta_fix_application" class="idref" href="#mk_is_eta_fix_application"><span class="id" title="constructor">mk_is_eta_fix_application</span></a> <a id="f:228" class="idref" href="#f:228"><span class="id" title="binder">f</span></a> <a id="a:229" class="idref" href="#a:229"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp"><span class="id" title="definition">EEtaExpandedFix.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#490ea76ac5c86918c37df463e85f2225"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:228"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_application:226"><span class="id" title="inductive">is_eta_fix_application</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#490ea76ac5c86918c37df463e85f2225"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:228"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#a:229"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Derive</span> <span class="id" title="var">Signature</span> <span class="id" title="keyword">for</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_application"><span class="id" title="inductive">is_eta_fix_application</span></a>.<br/>

<br/>
<span class="id" title="keyword">Inductive</span> <a id="is_eta_application" class="idref" href="#is_eta_application"><span class="id" title="definition, inductive"><span id="is_eta_application_ind" class="id"><span id="is_eta_application_sind" class="id">is_eta_application</span></span></span></a> <a id="93db78aaebd8fd38e5903ba9b7df17c8" class="idref" href="#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span> :=<br/>
| <a id="mk_is_eta_application" class="idref" href="#mk_is_eta_application"><span class="id" title="constructor">mk_is_eta_application</span></a> <a id="f:233" class="idref" href="#f:233"><span class="id" title="binder">f</span></a> <a id="a:234" class="idref" href="#a:234"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">EEtaExpanded.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:233"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_application:231"><span class="id" title="inductive">is_eta_application</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:233"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#a:234"><span class="id" title="variable">a</span></a>).<br/>
<span class="id" title="keyword">Derive</span> <span class="id" title="var">Signature</span> <span class="id" title="keyword">for</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_application"><span class="id" title="inductive">is_eta_application</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="compile_app" class="idref" href="#compile_app"><span class="id" title="definition">compile_app</span></a> <a id="f:235" class="idref" href="#f:235"><span class="id" title="binder">f</span></a> <a id="t:236" class="idref" href="#t:236"><span class="id" title="binder">t</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:236"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <span class="id" title="var">fn</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:235"><span class="id" title="variable">f</span></a> <span class="id" title="var">fn</span>) (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:235"><span class="id" title="variable">f</span></a> <span class="id" title="var">a</span>)<br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:235"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:236"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a id="forallbi" class="idref" href="#forallbi"><span class="id" title="definition">forallbi</span></a> {<a id="A:238" class="idref" href="#A:238"><span class="id" title="binder">A</span></a>} (<a id="f:239" class="idref" href="#f:239"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:238"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="n:240" class="idref" href="#n:240"><span class="id" title="binder">n</span></a> <a id="l:241" class="idref" href="#l:241"><span class="id" title="binder">l</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:241"><span class="id" title="variable">l</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">tl</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:239"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:240"><span class="id" title="variable">n</span></a> <span class="id" title="var">hd</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi:242"><span class="id" title="definition">forallbi</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:239"><span class="id" title="variable">f</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:240"><span class="id" title="variable">n</span></a>) <span class="id" title="var">tl</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallbi_Alli" class="idref" href="#forallbi_Alli"><span class="id" title="lemma">forallbi_Alli</span></a> {<a id="A:244" class="idref" href="#A:244"><span class="id" title="binder">A</span></a>} (<a id="f:245" class="idref" href="#f:245"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:244"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="n:246" class="idref" href="#n:246"><span class="id" title="binder">n</span></a> <a id="l:247" class="idref" href="#l:247"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:245"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:246"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:247"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi"><span class="id" title="definition">forallbi</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:245"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:246"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:247"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">hf</span> <span class="id" title="var">hl</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_mapi_forallbi" class="idref" href="#forallb_mapi_forallbi"><span class="id" title="lemma">forallb_mapi_forallbi</span></a> {<a id="A:248" class="idref" href="#A:248"><span class="id" title="binder">A</span></a> <a id="B:249" class="idref" href="#B:249"><span class="id" title="binder">B</span></a>} <a id="p:250" class="idref" href="#p:250"><span class="id" title="binder">p</span></a> (<a id="f:251" class="idref" href="#f:251"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:248"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:249"><span class="id" title="variable">B</span></a>) <a id="n:252" class="idref" href="#n:252"><span class="id" title="binder">n</span></a> <a id="l:253" class="idref" href="#l:253"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:250"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:251"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:253"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:252"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi"><span class="id" title="definition">forallbi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:254" class="idref" href="#i:254"><span class="id" title="binder">i</span></a> <a id="x:255" class="idref" href="#x:255"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:250"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:251"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:254"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:255"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:252"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:253"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] -&gt;; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] -&gt;; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_forallbi" class="idref" href="#forallb_forallbi"><span class="id" title="lemma">forallb_forallbi</span></a> {<a id="A:256" class="idref" href="#A:256"><span class="id" title="binder">A</span></a>} (<a id="f:257" class="idref" href="#f:257"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:256"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="l:258" class="idref" href="#l:258"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:257"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:258"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi"><span class="id" title="definition">forallbi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:259" class="idref" href="#i:259"><span class="id" title="binder">i</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:257"><span class="id" title="variable">f</span></a>) 0 <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:258"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span> ⇒ <span class="id" title="var">n</span>. <span class="id" title="var">bool_congr</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallbi_impl" class="idref" href="#forallbi_impl"><span class="id" title="lemma">forallbi_impl</span></a> {<a id="A:260" class="idref" href="#A:260"><span class="id" title="binder">A</span></a>} (<a id="f:261" class="idref" href="#f:261"><span class="id" title="binder">f</span></a> <a id="g:262" class="idref" href="#g:262"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:260"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) <a id="n:263" class="idref" href="#n:263"><span class="id" title="binder">n</span></a> <a id="l:264" class="idref" href="#l:264"><span class="id" title="binder">l</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:265" class="idref" href="#n:265"><span class="id" title="binder">n</span></a> <a id="x:266" class="idref" href="#x:266"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:261"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:265"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:266"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#g:262"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:265"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#x:266"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi"><span class="id" title="definition">forallbi</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:261"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:263"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:264"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi"><span class="id" title="definition">forallbi</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#g:262"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:263"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l:264"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hfg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] /<span class="id" title="var">hfg</span> → //=; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="PCUICInv" class="idref" href="#PCUICInv"><span class="id" title="section">PCUICInv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="module">PCUICAstUtils</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="module">PCUICTyping</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#"><span class="id" title="module">PCUICInversion</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#"><span class="id" title="module">PCUICWcbvEval</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#"><span class="id" title="module">PCUICWellScopedCumulativity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#"><span class="id" title="module">PCUICEtaExpand</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#"><span class="id" title="module">PCUIC.PCUICConversion</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#"><span class="id" title="module">PCUICSigmaCalculus</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#"><span class="id" title="module">PCUICExpandLetsCorrectness</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="is_vdef" class="idref" href="#is_vdef"><span class="id" title="definition">is_vdef</span></a> (<a id="d:267" class="idref" href="#d:267"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a>) := <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d:267"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span> {| <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> |} ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> | <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="red_vdefs_tProd" class="idref" href="#red_vdefs_tProd"><span class="id" title="lemma">red_vdefs_tProd</span></a> {<a id="c5eb81f3d74238e2cfc5fd1e6cd758cd" class="idref" href="#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="binder">Σ</span></a> <a id="90a5c93e85b424c9d4916bd075146a32" class="idref" href="#90a5c93e85b424c9d4916bd075146a32"><span class="id" title="binder">Γ</span></a> <a id="ctx:271" class="idref" href="#ctx:271"><span class="id" title="binder">ctx</span></a> <a id="concl:272" class="idref" href="#concl:272"><span class="id" title="binder">concl</span></a> <a id="na:273" class="idref" href="#na:273"><span class="id" title="binder">na</span></a> <a id="dom:274" class="idref" href="#dom:274"><span class="id" title="binder">dom</span></a> <a id="codom:275" class="idref" href="#codom:275"><span class="id" title="binder">codom</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_vdef"><span class="id" title="definition">is_vdef</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ctx:271"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#90a5c93e85b424c9d4916bd075146a32"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ctx:271"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#concl:272"><span class="id" title="variable">concl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⇝</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:273"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#dom:274"><span class="id" title="variable">dom</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#codom:275"><span class="id" title="variable">codom</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#90a5c93e85b424c9d4916bd075146a32"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ctx:271"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#concl:272"><span class="id" title="variable">concl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⇝</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:273"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#dom:274"><span class="id" title="variable">dom</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#codom:275"><span class="id" title="variable">codom</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ</span>. <span class="id" title="var">revert</span> <span class="id" title="var">ctx</span> <span class="id" title="var">concl</span>. <span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">PCUICInduction.ctx_length_rev_ind</span></a> ⇒ [<span class="id" title="var">concl</span>|<span class="id" title="var">d</span> <span class="id" title="var">ctx</span> <span class="id" title="var">IH</span> <span class="id" title="var">concl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_nil"><span class="id" title="lemma">expand_lets_nil</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">hctx</span> <span class="id" title="var">hdef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na'</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vdef"><span class="id" title="lemma">expand_lets_vdef</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/(<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#invert_red_letin"><span class="id" title="lemma">invert_red_letin</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>) (<span class="id" title="var">wfΣ</span> := <span class="id" title="var">wfΣ</span>)) ⇒ [[<span class="id" title="var">d'</span> [<span class="id" title="var">ty'</span> [<span class="id" title="var">b'</span> []]]]|] //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T.subst10"><span class="id" title="abbreviation">T.subst10</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICLiftSubst.subst_it_mkProd_or_LetIn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_alt"><span class="id" title="lemma">subst_context_alt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallb_mapi_forallbi"><span class="id" title="lemma">forallb_mapi_forallbi</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallb_forallbi"><span class="id" title="lemma">forallb_forallbi</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#forallbi_impl"><span class="id" title="lemma">forallbi_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b'</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="closed_prod_type" class="idref" href="#closed_prod_type"><span class="id" title="lemma">closed_prod_type</span></a> {<a id="be195ed1aa023b3a5afc2ee39bc7a9f9" class="idref" href="#be195ed1aa023b3a5afc2ee39bc7a9f9"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="f:277" class="idref" href="#f:277"><span class="id" title="binder">f</span></a> <a id="na:278" class="idref" href="#na:278"><span class="id" title="binder">na</span></a> <a id="A:279" class="idref" href="#A:279"><span class="id" title="binder">A</span></a> <a id="B:280" class="idref" href="#B:280"><span class="id" title="binder">B</span></a>} {<a id="574f66f9c55eec0757d322784b31d029" class="idref" href="#574f66f9c55eec0757d322784b31d029"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#be195ed1aa023b3a5afc2ee39bc7a9f9"><span class="id" title="variable">Σ</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wf:282" class="idref" href="#wf:282"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#be195ed1aa023b3a5afc2ee39bc7a9f9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:277"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:278"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:279"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:280"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#be195ed1aa023b3a5afc2ee39bc7a9f9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:277"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#be195ed1aa023b3a5afc2ee39bc7a9f9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:277"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:277"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">ty</span> <span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tInd"><span class="id" title="constructor">tInd</span></a> <span class="id" title="var">i</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#value_values_ind"><span class="id" title="lemma">value_values_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Sort"><span class="id" title="lemma">inversion_Sort</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_pb_Sort_Prod_inv"><span class="id" title="lemma">ws_cumul_pb_Sort_Prod_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Prod"><span class="id" title="lemma">inversion_Prod</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [? [? [? []]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_pb_Sort_Prod_inv"><span class="id" title="lemma">ws_cumul_pb_Sort_Prod_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">exp</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">exp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span>; <span class="id" title="var">solve_discr</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H2</span>. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_discr</span>. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mind</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Construct"><span class="id" title="lemma">inversion_Construct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl'</span> [<span class="id" title="var">cdecl'</span> [<span class="id" title="keyword">wf</span> [<span class="id" title="var">hd</span> [<span class="id" title="var">cu</span> <span class="id" title="var">hty</span>]]]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>, <span class="id" title="var">H0</span>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">eauto</span>. 3,6:<span class="id" title="tactic">eapply</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_constructor_inj"><span class="id" title="lemma">PCUICGlobalEnv.declared_constructor_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#on_declared_constructor"><span class="id" title="lemma">PCUICWeakeningEnvTyp.on_declared_constructor</span></a> <span class="id" title="var">hd</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">onmib</span> <span class="id" title="var">onind</span>] [<span class="id" title="var">univs</span> [[]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onmib</span>, <span class="id" title="var">o</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onNpars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_lets_in_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">hty</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICUnivSubst.subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICLiftSubst.subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_pb_Prod_r_inv"><span class="id" title="lemma">ws_cumul_pb_Prod_r_inv</span></a> ⇒ [<span class="id" title="var">na'</span> [<span class="id" title="var">dom'</span> [<span class="id" title="var">codom'</span> []]]] <span class="id" title="var">hred</span> <span class="id" title="var">eqb</span> <span class="id" title="var">eqdom</span> <span class="id" title="var">cumcod</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">hred</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">pars</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICUnivSubst.subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICLiftSubst.subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">args</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_vdef"><span class="id" title="definition">is_vdef</span></a> <span class="id" title="var">pars</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">onNpars</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">pars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>) <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_app"><span class="id" title="lemma">context_assumptions_app</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">onNpars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">d</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × ⇒ //; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subst_context_app'"><span class="id" title="lemma">PCUICSubstitution.subst_context_app'</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHc</span> //. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_vdef"><span class="id" title="definition">is_vdef</span></a> <span class="id" title="var">args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">H3</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_app"><span class="id" title="lemma">context_assumptions_app</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">d</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × ⇒ //; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subst_context_app'"><span class="id" title="lemma">PCUICSubstitution.subst_context_app'</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHc</span> //. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#red_vdefs_tProd"><span class="id" title="lemma">red_vdefs_tProd</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a> <span class="id" title="var">H0</span> <span class="id" title="var">H5</span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subst_cstr_concl_head"><span class="id" title="lemma">PCUICSubstitution.subst_cstr_concl_head</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">hd</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a> //=. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">h</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#invert_red_mkApps_tInd"><span class="id" title="lemma">invert_red_mkApps_tInd</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">args'</span> []]. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Prim"><span class="id" title="lemma">inversion_Prim</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">prim_ty</span> [<span class="id" title="var">cdecl</span> []]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#invert_cumul_prim_type_prod"><span class="id" title="lemma">invert_cumul_prim_type_prod</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> <span class="id" title="var">X1</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_mkApps_inv'"><span class="id" title="lemma">expanded_mkApps_inv'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#arguments_mkApps"><span class="id" title="lemma">arguments_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> /=. <span class="id" title="tactic">intros</span> [<span class="id" title="var">expargs</span> [<span class="id" title="var">mind'</span> [<span class="id" title="var">idecl'</span> [<span class="id" title="var">cdecl'</span> []]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. 3:<span class="id" title="tactic">eapply</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_constructor_inj"><span class="id" title="lemma">PCUICGlobalEnv.declared_constructor_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#inversion_mkApps"><span class="id" title="lemma">PCUICValidity.inversion_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Construct"><span class="id" title="lemma">inversion_Construct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl''</span> [<span class="id" title="var">cdecl'</span> [<span class="id" title="keyword">wf</span> [<span class="id" title="var">hd</span> [<span class="id" title="var">cu</span> <span class="id" title="var">hty</span>]]]]]]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#typing_spine_strengthen"><span class="id" title="lemma">PCUICSpine.typing_spine_strengthen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t1</span>. 3:<span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#validity"><span class="id" title="lemma">PCUICValidity.validity</span></a>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>. 3:<span class="id" title="tactic">apply</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_constructor_inj"><span class="id" title="lemma">PCUICGlobalEnv.declared_constructor_inj</span></a> <span class="id" title="var">H0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#on_declared_constructor"><span class="id" title="lemma">PCUICWeakeningEnvTyp.on_declared_constructor</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">onmib</span> <span class="id" title="var">onind</span>] [<span class="id" title="var">univs</span> [[]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onmib</span>, <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_lets_in_type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICUnivSubst.subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICLiftSubst.subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">pars</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICUnivSubst.subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">PCUICLiftSubst.subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">args'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subst_cstr_concl_head"><span class="id" title="lemma">PCUICSubstitution.subst_cstr_concl_head</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">onNpars</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#typing_spine_smash"><span class="id" title="lemma">PCUICClassification.typing_spine_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">lenargs</span> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mind'</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl'</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/(<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#typing_spine_all_inv"><span class="id" title="lemma">PCUICClassification.typing_spine_all_inv</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="var">forward</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /= <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_app"><span class="id" title="lemma">context_assumptions_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">args'</span> /<span class="id" title="var">pars</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_mkApps"><span class="id" title="lemma">PCUICLiftSubst.subst_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">h</span> ⇒ [] <span class="id" title="var">h</span> <span class="id" title="var">_</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_pb_Prod_r_inv"><span class="id" title="lemma">ws_cumul_pb_Prod_r_inv</span></a> ⇒ [<span class="id" title="var">na'</span> [<span class="id" title="var">dom'</span> [<span class="id" title="var">codom'</span> []]]] <span class="id" title="var">hred</span> <span class="id" title="var">eqb</span> <span class="id" title="var">eqdom</span> <span class="id" title="var">cumcod</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">hred</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#invert_red_mkApps_tInd"><span class="id" title="lemma">invert_red_mkApps_tInd</span></a> ⇒ [<span class="id" title="var">args''</span> [<span class="id" title="var">heq</span>]]. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pcuic_eval_function" class="idref" href="#pcuic_eval_function"><span class="id" title="lemma">pcuic_eval_function</span></a> `{<a id="H:283" class="idref" href="#H:283"><span class="id" title="binder">WcbvFlags</span></a>} (<a id="cf:284" class="idref" href="#cf:284"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="ecfbdabaddf4e5284d914e21ad7ca23c" class="idref" href="#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="f:286" class="idref" href="#f:286"><span class="id" title="binder">f</span></a> <a id="v:287" class="idref" href="#v:287"><span class="id" title="binder">v</span></a> <a id="na:288" class="idref" href="#na:288"><span class="id" title="binder">na</span></a> <a id="A:289" class="idref" href="#A:289"><span class="id" title="binder">A</span></a> <a id="B:290" class="idref" href="#B:290"><span class="id" title="binder">B</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="67cdfd999e5d3ae362d83d91bcf643dd" class="idref" href="#67cdfd999e5d3ae362d83d91bcf643dd"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="variable">Σ</span></a>) (<a id="wf:292" class="idref" href="#wf:292"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:286"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:288"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:289"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:290"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:286"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ecfbdabaddf4e5284d914e21ad7ca23c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:286"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:287"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:287"><span class="id" title="variable">v</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">ty</span> <span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tInd"><span class="id" title="constructor">tInd</span></a> <span class="id" title="var">i</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">expΣ</span> <span class="id" title="var">exp</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">v</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_red"><span class="id" title="lemma">expanded_red</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="var">tea</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#wcbveval_red"><span class="id" title="lemma">PCUICClassification.wcbveval_red</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ??; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">eval_to_value</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#closed_prod_type"><span class="id" title="lemma">closed_prod_type</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nisErasable_eval" class="idref" href="#nisErasable_eval"><span class="id" title="lemma">nisErasable_eval</span></a> {<a id="432aa799c020e4a2ade4a271f0f368bb" class="idref" href="#432aa799c020e4a2ade4a271f0f368bb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="t:294" class="idref" href="#t:294"><span class="id" title="binder">t</span></a> <a id="t':295" class="idref" href="#t':295"><span class="id" title="binder">t'</span></a>} {<a id="2f6c722c21fc07d0a77ab8895d39c1ce" class="idref" href="#2f6c722c21fc07d0a77ab8895d39c1ce"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#432aa799c020e4a2ade4a271f0f368bb"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#432aa799c020e4a2ade4a271f0f368bb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:294"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#432aa799c020e4a2ade4a271f0f368bb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:294"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t':295"><span class="id" title="variable">t'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#432aa799c020e4a2ade4a271f0f368bb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t':295"><span class="id" title="variable">t'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">nf</span> [<span class="id" title="var">s</span> [<span class="id" title="var">hty</span> <span class="id" title="var">norm</span> <span class="id" title="var">nisa</span> <span class="id" title="var">hs</span> <span class="id" title="var">nonprop</span>]]] <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span>. 2:<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">nf</span>, <span class="id" title="var">s</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#PCUICInv"><span class="id" title="section">PCUICInv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="ErasureFunction" class="idref" href="#ErasureFunction"><span class="id" title="section">ErasureFunction</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment"><span class="id" title="module">PCUICAst.PCUICEnvironment</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#"><span class="id" title="module">PCUIC.PCUICConversion</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#"><span class="id" title="module">PCUICArities</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#"><span class="id" title="module">PCUICSpine</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#"><span class="id" title="module">PCUICOnFreeVars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#"><span class="id" title="module">PCUICWellScopedCumulativity</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#"><span class="id" title="module">EAst</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#"><span class="id" title="module">EAstUtils</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#"><span class="id" title="module">EWcbvEval</span></a> <a class="idref" href="MetaRocq.Erasure.EArities.html#"><span class="id" title="module">EArities</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="isFunction" class="idref" href="#isFunction"><span class="id" title="definition">isFunction</span></a> (<a id="t:297" class="idref" href="#t:297"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) := <a class="idref" href="MetaRocq.Erasure.EAst.html#isLambda"><span class="id" title="definition">EAst.isLambda</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:297"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:297"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#081ff67d3116402bb680e8692aa39185"><span class="id" title="notation">||</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isCoFix"><span class="id" title="definition">isCoFix</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head"><span class="id" title="definition">head</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:297"><span class="id" title="variable">t</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="typing_spine_isArity" class="idref" href="#typing_spine_isArity"><span class="id" title="lemma">typing_spine_isArity</span></a> {<a id="d589cad9186d55b3b0990baa68f1237d" class="idref" href="#d589cad9186d55b3b0990baa68f1237d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="7773f5ab5f8db1ad2a5c37c1e0b3eaa5" class="idref" href="#7773f5ab5f8db1ad2a5c37c1e0b3eaa5"><span class="id" title="binder">Γ</span></a> <a id="T:300" class="idref" href="#T:300"><span class="id" title="binder">T</span></a> <a id="args:301" class="idref" href="#args:301"><span class="id" title="binder">args</span></a> <a id="T':302" class="idref" href="#T':302"><span class="id" title="binder">T'</span></a>} {<a id="3e77c60e653bf07baa0c1ac7acb9ab90" class="idref" href="#3e77c60e653bf07baa0c1ac7acb9ab90"><span class="id" title="binder">wfΣ</span></a> :  <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d589cad9186d55b3b0990baa68f1237d"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d589cad9186d55b3b0990baa68f1237d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7773f5ab5f8db1ad2a5c37c1e0b3eaa5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine"><span class="id" title="inductive">typing_spine</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d589cad9186d55b3b0990baa68f1237d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7773f5ab5f8db1ad2a5c37c1e0b3eaa5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:300"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:301"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T':302"><span class="id" title="variable">T'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isArity"><span class="id" title="definition">isArity</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:300"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="ar:304" class="idref" href="#ar:304"><span class="id" title="binder">ar</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine"><span class="id" title="inductive">typing_spine</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#d589cad9186d55b3b0990baa68f1237d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7773f5ab5f8db1ad2a5c37c1e0b3eaa5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:300"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:301"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ar:304"><span class="id" title="variable">ar</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isArity"><span class="id" title="definition">isArity</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ar:304"><span class="id" title="variable">ar</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΓ</span> <span class="id" title="var">sp</span> <span class="id" title="var">isa</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#isArity_typing_spine"><span class="id" title="lemma">PCUICClassification.isArity_typing_spine</span></a> <span class="id" title="var">_</span> <span class="id" title="var">sp</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">∃</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine_isType_dom"><span class="id" title="lemma">typing_spine_isType_dom</span></a> <span class="id" title="var">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContextConversion.html#closed_red_refl"><span class="id" title="lemma">PCUICContextConversion.closed_red_refl</span></a>; <span class="id" title="var">fvs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ar</span> [[<span class="id" title="var">redar</span>] <span class="id" title="var">isa'</span>]]. <span class="id" title="tactic">∃</span> <span class="id" title="var">ar</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine_weaken_concl"><span class="id" title="lemma">typing_spine_weaken_concl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#red_ws_cumul_pb"><span class="id" title="lemma">red_ws_cumul_pb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine_isType_codom"><span class="id" title="lemma">typing_spine_isType_codom</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">sp</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#isType_red"><span class="id" title="lemma">isType_red</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">redar</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="erase_function" class="idref" href="#erase_function"><span class="id" title="lemma">erase_function</span></a> (<a id="wfl:305" class="idref" href="#wfl:305"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="guard_impl:306" class="idref" href="#guard_impl:306"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cf:307" class="idref" href="#cf:307"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="4ad11e2e742be70e2aac5b04bf8df518" class="idref" href="#4ad11e2e742be70e2aac5b04bf8df518"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="f:309" class="idref" href="#f:309"><span class="id" title="binder">f</span></a> <a id="v:310" class="idref" href="#v:310"><span class="id" title="binder">v</span></a> <a id="v':311" class="idref" href="#v':311"><span class="id" title="binder">v'</span></a> <a id="na:312" class="idref" href="#na:312"><span class="id" title="binder">na</span></a> <a id="A:313" class="idref" href="#A:313"><span class="id" title="binder">A</span></a> <a id="B:314" class="idref" href="#B:314"><span class="id" title="binder">B</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wf:315" class="idref" href="#wf:315"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4ad11e2e742be70e2aac5b04bf8df518"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:309"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:312"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:313"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:314"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="pr:316" class="idref" href="#pr:316"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4ad11e2e742be70e2aac5b04bf8df518"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:309"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4ad11e2e742be70e2aac5b04bf8df518"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:309"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:310"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="430f224abd2f2b0e5e3c40c291726803" class="idref" href="#430f224abd2f2b0e5e3c40c291726803"><span class="id" title="binder">Σ'</span></a>, <a id="f':318" class="idref" href="#f':318"><span class="id" title="binder">f'</span></a>) := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4ad11e2e742be70e2aac5b04bf8df518"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:309"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:316"><span class="id" title="variable">pr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#430f224abd2f2b0e5e3c40c291726803"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f':318"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':311"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':311"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">ne</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">wf</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">evf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre</span> [[<span class="id" title="var">expΣ</span> <span class="id" title="var">expt</span>] [<span class="id" title="var">norm</span> <span class="id" title="var">norm'</span>]]]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">wfΣ</span> <span class="id" title="var">wft</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nisErasable_eval"><span class="id" title="lemma">nisErasable_eval</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ne</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable_spec"><span class="id" title="lemma">nisErasable_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ne</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span> <span class="id" title="keyword">as</span> <span class="id" title="var">hty'</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ'</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env'</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">PCUICWfEnv.abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">obl</span> := (<span class="id" title="keyword">fun</span> <a id="9e89ea4868cf140441b69909cddbd101" class="idref" href="#9e89ea4868cf140441b69909cddbd101"><span class="id" title="binder"><span id="13d66f2aefa92dcbe0c4425fa1085bf2" class="id">Σ</span></span></a> (<a id="d1c36a7d822e926aea54bddadbd37cf5" class="idref" href="#d1c36a7d822e926aea54bddadbd37cf5"><span class="id" title="binder"><span id="ccacf2b6a577769b42add5b86f12b224" class="id">wfΣ</span></span></a> : <span class="id" title="var">_</span>) ⇒ <span class="id" title="var">_</span>)) <span class="id" title="tactic">at</span> 5.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">obl'</span> := (<span class="id" title="keyword">fun</span> <a id="5846d907f98045c8066ec4a1fd4a2417" class="idref" href="#5846d907f98045c8066ec4a1fd4a2417"><span class="id" title="binder"><span id="67b0156cbaf42ad5cf0db72219186833" class="id">Σ</span></span></a> ⇒ <span class="id" title="var">_</span>)) <span class="id" title="tactic">at</span> 12.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<span class="id" title="var">env'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">wtf</span> := (<span class="id" title="keyword">fun</span> <a id="254f4fe056e9633ec7276ff785e9e7df" class="idref" href="#254f4fe056e9633ec7276ff785e9e7df"><span class="id" title="binder"><span id="4a71d8014be45b8930cc05a0c5ed961a" class="id">Σ</span></span></a> ⇒ <span class="id" title="var">_</span>)) <span class="id" title="tactic">at</span> 13. <span class="id" title="tactic">change</span> <span class="id" title="var">obl'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wtf</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">obl'</span>. <span class="id" title="var">clearbody</span> <span class="id" title="var">wtf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eqdecls</span> := (<span class="id" title="keyword">fun</span> <a id="a35140fe46603c62b4904083141d2964" class="idref" href="#a35140fe46603c62b4904083141d2964"><span class="id" title="binder"><span id="f32db98b73c91639d2e862ef3ebecfa3" class="id">Σ</span></span></a> ⇒ <span class="id" title="var">_</span>)) <span class="id" title="tactic">at</span> 9. <span class="id" title="var">clearbody</span> <span class="id" title="var">eqdecls</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">deps</span> := <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">term_global_deps</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">nin</span> := (<span class="id" title="keyword">fun</span> (<a id="n:329" class="idref" href="#n:329"><span class="id" title="binder"><span id="n:330" class="id">n</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) ⇒ <span class="id" title="var">_</span>)). <span class="id" title="var">clearbody</span> <span class="id" title="var">nin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> <span class="id" title="var">deps</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">Σ'</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">PCUICAst.PCUICEnvironment.declarations</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">nin</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">nin2</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a>. <span class="id" title="var">erewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span> <span class="id" title="var">nin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">eg</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_correct"><span class="id" title="lemma">erase_correct</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">Σ'</span> <span class="id" title="var">Σ</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">v</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">deps</span> <span class="id" title="var">_</span> <span class="id" title="var">eqdecls</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.subset_spec"><span class="id" title="lemma">Kernames.KernameSet.subset_spec</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">deps</span> -/<span class="id" title="var">env'</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>]. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSetProp.subset_refl"><span class="id" title="lemma">Kernames.KernameSetProp.subset_refl</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span> ⇒ ? → //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v''</span> [<span class="id" title="var">ervv''</span> [<span class="id" title="var">ev</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eset</span> (<span class="id" title="var">eg'</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">eg</span> <span class="id" title="keyword">with</span> <span class="id" title="var">eg'</span>. 2:{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">eg</span> /<span class="id" title="var">eg'</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ev'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">v'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v''</span>). { <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_deterministic"><span class="id" title="lemma">eval_deterministic</span></a> <span class="id" title="var">ev</span>). <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">er</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ev'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">er'</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">er'</span> <span class="id" title="keyword">with</span> <span class="id" title="var">er</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">ev'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">er</span> /<span class="id" title="var">er'</span> /<span class="id" title="var">env'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.RelationClasses.html#reflexivity"><span class="id" title="definition">reflexivity</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">v''</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_eval_function"><span class="id" title="lemma">pcuic_eval_function</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">evf</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">PCUICAstUtils.decompose_app</span></a> <span class="id" title="var">v</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_inv"><span class="id" title="lemma">PCUICAstUtils.decompose_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">evf</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span> ⇒ //; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">v</span>. 1:<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //. 1-4:<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">ne</span> <span class="id" title="var">ervv''</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">ervv''</span>. <span class="id" title="var">cbn</span> ⇒ //. <span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>. <span class="id" title="var">sq</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">wfΣ</span> <span class="id" title="var">hty'</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="mdecl:331" class="idref" href="#mdecl:331"><span class="id" title="binder"><span id="mdecl:333" class="id">mdecl</span></span></a> <a id="idecl:332" class="idref" href="#idecl:332"><span class="id" title="binder"><span id="idecl:334" class="id">idecl</span></span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">PCUICAst.declared_inductive</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">ind</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#mdecl:331"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#idecl:332"><span class="id" title="variable">idecl</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> <span class="id" title="var">decli</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#inversion_mkApps"><span class="id" title="lemma">PCUICValidity.inversion_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty'</span> <span class="id" title="keyword">as</span> [? [<span class="id" title="var">hty</span> <span class="id" title="var">_</span>]]. <span class="id" title="tactic">clear</span> -<span class="id" title="var">hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depind</span> <span class="id" title="var">hty</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#invert_type_mkApps_ind"><span class="id" title="lemma">PCUICInductives.invert_type_mkApps_ind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">sp</span> <span class="id" title="var">cu</span>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#typing_spine_isArity"><span class="id" title="lemma">typing_spine_isArity</span></a> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">constructor</span>) <span class="id" title="var">sp</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#isArity_subst_instance"><span class="id" title="lemma">PCUICUnivSubstitutionTyp.isArity_subst_instance</span></a> <span class="id" title="var">ui</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#isArity_ind_type"><span class="id" title="lemma">isArity_ind_type</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ar</span> [[<span class="id" title="var">spar</span>] <span class="id" title="var">isa'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#type_mkApps"><span class="id" title="lemma">PCUICSpine.type_mkApps</span></a>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">spar</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">wfΣ</span> <span class="id" title="var">hty'</span> <span class="id" title="var">ne</span> <span class="id" title="var">ervv''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="mfix':335" class="idref" href="#mfix':335"><span class="id" title="binder"><span id="mfix':337" class="id">mfix'</span></span></a> <a id="l':336" class="idref" href="#l':336"><span class="id" title="binder"><span id="l':338" class="id">l'</span></span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">EAst.tFix</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#mfix':335"><span class="id" title="variable">mfix'</span></a> <span class="id" title="var">idx</span>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l':336"><span class="id" title="variable">l'</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">mfix'</span> [<span class="id" title="var">l'</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureProperties.html#erases_mkApps_inv"><span class="id" title="lemma">ErasureProperties.erases_mkApps_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ervv''</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> [<span class="id" title="var">L2'</span> [? [? [? []]]]]]]|[<span class="id" title="var">f'</span>[<span class="id" title="var">L'</span>[<span class="id" title="var">eq</span> [<span class="id" title="var">erf</span> <span class="id" title="var">erargs</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">PCUICAstUtils.mkApps_app</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#Is_type_app"><span class="id" title="lemma">Is_type_app</span></a>; [<span class="id" title="tactic">eauto</span>|<span class="id" title="tactic">eauto</span>| |<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">PCUICAstUtils.mkApps_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">depelim</span> <span class="id" title="var">erf</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="var">trea</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#Is_type_app"><span class="id" title="lemma">Is_type_app</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> //= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">wfΣ</span> <span class="id" title="var">hty'</span> <span class="id" title="var">ne</span> <span class="id" title="var">ervv''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="mfix':339" class="idref" href="#mfix':339"><span class="id" title="binder"><span id="mfix':341" class="id">mfix'</span></span></a> <a id="l':340" class="idref" href="#l':340"><span class="id" title="binder"><span id="l':342" class="id">l'</span></span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <span class="id" title="var">v'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">EAst.tCoFix</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#mfix':339"><span class="id" title="variable">mfix'</span></a> <span class="id" title="var">idx</span>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#l':340"><span class="id" title="variable">l'</span></a>) <span class="id" title="keyword">as</span> [<span class="id" title="var">mfix'</span> [<span class="id" title="var">l'</span> -&gt;]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureProperties.html#erases_mkApps_inv"><span class="id" title="lemma">ErasureProperties.erases_mkApps_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ervv''</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">L1</span> [<span class="id" title="var">L2</span> [<span class="id" title="var">L2'</span> [? [? [? []]]]]]]|[<span class="id" title="var">f'</span>[<span class="id" title="var">L'</span>[<span class="id" title="var">eq</span> [<span class="id" title="var">erf</span> <span class="id" title="var">erargs</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">subst</span> <span class="id" title="var">l</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">PCUICAstUtils.mkApps_app</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#Is_type_app"><span class="id" title="lemma">Is_type_app</span></a>; [<span class="id" title="tactic">eauto</span>|<span class="id" title="tactic">eauto</span>| |<span class="id" title="tactic">eauto</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">PCUICAstUtils.mkApps_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">depelim</span> <span class="id" title="var">erf</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>; <span class="id" title="var">trea</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span> <span class="id" title="var">ne</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EArities.html#Is_type_app"><span class="id" title="lemma">Is_type_app</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> //= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pcuic_function_value" class="idref" href="#pcuic_function_value"><span class="id" title="lemma">pcuic_function_value</span></a> (<a id="wfl:343" class="idref" href="#wfl:343"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="guard_impl:344" class="idref" href="#guard_impl:344"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cf:345" class="idref" href="#cf:345"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) {<a id="20712b40a23e8d6a79d955fdadd0cfe3" class="idref" href="#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="f:347" class="idref" href="#f:347"><span class="id" title="binder">f</span></a> <a id="na:348" class="idref" href="#na:348"><span class="id" title="binder">na</span></a> <a id="A:349" class="idref" href="#A:349"><span class="id" title="binder">A</span></a> <a id="B:350" class="idref" href="#B:350"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="8d4452ca4a5e5e9d9e22e3de8ed0ad05" class="idref" href="#8d4452ca4a5e5e9d9e22e3de8ed0ad05"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>) (<a id="axfree:352" class="idref" href="#axfree:352"><span class="id" title="binder">axfree</span></a> : <a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a>) (<a id="wf:353" class="idref" href="#wf:353"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:347"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:348"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:349"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:350"><span class="id" title="variable">B</span></a>) : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">{</span></a> <a id="v:354" class="idref" href="#v:354"><span class="id" title="binder">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#20712b40a23e8d6a79d955fdadd0cfe3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:347"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:354"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Specif.html#e6a434cae860987d1c5f61b342cc9e57"><span class="id" title="notation">}</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICNormalization.html#wcbv_normalization"><span class="id" title="lemma">PCUICNormalization.wcbv_normalization</span></a> <span class="id" title="var">wfΣ</span> <span class="id" title="var">axfree</span> <span class="id" title="keyword">wf</span>). <span class="id" title="var">Unshelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#extraction_normalizing"><span class="id" title="instance">PCUICSN.extraction_normalizing</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalization"><span class="id" title="definition">PCUICSN.normalization</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="erase_function_to_function" class="idref" href="#erase_function_to_function"><span class="id" title="lemma">erase_function_to_function</span></a> (<a id="wfl:355" class="idref" href="#wfl:355"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="guard_impl:356" class="idref" href="#guard_impl:356"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cf:357" class="idref" href="#cf:357"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="60641d8ab50c215ede136184505a8a1e" class="idref" href="#60641d8ab50c215ede136184505a8a1e"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="f:359" class="idref" href="#f:359"><span class="id" title="binder">f</span></a> <a id="v':360" class="idref" href="#v':360"><span class="id" title="binder">v'</span></a> <a id="na:361" class="idref" href="#na:361"><span class="id" title="binder">na</span></a> <a id="A:362" class="idref" href="#A:362"><span class="id" title="binder">A</span></a> <a id="B:363" class="idref" href="#B:363"><span class="id" title="binder">B</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wf:364" class="idref" href="#wf:364"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#60641d8ab50c215ede136184505a8a1e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:359"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:361"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:362"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:363"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="pr:365" class="idref" href="#pr:365"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#60641d8ab50c215ede136184505a8a1e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#60641d8ab50c215ede136184505a8a1e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:359"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="4dde2d609ae1f4bcd281550464818043" class="idref" href="#4dde2d609ae1f4bcd281550464818043"><span class="id" title="binder">Σ'</span></a>, <a id="f':367" class="idref" href="#f':367"><span class="id" title="binder">f'</span></a>) := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#60641d8ab50c215ede136184505a8a1e"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:359"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:365"><span class="id" title="variable">pr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4dde2d609ae1f4bcd281550464818043"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f':367"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':360"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':360"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">axfree</span> <span class="id" title="var">nise</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[]]. <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_function_value"><span class="id" title="lemma">pcuic_function_value</span></a> <span class="id" title="var">w</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <span class="id" title="var">axfree</span> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">v</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_function"><span class="id" title="lemma">erase_function</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ErasureFunction"><span class="id" title="section">ErasureFunction</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="ETransformPresAppLam" class="idref" href="#ETransformPresAppLam"><span class="id" title="module">ETransformPresAppLam</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="ETransformPresAppLam.Opt" class="idref" href="#ETransformPresAppLam.Opt"><span class="id" title="section">Opt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Opt.env" class="idref" href="#ETransformPresAppLam.Opt.env"><span class="id" title="variable">env</span></a> <a id="ETransformPresAppLam.Opt.env'" class="idref" href="#ETransformPresAppLam.Opt.env'"><span class="id" title="variable">env'</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Opt.eval" class="idref" href="#ETransformPresAppLam.Opt.eval"><span class="id" title="variable">eval</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Opt.eval'" class="idref" href="#ETransformPresAppLam.Opt.eval'"><span class="id" title="variable">eval'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Opt.o" class="idref" href="#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.eval"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.eval'"><span class="id" title="variable">eval'</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Opt.is_etaexp" class="idref" href="#ETransformPresAppLam.Opt.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Opt.is_etaexp'" class="idref" href="#ETransformPresAppLam.Opt.is_etaexp'"><span class="id" title="variable">is_etaexp'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Class</span> <a id="ETransformPresAppLam.t" class="idref" href="#ETransformPresAppLam.t"><span class="id" title="record">t</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <a id="ETransformPresAppLam.transform_pre_irrel" class="idref" href="#ETransformPresAppLam.transform_pre_irrel"><span class="id" title="projection">transform_pre_irrel</span></a> : <span class="id" title="keyword">∀</span> <a id="p:376" class="idref" href="#p:376"><span class="id" title="binder">p</span></a> <a id="pr:377" class="idref" href="#pr:377"><span class="id" title="binder">pr</span></a> <a id="pr':378" class="idref" href="#pr':378"><span class="id" title="binder">pr'</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:376"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:377"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:376"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr':378"><span class="id" title="variable">pr'</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ETransformPresAppLam.transform_env_irrel" class="idref" href="#ETransformPresAppLam.transform_env_irrel"><span class="id" title="projection">transform_env_irrel</span></a> : <span class="id" title="keyword">∀</span> <a id="p:380" class="idref" href="#p:380"><span class="id" title="binder">p</span></a> <a id="p':381" class="idref" href="#p':381"><span class="id" title="binder">p'</span></a> <a id="pr:382" class="idref" href="#pr:382"><span class="id" title="binder">pr</span></a> <a id="pr':383" class="idref" href="#pr':383"><span class="id" title="binder">pr'</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:380"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':381"><span class="id" title="variable">p'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:380"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:382"><span class="id" title="variable">pr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':381"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr':383"><span class="id" title="variable">pr'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ETransformPresAppLam.transform_etaexp" class="idref" href="#ETransformPresAppLam.transform_etaexp"><span class="id" title="projection">transform_etaexp</span></a> : <span class="id" title="keyword">∀</span> <a id="9bf150bc2304a6b87e5b9aeed2ddd501" class="idref" href="#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="binder">Σ</span></a> <a id="t:386" class="idref" href="#t:386"><span class="id" title="binder">t</span></a> <a id="pr:387" class="idref" href="#pr:387"><span class="id" title="binder">pr</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:386"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.is_etaexp'"><span class="id" title="variable">is_etaexp'</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#9bf150bc2304a6b87e5b9aeed2ddd501"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:386"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:387"><span class="id" title="variable">pr</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ETransformPresAppLam.transform_app" class="idref" href="#ETransformPresAppLam.transform_app"><span class="id" title="projection">transform_app</span></a> : <span class="id" title="keyword">∀</span> <a id="ae1a5a42f92694272fba9fe4c3e0e4cb" class="idref" href="#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="binder">Σ</span></a> <a id="t:390" class="idref" href="#t:390"><span class="id" title="binder">t</span></a> <a id="u:391" class="idref" href="#u:391"><span class="id" title="binder">u</span></a> (<a id="pr:392" class="idref" href="#pr:392"><span class="id" title="binder">pr</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:390"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:391"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="fo:393" class="idref" href="#fo:393"><span class="id" title="binder">fo</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:390"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="prt:394" class="idref" href="#prt:394"><span class="id" title="binder">prt</span></a> <a id="pru:395" class="idref" href="#pru:395"><span class="id" title="binder">pru</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:390"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:391"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:392"><span class="id" title="variable">pr</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:390"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:391"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:392"><span class="id" title="variable">pr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:390"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#prt:394"><span class="id" title="variable">prt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ae1a5a42f92694272fba9fe4c3e0e4cb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:391"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pru:395"><span class="id" title="variable">pru</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="ETransformPresAppLam.transform_lam" class="idref" href="#ETransformPresAppLam.transform_lam"><span class="id" title="projection">transform_lam</span></a> : <span class="id" title="keyword">∀</span> <a id="p:397" class="idref" href="#p:397"><span class="id" title="binder">p</span></a> (<a id="pr:398" class="idref" href="#pr:398"><span class="id" title="binder">pr</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:397"><span class="id" title="variable">p</span></a>), <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:397"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:397"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:398"><span class="id" title="variable">pr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> }.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Opt"><span class="id" title="section">Opt</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="ETransformPresAppLam.Comp" class="idref" href="#ETransformPresAppLam.Comp"><span class="id" title="section">Comp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Comp.env" class="idref" href="#ETransformPresAppLam.Comp.env"><span class="id" title="variable">env</span></a> <a id="ETransformPresAppLam.Comp.env'" class="idref" href="#ETransformPresAppLam.Comp.env'"><span class="id" title="variable">env'</span></a> <a id="ETransformPresAppLam.Comp.env''" class="idref" href="#ETransformPresAppLam.Comp.env''"><span class="id" title="variable">env''</span></a> : <span class="id" title="keyword">Type</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Comp.eval" class="idref" href="#ETransformPresAppLam.Comp.eval"><span class="id" title="variable">eval</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Comp.eval'" class="idref" href="#ETransformPresAppLam.Comp.eval'"><span class="id" title="variable">eval'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="ETransformPresAppLam.Comp.eval''" class="idref" href="#ETransformPresAppLam.Comp.eval''"><span class="id" title="variable">eval''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>}.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Comp.o" class="idref" href="#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.eval"><span class="id" title="variable">eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.eval'"><span class="id" title="variable">eval'</span></a>) (<a id="ETransformPresAppLam.Comp.o'" class="idref" href="#ETransformPresAppLam.Comp.o'"><span class="id" title="variable">o'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.t"><span class="id" title="record">Transform.t</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.eval'"><span class="id" title="variable">eval'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.eval''"><span class="id" title="variable">eval''</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Comp.is_etaexp" class="idref" href="#ETransformPresAppLam.Comp.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env"><span class="id" title="variable">env</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Comp.is_etaexp'" class="idref" href="#ETransformPresAppLam.Comp.is_etaexp'"><span class="id" title="variable">is_etaexp'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env'"><span class="id" title="variable">env'</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Comp.is_etaexp''" class="idref" href="#ETransformPresAppLam.Comp.is_etaexp''"><span class="id" title="variable">is_etaexp''</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.env''"><span class="id" title="variable">env''</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="ETransformPresAppLam.Comp.oext" class="idref" href="#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp'"><span class="id" title="variable">is_etaexp'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ETransformPresAppLam.Comp.o'ext" class="idref" href="#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.t"><span class="id" title="class">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp'"><span class="id" title="variable">is_etaexp'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp''"><span class="id" title="variable">is_etaexp''</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ETransformPresAppLam.Comp.hpp" class="idref" href="#ETransformPresAppLam.Comp.hpp"><span class="id" title="variable">hpp</span></a> : (<span class="id" title="keyword">∀</span> <a id="p:413" class="idref" href="#p:413"><span class="id" title="binder">p</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.post"><span class="id" title="projection">post</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:413"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'"><span class="id" title="variable">o'</span></a>.(<a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:413"><span class="id" title="variable">p</span></a>)).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Local Obligation</span> <span class="id" title="keyword">Tactic</span> := <span class="id" title="tactic">idtac</span>.<br/>

<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;#[<span class="id" title="var">global</span>]<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Instance</span> <a id="ETransformPresAppLam.compose" class="idref" href="#ETransformPresAppLam.compose"><span class="id" title="instance">compose</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.t"><span class="id" title="class">t</span></a> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">Transform.compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'"><span class="id" title="variable">o'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.hpp"><span class="id" title="variable">hpp</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp"><span class="id" title="variable">is_etaexp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.is_etaexp''"><span class="id" title="variable">is_etaexp''</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pr</span>, <span class="id" title="var">pr'</span>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <span class="id" title="var">p</span> <span class="id" title="var">pr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_pre_irrel"><span class="id" title="method">transform_pre_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">intros</span> <span class="id" title="var">p0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_pre_irrel"><span class="id" title="method">transform_pre_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [] []; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span> &lt;-; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_env_irrel"><span class="id" title="method">transform_env_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_env_irrel"><span class="id" title="method">transform_env_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cr</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tro</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">cr</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">cr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tro</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">tro</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">tro</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> (<span class="id" title="tactic">destruct</span> <span class="id" title="var">tro</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">cr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_etaexp"><span class="id" title="method">transform_etaexp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_etaexp"><span class="id" title="method">transform_etaexp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">pr</span> <span class="id" title="var">iseta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_app"><span class="id" title="method">transform_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pr</span> <span class="id" title="var">iseta</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pr'</span> [<span class="id" title="var">pr''</span> <span class="id" title="var">heq</span>]]. <span class="id" title="tactic">∃</span> <span class="id" title="var">pr'</span>, <span class="id" title="var">pr''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pro'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_app"><span class="id" title="method">transform_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pro'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr'</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_env_irrel"><span class="id" title="method">transform_env_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}<span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">replace</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr'</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr'</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_etaexp"><span class="id" title="method">transform_etaexp</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">clear</span>; <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">prt</span> [<span class="id" title="var">pru</span> <span class="id" title="var">heq'</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq'</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">heq'</span>; <span class="id" title="var">revert</span> <span class="id" title="var">prt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <span class="id" title="var">_</span> <span class="id" title="var">pr'</span>) ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">prt</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_pre_irrel"><span class="id" title="method">transform_pre_irrel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">heq'</span>; <span class="id" title="var">revert</span> <span class="id" title="var">pru</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pr''</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_env_irrel"><span class="id" title="method">transform_env_irrel</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o"><span class="id" title="variable">o</span></a> <span class="id" title="var">_</span> <span class="id" title="var">pr''</span>) ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pru</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_pre_irrel"><span class="id" title="method">transform_pre_irrel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.o'ext"><span class="id" title="variable">o'ext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_lam"><span class="id" title="method">transform_lam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>), <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp.oext"><span class="id" title="variable">oext</span></a>.(<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.transform_lam"><span class="id" title="method">transform_lam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam.Comp"><span class="id" title="section">Comp</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ETransformPresAppLam"><span class="id" title="module">ETransformPresAppLam</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#"><span class="id" title="module">EWellformed</span></a>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="compile_evalue_box_strip" class="idref" href="#compile_evalue_box_strip"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a id="f330aa792ad4e8f5fdf1f36205d8b814" class="idref" href="#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="binder">Σ</span></a> (<a id="t:416" class="idref" href="#t:416"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) (<a id="acc:417" class="idref" href="#acc:417"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:416"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <span class="id" title="var">f</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip:418"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">f</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip:418"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:417"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_inductive_pars"><span class="id" title="definition">lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">Kernames.inductive_mind</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">npars</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <span class="id" title="var">npars</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:417"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> "error"<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> "error"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="compile_evalue_box" class="idref" href="#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> (<a id="t:420" class="idref" href="#t:420"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) (<a id="acc:421" class="idref" href="#acc:421"><span class="id" title="binder">acc</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:420"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <span class="id" title="var">f</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box:422"><span class="id" title="definition">compile_evalue_box</span></a> <span class="id" title="var">f</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box:422"><span class="id" title="definition">compile_evalue_box</span></a> <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:421"><span class="id" title="variable">acc</span></a>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:421"><span class="id" title="variable">acc</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> "error"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_value_box_mkApps" class="idref" href="#compile_value_box_mkApps"><span class="id" title="lemma">compile_value_box_mkApps</span></a> {<a id="7630b03f2bf9f9a069a1b9ed3a5d2cb3" class="idref" href="#7630b03f2bf9f9a069a1b9ed3a5d2cb3"><span class="id" title="binder">Σ</span></a> <a id="i:425" class="idref" href="#i:425"><span class="id" title="binder">i</span></a> <a id="n:426" class="idref" href="#n:426"><span class="id" title="binder">n</span></a> <a id="ui:427" class="idref" href="#ui:427"><span class="id" title="binder">ui</span></a> <a id="args:428" class="idref" href="#args:428"><span class="id" title="binder">args</span></a> <a id="npars:429" class="idref" href="#npars:429"><span class="id" title="binder">npars</span></a> <a id="acc:430" class="idref" href="#acc:430"><span class="id" title="binder">acc</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_lookup_inductive_pars"><span class="id" title="definition">pcuic_lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7630b03f2bf9f9a069a1b9ed3a5d2cb3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:429"><span class="id" title="variable">npars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7630b03f2bf9f9a069a1b9ed3a5d2cb3"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">PCUICAst.mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tConstruct"><span class="id" title="constructor">PCUICAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:426"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ui:427"><span class="id" title="variable">ui</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:428"><span class="id" title="variable">args</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:430"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:425"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:426"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:429"><span class="id" title="variable">npars</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#7630b03f2bf9f9a069a1b9ed3a5d2cb3"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:428"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:430"><span class="id" title="variable">acc</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">acc</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">PCUICAstUtils.mkApps_app</span></a> /=. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHargs</span> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> /= -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> /=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_evalue_box_strip_mkApps" class="idref" href="#compile_evalue_box_strip_mkApps"><span class="id" title="lemma">compile_evalue_box_strip_mkApps</span></a> {<a id="790f7a461bb9df3cbf16e2ea7438ce41" class="idref" href="#790f7a461bb9df3cbf16e2ea7438ce41"><span class="id" title="binder">Σ</span></a> <a id="i:432" class="idref" href="#i:432"><span class="id" title="binder">i</span></a> <a id="n:433" class="idref" href="#n:433"><span class="id" title="binder">n</span></a> <a id="ui:434" class="idref" href="#ui:434"><span class="id" title="binder">ui</span></a> <a id="args:435" class="idref" href="#args:435"><span class="id" title="binder">args</span></a> <a id="acc:436" class="idref" href="#acc:436"><span class="id" title="binder">acc</span></a> <a id="npars:437" class="idref" href="#npars:437"><span class="id" title="binder">npars</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_inductive_pars"><span class="id" title="definition">lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#790f7a461bb9df3cbf16e2ea7438ce41"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">Kernames.inductive_mind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:432"><span class="id" title="variable">i</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:437"><span class="id" title="variable">npars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#790f7a461bb9df3cbf16e2ea7438ce41"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:432"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:433"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ui:434"><span class="id" title="variable">ui</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:435"><span class="id" title="variable">args</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:436"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:432"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:433"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:437"><span class="id" title="variable">npars</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#790f7a461bb9df3cbf16e2ea7438ce41"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:435"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:436"><span class="id" title="variable">acc</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">acc</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span> <span class="id" title="var">hl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">EAstUtils.mkApps_app</span></a> /=. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHargs</span> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> /= -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> /=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_evalue_box_mkApps" class="idref" href="#compile_evalue_box_mkApps"><span class="id" title="lemma">compile_evalue_box_mkApps</span></a> {<a id="i:438" class="idref" href="#i:438"><span class="id" title="binder">i</span></a> <a id="n:439" class="idref" href="#n:439"><span class="id" title="binder">n</span></a> <a id="ui:440" class="idref" href="#ui:440"><span class="id" title="binder">ui</span></a> <a id="args:441" class="idref" href="#args:441"><span class="id" title="binder">args</span></a> <a id="acc:442" class="idref" href="#acc:442"><span class="id" title="binder">acc</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:438"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:439"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ui:440"><span class="id" title="variable">ui</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:441"><span class="id" title="variable">args</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:442"><span class="id" title="variable">acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:438"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:439"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#args:441"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#acc:442"><span class="id" title="variable">acc</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">acc</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">EAstUtils.mkApps_app</span></a> /=. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHargs</span> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> /= -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> /=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Derive</span> <span class="id" title="var">Signature</span> <span class="id" title="keyword">for</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="PCUICenv" class="idref" href="#PCUICenv"><span class="id" title="section">PCUICenv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment"><span class="id" title="module">PCUICEnvironment</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="pres_inductives_lookup" class="idref" href="#pres_inductives_lookup"><span class="id" title="lemma">pres_inductives_lookup</span></a> <a id="f8c71387e5e6967f482462e508595a26" class="idref" href="#f8c71387e5e6967f482462e508595a26"><span class="id" title="binder">Σ</span></a> <a id="c6a8d26c269496ee12dc60164f3e95b5" class="idref" href="#c6a8d26c269496ee12dc60164f3e95b5"><span class="id" title="binder">Σ'</span></a> <a id="i:445" class="idref" href="#i:445"><span class="id" title="binder">i</span></a> <a id="n:446" class="idref" href="#n:446"><span class="id" title="binder">n</span></a> <a id="mdecl:447" class="idref" href="#mdecl:447"><span class="id" title="binder">mdecl</span></a> <a id="idecl:448" class="idref" href="#idecl:448"><span class="id" title="binder">idecl</span></a> <a id="cdecl:449" class="idref" href="#cdecl:449"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f8c71387e5e6967f482462e508595a26"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_preserves_inductives"><span class="id" title="definition">erase_preserves_inductives</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f8c71387e5e6967f482462e508595a26"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c6a8d26c269496ee12dc60164f3e95b5"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f8c71387e5e6967f482462e508595a26"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:445"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:446"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#mdecl:447"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#idecl:448"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cdecl:449"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="npars:450" class="idref" href="#npars:450"><span class="id" title="binder">npars</span></a> <a id="nargs:451" class="idref" href="#nargs:451"><span class="id" title="binder">nargs</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c6a8d26c269496ee12dc60164f3e95b5"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:445"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:446"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:450"><span class="id" title="variable">npars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nargs:451"><span class="id" title="variable">nargs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:450"><span class="id" title="variable">npars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#mdecl:447"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">ind_npars</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nargs:451"><span class="id" title="variable">nargs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cdecl:449"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_arity"><span class="id" title="projection">cstr_arity</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">he</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[<span class="id" title="var">declm</span> <span class="id" title="var">decli</span>] <span class="id" title="var">declc</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_minductive_to_gen"><span class="id" title="lemma">declared_minductive_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">declm</span>. 3:<span class="id" title="tactic">exact</span> <span class="id" title="keyword">wf</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">declm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">npars</span> <span class="id" title="var">nargs</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">EGlobalEnv.lookup_constructor</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">EGlobalEnv.lookup_inductive</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">EGlobalEnv.lookup_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">e</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">he</span> <span class="id" title="tactic">in</span> <span class="id" title="var">declm</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">m</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">decli</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">declc</span> /=. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#PCUICenv"><span class="id" title="section">PCUICenv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_constructor_pars_args_lookup_inductive_pars" class="idref" href="#lookup_constructor_pars_args_lookup_inductive_pars"><span class="id" title="lemma">lookup_constructor_pars_args_lookup_inductive_pars</span></a> <a id="fed35e34b702cc992cf9b0f71c4922ad" class="idref" href="#fed35e34b702cc992cf9b0f71c4922ad"><span class="id" title="binder">Σ</span></a> <a id="i:453" class="idref" href="#i:453"><span class="id" title="binder">i</span></a> <a id="n:454" class="idref" href="#n:454"><span class="id" title="binder">n</span></a> <a id="npars:455" class="idref" href="#npars:455"><span class="id" title="binder">npars</span></a> <a id="nargs:456" class="idref" href="#nargs:456"><span class="id" title="binder">nargs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fed35e34b702cc992cf9b0f71c4922ad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:453"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#n:454"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:455"><span class="id" title="variable">npars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nargs:456"><span class="id" title="variable">nargs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">EGlobalEnv.lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fed35e34b702cc992cf9b0f71c4922ad"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">Kernames.inductive_mind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#i:453"><span class="id" title="variable">i</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:455"><span class="id" title="variable">npars</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">EGlobalEnv.lookup_inductive_pars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">EGlobalEnv.lookup_constructor</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">EGlobalEnv.lookup_inductive</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">EGlobalEnv.lookup_minductive</span></a> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //=. <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //=. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_evalue_erase" class="idref" href="#compile_evalue_erase"><span class="id" title="lemma">compile_evalue_erase</span></a> (<a id="61011ff107733f0ee1fd3850c12323e1" class="idref" href="#61011ff107733f0ee1fd3850c12323e1"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICAst.PCUICEnvironment.global_env_ext</span></a>) (<a id="705b8c37c907ed59bd847ece80b8369b" class="idref" href="#705b8c37c907ed59bd847ece80b8369b"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>) <a id="v:459" class="idref" href="#v:459"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#61011ff107733f0ee1fd3850c12323e1"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#61011ff107733f0ee1fd3850c12323e1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:459"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#705b8c37c907ed59bd847ece80b8369b"><span class="id" title="variable">Σ'</span></a> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:459"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_preserves_inductives"><span class="id" title="definition">erase_preserves_inductives</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fst_ctx"><span class="id" title="definition">PCUICAst.PCUICEnvironment.fst_ctx</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#61011ff107733f0ee1fd3850c12323e1"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#705b8c37c907ed59bd847ece80b8369b"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#705b8c37c907ed59bd847ece80b8369b"><span class="id" title="variable">Σ'</span></a> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:459"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fst_ctx"><span class="id" title="definition">PCUICAst.PCUICEnvironment.fst_ctx</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#61011ff107733f0ee1fd3850c12323e1"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:459"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="keyword">wf</span> <span class="id" title="var">fo</span> <span class="id" title="var">fo'</span> <span class="id" title="var">hΣ</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">v</span> <span class="id" title="var">fo</span> <span class="id" title="var">fo'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_inds"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">ui</span> <span class="id" title="var">u</span> <span class="id" title="var">args</span> <span class="id" title="var">pandi</span> <span class="id" title="var">hty</span> <span class="id" title="var">hargs</span> <span class="id" title="var">ih</span> <span class="id" title="var">isp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#Construct_Ind_ind_eq'"><span class="id" title="lemma">PCUICInductiveInversion.Construct_Ind_ind_eq'</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> [<span class="id" title="var">cdecl</span> [<span class="id" title="var">declc</span> <span class="id" title="var">_</span>]]]] ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase_mkApps"><span class="id" title="lemma">compile_value_erase_mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fo'</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">fo'</span>. <span class="id" title="var">EAstUtils.solve_discr</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H1</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">npars</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICAst.PCUICEnvironment.ind_npars</span></a> <span class="id" title="var">mdecl</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pres_inductives_lookup"><span class="id" title="lemma">pres_inductives_lookup</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">declc</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">npars</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box_mkApps"><span class="id" title="lemma">compile_value_box_mkApps</span></a> (<span class="id" title="var">npars</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICAst.PCUICEnvironment.ind_npars</span></a> <span class="id" title="var">mdecl</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">declc</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">declm</span> <span class="id" title="var">decli</span>] <span class="id" title="var">declc</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_minductive_to_gen"><span class="id" title="lemma">declared_minductive_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">declm</span>. 3:<span class="id" title="tactic">exact</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_minductive_gen"><span class="id" title="definition">PCUICAst.declared_minductive_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">declm</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_lookup_inductive_pars"><span class="id" title="definition">pcuic_lookup_inductive_pars</span></a> // <span class="id" title="var">declm</span> //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip_mkApps"><span class="id" title="lemma">compile_evalue_box_strip_mkApps</span></a> (<span class="id" title="var">npars</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICAst.PCUICEnvironment.ind_npars</span></a> <span class="id" title="var">mdecl</span>)) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_inductive_pars_spec"><span class="id" title="lemma">lookup_inductive_pars_spec</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_lookup_inductive_pars"><span class="id" title="lemma">lookup_constructor_pars_args_lookup_inductive_pars</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map_inv"><span class="id" title="lemma">Forall_map_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_skipn"><span class="id" title="lemma">Forall_skipn</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICAst.PCUICEnvironment.ind_npars</span></a> <span class="id" title="var">mdecl</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_constructor_pars_args_nopars" class="idref" href="#lookup_constructor_pars_args_nopars"><span class="id" title="lemma">lookup_constructor_pars_args_nopars</span></a> {<a id="efl:460" class="idref" href="#efl:460"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} <a id="cbb97f04bec95e53a257c92043e36147" class="idref" href="#cbb97f04bec95e53a257c92043e36147"><span class="id" title="binder">Σ</span></a> <a id="ind:462" class="idref" href="#ind:462"><span class="id" title="binder">ind</span></a> <a id="c:463" class="idref" href="#c:463"><span class="id" title="binder">c</span></a> <a id="npars:464" class="idref" href="#npars:464"><span class="id" title="binder">npars</span></a> <a id="nargs:465" class="idref" href="#nargs:465"><span class="id" title="binder">nargs</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cbb97f04bec95e53a257c92043e36147"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cbb97f04bec95e53a257c92043e36147"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ind:462"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c:463"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:464"><span class="id" title="variable">npars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nargs:465"><span class="id" title="variable">nargs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#npars:464"><span class="id" title="variable">npars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">EGlobalEnv.lookup_constructor</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">e</span> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">m</span> <span class="id" title="var">i</span>] <span class="id" title="var">cb</span>]. <span class="id" title="tactic">intros</span> [= &lt;- &lt;-].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_constructor_pars"><span class="id" title="lemma">EConstructorsAsBlocks.wellformed_lookup_constructor_pars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_evalue_box_firstorder" class="idref" href="#compile_evalue_box_firstorder"><span class="id" title="lemma">compile_evalue_box_firstorder</span></a> {<a id="efl:466" class="idref" href="#efl:466"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="e216464ee7b17b8673db7394fbd33369" class="idref" href="#e216464ee7b17b8673db7394fbd33369"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>} <a id="v:468" class="idref" href="#v:468"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">EWellformed.wf_glob</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#e216464ee7b17b8673db7394fbd33369"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#e216464ee7b17b8673db7394fbd33369"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:468"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#e216464ee7b17b8673db7394fbd33369"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:468"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hpars</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">v</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_mkApps"><span class="id" title="lemma">compile_evalue_box_mkApps</span></a>) // ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">H'</span> := <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_nopars"><span class="id" title="lemma">lookup_constructor_pars_args_nopars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">npars</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">ELiftSubst.solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fo_evalue" class="idref" href="#fo_evalue"><span class="id" title="definition">fo_evalue</span></a> (<a id="p:469" class="idref" href="#p:469"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#E.global_context"><span class="id" title="abbreviation">E.global_context</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:469"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:469"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="fo_evalue_map" class="idref" href="#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> (<a id="p:470" class="idref" href="#p:470"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:470"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:470"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="rebuild_wf_env_transform_pres_fo" class="idref" href="#rebuild_wf_env_transform_pres_fo"><span class="id" title="instance">rebuild_wf_env_transform_pres_fo</span></a> {<a id="fl:471" class="idref" href="#fl:471"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="efl:472" class="idref" href="#efl:472"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} <a id="we:473" class="idref" href="#we:473"><span class="id" title="binder">we</span></a> <a id="wf:474" class="idref" href="#wf:474"><span class="id" title="binder">wf</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#we:473"><span class="id" title="variable">we</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wf:474"><span class="id" title="variable">wf</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> (<span class="id" title="keyword">fun</span> <a id="p:475" class="idref" href="#p:475"><span class="id" title="binder">p</span></a> <a id="pr:476" class="idref" href="#pr:476"><span class="id" title="binder">pr</span></a> <a id="fo:477" class="idref" href="#fo:477"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env"><span class="id" title="definition">rebuild_wf_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:475"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:476"><span class="id" title="variable">pr.p1</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_eta_app" class="idref" href="#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> (<a id="p:478" class="idref" href="#p:478"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#E.global_context"><span class="id" title="abbreviation">E.global_context</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">EEtaExpanded.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:478"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:478"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="is_eta_app_map" class="idref" href="#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> (<a id="p:479" class="idref" href="#p:479"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">EEtaExpanded.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:479"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:479"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="is_eta_fix_app" class="idref" href="#is_eta_fix_app"><span class="id" title="definition">is_eta_fix_app</span></a> (<a id="p:480" class="idref" href="#p:480"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#E.global_context"><span class="id" title="abbreviation">E.global_context</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp"><span class="id" title="definition">EEtaExpandedFix.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:480"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:480"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
<span class="id" title="keyword">Definition</span> <a id="is_eta_fix_app_map" class="idref" href="#is_eta_fix_app_map"><span class="id" title="definition">is_eta_fix_app_map</span></a> (<a id="p:481" class="idref" href="#p:481"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a>) : <span class="id" title="keyword">Prop</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp"><span class="id" title="definition">EEtaExpandedFix.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:481"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:481"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="rebuild_wf_env_transform_pres_app" class="idref" href="#rebuild_wf_env_transform_pres_app"><span class="id" title="instance">rebuild_wf_env_transform_pres_app</span></a> {<a id="fl:482" class="idref" href="#fl:482"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="efl:483" class="idref" href="#efl:483"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} <a id="we:484" class="idref" href="#we:484"><span class="id" title="binder">we</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#we:484"><span class="id" title="variable">we</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">ctx</span> <span class="id" title="var">t</span>] [<span class="id" title="var">ctx'</span> <span class="id" title="var">t'</span>] <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span> /= <span class="id" title="var">eq</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">pr'</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eq</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[? ?] ?]; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>|]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">we</span> ⇒ //=. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>). <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H1</span> ⇒ [] ? ?. <span class="id" title="tactic">apply</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[? ?] ?]; <span class="id" title="tactic">split</span>; [<span class="id" title="tactic">split</span>|]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">we</span> ⇒ //=. <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">h</span>). <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H1</span> ⇒ [] ?. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_tApp_arg"><span class="id" title="lemma">EEtaExpanded.isEtaExp_tApp_arg</span></a> ⇒ <span class="id" title="var">etau</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_glob_lookup_inductive_pars" class="idref" href="#wf_glob_lookup_inductive_pars"><span class="id" title="lemma">wf_glob_lookup_inductive_pars</span></a> {<a id="efl:485" class="idref" href="#efl:485"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} (<a id="b45f4ed9379d79f9e054122d9b028e67" class="idref" href="#b45f4ed9379d79f9e054122d9b028e67"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.Extract.html#E.global_context"><span class="id" title="abbreviation">E.global_context</span></a>) (<a id="kn:487" class="idref" href="#kn:487"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#kername"><span class="id" title="definition">Kernames.kername</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b45f4ed9379d79f9e054122d9b028e67"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="pars:488" class="idref" href="#pars:488"><span class="id" title="binder">pars</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">EGlobalEnv.lookup_inductive_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b45f4ed9379d79f9e054122d9b028e67"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:487"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pars:488"><span class="id" title="variable">pars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pars:488"><span class="id" title="variable">pars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">EGlobalEnv.lookup_inductive_pars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">EGlobalEnv.lookup_minductive</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">e</span> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_inductive_pars"><span class="id" title="lemma">EConstructorsAsBlocks.wellformed_lookup_inductive_pars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> ⇒ //. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="inline_projections_optimization_pres" class="idref" href="#inline_projections_optimization_pres"><span class="id" title="instance">inline_projections_optimization_pres</span></a> {<a id="fl:489" class="idref" href="#fl:489"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>}<br/>
&nbsp;(<a id="efl:490" class="idref" href="#efl:490"><span class="id" title="binder">efl</span></a> := <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#switch_no_params"><span class="id" title="definition">EInlineProjections.switch_no_params</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#all_env_flags"><span class="id" title="definition">all_env_flags</span></a>) {<a id="wcon:491" class="idref" href="#wcon:491"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_rel:492" class="idref" href="#has_rel:492"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:493" class="idref" href="#has_box:493"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:491"><span class="id" title="variable">wcon</span></a>) (<span class="id" title="var">hastrel</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:492"><span class="id" title="variable">has_rel</span></a>) (<span class="id" title="var">hastbox</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_box:493"><span class="id" title="variable">has_box</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a> (<span class="id" title="keyword">fun</span> <a id="p:494" class="idref" href="#p:494"><span class="id" title="binder">p</span></a> <a id="pr:495" class="idref" href="#pr:495"><span class="id" title="binder">pr</span></a> <a id="fo:496" class="idref" href="#fo:496"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_env"><span class="id" title="definition">EInlineProjections.optimize_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:494"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:494"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [] <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pr</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pr</span> <span class="id" title="keyword">wf</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="keyword">wf</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span> <span class="id" title="var">fo</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#lookup_constructor_optimize"><span class="id" title="lemma">EInlineProjections.lookup_constructor_optimize</span></a> //. <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">h</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a>. <span class="id" title="tactic">intros</span> [] <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_program"><span class="id" title="definition">EInlineProjections.optimize_program</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">pr</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_nopars"><span class="id" title="lemma">lookup_constructor_pars_args_nopars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">tea</span> ⇒ //. <span class="id" title="tactic">subst</span> <span class="id" title="var">npars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_mkApps"><span class="id" title="lemma">EInlineProjections.optimize_mkApps</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#"><span class="id" title="module">EAstUtils</span></a>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="inline_projections_optimization_pres_app" class="idref" href="#inline_projections_optimization_pres_app"><span class="id" title="instance">inline_projections_optimization_pres_app</span></a> {<a id="fl:497" class="idref" href="#fl:497"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>}<br/>
&nbsp;(<a id="efl:498" class="idref" href="#efl:498"><span class="id" title="binder">efl</span></a> := <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#switch_no_params"><span class="id" title="definition">EInlineProjections.switch_no_params</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#all_env_flags"><span class="id" title="definition">all_env_flags</span></a>) {<a id="wcon:499" class="idref" href="#wcon:499"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_rel:500" class="idref" href="#has_rel:500"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:501" class="idref" href="#has_box:501"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:499"><span class="id" title="variable">wcon</span></a>) (<span class="id" title="var">hastrel</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:500"><span class="id" title="variable">has_rel</span></a>) (<span class="id" title="var">hastbox</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_box:501"><span class="id" title="variable">has_box</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">t</span>] [<span class="id" title="var">ctx'</span> <span class="id" title="var">t'</span>] <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span> <span class="id" title="var">eq</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">pr'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span> <span class="id" title="var">ctx'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">env</span> <span class="id" title="var">p</span> <span class="id" title="var">pr</span> ⇒ /= <span class="id" title="var">eta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpanded.expanded_isEtaExp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_expanded_irrel"><span class="id" title="lemma">EInlineProjections.optimize_expanded_irrel</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_expanded"><span class="id" title="lemma">EInlineProjections.optimize_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpanded.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">pr</span> <span class="id" title="var">u</span> <span class="id" title="var">pru</span> ⇒ /=. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>. <span class="id" title="var">cbn</span> ⇒ <span class="id" title="var">etapr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pru</span> <span class="id" title="keyword">as</span> [[] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ []. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H1</span> ⇒ [] <span class="id" title="var">etactx</span> <span class="id" title="var">etaapp</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ []. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H1</span> ⇒ [] <span class="id" title="var">etactx</span> <span class="id" title="var">etaapp</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_tApp_arg"><span class="id" title="lemma">EEtaExpanded.isEtaExp_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">etaapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>] <span class="id" title="var">pr</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">pr</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.EInduction.html#MkAppsInd.rec"><span class="id" title="definition">EInduction.MkAppsInd.rec</span></a> ⇒ //= <span class="id" title="var">t</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_mkApps"><span class="id" title="lemma">EInlineProjections.optimize_mkApps</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_case"><span class="id" title="lemma">rev_case</span></a> ⇒ //. <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_assoc"><span class="id" title="lemma">orb_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#or3P"><span class="id" title="lemma">or3P</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#or3P"><span class="id" title="lemma">or3P</span></a>: <span class="id" title="var">H1</span> ⇒ []; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="remove_match_on_box_pres" class="idref" href="#remove_match_on_box_pres"><span class="id" title="instance">remove_match_on_box_pres</span></a> {<a id="fl:502" class="idref" href="#fl:502"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="efl:503" class="idref" href="#efl:503"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="wcon:504" class="idref" href="#wcon:504"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_rel:505" class="idref" href="#has_rel:505"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:506" class="idref" href="#has_box:506"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:504"><span class="id" title="variable">wcon</span></a>) (<span class="id" title="var">hastrel</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:505"><span class="id" title="variable">has_rel</span></a>) (<span class="id" title="var">hastbox</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_box:506"><span class="id" title="variable">has_box</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a> (<span class="id" title="keyword">fun</span> <a id="p:507" class="idref" href="#p:507"><span class="id" title="binder">p</span></a> <a id="pr:508" class="idref" href="#pr:508"><span class="id" title="binder">pr</span></a> <a id="fo:509" class="idref" href="#fo:509"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_env"><span class="id" title="definition">EOptimizePropDiscr.remove_match_on_box_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:507"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:507"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a>; <span class="id" title="tactic">intros</span> [] <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pr</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pr</span> <span class="id" title="keyword">wf</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="keyword">wf</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">EGlobalEnv.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#lookup_constructor_remove_match_on_box"><span class="id" title="lemma">EOptimizePropDiscr.lookup_constructor_remove_match_on_box</span></a> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [] <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_program"><span class="id" title="definition">EOptimizePropDiscr.remove_match_on_box_program</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">pr</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_nopars"><span class="id" title="lemma">lookup_constructor_pars_args_nopars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">tea</span> ⇒ //. <span class="id" title="tactic">subst</span> <span class="id" title="var">npars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_mkApps"><span class="id" title="lemma">EOptimizePropDiscr.remove_match_on_box_mkApps</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="remove_match_on_box_pres_app" class="idref" href="#remove_match_on_box_pres_app"><span class="id" title="instance">remove_match_on_box_pres_app</span></a> {<a id="fl:510" class="idref" href="#fl:510"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="efl:511" class="idref" href="#efl:511"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="wcon:512" class="idref" href="#wcon:512"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_rel:513" class="idref" href="#has_rel:513"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:514" class="idref" href="#has_box:514"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:512"><span class="id" title="variable">wcon</span></a>) (<span class="id" title="var">hastrel</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:513"><span class="id" title="variable">has_rel</span></a>) (<span class="id" title="var">hastbox</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_box:514"><span class="id" title="variable">has_box</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> [] [] <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">p</span> ⇒ /=. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">isapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpanded.expanded_isEtaExp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_expanded_irrel"><span class="id" title="lemma">EOptimizePropDiscr.remove_match_on_box_expanded_irrel</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_expanded"><span class="id" title="lemma">EOptimizePropDiscr.remove_match_on_box_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpanded.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">pr</span> ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> /= ⇒ <span class="id" title="var">isapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">pr'</span>]; <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">pr'</span> ⇒ [] <span class="id" title="var">etactx</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">pr'</span>]; <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">pr'</span> ⇒ [] <span class="id" title="var">etactx</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_tApp_arg"><span class="id" title="lemma">EEtaExpanded.isEtaExp_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_program"><span class="id" title="definition">EOptimizePropDiscr.remove_match_on_box_program</span></a> /=.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>] <span class="id" title="var">pr</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">t</span>. <span class="id" title="var">revert</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.EInduction.html#MkAppsInd.rec"><span class="id" title="definition">EInduction.MkAppsInd.rec</span></a> ⇒ //= <span class="id" title="var">t</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_mkApps"><span class="id" title="lemma">EOptimizePropDiscr.remove_match_on_box_mkApps</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_case"><span class="id" title="lemma">rev_case</span></a> ⇒ //. <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_assoc"><span class="id" title="lemma">orb_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#or3P"><span class="id" title="lemma">or3P</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#or3P"><span class="id" title="lemma">or3P</span></a>: <span class="id" title="var">H1</span> ⇒ []; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="remove_params_optimization_pres" class="idref" href="#remove_params_optimization_pres"><span class="id" title="instance">remove_params_optimization_pres</span></a> {<a id="fl:515" class="idref" href="#fl:515"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="wcon:516" class="idref" href="#wcon:516"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:516"><span class="id" title="variable">wcon</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue"><span class="id" title="definition">fo_evalue</span></a> (<span class="id" title="keyword">fun</span> <a id="p:517" class="idref" href="#p:517"><span class="id" title="binder">p</span></a> <a id="pr:518" class="idref" href="#pr:518"><span class="id" title="binder">pr</span></a> <a id="fo:519" class="idref" href="#fo:519"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_env"><span class="id" title="definition">ERemoveParams.strip_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:517"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:517"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:517"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">pr</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a>] <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">move</span>: <span class="id" title="var">t1</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_mkApps"><span class="id" title="lemma">ERemoveParams.strip_mkApps</span></a> //. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">EGlobalEnv.lookup_inductive_pars</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_lookup_inductive_pars"><span class="id" title="lemma">lookup_constructor_pars_args_lookup_inductive_pars</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#lookup_constructor_pars_args_strip"><span class="id" title="lemma">ERemoveParams.lookup_constructor_pars_args_strip</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#length_skipn"><span class="id" title="lemma">length_skipn</span></a>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="remove_params_optimization_pres_app" class="idref" href="#remove_params_optimization_pres_app"><span class="id" title="instance">remove_params_optimization_pres_app</span></a> {<a id="fl:520" class="idref" href="#fl:520"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} {<a id="wcon:521" class="idref" href="#wcon:521"><span class="id" title="binder">wcon</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a> (<span class="id" title="var">wcon</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wcon:521"><span class="id" title="variable">wcon</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> [] [] <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">p</span> ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> /= /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_app"><span class="id" title="definition">compile_app</span></a> ⇒ <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpanded.expanded_isEtaExp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_expanded"><span class="id" title="lemma">ERemoveParams.strip_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpanded.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">pr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> /= /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_app"><span class="id" title="definition">compile_app</span></a> ⇒ <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">pr'</span>]; <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">pr'</span> ⇒ [] <span class="id" title="var">etactx</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[] <span class="id" title="var">pr'</span>]; <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">pr'</span> ⇒ [] <span class="id" title="var">etactx</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_tApp_arg"><span class="id" title="lemma">EEtaExpanded.isEtaExp_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_program"><span class="id" title="definition">ERemoveParams.strip_program</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_mkApps_etaexp"><span class="id" title="lemma">ERemoveParams.strip_mkApps_etaexp</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>] <span class="id" title="var">pr</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">t</span>. <span class="id" title="var">revert</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.EInduction.html#MkAppsInd.rec"><span class="id" title="definition">EInduction.MkAppsInd.rec</span></a> ⇒ //= <span class="id" title="var">t</span> <span class="id" title="var">u</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">napp</span> <span class="id" title="var">nnil</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">IH</span> <span class="id" title="var">IHargs</span> <span class="id" title="var">isl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_mkApps"><span class="id" title="lemma">ERemoveParams.strip_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">EEtaExpanded.construct_viewc</span></a> ⇒ //=; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.Typed.OptimizeCorrectness.html#isLambda_mkApps"><span class="id" title="lemma">OptimizeCorrectness.isLambda_mkApps</span></a> //= <span class="id" title="tactic">in</span> <span class="id" title="var">isl</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.Typed.OptimizeCorrectness.html#isLambda_mkApps"><span class="id" title="lemma">OptimizeCorrectness.isLambda_mkApps</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span> ⇒ //=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="constructors_as_blocks_transformation_pres" class="idref" href="#constructors_as_blocks_transformation_pres"><span class="id" title="instance">constructors_as_blocks_transformation_pres</span></a> {<a id="efl:522" class="idref" href="#efl:522"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EWellformed.EEnvFlags</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_app:523" class="idref" href="#has_app:523"><span class="id" title="binder">has_app</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a>} {<a id="has_rel:524" class="idref" href="#has_rel:524"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="hasbox:525" class="idref" href="#hasbox:525"><span class="id" title="binder">hasbox</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} {<a id="has_pars:526" class="idref" href="#has_pars:526"><span class="id" title="binder">has_pars</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} {<a id="has_cstrblocks:527" class="idref" href="#has_cstrblocks:527"><span class="id" title="binder">has_cstrblocks</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#efl:522"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_app:523"><span class="id" title="variable">has_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:524"><span class="id" title="variable">has_rel</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#hasbox:525"><span class="id" title="variable">hasbox</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_pars:526"><span class="id" title="variable">has_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_cstrblocks:527"><span class="id" title="variable">has_cstrblocks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> (<span class="id" title="keyword">fun</span> <a id="p:531" class="idref" href="#p:531"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:531"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:531"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="p:528" class="idref" href="#p:528"><span class="id" title="binder">p</span></a> <a id="pr:529" class="idref" href="#pr:529"><span class="id" title="binder">pr</span></a> <a id="fo:530" class="idref" href="#fo:530"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:528"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:528"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block_transform"><span class="id" title="lemma">firstorder_evalue_block_transform</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_firstorder"><span class="id" title="lemma">compile_evalue_box_firstorder</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">pr</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ [<span class="id" title="var">Σ</span> <span class="id" title="var">v</span>] /= <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="keyword">wf</span> <span class="id" title="var">_</span>] <span class="id" title="var">_</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">v</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_program"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_program</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">EConstructorsAsBlocks.transform_blocks_decompose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">EAstUtils.decompose_app_mkApps</span></a> // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_mkApps"><span class="id" title="lemma">compile_evalue_box_mkApps</span></a> // ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_nopars"><span class="id" title="lemma">lookup_constructor_pars_args_nopars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ⇒ //. <span class="id" title="tactic">subst</span> <span class="id" title="var">npars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_all"><span class="id" title="lemma">EConstructorsAsBlocks.chop_all</span></a>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_program"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_program</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="var">now</span> <span class="id" title="var">noconf</span> <span class="id" title="var">a</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="constructors_as_blocks_transformation_pres_app" class="idref" href="#constructors_as_blocks_transformation_pres_app"><span class="id" title="instance">constructors_as_blocks_transformation_pres_app</span></a> {<a id="efl:532" class="idref" href="#efl:532"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EWellformed.EEnvFlags</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_app:533" class="idref" href="#has_app:533"><span class="id" title="binder">has_app</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a>} {<a id="has_rel:534" class="idref" href="#has_rel:534"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="hasbox:535" class="idref" href="#hasbox:535"><span class="id" title="binder">hasbox</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} {<a id="has_pars:536" class="idref" href="#has_pars:536"><span class="id" title="binder">has_pars</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} {<a id="has_cstrblocks:537" class="idref" href="#has_cstrblocks:537"><span class="id" title="binder">has_cstrblocks</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#efl:532"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_app:533"><span class="id" title="variable">has_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_rel:534"><span class="id" title="variable">has_rel</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#hasbox:535"><span class="id" title="variable">hasbox</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_pars:536"><span class="id" title="variable">has_pars</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_cstrblocks:537"><span class="id" title="variable">has_cstrblocks</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> [] [] <span class="id" title="var">pr</span> <span class="id" title="var">pr'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> &lt;-.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app"><span class="id" title="definition">is_eta_app</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> /= [] <span class="id" title="keyword">wf</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">exp</span> <span class="id" title="var">exp'</span> <span class="id" title="var">eta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">wf</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="keyword">wf</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H0</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_tApp_arg"><span class="id" title="lemma">EEtaExpanded.isEtaExp_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">exp'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_program"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_program</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">EConstructorsAsBlocks.transform_blocks_mkApps_eta_fn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>] <span class="id" title="var">pr</span>; <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">_</span> <span class="id" title="var">h</span>]. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">h</span> ⇒ [] <span class="id" title="var">_</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">t</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">l</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_inv"><span class="id" title="lemma">decompose_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.Typed.OptimizeCorrectness.html#isLambda_mkApps"><span class="id" title="lemma">OptimizeCorrectness.isLambda_mkApps</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps_napp"><span class="id" title="lemma">EEtaExpanded.isEtaExp_mkApps_napp</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">EEtaExpanded.construct_viewc</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [<span class="id" title="var">etat</span> <span class="id" title="var">etal</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !(<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">EConstructorsAsBlocks.transform_blocks_mkApps_eta_fn</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">l</span>) // !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head_mkApps"><span class="id" title="lemma">head_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span> ⇒ //=. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //=. <span class="id" title="var">all</span>:<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="guarded_to_unguarded_fix_pres" class="idref" href="#guarded_to_unguarded_fix_pres"><span class="id" title="instance">guarded_to_unguarded_fix_pres</span></a> {<a id="efl:538" class="idref" href="#efl:538"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EWellformed.EEnvFlags</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_guard:539" class="idref" href="#has_guard:539"><span class="id" title="binder">has_guard</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_guarded_fix"><span class="id" title="method">with_guarded_fix</span></a>} {<a id="has_cstrblocks:540" class="idref" href="#has_cstrblocks:540"><span class="id" title="binder">has_cstrblocks</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_cstrblocks:540"><span class="id" title="variable">has_cstrblocks</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#efl:538"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_guard:539"><span class="id" title="variable">has_guard</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="p:541" class="idref" href="#p:541"><span class="id" title="binder">p</span></a> <a id="pr:542" class="idref" href="#pr:542"><span class="id" title="binder">pr</span></a> <a id="fo:543" class="idref" href="#fo:543"><span class="id" title="binder">fo</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:541"><span class="id" title="variable">p</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="guarded_to_unguarded_fix_pres_app" class="idref" href="#guarded_to_unguarded_fix_pres_app"><span class="id" title="instance">guarded_to_unguarded_fix_pres_app</span></a> {<a id="efl:544" class="idref" href="#efl:544"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EWellformed.EEnvFlags</span></a>}<br/>
&nbsp;&nbsp;{<a id="has_guard:545" class="idref" href="#has_guard:545"><span class="id" title="binder">has_guard</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_guarded_fix"><span class="id" title="method">with_guarded_fix</span></a>} {<a id="has_cstrblocks:546" class="idref" href="#has_cstrblocks:546"><span class="id" title="binder">has_cstrblocks</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_cstrblocks:546"><span class="id" title="variable">has_cstrblocks</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#efl:544"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#has_guard:545"><span class="id" title="variable">has_guard</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_app_map"><span class="id" title="definition">is_eta_fix_app_map</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_app_map"><span class="id" title="definition">is_eta_fix_app_map</span></a> /<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_app_map"><span class="id" title="definition">is_eta_app_map</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExpFix_isEtaExp"><span class="id" title="lemma">EEtaExpanded.isEtaExpFix_isEtaExp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">pr</span> <span class="id" title="var">eta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">w</span> <span class="id" title="var">i</span>] [<span class="id" title="var">e</span> <span class="id" title="var">e0</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">i</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_expanded</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">i</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExpFix_tApp_arg"><span class="id" title="lemma">EEtaExpandedFix.isEtaExpFix_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_expanded</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lambdabox_pres_fo" class="idref" href="#lambdabox_pres_fo"><span class="id" title="lemma">lambdabox_pres_fo</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="compile_value:547" class="idref" href="#compile_value:547"><span class="id" title="binder">compile_value</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresFO.t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a> (<span class="id" title="keyword">fun</span> <a id="p:548" class="idref" href="#p:548"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:548"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:548"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value:547"><span class="id" title="variable">compile_value</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="p:549" class="idref" href="#p:549"><span class="id" title="binder">p</span></a> <a id="pr:550" class="idref" href="#pr:550"><span class="id" title="binder">pr</span></a> <a id="fo:551" class="idref" href="#fo:551"><span class="id" title="binder">fo</span></a>, <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value:547"><span class="id" title="variable">compile_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:549"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:550"><span class="id" title="variable">pr</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo:551"><span class="id" title="variable">fo</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> (<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:549"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:549"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresFO.compose</span></a>; <span class="id" title="var">tc</span>. <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span> <span class="id" title="var">pr</span> <span class="id" title="var">fo</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose_compile_fo_value"><span class="id" title="definition">ETransformPresFO.compose_compile_fo_value</span></a>; <span class="id" title="tactic">f_equal</span>. 2:<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresFO.compose</span></a>; <span class="id" title="var">tc</span>. <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose_compile_fo_value"><span class="id" title="definition">ETransformPresFO.compose_compile_fo_value</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresFO.compose</span></a>; <span class="id" title="var">tc</span>. <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose_compile_fo_value"><span class="id" title="definition">ETransformPresFO.compose_compile_fo_value</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresFO.compose</span></a>; <span class="id" title="var">tc</span>. <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose_compile_fo_value"><span class="id" title="definition">ETransformPresFO.compose_compile_fo_value</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresFO.compose</span></a>. <span class="id" title="var">shelve</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#remove_match_on_box_pres"><span class="id" title="instance">remove_match_on_box_pres</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose_compile_fo_value"><span class="id" title="definition">ETransformPresFO.compose_compile_fo_value</span></a>; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_env"><span class="id" title="definition">ERemoveParams.strip_env</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Instance</span> <a id="lambdabox_pres_app" class="idref" href="#lambdabox_pres_app"><span class="id" title="instance">lambdabox_pres_app</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t"><span class="id" title="class">ETransformPresAppLam.t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_app_map"><span class="id" title="definition">is_eta_fix_app_map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 5 (<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresAppLam.compose</span></a>; [<span class="id" title="var">shelve</span>| |<span class="id" title="var">tc</span>]).<br/>
&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#remove_match_on_box_pres_app"><span class="id" title="instance">remove_match_on_box_pres_app</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 (<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compose"><span class="id" title="instance">ETransformPresAppLam.compose</span></a>; [<span class="id" title="var">shelve</span>| |<span class="id" title="var">tc</span>]).<br/>
&nbsp;&nbsp;<span class="id" title="var">tc</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_function" class="idref" href="#expand_lets_function"><span class="id" title="lemma">expand_lets_function</span></a> (<a id="wfl:552" class="idref" href="#wfl:552"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;{<a id="guard_impl:553" class="idref" href="#guard_impl:553"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;(<a id="cf:554" class="idref" href="#cf:554"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="3347747aeb3c55a37cd79983795e3edb" class="idref" href="#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="K:556" class="idref" href="#K:556"><span class="id" title="binder">K</span></a> <a id="f:557" class="idref" href="#f:557"><span class="id" title="binder">f</span></a> <a id="na:558" class="idref" href="#na:558"><span class="id" title="binder">na</span></a> <a id="A:559" class="idref" href="#A:559"><span class="id" title="binder">A</span></a> <a id="B:560" class="idref" href="#B:560"><span class="id" title="binder">B</span></a><br/>
&nbsp;&nbsp;(<a id="wf:561" class="idref" href="#wf:561"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:557"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:558"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:559"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:560"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="pr:562" class="idref" href="#pr:562"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="f42155b7fe6ce14659811544dca5c0da" class="idref" href="#f42155b7fe6ce14659811544dca5c0da"><span class="id" title="binder">Σ'</span></a>, <a id="f':564" class="idref" href="#f':564"><span class="id" title="binder">f'</span></a>) := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:556"><span class="id" title="variable">K</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#3347747aeb3c55a37cd79983795e3edb"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:557"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:562"><span class="id" title="variable">pr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f42155b7fe6ce14659811544dca5c0da"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f':564"><span class="id" title="variable">f'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:558"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:559"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:560"><span class="id" title="variable">B</span></a>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>, <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[[]] ?].<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">PCUICExpandLetsCorrectness.pcuic_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_lambda_box_firstorder" class="idref" href="#transform_lambda_box_firstorder"><span class="id" title="lemma">transform_lambda_box_firstorder</span></a> (<a id="0f8c79076a6df5a5bc1db2fd3450ff96" class="idref" href="#0f8c79076a6df5a5bc1db2fd3450ff96"><span class="id" title="binder">Σer</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>) <a id="p:566" class="idref" href="#p:566"><span class="id" title="binder">p</span></a> <a id="pre:567" class="idref" href="#pre:567"><span class="id" title="binder">pre</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#0f8c79076a6df5a5bc1db2fd3450ff96"><span class="id" title="variable">Σer</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:566"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#0f8c79076a6df5a5bc1db2fd3450ff96"><span class="id" title="variable">Σer</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:566"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:567"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> (<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#0f8c79076a6df5a5bc1db2fd3450ff96"><span class="id" title="variable">Σer</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:566"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lambdabox_pres_fo"><span class="id" title="lemma">lambdabox_pres_fo</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">fn</span> [<span class="id" title="var">tr</span> <span class="id" title="var">hfn</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_fo"><span class="id" title="method">ETransformPresFO.transform_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">t</span>:=<span class="id" title="var">tr</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hfn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_lambda_box_eta_app" class="idref" href="#transform_lambda_box_eta_app"><span class="id" title="lemma">transform_lambda_box_eta_app</span></a> (<a id="28db3ab5a1e7b565d4254e45882f8336" class="idref" href="#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="binder">Σer</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>) <a id="t:569" class="idref" href="#t:569"><span class="id" title="binder">t</span></a> <a id="u:570" class="idref" href="#u:570"><span class="id" title="binder">u</span></a> <a id="pre:571" class="idref" href="#pre:571"><span class="id" title="binder">pre</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp"><span class="id" title="definition">EEtaExpandedFix.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="variable">Σer</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:569"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="pre':572" class="idref" href="#pre':572"><span class="id" title="binder">pre'</span></a> <a id="pre'':573" class="idref" href="#pre'':573"><span class="id" title="binder">pre''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="variable">Σer</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:569"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:570"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:571"><span class="id" title="variable">pre</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="variable">Σer</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:569"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:570"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:571"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="variable">Σer</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:569"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':572"><span class="id" title="variable">pre'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#28db3ab5a1e7b565d4254e45882f8336"><span class="id" title="variable">Σer</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:570"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre'':573"><span class="id" title="variable">pre''</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_app"><span class="id" title="method">ETransformPresAppLam.transform_app</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#is_eta_fix_app_map"><span class="id" title="definition">is_eta_fix_app_map</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a>) <span class="id" title="var">Σer</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span> <span class="id" title="var">pre</span> <span class="id" title="var">etat</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_lambdabox_pres_term" class="idref" href="#transform_lambdabox_pres_term"><span class="id" title="lemma">transform_lambdabox_pres_term</span></a> <a id="p:574" class="idref" href="#p:574"><span class="id" title="binder">p</span></a> <a id="p':575" class="idref" href="#p':575"><span class="id" title="binder">p'</span></a> <a id="pre:576" class="idref" href="#pre:576"><span class="id" title="binder">pre</span></a> <a id="pre':577" class="idref" href="#pre':577"><span class="id" title="binder">pre'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EProgram.html#extends_eprogram_env"><span class="id" title="definition">extends_eprogram_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:574"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':575"><span class="id" title="variable">p'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:574"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:576"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':575"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':577"><span class="id" title="variable">pre'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hext</span>. <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends'"><span class="id" title="lemma">verified_lambdabox_pipeline_extends'</span></a> <span class="id" title="var">p</span> <span class="id" title="var">p'</span> <span class="id" title="var">pre</span> <span class="id" title="var">pre'</span> <span class="id" title="var">hext</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_erase_pres_term" class="idref" href="#transform_erase_pres_term"><span class="id" title="lemma">transform_erase_pres_term</span></a> (<a id="p:578" class="idref" href="#p:578"><span class="id" title="binder">p</span></a> <a id="p':579" class="idref" href="#p':579"><span class="id" title="binder">p'</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.program"><span class="id" title="definition">program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) <a id="pre:580" class="idref" href="#pre:580"><span class="id" title="binder">pre</span></a> <a id="pre':581" class="idref" href="#pre':581"><span class="id" title="binder">pre'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#extends_global_env"><span class="id" title="definition">extends_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:578"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':579"><span class="id" title="variable">p'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:578"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':579"><span class="id" title="variable">p'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:578"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:580"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':579"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':581"><span class="id" title="variable">pre'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">t</span>], <span class="id" title="var">p'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx'</span> <span class="id" title="var">t'</span>]. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hg</span> <span class="id" title="var">heq</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">t'</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#equiv_env_inter_hlookup"><span class="id" title="lemma">equiv_env_inter_hlookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ?; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> → →. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#extends_global_env_equiv_env"><span class="id" title="lemma">extends_global_env_equiv_env</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="PCUICErase" class="idref" href="#PCUICErase"><span class="id" title="section">PCUICErase</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="module">PCUICAstUtils</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#"><span class="id" title="module">PCUICEtaExpand</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#"><span class="id" title="module">PCUICWfEnv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lift_wfext" class="idref" href="#lift_wfext"><span class="id" title="definition">lift_wfext</span></a> (<a id="b814e4f5efac49aff37fd1edb3c77f9f" class="idref" href="#b814e4f5efac49aff37fd1edb3c77f9f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) (<a id="3866c318d78ec02345a39b8bcd488df9" class="idref" href="#3866c318d78ec02345a39b8bcd488df9"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b814e4f5efac49aff37fd1edb3c77f9f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wfe:584" class="idref" href="#wfe:584"><span class="id" title="binder">wfe</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b814e4f5efac49aff37fd1edb3c77f9f"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b814e4f5efac49aff37fd1edb3c77f9f"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#3866c318d78ec02345a39b8bcd488df9"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <a id="72c2dee12cd70e042362b1c3d7317ada" class="idref" href="#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#9897e19d536bda84609b8ab92c34be9b"><span class="id" title="notation">∼</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:584"><span class="id" title="variable">wfe</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#72c2dee12cd70e042362b1c3d7317ada"><span class="id" title="variable">Σ'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b814e4f5efac49aff37fd1edb3c77f9f"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfe</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">apply</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="snd_erase_pcuic_program" class="idref" href="#snd_erase_pcuic_program"><span class="id" title="lemma">snd_erase_pcuic_program</span></a> {<a id="no:586" class="idref" href="#no:586"><span class="id" title="binder">no</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalizing_flags"><span class="id" title="class">PCUICSN.normalizing_flags</span></a>} {<a id="guard_impl:587" class="idref" href="#guard_impl:587"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="p:588" class="idref" href="#p:588"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) (<a id="nin:589" class="idref" href="#nin:589"><span class="id" title="binder">nin</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nin':590" class="idref" href="#nin':590"><span class="id" title="binder">nin'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="ffd20376f681b4ddaaa2641651aecf47" class="idref" href="#ffd20376f681b4ddaaa2641651aecf47"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) (<a id="wt:593" class="idref" href="#wt:593"><span class="id" title="binder">wt</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="T:592" class="idref" href="#T:592"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:592"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wfe:594" class="idref" href="#wfe:594"><span class="id" title="binder">wfe</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ffd20376f681b4ddaaa2641651aecf47"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="Xext:595" class="idref" href="#Xext:595"><span class="id" title="binder">Xext</span></a> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:594"><span class="id" title="variable">wfe</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lift_wfext"><span class="id" title="definition">lift_wfext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ffd20376f681b4ddaaa2641651aecf47"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="wt':596" class="idref" href="#wt':596"><span class="id" title="binder">wt'</span></a> <a id="nin'':597" class="idref" href="#nin'':597"><span class="id" title="binder">nin''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a>@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:587"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:589"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin':590"><span class="id" title="variable">nin'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#ffd20376f681b4ddaaa2641651aecf47"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt:593"><span class="id" title="variable">wt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">normalization_in</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin'':597"><span class="id" title="variable">nin''</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#Xext:595"><span class="id" title="variable">Xext</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:588"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt':596"><span class="id" title="variable">wt'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a>]. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">T</span> <span class="id" title="var">wt</span>]]. <span class="id" title="var">now</span> <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? →. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">nin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt'_erase_pcuic_program" class="idref" href="#wt'_erase_pcuic_program"><span class="id" title="definition">wt'_erase_pcuic_program</span></a> {<a id="no:598" class="idref" href="#no:598"><span class="id" title="binder">no</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalizing_flags"><span class="id" title="class">PCUICSN.normalizing_flags</span></a>} {<a id="guard_impl:599" class="idref" href="#guard_impl:599"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="p:600" class="idref" href="#p:600"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="667fd9f0c1f349b54307630223b9d5ea" class="idref" href="#667fd9f0c1f349b54307630223b9d5ea"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) (<a id="wt:603" class="idref" href="#wt:603"><span class="id" title="binder">wt</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="T:602" class="idref" href="#T:602"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:602"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wfe:604" class="idref" href="#wfe:604"><span class="id" title="binder">wfe</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#667fd9f0c1f349b54307630223b9d5ea"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="Xext:605" class="idref" href="#Xext:605"><span class="id" title="binder">Xext</span></a> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:604"><span class="id" title="variable">wfe</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lift_wfext"><span class="id" title="definition">lift_wfext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#667fd9f0c1f349b54307630223b9d5ea"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="4138e20f6b3af6df49bcff2c538391ef" class="idref" href="#4138e20f6b3af6df49bcff2c538391ef"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4138e20f6b3af6df49bcff2c538391ef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">∼</span></a><a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">_ext</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:604"><span class="id" title="variable">wfe</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<span class="id" title="keyword">fun</span> (<a id="2c211511e43f5f37025b20f4690a268b" class="idref" href="#2c211511e43f5f37025b20f4690a268b"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) (<a id="H:608" class="idref" href="#H:608"><span class="id" title="binder">H</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2c211511e43f5f37025b20f4690a268b"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#9897e19d536bda84609b8ab92c34be9b"><span class="id" title="notation">∼</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:604"><span class="id" title="variable">wfe</span></a>) ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_1"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:599"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#667fd9f0c1f349b54307630223b9d5ea"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2c211511e43f5f37025b20f4690a268b"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#H:608"><span class="id" title="variable">H</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#welltyped"><span class="id" title="inductive">welltyped</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4138e20f6b3af6df49bcff2c538391ef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:600"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> ((<span class="id" title="keyword">let</span> '<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> <span class="id" title="var">wt'</span> := <span class="id" title="var">wt</span> <span class="id" title="keyword">return</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt':609"><span class="id" title="variable">wt'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">wt</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#welltyped"><span class="id" title="inductive">welltyped</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">T</span><a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ty</span><a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">s0</span> := <span class="id" title="var">s</span> <span class="id" title="keyword">return</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#s0:610"><span class="id" title="variable">s0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">wt</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#welltyped"><span class="id" title="inductive">welltyped</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><span class="id" title="var">T</span><a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <span class="id" title="var">ty</span><a class="idref" href="MetaRocq.Utils.MRPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">wt</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#iswelltyped"><span class="id" title="constructor">iswelltyped</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_rect"><span class="id" title="definition">eq_rect</span></a> (<span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<span class="id" title="keyword">fun</span> <a id="cebf416a58fd48f70ec2d557f4ef4598" class="idref" href="#cebf416a58fd48f70ec2d557f4ef4598"><span class="id" title="binder"><span id="b443f94f261503b30eedbc0ac40f7e7f" class="id">Σ0</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cebf416a58fd48f70ec2d557f4ef4598"><span class="id" title="variable">Σ0</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <span class="id" title="var">T</span>) <span class="id" title="var">ty</span> <span class="id" title="var">Σ</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_3"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_3</span></a> <span class="id" title="var">guard_impl</span> <span class="id" title="var">p</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">Σ</span> <span class="id" title="var">H</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="erase_nin" class="idref" href="#erase_nin"><span class="id" title="definition">erase_nin</span></a> {<a id="no:615" class="idref" href="#no:615"><span class="id" title="binder">no</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalizing_flags"><span class="id" title="class">PCUICSN.normalizing_flags</span></a>} {<a id="guard_impl:616" class="idref" href="#guard_impl:616"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="p:617" class="idref" href="#p:617"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) (<a id="nin:618" class="idref" href="#nin:618"><span class="id" title="binder">nin</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b1f75c7ffac939f0f062363e144b98eb" class="idref" href="#b1f75c7ffac939f0f062363e144b98eb"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">fun</span> (<a id="6aa8a92b884dca2fee5f96c14df818fd" class="idref" href="#6aa8a92b884dca2fee5f96c14df818fd"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="H:621" class="idref" href="#H:621"><span class="id" title="binder">H</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#6aa8a92b884dca2fee5f96c14df818fd"><span class="id" title="variable">Σ</span></a>) (<a id="H0:624" class="idref" href="#H0:624"><span class="id" title="binder">H0</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#6aa8a92b884dca2fee5f96c14df818fd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a>) (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b1f75c7ffac939f0f062363e144b98eb"><span class="id" title="variable">wfΣ</span></a>)) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<span class="id" title="keyword">fun</span> (<a id="17ada98ef756bc960db4ec67b40b89cc" class="idref" href="#17ada98ef756bc960db4ec67b40b89cc"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) (<a id="H0:623" class="idref" href="#H0:623"><span class="id" title="binder">H0</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#17ada98ef756bc960db4ec67b40b89cc"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a>) ⇒ <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_1"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:616"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b1f75c7ffac939f0f062363e144b98eb"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#17ada98ef756bc960db4ec67b40b89cc"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#H0:623"><span class="id" title="variable">H0</span></a>)) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_2"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:616"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:617"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:618"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b1f75c7ffac939f0f062363e144b98eb"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#6aa8a92b884dca2fee5f96c14df818fd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#H:621"><span class="id" title="variable">H</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#H0:624"><span class="id" title="variable">H0</span></a> .<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fst_erase_pcuic_program" class="idref" href="#fst_erase_pcuic_program"><span class="id" title="lemma">fst_erase_pcuic_program</span></a> {<a id="no:625" class="idref" href="#no:625"><span class="id" title="binder">no</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalizing_flags"><span class="id" title="class">PCUICSN.normalizing_flags</span></a>} {<a id="guard_impl:626" class="idref" href="#guard_impl:626"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="p:627" class="idref" href="#p:627"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) (<a id="nin:628" class="idref" href="#nin:628"><span class="id" title="binder">nin</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nin':629" class="idref" href="#nin':629"><span class="id" title="binder">nin'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="5d26edfcc7f8c176b358100add7b5d71" class="idref" href="#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) (<a id="wt:632" class="idref" href="#wt:632"><span class="id" title="binder">wt</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="T:631" class="idref" href="#T:631"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:631"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wfe:633" class="idref" href="#wfe:633"><span class="id" title="binder">wfe</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="Xext:634" class="idref" href="#Xext:634"><span class="id" title="binder">Xext</span></a> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">guard</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:626"><span class="id" title="variable">guard_impl</span></a>)) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:633"><span class="id" title="variable">wfe</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lift_wfext"><span class="id" title="definition">lift_wfext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="nin'':635" class="idref" href="#nin'':635"><span class="id" title="binder">nin''</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_nin"><span class="id" title="definition">erase_nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:628"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="variable">wfΣ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="er:636" class="idref" href="#er:636"><span class="id" title="binder">er</span></a> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">normalization_in</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin'':635"><span class="id" title="variable">nin''</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#Xext:634"><span class="id" title="variable">Xext</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt'_erase_pcuic_program"><span class="id" title="definition">wt'_erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt:632"><span class="id" title="variable">wt</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="hprefix:637" class="idref" href="#hprefix:637"><span class="id" title="binder">hprefix</span></a> <a id="nin2:638" class="idref" href="#nin2:638"><span class="id" title="binder">nin2</span></a> <a id="hfr:639" class="idref" href="#hfr:639"><span class="id" title="binder">hfr</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a>@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:626"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:628"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin':629"><span class="id" title="variable">nin'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#5d26edfcc7f8c176b358100add7b5d71"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt:632"><span class="id" title="variable">wt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.make"><span class="id" title="definition">make</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">term_global_deps</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#er:636"><span class="id" title="variable">er</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:633"><span class="id" title="variable">wfe</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:627"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin2:638"><span class="id" title="variable">nin2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#hprefix:637"><span class="id" title="variable">hprefix</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#hfr:639"><span class="id" title="variable">hfr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>. <span class="id" title="tactic">rewrite</span> -/<span class="id" title="var">wfe</span> -/<span class="id" title="var">nin'</span> -/<span class="id" title="var">Xext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er'</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">er</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">er'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">er</span> <span class="id" title="var">er'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">prf</span> := <span class="id" title="keyword">fun</span> (<a id="n:640" class="idref" href="#n:640"><span class="id" title="binder"><span id="n:641" class="id">n</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">prf'</span> := <span class="id" title="keyword">fun</span> (<a id="ffd69bd8ecf20df034fdefa404108283" class="idref" href="#ffd69bd8ecf20df034fdefa404108283"><span class="id" title="binder"><span id="c520df713420123d8ab6bc22200508c9" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">intros</span> ? -&gt;; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">term_global_deps</span></a> <span class="id" title="var">er'</span>) <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">wfe</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">nin2</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">nin2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">prf''</span> := <span class="id" title="keyword">fun</span> (<a id="9f6508c34c620514ee49b028b2234b90" class="idref" href="#9f6508c34c620514ee49b028b2234b90"><span class="id" title="binder"><span id="ac375a1e2af34a19c87e0ed37c57a845" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) ⇒ <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span>(<span class="id" title="var">prf'''</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program_obligation_6"><span class="id" title="lemma">ETransform.erase_pcuic_program_obligation_6</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">zeta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">prf'''</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">prf'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">prf'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">prf'''</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> -<span class="id" title="var">H</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">prf'''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">prf'''</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">prf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fst_erase_pcuic_program'" class="idref" href="#fst_erase_pcuic_program'"><span class="id" title="lemma">fst_erase_pcuic_program'</span></a> {<a id="no:646" class="idref" href="#no:646"><span class="id" title="binder">no</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#normalizing_flags"><span class="id" title="class">PCUICSN.normalizing_flags</span></a>} {<a id="guard_impl:647" class="idref" href="#guard_impl:647"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="p:648" class="idref" href="#p:648"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) (<a id="nin:649" class="idref" href="#nin:649"><span class="id" title="binder">nin</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="nin':650" class="idref" href="#nin':650"><span class="id" title="binder">nin'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="4a5872f4acfd849c0873229f5d933a92" class="idref" href="#4a5872f4acfd849c0873229f5d933a92"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) (<a id="wt:653" class="idref" href="#wt:653"><span class="id" title="binder">wt</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="T:652" class="idref" href="#T:652"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#T:652"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wfe:654" class="idref" href="#wfe:654"><span class="id" title="binder">wfe</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1.1</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">wf_ext_wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4a5872f4acfd849c0873229f5d933a92"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="Xext:655" class="idref" href="#Xext:655"><span class="id" title="binder">Xext</span></a> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> (<span class="id" title="var">X_type</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">guard</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:647"><span class="id" title="variable">guard_impl</span></a>)) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wfe:654"><span class="id" title="variable">wfe</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lift_wfext"><span class="id" title="definition">lift_wfext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4a5872f4acfd849c0873229f5d933a92"><span class="id" title="variable">wfΣ</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="wt':656" class="idref" href="#wt':656"><span class="id" title="binder">wt'</span></a> <a id="nin'':657" class="idref" href="#nin'':657"><span class="id" title="binder">nin''</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="er:658" class="idref" href="#er:658"><span class="id" title="binder">er</span></a> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> (<span class="id" title="var">normalization_in</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin'':657"><span class="id" title="variable">nin''</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#Xext:655"><span class="id" title="variable">Xext</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt':656"><span class="id" title="variable">wt'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded"><span class="id" title="inductive">EEtaExpandedFix.expanded</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a>@<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#guard_impl:647"><span class="id" title="variable">guard_impl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:648"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin:649"><span class="id" title="variable">nin</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nin':650"><span class="id" title="variable">nin'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#4a5872f4acfd849c0873229f5d933a92"><span class="id" title="variable">wfΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt:653"><span class="id" title="variable">wt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#er:658"><span class="id" title="variable">er</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>. <span class="id" title="tactic">rewrite</span> -/<span class="id" title="var">wfe</span> -/<span class="id" title="var">nin'</span> -/<span class="id" title="var">Xext</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er'</span> := <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">er</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">er'</span>) <span class="id" title="keyword">as</span> &lt;-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">subst</span> <span class="id" title="var">er</span> <span class="id" title="var">er'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_fast"><span class="id" title="definition">erase_global_fast</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_erase_global_deps"><span class="id" title="lemma">erase_global_deps_fast_erase_global_deps</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">nin2</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#expanded_erase"><span class="id" title="lemma">expanded_erase</span></a>; <span class="id" title="var">revgoals</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? -&gt;; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="erase_eta_app" class="idref" href="#erase_eta_app"><span class="id" title="lemma">erase_eta_app</span></a> (<a id="84e2bef3c125c4f4ae5623734bf4d559" class="idref" href="#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="t:660" class="idref" href="#t:660"><span class="id" title="binder">t</span></a> <a id="u:661" class="idref" href="#u:661"><span class="id" title="binder">u</span></a> <a id="pre:662" class="idref" href="#pre:662"><span class="id" title="binder">pre</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:660"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:661"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">PCUICEtaExpand.expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:660"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="pre':663" class="idref" href="#pre':663"><span class="id" title="binder">pre'</span></a> <a id="pre'':664" class="idref" href="#pre'':664"><span class="id" title="binder">pre''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trapp:665" class="idref" href="#trapp:665"><span class="id" title="binder">trapp</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">PCUICAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:660"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:661"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:662"><span class="id" title="variable">pre</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trt:666" class="idref" href="#trt:666"><span class="id" title="binder">trt</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:660"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':663"><span class="id" title="variable">pre'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tru:667" class="idref" href="#tru:667"><span class="id" title="binder">tru</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:661"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre'':664"><span class="id" title="variable">pre''</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp"><span class="id" title="definition">EEtaExpandedFix.isEtaExp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:666"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:666"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:666"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:665"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tru:667"><span class="id" title="variable">tru</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:665"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:665"><span class="id" title="variable">trapp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:665"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:666"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tru:667"><span class="id" title="variable">tru</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">er</span> <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">split</span> ⇒ //. 2:<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">appty</span> <span class="id" title="var">tyapp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">PCUICInversion.inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tyapp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">A</span> [<span class="id" title="var">B</span> [<span class="id" title="var">hp</span> [<span class="id" title="var">hu</span> <span class="id" title="var">hcum</span>]]]]]. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">split</span> ⇒ //. 2:<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">appty</span> <span class="id" title="var">tyapp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">PCUICInversion.inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tyapp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">A</span> [<span class="id" title="var">B</span> [<span class="id" title="var">hp</span> [<span class="id" title="var">hu</span> <span class="id" title="var">hcum</span>]]]]]. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_tApp_arg"><span class="id" title="lemma">expanded_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf0</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf1</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf2</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf3</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">prf4</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">prf4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">erp</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">erp</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">erp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <span class="id" title="var">heq</span>). <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{}<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>?<span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> ?<span class="id" title="var">t</span> ?<span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#snd_erase_pcuic_program"><span class="id" title="lemma">snd_erase_pcuic_program</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">nin</span> <span class="id" title="var">nin'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">wt'</span> [<span class="id" title="var">nin''</span> →]]<br/>
    <span class="id" title="keyword">end</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_mkApps"><span class="id" title="lemma">erase_mkApps</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">destruct</span> <span class="id" title="var">prf4</span> <span class="id" title="keyword">as</span> [[? <span class="id" title="var">hu</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hu</span>. <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">hu</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.Extract.html#E.mkApps"><span class="id" title="definition">E.mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_terms"><span class="id" title="definition">erase_terms</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#snd_erase_pcuic_program"><span class="id" title="lemma">snd_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">nin</span> <span class="id" title="var">nin'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">wt''</span> [<span class="id" title="var">nin'''</span> →]]<br/>
    <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>]. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fst_erase_pcuic_program'"><span class="id" title="lemma">fst_erase_pcuic_program'</span></a> <span class="id" title="var">p</span> <span class="id" title="var">nin</span> <span class="id" title="var">nin'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span> <span class="id" title="var">etat</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">er</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">heq</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">heq</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">er</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf</span> := <span class="id" title="var">nin</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf'</span> := <span class="id" title="var">nin'</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fst_erase_pcuic_program"><span class="id" title="lemma">fst_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ninprf</span> <span class="id" title="var">ninprf'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpref</span> [<span class="id" title="var">ning</span> [<span class="id" title="var">hfr</span> -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf0</span> := <span class="id" title="var">nin</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf0'</span> := <span class="id" title="var">nin'</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf0'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fst_erase_pcuic_program"><span class="id" title="lemma">fst_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ninprf0</span> <span class="id" title="var">ninprf0'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpref'</span> [<span class="id" title="var">ning'</span> [<span class="id" title="var">hfr'</span> -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">term_global_deps</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_erase_global"><span class="id" title="lemma">erase_global_deps_erase_global</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → @<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#filter_deps_filter"><span class="id" title="lemma">filter_deps_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → @<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#filter_deps_filter"><span class="id" title="lemma">filter_deps_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">prf</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">prf1</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hpref</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">hpref'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">prf1</span> <span class="id" title="var">hpref'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ning</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">ning'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">ning'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#extends_filter_impl"><span class="id" title="lemma">extends_filter_impl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">er</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> ?<span class="id" title="var">X_type</span> ?<span class="id" title="var">X</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">G</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">wt</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_mkApps"><span class="id" title="lemma">erase_mkApps</span></a> <span class="id" title="var">X_type</span> <span class="id" title="var">X</span> <span class="id" title="var">nin</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">wt</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt'_erase_pcuic_program"><span class="id" title="definition">wt'_erase_pcuic_program</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">prf</span> <span class="id" title="var">prf0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hargs</span> : <span class="id" title="keyword">∀</span> <a id="2277a44e0442cab587b9dd0d2788e2cf" class="idref" href="#2277a44e0442cab587b9dd0d2788e2cf"><span class="id" title="binder"><span id="45d44ad477ce83df2cddaf18e2873c77" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2277a44e0442cab587b9dd0d2788e2cf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">∼</span></a><a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">_ext</span></a> <span class="id" title="var">env</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#welltyped"><span class="id" title="inductive">welltyped</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2277a44e0442cab587b9dd0d2788e2cf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">prf</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">prf2</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">T</span> <span class="id" title="var">HT</span>]]. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">PCUICInversion.inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HT</span> <span class="id" title="keyword">as</span> <span class="id" title="var">HT'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">HT'</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">A</span> [<span class="id" title="var">B</span> [<span class="id" title="var">Hp</span> []]]]]. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">w</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">hargs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. { <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">exact</span> <span class="id" title="var">er</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#term_global_deps_mkApps"><span class="id" title="lemma">term_global_deps_mkApps</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">hin</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.mem_spec"><span class="id" title="lemma">KernameSet.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#global_deps_union"><span class="id" title="lemma">global_deps_union</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.union_spec"><span class="id" title="lemma">KernameSet.union_spec</span></a>. <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.mem_spec"><span class="id" title="lemma">KernameSet.mem_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er0</span> := @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er1</span> := @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">er0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">er1</span>). { <span class="id" title="tactic">unfold</span> <span class="id" title="var">er0</span>, <span class="id" title="var">er1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> → ? -&gt;; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> -<span class="id" title="var">prf0</span> <span class="id" title="var">er</span> <span class="id" title="var">heq</span> <span class="id" title="var">etat</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">heq</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">heq</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">er</span> <span class="id" title="var">etat</span> <span class="id" title="var">prf0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf</span> := <span class="id" title="var">nin</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf'</span> := <span class="id" title="var">nin'</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fst_erase_pcuic_program"><span class="id" title="lemma">fst_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ninprf</span> <span class="id" title="var">ninprf'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpref</span> [<span class="id" title="var">ning</span> [<span class="id" title="var">hfr</span> -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf0</span> := <span class="id" title="var">nin</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ninprf0'</span> := <span class="id" title="var">nin'</span>); <span class="id" title="var">clearbody</span> <span class="id" title="var">ninprf0'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fst_erase_pcuic_program"><span class="id" title="lemma">fst_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">ninprf0</span> <span class="id" title="var">ninprf0'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpref'</span> [<span class="id" title="var">ning'</span> [<span class="id" title="var">hfr'</span> -&gt;]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_global_deps"><span class="id" title="definition">erase_global_deps</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">term_global_deps</span></a> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_erase_global"><span class="id" title="lemma">erase_global_deps_erase_global</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → @<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#filter_deps_filter"><span class="id" title="lemma">filter_deps_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> → @<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#filter_deps_filter"><span class="id" title="lemma">filter_deps_filter</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">prf3</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">prf1</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hpref</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">hpref'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">prf1</span> <span class="id" title="var">hpref'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ning</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">ning'</span>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">ning'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#extends_filter_impl"><span class="id" title="lemma">extends_filter_impl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_wf_glob"><span class="id" title="lemma">erase_global_wf_glob</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Program.Basics.html#flip"><span class="id" title="definition">flip</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">er</span> <span class="id" title="var">prf0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">env</span> := <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="definition">abstract_make_wf_env_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> ?<span class="id" title="var">X_type</span> ?<span class="id" title="var">X</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">G</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) ?<span class="id" title="var">wt</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_mkApps"><span class="id" title="lemma">erase_mkApps</span></a> <span class="id" title="var">X_type</span> <span class="id" title="var">X</span> <span class="id" title="var">nin</span> <span class="id" title="var">G</span> <span class="id" title="var">t</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">wt</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#wt'_erase_pcuic_program"><span class="id" title="definition">wt'_erase_pcuic_program</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">prf3</span> <span class="id" title="var">prf0</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">hargs</span> : <span class="id" title="keyword">∀</span> <a id="f15844cb0034f5297c1b7da92d2c1485" class="idref" href="#f15844cb0034f5297c1b7da92d2c1485"><span class="id" title="binder"><span id="5c83cc10571038c9f68f12954f5c1123" class="id">Σ</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f15844cb0034f5297c1b7da92d2c1485"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">∼</span></a><a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#bac0a333394e2541f259f5481a301f86"><span class="id" title="notation">_ext</span></a> <span class="id" title="var">env</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#welltyped"><span class="id" title="inductive">welltyped</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f15844cb0034f5297c1b7da92d2c1485"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">prf4</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">T</span> <span class="id" title="var">HT</span>]]. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eapply</span> <span class="id" title="var">HT</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">hargs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. { <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">exact</span> <span class="id" title="var">er</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#term_global_deps_mkApps"><span class="id" title="lemma">term_global_deps_mkApps</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">hin</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.mem_spec"><span class="id" title="lemma">KernameSet.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#global_deps_union"><span class="id" title="lemma">global_deps_union</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.union_spec"><span class="id" title="lemma">KernameSet.union_spec</span></a>. <span class="id" title="tactic">right</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_terms"><span class="id" title="definition">erase_terms</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.mem_spec"><span class="id" title="lemma">KernameSet.mem_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er0</span> := @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">er1</span> := @<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase"><span class="id" title="definition">erase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">er0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">er1</span>). { <span class="id" title="tactic">unfold</span> <span class="id" title="var">er0</span>, <span class="id" title="var">er1</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>. <span class="id" title="tactic">intro</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> → ? -&gt;; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#global_deps_union"><span class="id" title="lemma">global_deps_union</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Kernames.html#KernameSet.union_spec"><span class="id" title="lemma">KernameSet.union_spec</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">left</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ |- <span class="id" title="keyword">context</span> [ @<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a> ?<span class="id" title="var">guard</span> ?<span class="id" title="var">p</span> ?<span class="id" title="var">nin</span> ?<span class="id" title="var">nin'</span> ?<span class="id" title="var">prf</span> ?<span class="id" title="var">prf'</span> ] ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#snd_erase_pcuic_program"><span class="id" title="lemma">snd_erase_pcuic_program</span></a> <span class="id" title="var">p</span> <span class="id" title="var">nin</span> <span class="id" title="var">nin'</span> <span class="id" title="var">prf</span> <span class="id" title="var">prf'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">wt'''</span> [<span class="id" title="var">nin''''</span> →]]<br/>
      <span class="id" title="keyword">end</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_irrel_global_env"><span class="id" title="lemma">ErasureFunction.erase_irrel_global_env</span></a>. <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> ? →. <span class="id" title="tactic">destruct</span> <span class="id" title="var">prf0</span> <span class="id" title="keyword">as</span> [[? <span class="id" title="var">wtt</span>]]. <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">wtt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="expand_lets_eta_app" class="idref" href="#expand_lets_eta_app"><span class="id" title="lemma">expand_lets_eta_app</span></a> (<a id="fcb0b1a438b58b31d58b6ee4e552d630" class="idref" href="#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="t:673" class="idref" href="#t:673"><span class="id" title="binder">t</span></a> <a id="u:674" class="idref" href="#u:674"><span class="id" title="binder">u</span></a> <a id="K:675" class="idref" href="#K:675"><span class="id" title="binder">K</span></a> <a id="pre:676" class="idref" href="#pre:676"><span class="id" title="binder">pre</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:673"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:674"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">PCUICEtaExpand.expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:673"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="pre':677" class="idref" href="#pre':677"><span class="id" title="binder">pre'</span></a> <a id="pre'':678" class="idref" href="#pre'':678"><span class="id" title="binder">pre''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:675"><span class="id" title="variable">K</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">PCUICAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:673"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:674"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:676"><span class="id" title="variable">pre</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:675"><span class="id" title="variable">K</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">PCUICAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:673"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:674"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:676"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:675"><span class="id" title="variable">K</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:673"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':677"><span class="id" title="variable">pre'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:675"><span class="id" title="variable">K</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fcb0b1a438b58b31d58b6ee4e552d630"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:674"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre'':678"><span class="id" title="variable">pre''</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">er</span> <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">split</span> ⇒ //. 2:<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">appty</span> <span class="id" title="var">tyapp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">PCUICInversion.inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tyapp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">A</span> [<span class="id" title="var">B</span> [<span class="id" title="var">hp</span> [<span class="id" title="var">hu</span> <span class="id" title="var">hcum</span>]]]]]. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">split</span> ⇒ //. 2:<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">appty</span> <span class="id" title="var">tyapp</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">PCUICInversion.inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tyapp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">A</span> [<span class="id" title="var">B</span> [<span class="id" title="var">hp</span> [<span class="id" title="var">hu</span> <span class="id" title="var">hcum</span>]]]]]. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_tApp_arg"><span class="id" title="lemma">expanded_tApp_arg</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="isErasable_lets" class="idref" href="#isErasable_lets"><span class="id" title="lemma">isErasable_lets</span></a> (<a id="p:679" class="idref" href="#p:679"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:679"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:679"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:679"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:679"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:679"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>]. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> [<span class="id" title="var">tyT</span> <span class="id" title="var">pr</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">tyT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <span class="id" title="var">T</span>). <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> ⇒ //. <span class="id" title="tactic">left</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isArity_trans"><span class="id" title="lemma">PCUICExpandLetsCorrectness.isArity_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">right</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">u</span> []]; <span class="id" title="tactic">∃</span> <span class="id" title="var">u</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#"><span class="id" title="module">PCUICWellScopedCumulativity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#"><span class="id" title="module">PCUICFirstorder</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormalization.html#"><span class="id" title="module">PCUICNormalization</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#"><span class="id" title="module">PCUICReduction</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#"><span class="id" title="module">PCUIC.PCUICConversion</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICPrincipality.html#"><span class="id" title="module">PCUICPrincipality</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#"><span class="id" title="module">PCUICExpandLets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#"><span class="id" title="module">PCUICExpandLetsCorrectness</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#"><span class="id" title="module">PCUICOnFreeVars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#"><span class="id" title="module">PCUICSigmaCalculus</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="nisErasable_lets" class="idref" href="#nisErasable_lets"><span class="id" title="lemma">nisErasable_lets</span></a> (<a id="p:680" class="idref" href="#p:680"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#pcuic_program"><span class="id" title="definition">pcuic_program</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:680"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:680"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:680"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:680"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:680"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">t</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> [<span class="id" title="var">u</span> [<span class="id" title="var">Hty</span> <span class="id" title="var">Hnf</span> <span class="id" title="var">Har</span> <span class="id" title="var">Hsort</span> <span class="id" title="var">Hprop</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>) <span class="id" title="var">Hty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <span class="id" title="var">T</span>), <span class="id" title="var">u</span>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj2"><span class="id" title="definition">proj2</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ne_nf"><span class="id" title="lemma">trans_ne_nf</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">Hnf</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">PCUICClosedTyp.subject_is_open_term</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isArity_trans"><span class="id" title="lemma">isArity_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Hsort</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_erasure_pipeline_function" class="idref" href="#transform_erasure_pipeline_function"><span class="id" title="lemma">transform_erasure_pipeline_function</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wfl:681" class="idref" href="#wfl:681"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="guard_impl:682" class="idref" href="#guard_impl:682"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cf:683" class="idref" href="#cf:683"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="87947eedf05997634829ef5fc00f2e9a" class="idref" href="#87947eedf05997634829ef5fc00f2e9a"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="f:685" class="idref" href="#f:685"><span class="id" title="binder">f</span></a> <a id="v':686" class="idref" href="#v':686"><span class="id" title="binder">v'</span></a> <a id="na:687" class="idref" href="#na:687"><span class="id" title="binder">na</span></a> <a id="A:688" class="idref" href="#A:688"><span class="id" title="binder">A</span></a> <a id="B:689" class="idref" href="#B:689"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wf:690" class="idref" href="#wf:690"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#87947eedf05997634829ef5fc00f2e9a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:685"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:687"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:688"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:689"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="pr:691" class="idref" href="#pr:691"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#87947eedf05997634829ef5fc00f2e9a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#87947eedf05997634829ef5fc00f2e9a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:685"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tr:692" class="idref" href="#tr:692"><span class="id" title="binder">tr</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#87947eedf05997634829ef5fc00f2e9a"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:685"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:691"><span class="id" title="variable">pr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> (<span class="id" title="var">wfl</span> := <a class="idref" href="MetaRocq.Erasure.EWcbvEvalNamed.html#extraction_wcbv_flags"><span class="id" title="definition">extraction_wcbv_flags</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tr:692"><span class="id" title="variable">tr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tr:692"><span class="id" title="variable">tr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':686"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v':686"><span class="id" title="variable">v'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">axfree</span> <span class="id" title="var">nise</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#expand_lets_function"><span class="id" title="lemma">expand_lets_function</span></a> <span class="id" title="var">Σ</span> (<span class="id" title="keyword">fun</span> <a id="p:693" class="idref" href="#p:693"><span class="id" title="binder"><span id="p:694" class="id">p</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:693"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:693"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:693"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:693"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">pr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">trexp</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">axfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nise'</span> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[[]] ?], <span class="id" title="var">nise</span>. <span class="id" title="var">sq</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nisErasable_lets"><span class="id" title="lemma">nisErasable_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext_map_global_env_ext</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1).1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">axfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">trexp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">nise</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">Σ</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">trexp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">f</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> <span class="id" title="var">pre'</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre'</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="keyword">wf</span> <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_function_value"><span class="id" title="lemma">pcuic_function_value</span></a> <span class="id" title="keyword">wf</span> <span class="id" title="var">axfree</span>) <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">v</span> <span class="id" title="var">ev</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.preservation"><span class="id" title="projection">Transform.preservation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> <span class="id" title="var">pre</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <span class="id" title="var">ev</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre'</span> <span class="id" title="var">htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v''</span> [<span class="id" title="var">ev'</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_function_to_function"><span class="id" title="lemma">erase_function_to_function</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">v''</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">pre</span> <span class="id" title="var">axfree</span> <span class="id" title="var">nise'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tre</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">tre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ev2</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ev'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ev'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.preservation"><span class="id" title="projection">Transform.preservation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tre</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ'</span> <span class="id" title="var">f'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">v''</span> <span class="id" title="var">pre'</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <span class="id" title="var">H1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">finalv</span> [[<span class="id" title="var">evfinal</span>] <span class="id" title="var">obseq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_deterministic"><span class="id" title="lemma">eval_deterministic</span></a> <span class="id" title="var">evfinal</span> <span class="id" title="var">ev2</span>). <span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">prev</span> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">Transform.pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">wfl</span> <span class="id" title="var">pre'</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre'</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">split</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_wellformed"><span class="id" title="lemma">EWcbvEval.eval_wellformed</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#eval_etaexp"><span class="id" title="lemma">EEtaExpandedFix.eval_etaexp</span></a> <span class="id" title="var">wfl</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_global_env_isEtaExp_env"><span class="id" title="lemma">EEtaExpandedFix.expanded_global_env_isEtaExp_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#obseq_lambdabox"><span class="id" title="lemma">obseq_lambdabox</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">f'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">obseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lam"><span class="id" title="method">ETransformPresAppLam.transform_lam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">t0</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lambdabox_pres_app"><span class="id" title="instance">lambdabox_pres_app</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">prev</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">obseq</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_erasure_pipeline_function'" class="idref" href="#transform_erasure_pipeline_function'"><span class="id" title="lemma">transform_erasure_pipeline_function'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wfl:695" class="idref" href="#wfl:695"><span class="id" title="binder">wfl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#default_wcbv_flags"><span class="id" title="definition">default_wcbv_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="guard_impl:696" class="idref" href="#guard_impl:696"><span class="id" title="binder">guard_impl</span></a> : <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="cf:697" class="idref" href="#cf:697"><span class="id" title="binder">cf</span></a>:=<a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">config.extraction_checker_flags</span></a>) (<a id="fc188704e96280af4d281a2df4647ea0" class="idref" href="#fc188704e96280af4d281a2df4647ea0"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="f:699" class="idref" href="#f:699"><span class="id" title="binder">f</span></a> <a id="na:700" class="idref" href="#na:700"><span class="id" title="binder">na</span></a> <a id="A:701" class="idref" href="#A:701"><span class="id" title="binder">A</span></a> <a id="B:702" class="idref" href="#B:702"><span class="id" title="binder">B</span></a>}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="wf:703" class="idref" href="#wf:703"><span class="id" title="binder">wf</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fc188704e96280af4d281a2df4647ea0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:699"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">PCUICAst.tProd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#na:700"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#A:701"><span class="id" title="variable">A</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#B:702"><span class="id" title="variable">B</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="pr:704" class="idref" href="#pr:704"><span class="id" title="binder">pr</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fc188704e96280af4d281a2df4647ea0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fc188704e96280af4d281a2df4647ea0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:699"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tr:705" class="idref" href="#tr:705"><span class="id" title="binder">tr</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fc188704e96280af4d281a2df4647ea0"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f:699"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pr:704"><span class="id" title="variable">pr</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="v:706" class="idref" href="#v:706"><span class="id" title="binder">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> (<span class="id" title="var">wfl</span> := <a class="idref" href="MetaRocq.Erasure.EWcbvEvalNamed.html#extraction_wcbv_flags"><span class="id" title="definition">extraction_wcbv_flags</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tr:705"><span class="id" title="variable">tr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tr:705"><span class="id" title="variable">tr</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:706"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#isFunction"><span class="id" title="definition">isFunction</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v:706"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">axfree</span> <span class="id" title="var">nise</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#expand_lets_function"><span class="id" title="lemma">expand_lets_function</span></a> <span class="id" title="var">Σ</span> (<span class="id" title="keyword">fun</span> <a id="p:707" class="idref" href="#p:707"><span class="id" title="binder"><span id="p:708" class="id">p</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:707"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:707"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:707"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:707"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>) <span class="id" title="var">f</span> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">pr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">trexp</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">axfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">nise'</span> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">as</span> [[[]] ?], <span class="id" title="var">nise</span>. <span class="id" title="var">sq</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nisErasable_lets"><span class="id" title="lemma">nisErasable_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map_global_env_ext"><span class="id" title="definition">global_env_ext_map_global_env_ext</span></a> <span class="id" title="var">trexp</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1).1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">axfree</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">trexp</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">nise</span> <span class="id" title="var">pr</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">Σ</span> <span class="id" title="var">f</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">trexp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">f</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> <span class="id" title="var">pre'</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre'</span> <span class="id" title="keyword">as</span> [[[<span class="id" title="keyword">wf</span> <span class="id" title="var">_</span>]] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pcuic_function_value"><span class="id" title="lemma">pcuic_function_value</span></a> <span class="id" title="keyword">wf</span> <span class="id" title="var">axfree</span>) <span class="id" title="var">H</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">v</span> <span class="id" title="var">ev</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.preservation"><span class="id" title="projection">Transform.preservation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <span class="id" title="var">v</span> <span class="id" title="var">pre</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <span class="id" title="var">ev</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre'</span> <span class="id" title="var">htr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">htr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v''</span> [<span class="id" title="var">ev'</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_function_to_function"><span class="id" title="lemma">erase_function_to_function</span></a> <span class="id" title="var">_</span> <span class="id" title="var">f</span> <span class="id" title="var">v''</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span> <span class="id" title="var">pre</span> <span class="id" title="var">axfree</span> <span class="id" title="var">nise'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tre</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">tre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ev'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">ev'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.preservation"><span class="id" title="projection">Transform.preservation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tre</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ'</span> <span class="id" title="var">f'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">_</span> <span class="id" title="var">v''</span> <span class="id" title="var">pre'</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <span class="id" title="var">H1</span>)) <span class="id" title="keyword">as</span> [<span class="id" title="var">finalv</span> [[<span class="id" title="var">evfinal</span>] <span class="id" title="var">obseq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">finalv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">prev</span> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">Transform.pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">wfl</span> <span class="id" title="var">pre'</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre'</span> <span class="id" title="keyword">as</span> [[] []]. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">split</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_wellformed"><span class="id" title="lemma">EWcbvEval.eval_wellformed</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_expanded"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_expanded</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#eval_etaexp"><span class="id" title="lemma">EEtaExpandedFix.eval_etaexp</span></a> <span class="id" title="var">wfl</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_global_env_isEtaExp_env"><span class="id" title="lemma">EEtaExpandedFix.expanded_global_env_isEtaExp_env</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">H1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#obseq_lambdabox"><span class="id" title="lemma">obseq_lambdabox</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">f'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">obseq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lam"><span class="id" title="method">ETransformPresAppLam.transform_lam</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">t0</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lambdabox_pres_app"><span class="id" title="instance">lambdabox_pres_app</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">v''</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">prev</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">obseq</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="expand_lets_transform_env" class="idref" href="#expand_lets_transform_env"><span class="id" title="lemma">expand_lets_transform_env</span></a> <a id="K:709" class="idref" href="#K:709"><span class="id" title="binder">K</span></a> <a id="p:710" class="idref" href="#p:710"><span class="id" title="binder">p</span></a> <a id="p':711" class="idref" href="#p':711"><span class="id" title="binder">p'</span></a> <a id="pre:712" class="idref" href="#pre:712"><span class="id" title="binder">pre</span></a> <a id="pre':713" class="idref" href="#pre':713"><span class="id" title="binder">pre'</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:710"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':711"><span class="id" title="variable">p'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:709"><span class="id" title="variable">K</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:710"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:712"><span class="id" title="variable">pre</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#K:709"><span class="id" title="variable">K</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p':711"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':713"><span class="id" title="variable">pre'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>, <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="extends_eq" class="idref" href="#extends_eq"><span class="id" title="lemma">extends_eq</span></a> <a id="061d7a4534833c0d5a82e94a0011525d" class="idref" href="#061d7a4534833c0d5a82e94a0011525d"><span class="id" title="binder">Σ</span></a> <a id="9be9393cdd4b8d190ff56f0f5ab33d5d" class="idref" href="#9be9393cdd4b8d190ff56f0f5ab33d5d"><span class="id" title="binder">Σ0</span></a> <a id="c2f11170733dcb55cee6db47fbd3c176" class="idref" href="#c2f11170733dcb55cee6db47fbd3c176"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#061d7a4534833c0d5a82e94a0011525d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c2f11170733dcb55cee6db47fbd3c176"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#061d7a4534833c0d5a82e94a0011525d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#9be9393cdd4b8d190ff56f0f5ab33d5d"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#9be9393cdd4b8d190ff56f0f5ab33d5d"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#c2f11170733dcb55cee6db47fbd3c176"><span class="id" title="variable">Σ'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">ext</span> →. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="erasure_pipeline_extends_app" class="idref" href="#erasure_pipeline_extends_app"><span class="id" title="lemma">erasure_pipeline_extends_app</span></a> (<a id="b07aef13ea55ceab3208b3c384722e9c" class="idref" href="#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="t:718" class="idref" href="#t:718"><span class="id" title="binder">t</span></a> <a id="u:719" class="idref" href="#u:719"><span class="id" title="binder">u</span></a> <a id="pre:720" class="idref" href="#pre:720"><span class="id" title="binder">pre</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable"><span class="id" title="definition">nisErasable</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:718"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:719"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">PCUICEtaExpand.expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:718"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="pre':721" class="idref" href="#pre':721"><span class="id" title="binder">pre'</span></a> <a id="pre'':722" class="idref" href="#pre'':722"><span class="id" title="binder">pre''</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trapp:723" class="idref" href="#trapp:723"><span class="id" title="binder">trapp</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">PCUICAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:718"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:719"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre:720"><span class="id" title="variable">pre</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="trt:724" class="idref" href="#trt:724"><span class="id" title="binder">trt</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#t:718"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre':721"><span class="id" title="variable">pre'</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="tru:725" class="idref" href="#tru:725"><span class="id" title="binder">tru</span></a> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b07aef13ea55ceab3208b3c384722e9c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#u:719"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pre'':722"><span class="id" title="variable">pre''</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:724"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:723"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tru:725"><span class="id" title="variable">tru</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:723"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:723"><span class="id" title="variable">trapp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trapp:723"><span class="id" title="variable">trapp</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">EAst.tApp</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#trt:724"><span class="id" title="variable">trt</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#tru:725"><span class="id" title="variable">tru</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ner</span> <span class="id" title="var">exp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">K</span>:= (<span class="id" title="keyword">fun</span> <a id="p:726" class="idref" href="#p:726"><span class="id" title="binder"><span id="p:727" class="id">p</span></span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:726"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:726"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:726"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnvSN.html#normalizationInAdjustUniversesIn"><span class="id" title="class">PCUICWeakeningEnvSN.normalizationInAdjustUniversesIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:726"><span class="id" title="variable">p</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">ner'</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#63a68285c81db8f9bc456233bb9ed181"><span class="id" title="notation">¬</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.Extract.html#isErasable"><span class="id" title="definition">isErasable</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span>) <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">ner</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ner</span>]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span>, <span class="id" title="var">s</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable_spec"><span class="id" title="lemma">nisErasable_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ner</span> ⇒ //. <span class="id" title="tactic">eapply</span> <span class="id" title="var">w</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#expand_lets_eta_app"><span class="id" title="lemma">expand_lets_eta_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">K</span> <span class="id" title="var">pre</span> <span class="id" title="var">ner'</span> <span class="id" title="var">exp</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">pre'</span> [<span class="id" title="var">pre''</span> <span class="id" title="var">eq</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">pre'</span>, <span class="id" title="var">pre''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tr</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">t0</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>. <span class="id" title="tactic">assert</span> (<span class="id" title="var">heq_env</span>:<span class="id" title="var">tr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><span class="id" title="var">g</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">heq</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose_no_clear</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre3</span> <span class="id" title="var">eq2</span> <span class="id" title="var">pre4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_eta_app"><span class="id" title="lemma">erase_eta_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pre3</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">K</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pre</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">wtapp</span>] [<span class="id" title="var">expapp</span> <span class="id" title="var">Kapp</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">K</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pre'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">wtt</span>] [<span class="id" title="var">expt</span> <span class="id" title="var">Kt</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">wtapp</span> <span class="id" title="var">ner</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">wtp</span>] <span class="id" title="var">rest</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ner</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ner</span>]. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#nisErasable_lets"><span class="id" title="lemma">nisErasable_lets</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">ner</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.Extract.html#nisErasable_spec"><span class="id" title="lemma">nisErasable_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ner</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">wtapp</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">wtp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">expt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">pre'0</span> [<span class="id" title="var">pre''0</span> [<span class="id" title="var">eta</span> [<span class="id" title="var">extapp</span> [<span class="id" title="var">extapp'</span> <span class="id" title="var">heq</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">heq_env</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EProgram.html#TransformExt.preserves_obs"><span class="id" title="definition">EProgram.TransformExt.preserves_obs</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="var">t</span>:=<a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends'"><span class="id" title="lemma">verified_lambdabox_pipeline_extends'</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EProgram.html#extends_eprogram"><span class="id" title="definition">extends_eprogram</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intros</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends"><span class="id" title="instance">verified_lambdabox_pipeline_extends</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intros</span>). <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">pre3</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pre3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre3</span>. <span class="id" title="tactic">intros</span> &lt;-. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pre'0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">H1</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">extapp</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intros</span>). <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends"><span class="id" title="instance">verified_lambdabox_pipeline_extends</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intros</span>). <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">pre3</span>. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pre3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">pre3</span>. <span class="id" title="tactic">intros</span> &lt;-. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pre''0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">H1</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">extapp'</span>. } }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">tr</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqtr</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>]. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">t1</span> <span class="id" title="keyword">with</span> <span class="id" title="var">tr</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">tr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">heqtr</span>; <span class="id" title="var">cbn</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">heqtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">pre4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lambda_box_eta_app"><span class="id" title="lemma">transform_lambda_box_eta_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">h</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span>. { <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">eq</span> <span class="id" title="var">eta</span> <span class="id" title="var">extapp</span>. <span class="id" title="var">revert</span> <span class="id" title="var">pre3</span> <span class="id" title="var">extapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eq</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pre'0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [? []]. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">eta</span> |- ×. <span class="id" title="var">revert</span> <span class="id" title="var">pre'0</span> <span class="id" title="var">H</span> <span class="id" title="var">H0</span> <span class="id" title="var">H1</span> <span class="id" title="var">eta</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#expanded_isEtaExp"><span class="id" title="lemma">EEtaExpandedFix.expanded_isEtaExp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#isEtaExp_extends"><span class="id" title="lemma">EEtaExpandedFix.isEtaExp_extends</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.correctness"><span class="id" title="projection">correctness</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">pre3</span>). <span class="id" title="tactic">apply</span> <span class="id" title="var">H2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">prelam</span> [<span class="id" title="var">prelam'</span> <span class="id" title="var">eqlam</span>]]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqlam</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#snd_pair"><span class="id" title="lemma">snd_pair</span></a>. <span class="id" title="tactic">clear</span> <span class="id" title="var">eqlam</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose_no_clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hlt</span> <span class="id" title="var">heqlt</span>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal2"><span class="id" title="lemma">f_equal2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lambdabox_pres_term"><span class="id" title="lemma">transform_lambdabox_pres_term</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#fst_pair"><span class="id" title="lemma">fst_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">destruct_compose_no_clear</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">eq'</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">extapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#extends_eq"><span class="id" title="lemma">extends_eq</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">extapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">K</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pre</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> (<a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a> <span class="id" title="var">K</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">pre'</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">pre'0</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">pre'0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#surjective_pairing"><span class="id" title="lemma">surjective_pairing</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre'0</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#snd_pair"><span class="id" title="lemma">snd_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose_no_clear</span>. <span class="id" title="tactic">intros</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_erase_pres_term"><span class="id" title="lemma">transform_erase_pres_term</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#fst_pair"><span class="id" title="lemma">fst_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span> ⇒ //. } <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lambdabox_pres_term"><span class="id" title="lemma">transform_lambdabox_pres_term</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#fst_pair"><span class="id" title="lemma">fst_pair</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>. <span class="id" title="var">destruct_compose_no_clear</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">eq'</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">extapp'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pre''0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">H</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.ProofIrrelevance.html#proof_irrelevance"><span class="id" title="axiom">proof_irrelevance</span></a>. <span class="id" title="tactic">subst</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">extapp'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose_no_clear</span>. <span class="id" title="tactic">intros</span> ? ?.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_erase_pres_term"><span class="id" title="lemma">transform_erase_pres_term</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span> ⇒ //. } <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Transparent</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#PCUICErase"><span class="id" title="section">PCUICErase</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="compile_evalue_strip" class="idref" href="#compile_evalue_strip"><span class="id" title="lemma">compile_evalue_strip</span></a> (<a id="b0e5a78425a247ed2e45dfe217627221" class="idref" href="#b0e5a78425a247ed2e45dfe217627221"><span class="id" title="binder">Σer</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">EEnvMap.GlobalContextMap.t</span></a>) <a id="p:729" class="idref" href="#p:729"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0e5a78425a247ed2e45dfe217627221"><span class="id" title="variable">Σer</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:729"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box"><span class="id" title="definition">compile_evalue_box</span></a> (<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip"><span class="id" title="definition">ERemoveParams.strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0e5a78425a247ed2e45dfe217627221"><span class="id" title="variable">Σer</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:729"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip"><span class="id" title="definition">compile_evalue_box_strip</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b0e5a78425a247ed2e45dfe217627221"><span class="id" title="variable">Σer</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#p:729"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue_elim"><span class="id" title="definition">firstorder_evalue_elim</span></a>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_mkApps"><span class="id" title="lemma">ERemoveParams.strip_mkApps</span></a> //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_lookup_inductive_pars"><span class="id" title="lemma">lookup_constructor_pars_args_lookup_inductive_pars</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_mkApps"><span class="id" title="lemma">compile_evalue_box_mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_box_strip_mkApps"><span class="id" title="lemma">compile_evalue_box_strip_mkApps</span></a> (<span class="id" title="var">npars</span>:=<span class="id" title="var">npars</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_constructor_pars_args_lookup_inductive_pars"><span class="id" title="lemma">lookup_constructor_pars_args_lookup_inductive_pars</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_inductive_pars_spec"><span class="id" title="lemma">lookup_inductive_pars_spec</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">ELiftSubst.solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <span class="id" title="tactic">clear</span> <span class="id" title="var">implicits</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="pipeline_cond" class="idref" href="#pipeline_cond"><span class="id" title="section">pipeline_cond</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="b9c9d68cdb7a40984ecc1fe7b18ed6aa" class="idref" href="#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.t" class="idref" href="#pipeline_cond.t"><span class="id" title="variable">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.T" class="idref" href="#pipeline_cond.T"><span class="id" title="variable">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="a94929df69b6bf1d9e3a178efe5f816e" class="idref" href="#a94929df69b6bf1d9e3a178efe5f816e"><span class="id" title="variable">HΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">PCUICTyping.wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="884419b68cde8f83dd03f8fca05bb5bf" class="idref" href="#884419b68cde8f83dd03f8fca05bb5bf"><span class="id" title="variable">expΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">PCUICEtaExpand.expanded_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.expt" class="idref" href="#pipeline_cond.expt"><span class="id" title="variable">expt</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">PCUICEtaExpand.expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.typing" class="idref" href="#pipeline_cond.typing"><span class="id" title="variable">typing</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">PCUICTyping.typing</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.T"><span class="id" title="variable">T</span></a><a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.Normalisation" class="idref" href="#pipeline_cond.Normalisation"><span class="id" title="variable">Normalisation</span></a> : (<span class="id" title="keyword">∀</span> <a id="2cd1c953268b78a7304960b2229558ac" class="idref" href="#2cd1c953268b78a7304960b2229558ac"><span class="id" title="binder">Σ</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2cd1c953268b78a7304960b2229558ac"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2cd1c953268b78a7304960b2229558ac"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="precond" class="idref" href="#precond"><span class="id" title="lemma">precond</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.typing"><span class="id" title="variable">typing</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a>; <span class="id" title="var">sq</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.Normalisation"><span class="id" title="variable">Normalisation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.v" class="idref" href="#pipeline_cond.v"><span class="id" title="variable">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_cond.Heval" class="idref" href="#pipeline_cond.Heval"><span class="id" title="variable">Heval</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.v"><span class="id" title="variable">v</span></a><a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="precond2" class="idref" href="#precond2"><span class="id" title="lemma">precond2</span></a> : <a class="idref" href="MetaRocq.Common.Transform.html#Transform.pre"><span class="id" title="projection">pre</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.v"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.typing"><span class="id" title="variable">typing</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.Heval"><span class="id" title="variable">Heval</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a>; <span class="id" title="var">sq</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#wcbveval_red"><span class="id" title="lemma">PCUICClassification.wcbveval_red</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_red"><span class="id" title="lemma">PCUICEtaExpand.expanded_red</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#a94929df69b6bf1d9e3a178efe5f816e"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> ? ? ? ? ? ?. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.Normalisation"><span class="id" title="variable">Normalisation</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="99521d5372c29b8200c2d107b5049c09" class="idref" href="#99521d5372c29b8200c2d107b5049c09"><span class="id" title="variable">Σ_t</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond"><span class="id" title="lemma">precond</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="pipeline_cond.t_t" class="idref" href="#pipeline_cond.t_t"><span class="id" title="variable">t_t</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond"><span class="id" title="lemma">precond</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="3e58701a9c1f8586568781c51c681293" class="idref" href="#3e58701a9c1f8586568781c51c681293"><span class="id" title="variable">Σ_v</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.v"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond2"><span class="id" title="lemma">precond2</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="pipeline_cond.v_t" class="idref" href="#pipeline_cond.v_t"><span class="id" title="variable">v_t</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">PCUICExpandLets.trans_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="verified_erasure_pipeline_lookup_env_in" class="idref" href="#verified_erasure_pipeline_lookup_env_in"><span class="id" title="lemma">verified_erasure_pipeline_lookup_env_in</span></a> <a id="kn:751" class="idref" href="#kn:751"><span class="id" title="binder">kn</span></a> <a id="decl:752" class="idref" href="#decl:752"><span class="id" title="binder">decl</span></a> (<a id="efl:753" class="idref" href="#efl:753"><span class="id" title="binder">efl</span></a> := <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#switch_no_params"><span class="id" title="definition">EInlineProjections.switch_no_params</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#all_env_flags"><span class="id" title="definition">all_env_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{<a id="has_rel:754" class="idref" href="#has_rel:754"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:755" class="idref" href="#has_box:755"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#99521d5372c29b8200c2d107b5049c09"><span class="id" title="variable">Σ_t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:751"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:752"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="decl':756" class="idref" href="#decl':756"><span class="id" title="binder">decl'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_global"><span class="id" title="definition">PCUICAst.PCUICEnvironment.lookup_global</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">PCUICExpandLets.trans_global_decls</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">PCUICAst.PCUICEnvironment.declarations</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#kn:751"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':756"><span class="id" title="variable">decl'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a>  <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_decl_equal"><span class="id" title="definition">erase_decl_equal</span></a> (<span class="id" title="keyword">fun</span> <a id="decl:757" class="idref" href="#decl:757"><span class="id" title="binder">decl</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_inductive_decl"><span class="id" title="definition">ERemoveParams.strip_inductive_decl</span></a> (<a class="idref" href="MetaRocq.Erasure.ErasureFunction.html#erase_mutual_inductive_body"><span class="id" title="definition">erase_mutual_inductive_body</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:757"><span class="id" title="variable">decl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl:752"><span class="id" title="variable">decl</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#decl':756"><span class="id" title="variable">decl'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ_t</span>, <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intro</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intro</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline"><span class="id" title="definition">verified_lambdabox_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intro</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_env_transform_blocks"><span class="id" title="lemma">EConstructorsAsBlocks.lookup_env_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">EConstructorsAsBlocks.transform_blocks_decl</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#lookup_env_optimize"><span class="id" title="lemma">EInlineProjections.lookup_env_optimize</span></a>.<br/>
&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_env_wf"><span class="id" title="lemma">EOptimizePropDiscr.remove_match_on_box_env_wf</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_env_wf"><span class="id" title="lemma">ERemoveParams.strip_env_wf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_spec"><span class="id" title="lemma">erase_global_deps_fast_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_wf_glob"><span class="id" title="lemma">erase_global_deps_wf_glob</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">He</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#optimize_decl"><span class="id" title="definition">EInlineProjections.optimize_decl</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#lookup_env_remove_match_on_box"><span class="id" title="lemma">EOptimizePropDiscr.lookup_env_remove_match_on_box</span></a>.<br/>
&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_env_wf"><span class="id" title="lemma">ERemoveParams.strip_env_wf</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_spec"><span class="id" title="lemma">erase_global_deps_fast_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_wf_glob"><span class="id" title="lemma">erase_global_deps_wf_glob</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? <span class="id" title="var">He</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.EOptimizePropDiscr.html#remove_match_on_box_decl"><span class="id" title="definition">EOptimizePropDiscr.remove_match_on_box_decl</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#lookup_env_strip"><span class="id" title="lemma">ERemoveParams.lookup_env_strip</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.ERemoveParams.html#strip_decl"><span class="id" title="definition">ERemoveParams.strip_decl</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <span class="id" title="tactic">at</span> 1. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#erase_global_deps_fast_spec"><span class="id" title="lemma">erase_global_deps_fast_spec</span></a>.<br/>
&nbsp;&nbsp;2: { <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> ? <span class="id" title="var">He</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">He</span>. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#term_global_deps"><span class="id" title="definition">EAstUtils.term_global_deps</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">EGlobalEnv.lookup_env</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">case_eq</span> <span class="id" title="var">o</span>. 2: { <span class="id" title="tactic">intros</span> ?. <span class="id" title="tactic">inversion</span> 1. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">decl'</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Hlookup</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lookup_env_in_erase_global_deps"><span class="id" title="lemma">lookup_env_in_erase_global_deps</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">w</span> <span class="id" title="var">t0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">kn</span> <span class="id" title="var">_</span> <span class="id" title="var">Hyp0</span> <span class="id" title="var">decl'</span> <span class="id" title="var">_</span> <span class="id" title="var">Heq</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#a94929df69b6bf1d9e3a178efe5f816e"><span class="id" title="variable">HΣ</span></a>). <span class="id" title="tactic">clear</span> - <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H8</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#b9c9d68cdb7a40984ecc1fe7b18ed6aa"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>). <span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">H</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hlookup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">decl''</span> [? ?]]. <span class="id" title="tactic">∃</span> <span class="id" title="var">decl''</span>; <span class="id" title="tactic">split</span> ; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H10</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">decl'</span> , <span class="id" title="var">decl''</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_cond"><span class="id" title="section">pipeline_cond</span></a>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="pipeline_theorem" class="idref" href="#pipeline_theorem"><span class="id" title="section">pipeline_theorem</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="f1d8a902490c95dcf9dee281bffa9559" class="idref" href="#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="2b0200fc367963ea51e18d0538a7a011" class="idref" href="#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">PCUICTyping.wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="cf3102057884efcb7d0ff17a1b3ec4ef" class="idref" href="#cf3102057884efcb7d0ff17a1b3ec4ef"><span class="id" title="variable">expΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">PCUICEtaExpand.expanded_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.t" class="idref" href="#pipeline_theorem.t"><span class="id" title="variable">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.expt" class="idref" href="#pipeline_theorem.expt"><span class="id" title="variable">expt</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">PCUICEtaExpand.expanded</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.axfree" class="idref" href="#pipeline_theorem.axfree"><span class="id" title="variable">axfree</span></a> : <a class="idref" href="MetaRocq.Erasure.Extract.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.v" class="idref" href="#pipeline_theorem.v"><span class="id" title="variable">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.i" class="idref" href="#pipeline_theorem.i"><span class="id" title="variable">i</span></a> : <a class="idref" href="MetaRocq.Common.Kernames.html#inductive"><span class="id" title="record">Kernames.inductive</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.u" class="idref" href="#pipeline_theorem.u"><span class="id" title="variable">u</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#Instance.t"><span class="id" title="definition">Universes.Instance.t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.args" class="idref" href="#pipeline_theorem.args"><span class="id" title="variable">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.Normalisation" class="idref" href="#pipeline_theorem.Normalisation"><span class="id" title="variable">Normalisation</span></a> :  (<span class="id" title="keyword">∀</span> <a id="2a9fe12610f96b5c4cbad5653736b65d" class="idref" href="#2a9fe12610f96b5c4cbad5653736b65d"><span class="id" title="binder">Σ</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2a9fe12610f96b5c4cbad5653736b65d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2a9fe12610f96b5c4cbad5653736b65d"><span class="id" title="variable">Σ</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.typing" class="idref" href="#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">PCUICTyping.typing</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">PCUICAst.mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tInd"><span class="id" title="constructor">PCUICAst.tInd</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.i"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.args"><span class="id" title="variable">args</span></a>)<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.fo" class="idref" href="#pipeline_theorem.fo"><span class="id" title="variable">fo</span></a> : @<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env"><span class="id" title="definition">PCUICFirstorder.firstorder_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.i"><span class="id" title="variable">i</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Variable</span> <a id="pipeline_theorem.Heval" class="idref" href="#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a> : <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">PCUICWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a><a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="136658f7ea9a51e1a71c057466c379f6" class="idref" href="#136658f7ea9a51e1a71c057466c379f6"><span class="id" title="variable">Σ_t</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond"><span class="id" title="lemma">precond</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cf3102057884efcb7d0ff17a1b3ec4ef"><span class="id" title="variable">expΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.expt"><span class="id" title="variable">expt</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="var">_</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="pipeline_theorem.t_t" class="idref" href="#pipeline_theorem.t_t"><span class="id" title="variable">t_t</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond"><span class="id" title="lemma">precond</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cf3102057884efcb7d0ff17a1b3ec4ef"><span class="id" title="variable">expΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.expt"><span class="id" title="variable">expt</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="var">_</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="2f8e794db205ed1b457ac708530d8fac" class="idref" href="#2f8e794db205ed1b457ac708530d8fac"><span class="id" title="variable">Σ_v</span></a> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond2"><span class="id" title="lemma">precond2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cf3102057884efcb7d0ff17a1b3ec4ef"><span class="id" title="variable">expΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.expt"><span class="id" title="variable">expt</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Let</span> <a id="pipeline_theorem.v_t" class="idref" href="#pipeline_theorem.v_t"><span class="id" title="variable">v_t</span></a> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_value_box"><span class="id" title="definition">compile_value_box</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">PCUICExpandLets.trans_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="verified_erasure_pipeline_extends" class="idref" href="#verified_erasure_pipeline_extends"><span class="id" title="lemma">verified_erasure_pipeline_extends</span></a> (<a id="efl:787" class="idref" href="#efl:787"><span class="id" title="binder">efl</span></a> := <a class="idref" href="MetaRocq.Erasure.EInlineProjections.html#switch_no_params"><span class="id" title="definition">EInlineProjections.switch_no_params</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#all_env_flags"><span class="id" title="definition">all_env_flags</span></a>)<br/>
&nbsp;&nbsp;&nbsp;{<a id="has_rel:788" class="idref" href="#has_rel:788"><span class="id" title="binder">has_rel</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a>} {<a id="has_box:789" class="idref" href="#has_box:789"><span class="id" title="binder">has_box</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">EGlobalEnv.extends</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2f8e794db205ed1b457ac708530d8fac"><span class="id" title="variable">Σ_v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#136658f7ea9a51e1a71c057466c379f6"><span class="id" title="variable">Σ_t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ_v</span>, <span class="id" title="var">Σ_t</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="var">destruct_compose</span>; <span class="id" title="tactic">intro</span>). <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">typing'</span>], <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">set</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_lambdabox_pipeline_extends"><span class="id" title="instance">verified_lambdabox_pipeline_extends</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#extends_erase_pcuic_program"><span class="id" title="lemma">extends_erase_pcuic_program</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wcbveval"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wcbveval</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>) (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">HΣ</span> <span class="id" title="var">typing'</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">PCUICClosedTyp.subject_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">typing'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> <span class="id" title="var">typing'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.fo"><span class="id" title="variable">fo</span></a>. <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_lookup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">PCUICAst.PCUICEnvironment.lookup_env</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_mutind"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_mutind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_env"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_env</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="fo_v" class="idref" href="#fo_v"><span class="id" title="lemma">fo_v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>. <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_spec"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_spec</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="v_t_spec" class="idref" href="#v_t_spec"><span class="id" title="lemma">v_t_spec</span></a> : <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v_t"><span class="id" title="variable">v_t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond2"><span class="id" title="lemma">precond2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#cf3102057884efcb7d0ff17a1b3ec4ef"><span class="id" title="variable">expΣ</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.expt"><span class="id" title="variable">expt</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">v_t</span>. <span class="id" title="tactic">generalize</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_v"><span class="id" title="lemma">fo_v</span></a>. <span class="id" title="tactic">set</span> (<span class="id" title="var">pre</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond2"><span class="id" title="lemma">precond2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_fo"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_fo</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hv</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">typing'</span>], <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">eqtr</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_inds"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_inds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">ELiftSubst.solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">PCUICExpandLets.trans_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_preserves_fo"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_preserves_fo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hv</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hv</span>. }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Normalisation'</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">PCUICExpandLets.trans_global</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> [[] ?]. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#build_global_env_map"><span class="id" title="definition">build_global_env_map</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_tranform_firstorder"><span class="id" title="lemma">erase_tranform_firstorder</span></a> <span class="id" title="var">_</span> <span class="id" title="var">h</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.i"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.args"><span class="id" title="variable">args</span></a>) <span class="id" title="var">Normalisation'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eqtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>. { <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">HΣ</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.fo"><span class="id" title="variable">fo</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_ind"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_ind</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>. { <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eqtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wcbveval"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wcbveval</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)); <span class="id" title="var">tea</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#value_final"><span class="id" title="lemma">PCUICWcbvEval.value_final</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">PCUICWcbvEval.eval_closed</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">PCUICClosedTyp.subject_closed</span></a> <span class="id" title="var">typing'</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_transform_fo"><span class="id" title="lemma">erase_transform_fo</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σer</span> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>]. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">Heval'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <span class="id" title="var">Σer</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_lambda_box_firstorder"><span class="id" title="lemma">transform_lambda_box_firstorder</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_strip"><span class="id" title="lemma">compile_evalue_strip</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pre</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">wt</span>] ?]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#compile_evalue_erase"><span class="id" title="lemma">compile_evalue_erase</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">PCUICExpandLets.trans_global</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>) <span class="id" title="var">Σer</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a> <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#"><span class="id" title="module">PCUICWfEnv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="verified_erasure_pipeline_firstorder_evalue_block" class="idref" href="#verified_erasure_pipeline_firstorder_evalue_block"><span class="id" title="lemma">verified_erasure_pipeline_firstorder_evalue_block</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#firstorder_evalue_block"><span class="id" title="inductive">firstorder_evalue_block</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2f8e794db205ed1b457ac708530d8fac"><span class="id" title="variable">Σ_v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v_t"><span class="id" title="variable">v_t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v_t_spec"><span class="id" title="lemma">v_t_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ_v</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#transform_compose_assoc"><span class="id" title="lemma">transform_compose_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_v"><span class="id" title="lemma">fo_v</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pre1</span>. <span class="id" title="var">destruct_compose</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">pre2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#lambdabox_pres_fo"><span class="id" title="lemma">lambdabox_pres_fo</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">fn</span> [<span class="id" title="var">tr</span> <span class="id" title="var">hfn</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">tr</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">typing'</span>]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Heval'</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>). <span class="id" title="var">sq</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">transform_fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intro</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">preserves_fo</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">eqtr</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <span class="id" title="var">hv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_inds"><span class="id" title="lemma">PCUICFirstorder.firstorder_value_inds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">ELiftSubst.solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">PCUICFirstorder.firstorder_value</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">PCUICExpandLets.trans_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_preserves_fo"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_preserves_fo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hv</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hv</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">Normalisation'</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICSN.html#NormalizationIn"><span class="id" title="class">PCUICSN.NormalizationIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">PCUICExpandLets.trans_global</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">pre1</span> <span class="id" title="keyword">as</span> [[] ?]. <span class="id" title="tactic">apply</span> <span class="id" title="var">a</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">w</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#build_global_env_map"><span class="id" title="definition">build_global_env_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">PCUICExpandLets.trans_global_env</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p</span> := <a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (@<a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_tranform_firstorder"><span class="id" title="lemma">erase_tranform_firstorder</span></a> <span class="id" title="var">_</span> <span class="id" title="var">pre1</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.i"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.u"><span class="id" title="variable">u</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.args"><span class="id" title="variable">args</span></a>) <span class="id" title="var">Normalisation'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">Heval'</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heval'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">Heval'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>. { <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">HΣ</span> <span class="id" title="var">fo</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.fo"><span class="id" title="variable">fo</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> /= <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_lookup</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">PCUICAst.PCUICEnvironment.lookup_env</span></a> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_mutind"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_mutind</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_env"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_env</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H0</span>. { <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eqtr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wcbveval"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wcbveval</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>)); <span class="id" title="var">tea</span>. <span class="id" title="tactic">exact</span> <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#value_final"><span class="id" title="lemma">PCUICWcbvEval.value_final</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heval'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">PCUICWcbvEval.eval_closed</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">PCUICClosedTyp.subject_closed</span></a> <span class="id" title="var">typing'</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#erase_transform_fo"><span class="id" title="lemma">erase_transform_fo</span></a> //. { <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σer</span> := <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_evalue"><span class="id" title="inductive">firstorder_evalue</span></a> <span class="id" title="var">Σer</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#compile_value_erase"><span class="id" title="definition">compile_value_erase</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#fo_evalue_map"><span class="id" title="definition">fo_evalue_map</span></a>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqtr</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="verified_erasure_pipeline_theorem" class="idref" href="#verified_erasure_pipeline_theorem"><span class="id" title="lemma">verified_erasure_pipeline_theorem</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> (<span class="id" title="var">wfl</span> := <a class="idref" href="MetaRocq.Erasure.EWcbvEvalNamed.html#extraction_wcbv_flags"><span class="id" title="definition">extraction_wcbv_flags</span></a>) <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#136658f7ea9a51e1a71c057466c379f6"><span class="id" title="variable">Σ_t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t_t"><span class="id" title="variable">t_t</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.v_t"><span class="id" title="variable">v_t</span></a> <a class="idref" href="MetaRocq.Utils.MRSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">hnf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Common.Transform.html#Transform.preservation"><span class="id" title="projection">preservation</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.t"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hcorr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hcorr</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heval</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hev</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond"><span class="id" title="lemma">precond</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Hev</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">v'</span> [[<span class="id" title="var">H1</span>] <span class="id" title="var">H2</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#v_t_spec"><span class="id" title="lemma">v_t_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">pre</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#precond2"><span class="id" title="lemma">precond2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">pre</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">v_t</span> <span class="id" title="var">Σ_t</span> <span class="id" title="var">t_t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#verified_erasure_pipeline"><span class="id" title="definition">verified_erasure_pipeline</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H1</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hcorr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ev</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">decompose</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ex"><span class="id" title="inductive">ex</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#and"><span class="id" title="inductive">and</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#prod"><span class="id" title="inductive">prod</span></a>] <span class="id" title="var">obs</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ev</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">destruct_compose</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a>, <a class="idref" href="MetaRocq.Common.Transform.html#time"><span class="id" title="definition">time</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#constructors_as_blocks_transformation"><span class="id" title="definition">constructors_as_blocks_transformation</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.run"><span class="id" title="definition">run</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#rebuild_wf_env_transform"><span class="id" title="definition">rebuild_wf_env_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#inline_projections_optimization"><span class="id" title="definition">inline_projections_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_match_on_box_trans"><span class="id" title="definition">remove_match_on_box_trans</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#remove_params_optimization"><span class="id" title="definition">remove_params_optimization</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#guarded_to_unguarded_fix"><span class="id" title="definition">guarded_to_unguarded_fix</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.obseq"><span class="id" title="projection">obseq</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.Common.Transform.html#Transform.compose"><span class="id" title="definition">compose</span></a> <a class="idref" href="MetaRocq.TemplatePCUIC.PCUICTransform.html#pcuic_expand_lets_transform"><span class="id" title="definition">pcuic_expand_lets_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Common.Transform.html#Transform.transform"><span class="id" title="projection">transform</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_transform"><span class="id" title="definition">erase_transform</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">typing'</span>]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.typing"><span class="id" title="variable">typing</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">typing''</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">PCUICClassification.subject_reduction_eval</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">typing'</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">PCUICExpandLetsCorrectness.pcuic_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">typing'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">typing'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">em</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#build_global_env_map"><span class="id" title="definition">build_global_env_map</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_program"><span class="id" title="definition">erase_program</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">f</span> := <a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> <span class="id" title="keyword">as</span> [[]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">wfe</span> := <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> <span class="id" title="var">em</span> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext_wf"><span class="id" title="lemma">PCUICTyping.wf_ext_wf</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">em</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="MetaRocq.Utils.MRSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#:::x_'.p1'"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#conj"><span class="id" title="constructor">conj</span></a> (<a class="idref" href="MetaRocq.Utils.MRSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">w0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">s</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">a</span><a class="idref" href="MetaRocq.Utils.MRProd.html#:::x_'.p1'"><span class="id" title="notation">).</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#:::x_'.p1'"><span class="id" title="notation">p1</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem.Heval"><span class="id" title="variable">Heval</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Erasure.ErasureFunctionProperties.html#firstorder_erases_deterministic"><span class="id" title="lemma">ErasureFunctionProperties.firstorder_erases_deterministic</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> <span class="id" title="var">wfe</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. 3:<span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wcbveval"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wcbveval</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">PCUICWcbvEval.eval_closed</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">typing''</span> <span class="id" title="var">HΣ</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">PCUICClosedTyp.subject_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">typing''</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#value_final"><span class="id" title="lemma">PCUICWcbvEval.value_final</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_to_value"><span class="id" title="lemma">PCUICWcbvEval.eval_to_value</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">fo</span>. <span class="id" title="var">revert</span> <span class="id" title="var">fo</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">PCUICFirstorder.firstorder_ind</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_lookup</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">PCUICAst.PCUICEnvironment.lookup_env</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_mutind"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_mutind</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_env"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_env</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">obs</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">H1</span> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">v1</span> |- <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ?<span class="id" title="var">v2</span> ] ⇒ <span class="id" title="var">enough</span> (<span class="id" title="var">v2</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v1</span>) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="tactic">exact</span> <span class="id" title="var">ev</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#obseq_lambdabox"><span class="id" title="lemma">obseq_lambdabox</span></a>; <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.ErasurePlugin.ETransform.html#erase_pcuic_program"><span class="id" title="definition">erase_pcuic_program</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a>]. <span class="id" title="tactic">exact</span> <span class="id" title="var">obs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>:<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>, <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#2b0200fc367963ea51e18d0538a7a011"><span class="id" title="variable">HΣ</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">obs</span> <span class="id" title="var">b0</span> <span class="id" title="var">ev</span> <span class="id" title="var">e</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#extends_erase_pcuic_program"><span class="id" title="lemma">extends_erase_pcuic_program</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wcbveval"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wcbveval</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.Common.config.html#extraction_checker_flags"><span class="id" title="instance">extraction_checker_flags</span></a>) (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_wf</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> -<span class="id" title="var">HΣ</span> <span class="id" title="var">typing''</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">PCUICClosedTyp.subject_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">typing''</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. 2:<span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_axiom_free"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_axiom_free</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">PCUICExpandLetsCorrectness.expand_lets_sound</span></a> <span class="id" title="var">typing''</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X1</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_ind"><span class="id" title="lemma">PCUICExpandLetsCorrectness.trans_firstorder_ind</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#f1d8a902490c95dcf9dee281bffa9559"><span class="id" title="variable">Σ</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.ErasurePlugin.ErasureCorrectness.html#pipeline_theorem"><span class="id" title="section">pipeline_theorem</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
