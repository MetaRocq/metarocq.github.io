<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./indexpage.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaCoq.SafeChecker.PCUICWfEnvImpl</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Coq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.Template.config.html#"><span class="id" title="library">config</span></a> <a class="idref" href="MetaCoq.Template.utils.html#"><span class="id" title="library">utils</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#"><span class="id" title="library">uGraph</span></a> <a class="idref" href="MetaCoq.Template.EnvMap.html#"><span class="id" title="library">EnvMap</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#"><span class="id" title="library">PCUICAst</span></a> <a class="idref" href="MetaCoq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="library">PCUICAstUtils</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICEquality.html#"><span class="id" title="library">PCUICEquality</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICReduction.html#"><span class="id" title="library">PCUICReduction</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.Syntax.PCUICReflect.html#"><span class="id" title="library">PCUICReflect</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICSafeLemmata.html#"><span class="id" title="library">PCUICSafeLemmata</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#"><span class="id" title="library">PCUICTyping</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#"><span class="id" title="library">PCUICGlobalEnv</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#"><span class="id" title="library">PCUICWfUniverses</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaCoq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#"><span class="id" title="library">PCUICEqualityDec</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#"><span class="id" title="library">PCUICWfEnv</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_gc_of_uctx" class="idref" href="#wf_gc_of_uctx"><span class="id" title="lemma">wf_gc_of_uctx</span></a> {<a id="cf:1" class="idref" href="#cf:1"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="ebf069dbc779b42a15c441a6d39d5f83" class="idref" href="#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} (<a id="0bf8cc2adf763e1a09ca12aa94f1f21b" class="idref" href="#0bf8cc2adf763e1a09ca12aa94f1f21b"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
: <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="uctx':4" class="idref" href="#uctx':4"><span class="id" title="binder">uctx'</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ebf069dbc779b42a15c441a6d39d5f83"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx':4"><span class="id" title="variable">uctx'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaCoq.Template.Universes.html#consistent"><span class="id" title="definition">consistent</span></a> <a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <span class="id" title="var">Σ</span><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">HC</span>.<br/>
{ <span class="id" title="var">sq</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_consistent"><span class="id" title="lemma">wf_consistent</span></a> <span class="id" title="var">_</span> <span class="id" title="var">HΣ</span>). }<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_consistent_iff"><span class="id" title="lemma">gc_consistent_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_constraints"><span class="id" title="definition">global_constraints</span></a> <span class="id" title="var">Σ</span>)).<br/>
<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="var">contradiction</span> <span class="id" title="var">HC</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="graph_of_wf" class="idref" href="#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> {<a id="cf:5" class="idref" href="#cf:5"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="f525610baade8c1419220d275a93fff0" class="idref" href="#f525610baade8c1419220d275a93fff0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} (<a id="5c922ab6657e0c26331e858d5e9d9bcd" class="idref" href="#5c922ab6657e0c26331e858d5e9d9bcd"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f525610baade8c1419220d275a93fff0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
: <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="G:8" class="idref" href="#G:8"><span class="id" title="binder">G</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:8"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_uctx"><span class="id" title="definition">global_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f525610baade8c1419220d275a93fff0"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_gc_of_uctx"><span class="id" title="lemma">wf_gc_of_uctx</span></a> <span class="id" title="var">HΣ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">uctx</span> <span class="id" title="var">Huctx</span>].<br/>
<span class="id" title="tactic">∃</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#make_graph"><span class="id" title="definition">make_graph</span></a> <span class="id" title="var">uctx</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Huctx</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_ext_gc_of_uctx" class="idref" href="#wf_ext_gc_of_uctx"><span class="id" title="lemma">wf_ext_gc_of_uctx</span></a> {<a id="cf:9" class="idref" href="#cf:9"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="2ab75602e9b8af2ca6fd6dbdb1e68a19" class="idref" href="#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} (<a id="388ae440a1ec913361d3f95ae3fdc174" class="idref" href="#388ae440a1ec913361d3f95ae3fdc174"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
: <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="uctx':12" class="idref" href="#uctx':12"><span class="id" title="binder">uctx'</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2ab75602e9b8af2ca6fd6dbdb1e68a19"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx':12"><span class="id" title="variable">uctx'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaCoq.Template.Universes.html#consistent"><span class="id" title="definition">consistent</span></a> <a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <span class="id" title="var">Σ</span><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">HC</span>.<br/>
{ <span class="id" title="var">sq</span>; <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#global_ext_uctx_consistent"><span class="id" title="definition">global_ext_uctx_consistent</span></a> <span class="id" title="var">_</span> <span class="id" title="var">HΣ</span>). }<br/>
<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> φ].<br/>
<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span>.<br/>
<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_consistent_iff"><span class="id" title="lemma">gc_consistent_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HC</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> φ<a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)).<br/>
<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="var">contradiction</span> <span class="id" title="var">HC</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="graph_of_wf_ext" class="idref" href="#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> {<a id="cf:13" class="idref" href="#cf:13"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="08441172cd4c14450ee9e66c55932a87" class="idref" href="#08441172cd4c14450ee9e66c55932a87"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} (<a id="02b16de2341d6075528ee1924dc3e22d" class="idref" href="#02b16de2341d6075528ee1924dc3e22d"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#08441172cd4c14450ee9e66c55932a87"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
: <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="G:16" class="idref" href="#G:16"><span class="id" title="binder">G</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:16"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#08441172cd4c14450ee9e66c55932a87"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_ext_gc_of_uctx"><span class="id" title="lemma">wf_ext_gc_of_uctx</span></a> <span class="id" title="var">HΣ</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">uctx</span> <span class="id" title="var">Huctx</span>].<br/>
<span class="id" title="tactic">∃</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#make_graph"><span class="id" title="definition">make_graph</span></a> <span class="id" title="var">uctx</span>). <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Huctx</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="consistent_proper" class="idref" href="#consistent_proper"><span class="id" title="instance">consistent_proper</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="MetaCoq.Template.Universes.html#CS.Equal"><span class="id" title="definition">CS.Equal</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#iff"><span class="id" title="definition">iff</span></a>) <a class="idref" href="MetaCoq.Template.Universes.html#consistent"><span class="id" title="definition">consistent</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span> <span class="id" title="var">c'</span> <span class="id" title="var">eq</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaCoq.Template.Universes.html#consistent"><span class="id" title="definition">consistent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">setoid_rewrite</span> <span class="id" title="var">eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_udecl_mono" class="idref" href="#on_udecl_mono"><span class="id" title="lemma">on_udecl_mono</span></a> {<a id="cf:17" class="idref" href="#cf:17"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="8b13b958e79b112c1b4fdea541acbd8a" class="idref" href="#8b13b958e79b112c1b4fdea541acbd8a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="bd44762cfb0786657d7dd8ae225e1bee" class="idref" href="#bd44762cfb0786657d7dd8ae225e1bee"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8b13b958e79b112c1b4fdea541acbd8a"><span class="id" title="variable">Σ</span></a>} : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8b13b958e79b112c1b4fdea541acbd8a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#Monomorphic_ctx"><span class="id" title="constructor">Monomorphic_ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.Universes.html#LevelSetFact.empty_iff"><span class="id" title="lemma">LevelSetFact.empty_iff</span></a> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.Universes.html#ConstraintSetFact.empty_iff"><span class="id" title="lemma">ConstraintSetFact.empty_iff</span></a> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#univs_ext_constraints"><span class="id" title="definition">univs_ext_constraints</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.Universes.html#CS_union_empty"><span class="id" title="lemma">CS_union_empty</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.Universes.html#consistent_extension_on_empty"><span class="id" title="lemma">consistent_extension_on_empty</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Class</span> <a id="abstract_guard_impl" class="idref" href="#abstract_guard_impl"><span class="id" title="record">abstract_guard_impl</span></a> := <br/>
&nbsp;&nbsp;{ <a id="guard_impl" class="idref" href="#guard_impl"><span class="id" title="projection">guard_impl</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#FixCoFix"><span class="id" title="inductive">FixCoFix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="guard_correct" class="idref" href="#guard_correct"><span class="id" title="projection">guard_correct</span></a> : <span class="id" title="keyword">∀</span> <a id="fix_cofix:22" class="idref" href="#fix_cofix:22"><span class="id" title="binder">fix_cofix</span></a> <a id="3eadb2a0aeaeef49bd6cd27b7316c266" class="idref" href="#3eadb2a0aeaeef49bd6cd27b7316c266"><span class="id" title="binder">Σ</span></a> <a id="c14c0b2265abf3ec26ac01165fe38870" class="idref" href="#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="binder">Γ</span></a> <a id="mfix:25" class="idref" href="#mfix:25"><span class="id" title="binder">mfix</span></a>, <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#guard"><span class="id" title="method">guard</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:22"><span class="id" title="variable">fix_cofix</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#3eadb2a0aeaeef49bd6cd27b7316c266"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#mfix:25"><span class="id" title="variable">mfix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl:21"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:22"><span class="id" title="variable">fix_cofix</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#3eadb2a0aeaeef49bd6cd27b7316c266"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#mfix:25"><span class="id" title="variable">mfix</span></a><br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="fake_guard_impl" class="idref" href="#fake_guard_impl"><span class="id" title="definition">fake_guard_impl</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#FixCoFix"><span class="id" title="inductive">FixCoFix</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.BasicAst.html#mfixpoint"><span class="id" title="definition">mfixpoint</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a><br/>
&nbsp;&nbsp;:= <span class="id" title="keyword">fun</span> <a id="fix_cofix:27" class="idref" href="#fix_cofix:27"><span class="id" title="binder">fix_cofix</span></a> <a id="eb789037a8f6adae4a3a57f4d9f80b3c" class="idref" href="#eb789037a8f6adae4a3a57f4d9f80b3c"><span class="id" title="binder">Σ</span></a> <a id="0b505d350bf3c4269fbe0253bf0ba4a2" class="idref" href="#0b505d350bf3c4269fbe0253bf0ba4a2"><span class="id" title="binder">Γ</span></a> <a id="mfix:30" class="idref" href="#mfix:30"><span class="id" title="binder">mfix</span></a> ⇒ <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="referenced_impl_ext" class="idref" href="#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> {<a id="cf:31" class="idref" href="#cf:31"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:32" class="idref" href="#guard:32"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_env_ext" class="idref" href="#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> :&gt; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_ext_wf" class="idref" href="#referenced_impl_ext_wf"><span class="id" title="projection">referenced_impl_ext_wf</span></a> :&gt; <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext:34"><span class="id" title="method">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_ext_graph" class="idref" href="#referenced_impl_ext_graph"><span class="id" title="projection">referenced_impl_ext_graph</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_wf:35"><span class="id" title="method">referenced_impl_ext_wf</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_ext_graph_wf" class="idref" href="#referenced_impl_ext_graph_wf"><span class="id" title="projection">referenced_impl_ext_graph_wf</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_wf:35"><span class="id" title="method">referenced_impl_ext_wf</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="referenced_impl" class="idref" href="#referenced_impl"><span class="id" title="record">referenced_impl</span></a> {<a id="cf:38" class="idref" href="#cf:38"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_env" class="idref" href="#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> :&gt; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_wf" class="idref" href="#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> :&gt; <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env:40"><span class="id" title="method">referenced_impl_env</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_graph" class="idref" href="#referenced_impl_graph"><span class="id" title="projection">referenced_impl_graph</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Specif.html#projT1"><span class="id" title="definition">projT1</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf:41"><span class="id" title="method">referenced_impl_wf</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="referenced_impl_graph_wf" class="idref" href="#referenced_impl_graph_wf"><span class="id" title="projection">referenced_impl_graph_wf</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Specif.html#projT2"><span class="id" title="definition">projT2</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf:41"><span class="id" title="method">referenced_impl_wf</span></a>)<br/>
&nbsp;&nbsp;}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="init_env" class="idref" href="#init_env"><span class="id" title="definition">init_env</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.Template.Universes.html#LS.singleton"><span class="id" title="definition">LS.singleton</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#Level.lzero"><span class="id" title="constructor">Level.lzero</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#CS.empty"><span class="id" title="definition">CS.empty</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="on_global_univ_init_env" class="idref" href="#on_global_univ_init_env"><span class="id" title="definition">on_global_univ_init_env</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_global_univs"><span class="id" title="definition">on_global_univs</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#init_env"><span class="id" title="definition">init_env</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">Hx</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">exact</span> 1%<span class="id" title="var">positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>. <span class="id" title="tactic">intros</span> ? ?. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="check_conv_pb_relb_correct" class="idref" href="#check_conv_pb_relb_correct"><span class="id" title="definition">check_conv_pb_relb_correct</span></a> {<a id="cf:44" class="idref" href="#cf:44"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="8bac999218c391434ebfca8da64fb69b" class="idref" href="#8bac999218c391434ebfca8da64fb69b"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="6e7777c2f429df0fc9b39cdc1ef81050" class="idref" href="#6e7777c2f429df0fc9b39cdc1ef81050"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bac999218c391434ebfca8da64fb69b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) <a id="G:47" class="idref" href="#G:47"><span class="id" title="binder">G</span></a><br/>
&nbsp;&nbsp;(<a id="HG:48" class="idref" href="#HG:48"><span class="id" title="binder">HG</span></a> : <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:47"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bac999218c391434ebfca8da64fb69b"><span class="id" title="variable">Σ</span></a>)) <a id="conv_pb:49" class="idref" href="#conv_pb:49"><span class="id" title="binder">conv_pb</span></a> <a id="u:50" class="idref" href="#u:50"><span class="id" title="binder">u</span></a> <a id="u':51" class="idref" href="#u':51"><span class="id" title="binder">u'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#wf_universe"><span class="id" title="definition">wf_universe</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bac999218c391434ebfca8da64fb69b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u':51"><span class="id" title="variable">u'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#wf_universe"><span class="id" title="definition">wf_universe</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bac999218c391434ebfca8da64fb69b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u:50"><span class="id" title="variable">u</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Universes.html#compare_universe"><span class="id" title="definition">compare_universe</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#conv_pb:49"><span class="id" title="variable">conv_pb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bac999218c391434ebfca8da64fb69b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u:50"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u':51"><span class="id" title="variable">u'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#conv_pb_relb"><span class="id" title="definition">conv_pb_relb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:47"><span class="id" title="variable">G</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#conv_pb:49"><span class="id" title="variable">conv_pb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u:50"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u':51"><span class="id" title="variable">u'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">sq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">conv_pb</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intro</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_eqb_universe_complete"><span class="id" title="lemma">check_eqb_universe_complete</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext_consistent"><span class="id" title="lemma">wf_ext_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_eqb_universe_spec'"><span class="id" title="lemma">check_eqb_universe_spec'</span></a> <span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext_consistent"><span class="id" title="lemma">wf_ext_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_leqb_universe_complete"><span class="id" title="lemma">check_leqb_universe_complete</span></a> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext_consistent"><span class="id" title="lemma">wf_ext_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_leqb_universe_spec'"><span class="id" title="lemma">check_leqb_universe_spec'</span></a> <span class="id" title="var">G</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <span class="id" title="var">Σ</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext_consistent"><span class="id" title="lemma">wf_ext_consistent</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="canonical_abstract_env_ext_struct" class="idref" href="#canonical_abstract_env_ext_struct"><span class="id" title="instance">canonical_abstract_env_ext_struct</span></a> {<a id="cf:52" class="idref" href="#cf:52"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:53" class="idref" href="#guard:53"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_struct"><span class="id" title="class">abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_lookup"><span class="id" title="method">abstract_env_lookup</span></a> := <span class="id" title="keyword">fun</span> <a id="7674e0ce7f4ec5e4ff169924724c4b41" class="idref" href="#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="variable">Σ</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_conv_pb_relb"><span class="id" title="method">abstract_env_conv_pb_relb</span></a> := <span class="id" title="keyword">fun</span> <a id="f1e8fd5f016d0a22b08224b45bb8ae16" class="idref" href="#f1e8fd5f016d0a22b08224b45bb8ae16"><span class="id" title="binder">Σ</span></a> <a id="conv_pb:56" class="idref" href="#conv_pb:56"><span class="id" title="binder">conv_pb</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#conv_pb_relb"><span class="id" title="definition">conv_pb_relb</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_graph"><span class="id" title="projection">referenced_impl_ext_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f1e8fd5f016d0a22b08224b45bb8ae16"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#conv_pb:56"><span class="id" title="variable">conv_pb</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_compare_global_instance"><span class="id" title="method">abstract_env_compare_global_instance</span></a> := <span class="id" title="keyword">fun</span> <a id="cb0630687a5a3dec7d46ec6926ccb84b" class="idref" href="#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="binder">Σ</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#compare_global_instance"><span class="id" title="definition">compare_global_instance</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_eqb_universe"><span class="id" title="definition">check_eqb_universe</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_graph"><span class="id" title="projection">referenced_impl_ext_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="variable">Σ</span></a>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> := <span class="id" title="keyword">fun</span> <a id="fe1b904099dfeab72f9743c2bf233c57" class="idref" href="#fe1b904099dfeab72f9743c2bf233c57"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#level_mem"><span class="id" title="definition">level_mem</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fe1b904099dfeab72f9743c2bf233c57"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_wf_universeb"><span class="id" title="method">abstract_env_ext_wf_universeb</span></a> := <span class="id" title="keyword">fun</span> <a id="0685bd56931f2020ec61d62cd42607cf" class="idref" href="#0685bd56931f2020ec61d62cd42607cf"><span class="id" title="binder">Σ</span></a> <a id="u:60" class="idref" href="#u:60"><span class="id" title="binder">u</span></a> ⇒ <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universeb"><span class="id" title="definition">wf_universeb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#0685bd56931f2020ec61d62cd42607cf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#u:60"><span class="id" title="variable">u</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_check_constraints"><span class="id" title="method">abstract_env_check_constraints</span></a> := <span class="id" title="keyword">fun</span> <a id="77616297ab8389c2db18b8aa996822b8" class="idref" href="#77616297ab8389c2db18b8aa996822b8"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Template.common.uGraph.html#check_constraints"><span class="id" title="definition">check_constraints</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_graph"><span class="id" title="projection">referenced_impl_ext_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#77616297ab8389c2db18b8aa996822b8"><span class="id" title="variable">Σ</span></a>);<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_guard"><span class="id" title="method">abstract_env_guard</span></a> := <span class="id" title="keyword">fun</span> <a id="e4cd9633ec2d0ee09ebe5d497f8dd196" class="idref" href="#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="binder">Σ</span></a> <a id="fix_cofix:63" class="idref" href="#fix_cofix:63"><span class="id" title="binder">fix_cofix</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:63"><span class="id" title="variable">fix_cofix</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> := <span class="id" title="keyword">fun</span> <a id="X:64" class="idref" href="#X:64"><span class="id" title="binder">X</span></a> <a id="b7d14475a959a414c26c016f9aef0e47" class="idref" href="#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b7d14475a959a414c26c016f9aef0e47"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:64"><span class="id" title="variable">X</span></a><br/>
&nbsp;&nbsp;|}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Program Definition</span> <a id="referenced_pop" class="idref" href="#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> {<a id="cf:66" class="idref" href="#cf:66"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="7473bf99cf9a3fe22029fde8c9a850a7" class="idref" href="#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| (<span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a><span class="id" title="var">decls</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7473bf99cf9a3fe22029fde8c9a850a7"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>); <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">decls</span> |} |}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a>). <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">onu</span> <span class="id" title="var">ond</span>]; <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="make_wf_env_ext" class="idref" href="#make_wf_env_ext"><span class="id" title="definition">make_wf_env_ext</span></a> {<a id="cf:68" class="idref" href="#cf:68"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:69" class="idref" href="#guard:69"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}<br/>
&nbsp;&nbsp;(<a id="ac713e2c58df9c0a01be9ad130d8ea1a" class="idref" href="#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a>) (<a id="univs:71" class="idref" href="#univs:71"><span class="id" title="binder">univs</span></a> : <a class="idref" href="MetaCoq.Template.Universes.html#universes_decl"><span class="id" title="inductive">universes_decl</span></a>) <br/>
&nbsp;&nbsp;(<a id="prf:73" class="idref" href="#prf:73"><span class="id" title="binder">prf</span></a> : <span class="id" title="keyword">∀</span> <a id="b8f8693498d8f7701992e6ab754e63fb" class="idref" href="#b8f8693498d8f7701992e6ab754e63fb"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b8f8693498d8f7701992e6ab754e63fb"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b8f8693498d8f7701992e6ab754e63fb"><span class="id" title="variable">Σ0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:71"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ac713e2c58df9c0a01be9ad130d8ea1a"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:71"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;|}.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="canonical_abstract_env_struct" class="idref" href="#canonical_abstract_env_struct"><span class="id" title="instance">canonical_abstract_env_struct</span></a> {<a id="cf:74" class="idref" href="#cf:74"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:75" class="idref" href="#guard:75"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_struct"><span class="id" title="class">abstract_env_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> :=<br/>
&nbsp;{|<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty"><span class="id" title="method">abstract_env_empty</span></a> := {|<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#init_env"><span class="id" title="definition">init_env</span></a> ; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> |};<br/>
&nbsp;|} ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> := <span class="id" title="keyword">fun</span> <a id="cs:76" class="idref" href="#cs:76"><span class="id" title="binder">cs</span></a> <a id="H:77" class="idref" href="#H:77"><span class="id" title="binder">H</span></a> ⇒  {|<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> := {| <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:76"><span class="id" title="variable">cs</span></a> ; <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> |};<br/>
&nbsp;|} ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> := <span class="id" title="keyword">fun</span> <a id="X:80" class="idref" href="#X:80"><span class="id" title="binder">X</span></a> <a id="kn:81" class="idref" href="#kn:81"><span class="id" title="binder">kn</span></a> <a id="d:82" class="idref" href="#d:82"><span class="id" title="binder">d</span></a> <a id="H:83" class="idref" href="#H:83"><span class="id" title="binder">H</span></a> ⇒ <br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> := <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:80"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:81"><span class="id" title="variable">kn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:82"><span class="id" title="variable">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;&nbsp;&nbsp;|};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty_ext"><span class="id" title="method">abstract_env_empty_ext</span></a> <a id="X:84" class="idref" href="#X:84"><span class="id" title="binder">X</span></a> := {| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:84"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#Monomorphic_ctx"><span class="id" title="constructor">Monomorphic_ctx</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;|} ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_univ"><span class="id" title="method">abstract_env_univ</span></a> <a id="X:78" class="idref" href="#X:78"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:78"><span class="id" title="variable">X</span></a> ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_global_declarations"><span class="id" title="method">abstract_env_global_declarations</span></a> <a id="X:79" class="idref" href="#X:79"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:79"><span class="id" title="variable">X</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a id="uctx:85" class="idref" href="#uctx:85"><span class="id" title="binder">uctx</span></a> := <a class="idref" href="MetaCoq.Template.common.uGraph.html#wGraph.is_acyclic"><span class="id" title="definition">wGraph.is_acyclic</span></a> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#make_graph"><span class="id" title="definition">make_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:85"><span class="id" title="variable">uctx</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_uctx"><span class="id" title="method">abstract_env_is_consistent_uctx</span></a> <a id="X:86" class="idref" href="#X:86"><span class="id" title="binder">X</span></a> <a id="uctx:87" class="idref" href="#uctx:87"><span class="id" title="binder">uctx</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="G:88" class="idref" href="#G:88"><span class="id" title="binder">G</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_graph"><span class="id" title="projection">referenced_impl_graph</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:86"><span class="id" title="variable">X</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="G':89" class="idref" href="#G':89"><span class="id" title="binder">G'</span></a> := <a class="idref" href="MetaCoq.Template.common.uGraph.html#add_uctx"><span class="id" title="definition">add_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:87"><span class="id" title="variable">uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:88"><span class="id" title="variable">G</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.common.uGraph.html#wGraph.is_acyclic"><span class="id" title="definition">wGraph.is_acyclic</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G':89"><span class="id" title="variable">G'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#wGraph.IsFullSubgraph.is_full_extension"><span class="id" title="definition">wGraph.IsFullSubgraph.is_full_extension</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:88"><span class="id" title="variable">G</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G':89"><span class="id" title="variable">G'</span></a> ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_uctx"><span class="id" title="method">abstract_env_add_uctx</span></a> <a id="X:90" class="idref" href="#X:90"><span class="id" title="binder">X</span></a> <a id="uctx:91" class="idref" href="#uctx:91"><span class="id" title="binder">uctx</span></a> <a id="udecl:92" class="idref" href="#udecl:92"><span class="id" title="binder">udecl</span></a> <a id="Hdecl:93" class="idref" href="#Hdecl:93"><span class="id" title="binder">Hdecl</span></a> <a id="Hglobal:94" class="idref" href="#Hglobal:94"><span class="id" title="binder">Hglobal</span></a> := {| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:90"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#udecl:92"><span class="id" title="variable">udecl</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;<br/>
&nbsp;|} ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> := <span class="id" title="keyword">fun</span> <a id="X:95" class="idref" href="#X:95"><span class="id" title="binder">X</span></a> <a id="cd6537d2e99017ef8ef9bcdef499a786" class="idref" href="#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cd6537d2e99017ef8ef9bcdef499a786"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:95"><span class="id" title="variable">X</span></a> ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_pop_decls"><span class="id" title="method">abstract_pop_decls</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="method">abstract_make_wf_env_ext</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#make_wf_env_ext"><span class="id" title="definition">make_wf_env_ext</span></a> ;<br/>
&nbsp;|}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">sq</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#on_global_univ_init_env"><span class="id" title="definition">on_global_univ_init_env</span></a>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">sq</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [[? ?]]; <span class="id" title="var">sq</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> [?]. <span class="id" title="var">sq</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#on_udecl_mono"><span class="id" title="lemma">on_udecl_mono</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">now</span> <span class="id" title="var">sq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="wf_env" class="idref" href="#wf_env"><span class="id" title="record">wf_env</span></a> {<a id="cf:97" class="idref" href="#cf:97"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} := {<br/>
&nbsp;&nbsp;<a id="wf_env_referenced" class="idref" href="#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> :&gt; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_map" class="idref" href="#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> :&gt; <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.t"><span class="id" title="definition">EnvMap.t</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_map_repr" class="idref" href="#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a> :&gt; <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced:99"><span class="id" title="method">wf_env_referenced</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map:100"><span class="id" title="method">wf_env_map</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Record</span> <a id="wf_env_ext" class="idref" href="#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> {<a id="cf:102" class="idref" href="#cf:102"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:103" class="idref" href="#guard:103"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} := {<br/>
&nbsp;&nbsp;<a id="wf_env_ext_referenced" class="idref" href="#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> :&gt; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_ext_map" class="idref" href="#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> :&gt; <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.t"><span class="id" title="definition">EnvMap.t</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a>;<br/>
&nbsp;&nbsp;<a id="wf_env_ext_map_repr" class="idref" href="#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a> :&gt; <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced:105"><span class="id" title="method">wf_env_ext_referenced</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map:106"><span class="id" title="method">wf_env_ext_map</span></a>;<br/>
}.<br/>

<br/>
<span class="id" title="keyword">Global Instance</span> <a id="optimized_abstract_env_ext_struct" class="idref" href="#optimized_abstract_env_ext_struct"><span class="id" title="instance">optimized_abstract_env_ext_struct</span></a> {<a id="cf:108" class="idref" href="#cf:108"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:109" class="idref" href="#guard:109"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_struct"><span class="id" title="class">abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_lookup"><span class="id" title="method">abstract_env_lookup</span></a> := <span class="id" title="keyword">fun</span> <a id="34ae1c9c84b00c7df18c2fc2612b37e3" class="idref" href="#34ae1c9c84b00c7df18c2fc2612b37e3"><span class="id" title="binder">Σ</span></a> <a id="k:111" class="idref" href="#k:111"><span class="id" title="binder">k</span></a> ⇒ <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.lookup"><span class="id" title="definition">EnvMap.lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#k:111"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#34ae1c9c84b00c7df18c2fc2612b37e3"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_conv_pb_relb"><span class="id" title="method">abstract_env_conv_pb_relb</span></a> <a id="X:112" class="idref" href="#X:112"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_conv_pb_relb"><span class="id" title="method">abstract_env_conv_pb_relb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:112"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_compare_global_instance"><span class="id" title="method">abstract_env_compare_global_instance</span></a> <a id="X:113" class="idref" href="#X:113"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_compare_global_instance"><span class="id" title="method">abstract_env_compare_global_instance</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:113"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> <a id="X:114" class="idref" href="#X:114"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_level_mem"><span class="id" title="method">abstract_env_level_mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:114"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_wf_universeb"><span class="id" title="method">abstract_env_ext_wf_universeb</span></a> <a id="X:115" class="idref" href="#X:115"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_wf_universeb"><span class="id" title="method">abstract_env_ext_wf_universeb</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:115"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_check_constraints"><span class="id" title="method">abstract_env_check_constraints</span></a> <a id="X:116" class="idref" href="#X:116"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_check_constraints"><span class="id" title="method">abstract_env_check_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:116"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_guard"><span class="id" title="method">abstract_env_guard</span></a> := <span class="id" title="keyword">fun</span> <a id="388873efb4be7b6002f3f68ecd6fa136" class="idref" href="#388873efb4be7b6002f3f68ecd6fa136"><span class="id" title="binder">Σ</span></a> <a id="fix_cofix:118" class="idref" href="#fix_cofix:118"><span class="id" title="binder">fix_cofix</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_impl"><span class="id" title="method">guard_impl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#fix_cofix:118"><span class="id" title="variable">fix_cofix</span></a> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#388873efb4be7b6002f3f68ecd6fa136"><span class="id" title="variable">Σ</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> <a id="X:119" class="idref" href="#X:119"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_rel"><span class="id" title="method">abstract_env_ext_rel</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:119"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>);<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_env_eta" class="idref" href="#wf_env_eta"><span class="id" title="lemma">wf_env_eta</span></a> {<a id="cf:120" class="idref" href="#cf:120"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="22291429b6747bbc3b99ddb1e9a3d90c" class="idref" href="#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">{|</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>); <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">|}</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#22291429b6747bbc3b99ddb1e9a3d90c"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> ⇒ /= //. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_fresh_globals" class="idref" href="#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a> {<a id="cf:122" class="idref" href="#cf:122"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} <a id="1fae2405502733773daa9dd3939f6e35" class="idref" href="#1fae2405502733773daa9dd3939f6e35"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1fae2405502733773daa9dd3939f6e35"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.fresh_globals</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1fae2405502733773daa9dd3939f6e35"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs</span> <span class="id" title="var">Σ</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [] <span class="id" title="var">onu</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_env_fresh" class="idref" href="#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> {<a id="cf:124" class="idref" href="#cf:124"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="25478b4c84bc4c7e13949a20e94474d0" class="idref" href="#25478b4c84bc4c7e13949a20e94474d0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) : <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.EnvMap.fresh_globals</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#25478b4c84bc4c7e13949a20e94474d0"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="of_global_env_cons" class="idref" href="#of_global_env_cons"><span class="id" title="lemma">of_global_env_cons</span></a> {<a id="cf:126" class="idref" href="#cf:126"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} <a id="d:127" class="idref" href="#d:127"><span class="id" title="binder">d</span></a> <a id="g:128" class="idref" href="#g:128"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.fresh_globals"><span class="id" title="inductive">EnvMap.fresh_globals</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:128"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:127"><span class="id" title="variable">d</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.add_global_decl"><span class="id" title="definition">add_global_decl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:128"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:127"><span class="id" title="variable">d</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:127"><span class="id" title="variable">d</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:127"><span class="id" title="variable">d</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#g:128"><span class="id" title="variable">g</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="wf_env_empty" class="idref" href="#wf_env_empty"><span class="id" title="definition">wf_env_empty</span></a> {<a id="cf:129" class="idref" href="#cf:129"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:130" class="idref" href="#guard:130"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :=<br/>
&nbsp;{|   <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty"><span class="id" title="method">abstract_env_empty</span></a> ;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.empty"><span class="id" title="definition">EnvMap.empty</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="wf_env_init" class="idref" href="#wf_env_init"><span class="id" title="definition">wf_env_init</span></a> {<a id="cf:131" class="idref" href="#cf:131"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:132" class="idref" href="#guard:132"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} <a id="cs:133" class="idref" href="#cs:133"><span class="id" title="binder">cs</span></a> : <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_global_univs"><span class="id" title="definition">on_global_univs</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:133"><span class="id" title="variable">cs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> := <span class="id" title="keyword">fun</span> <a id="H:134" class="idref" href="#H:134"><span class="id" title="binder">H</span></a> ⇒<br/>
&nbsp;&nbsp;{|   <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#cs:133"><span class="id" title="variable">cs</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#H:134"><span class="id" title="variable">H</span></a>;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.empty"><span class="id" title="definition">EnvMap.empty</span></a>;<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="reference_pop_decls_correct" class="idref" href="#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> {<a id="cf:135" class="idref" href="#cf:135"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="X:136" class="idref" href="#X:136"><span class="id" title="binder">X</span></a>:<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl"><span class="id" title="record">referenced_impl</span></a>) <a id="decls:137" class="idref" href="#decls:137"><span class="id" title="binder">decls</span></a> <br/>
&nbsp;&nbsp;(<a id="prf:140" class="idref" href="#prf:140"><span class="id" title="binder">prf</span></a> : <span class="id" title="keyword">∀</span> <a id="1bd0898eaee20c159296788819298653" class="idref" href="#1bd0898eaee20c159296788819298653"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:136"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="d:139" class="idref" href="#d:139"><span class="id" title="binder">d</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1bd0898eaee20c159296788819298653"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:139"><span class="id" title="variable">d</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#decls:137"><span class="id" title="variable">decls</span></a>) :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="X':141" class="idref" href="#X':141"><span class="id" title="binder">X'</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:136"><span class="id" title="variable">X</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="84fbbde278cb15893f039d5cd87bc809" class="idref" href="#84fbbde278cb15893f039d5cd87bc809"><span class="id" title="binder">Σ</span></a> <a id="264cfa77f121753be15cef48f8174736" class="idref" href="#264cfa77f121753be15cef48f8174736"><span class="id" title="binder">Σ'</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#84fbbde278cb15893f039d5cd87bc809"><span class="id" title="variable">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:136"><span class="id" title="variable">X</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#264cfa77f121753be15cef48f8174736"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X':141"><span class="id" title="variable">X'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#264cfa77f121753be15cef48f8174736"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#decls:137"><span class="id" title="variable">decls</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#84fbbde278cb15893f039d5cd87bc809"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#264cfa77f121753be15cef48f8174736"><span class="id" title="variable">Σ'</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">prf</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop_obligation_1"><span class="id" title="lemma">referenced_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>)); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">prf</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="optim_pop" class="idref" href="#optim_pop"><span class="id" title="definition">optim_pop</span></a> {<a id="cf:144" class="idref" href="#cf:144"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="1ed006055b676c179b9a4144c48ba45b" class="idref" href="#1ed006055b676c179b9a4144c48ba45b"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1ed006055b676c179b9a4144c48ba45b"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a>).(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="keyword">with</span> <br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1ed006055b676c179b9a4144c48ba45b"><span class="id" title="variable">Σ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| (<a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">kn</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">d</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">decls</span>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1ed006055b676c179b9a4144c48ba45b"><span class="id" title="variable">Σ</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.remove"><span class="id" title="definition">EnvMap.EnvMap.remove</span></a> <span class="id" title="var">kn</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#1ed006055b676c179b9a4144c48ba45b"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>); <br/>
&nbsp;&nbsp;&nbsp;&nbsp;|} <br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">Σ</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>). <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ0</span> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <span class="id" title="var">decls</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.remove_add_eq"><span class="id" title="lemma">EnvMap.remove_add_eq</span></a> <span class="id" title="var">decls</span> <span class="id" title="var">kn</span> <span class="id" title="var">d</span> <span class="id" title="var">Σ0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Σf</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> <span class="id" title="var">Σ</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Σf</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">Σf</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Σf</span> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_fresh"><span class="id" title="lemma">wf_env_fresh</span></a> <span class="id" title="var">Σ</span>). <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">Heq_anonymous</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Σf</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">Σf</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">PCUICSR.forward_keep</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">red</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.equal"><span class="id" title="definition">EnvMap.equal</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr"><span class="id" title="definition">EnvMap.repr</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span> /=. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop_obligation_1"><span class="id" title="lemma">referenced_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">clearbody</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">Σ</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Heq_anonymous</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Heq_anonymous</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.Kernames.html#KernameMapFact.uncurry"><span class="id" title="definition">KernameMapFact.uncurry</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ0</span> <span class="id" title="tactic">in</span> × ; <span class="id" title="tactic">clear</span> <span class="id" title="var">Σ0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.equal"><span class="id" title="definition">EnvMap.equal</span></a>, <a class="idref" href="MetaCoq.Template.Kernames.html#KernameMap.Equal"><span class="id" title="definition">KernameMap.Equal</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H0</span> <span class="id" title="var">y</span>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Definition</span> <a id="optim_make_wf_env_ext" class="idref" href="#optim_make_wf_env_ext"><span class="id" title="definition">optim_make_wf_env_ext</span></a> {<a id="cf:146" class="idref" href="#cf:146"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:147" class="idref" href="#guard:147"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="6b1879b3537ab71ccb79966068a4600f" class="idref" href="#6b1879b3537ab71ccb79966068a4600f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>) (<a id="univs:149" class="idref" href="#univs:149"><span class="id" title="binder">univs</span></a> : <a class="idref" href="MetaCoq.Template.Universes.html#universes_decl"><span class="id" title="inductive">universes_decl</span></a>) <br/>
&nbsp;&nbsp;(<a id="prf:151" class="idref" href="#prf:151"><span class="id" title="binder">prf</span></a> : <span class="id" title="keyword">∀</span> <a id="2466b653d61f7a09970da575449e20c4" class="idref" href="#2466b653d61f7a09970da575449e20c4"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6b1879b3537ab71ccb79966068a4600f"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2466b653d61f7a09970da575449e20c4"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#2466b653d61f7a09970da575449e20c4"><span class="id" title="variable">Σ0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:149"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> := {| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> := <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6b1879b3537ab71ccb79966068a4600f"><span class="id" title="variable">Σ</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univs:149"><span class="id" title="variable">univs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>;|} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6b1879b3537ab71ccb79966068a4600f"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6b1879b3537ab71ccb79966068a4600f"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="optimized_abstract_env_struct" class="idref" href="#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a> {<a id="cf:152" class="idref" href="#cf:152"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:153" class="idref" href="#guard:153"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_struct"><span class="id" title="class">abstract_env_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;{|<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty"><span class="id" title="method">abstract_env_empty</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_empty"><span class="id" title="definition">wf_env_empty</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_init"><span class="id" title="method">abstract_env_init</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_init"><span class="id" title="definition">wf_env_init</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> <a id="X:155" class="idref" href="#X:155"><span class="id" title="binder">X</span></a> <a id="kn:156" class="idref" href="#kn:156"><span class="id" title="binder">kn</span></a> <a id="d:157" class="idref" href="#d:157"><span class="id" title="binder">d</span></a> <a id="H:158" class="idref" href="#H:158"><span class="id" title="binder">H</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> := @<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_decl"><span class="id" title="method">abstract_env_add_decl</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:155"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:156"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:157"><span class="id" title="variable">d</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#H:158"><span class="id" title="variable">H</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.add"><span class="id" title="definition">EnvMap.add</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:156"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#d:157"><span class="id" title="variable">d</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:155"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>) |};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty_ext"><span class="id" title="method">abstract_env_empty_ext</span></a> <a id="X:159" class="idref" href="#X:159"><span class="id" title="binder">X</span></a> := <br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> := @<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_empty_ext"><span class="id" title="method">abstract_env_empty_ext</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:159"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:159"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>) |};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_global_declarations"><span class="id" title="method">abstract_env_global_declarations</span></a> <a id="X:154" class="idref" href="#X:154"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_global_declarations"><span class="id" title="method">abstract_env_global_declarations</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:154"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>);<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a id="univ:160" class="idref" href="#univ:160"><span class="id" title="binder">univ</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent"><span class="id" title="method">abstract_env_is_consistent</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#univ:160"><span class="id" title="variable">univ</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_uctx"><span class="id" title="method">abstract_env_is_consistent_uctx</span></a> <a id="X:161" class="idref" href="#X:161"><span class="id" title="binder">X</span></a> <a id="uctx:162" class="idref" href="#uctx:162"><span class="id" title="binder">uctx</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_uctx"><span class="id" title="method">abstract_env_is_consistent_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:161"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:162"><span class="id" title="variable">uctx</span></a>;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_uctx"><span class="id" title="method">abstract_env_add_uctx</span></a> <a id="X:163" class="idref" href="#X:163"><span class="id" title="binder">X</span></a> <a id="uctx:164" class="idref" href="#uctx:164"><span class="id" title="binder">uctx</span></a> <a id="udecl:165" class="idref" href="#udecl:165"><span class="id" title="binder">udecl</span></a> <a id="Huctx:166" class="idref" href="#Huctx:166"><span class="id" title="binder">Huctx</span></a> <a id="Hdecl:167" class="idref" href="#Hdecl:167"><span class="id" title="binder">Hdecl</span></a> := <br/>
&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> := @<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_add_uctx"><span class="id" title="method">abstract_env_add_uctx</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:163"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#uctx:164"><span class="id" title="variable">uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#udecl:165"><span class="id" title="variable">udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#Huctx:166"><span class="id" title="variable">Huctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#Hdecl:167"><span class="id" title="variable">Hdecl</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:163"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a>) |};<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> <a id="X:168" class="idref" href="#X:168"><span class="id" title="binder">X</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_rel"><span class="id" title="method">abstract_env_rel</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#X:168"><span class="id" title="variable">X</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>) ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_pop_decls"><span class="id" title="method">abstract_pop_decls</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop"><span class="id" title="definition">optim_pop</span></a> ;<br/>
&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_make_wf_env_ext"><span class="id" title="method">abstract_make_wf_env_ext</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_make_wf_env_ext"><span class="id" title="definition">optim_make_wf_env_ext</span></a> ;<br/>
&nbsp;|}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>).(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a>)) <span class="id" title="keyword">as</span> [?].<br/>
&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr_add"><span class="id" title="lemma">EnvMap.repr_add</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="WfEnv" class="idref" href="#WfEnv"><span class="id" title="section">WfEnv</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="cf:169" class="idref" href="#cf:169"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:170" class="idref" href="#guard:170"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="referenced_impl_sq_wf" class="idref" href="#referenced_impl_sq_wf"><span class="id" title="definition">referenced_impl_sq_wf</span></a> (<a id="12de5f44a5519d5db747781165596104" class="idref" href="#12de5f44a5519d5db747781165596104"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a>) : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#12de5f44a5519d5db747781165596104"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_wf"><span class="id" title="projection">referenced_impl_ext_wf</span></a> <span class="id" title="var">Σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="lookup" class="idref" href="#lookup"><span class="id" title="definition">lookup</span></a> (<a id="0646a2f53c44ced826a07974c20c1488" class="idref" href="#0646a2f53c44ced826a07974c20c1488"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a>) (<a id="kn:173" class="idref" href="#kn:173"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaCoq.Template.Kernames.html#kername"><span class="id" title="definition">kername</span></a>) : <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_decl"><span class="id" title="inductive">global_decl</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.lookup"><span class="id" title="definition">EnvMap.lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:173"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#0646a2f53c44ced826a07974c20c1488"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lookup_lookup_env" class="idref" href="#lookup_lookup_env"><span class="id" title="lemma">lookup_lookup_env</span></a> <a id="f058463ac94c66c241345aec4af19ada" class="idref" href="#f058463ac94c66c241345aec4af19ada"><span class="id" title="binder">Σ</span></a> <a id="kn:175" class="idref" href="#kn:175"><span class="id" title="binder">kn</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#lookup"><span class="id" title="definition">lookup</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f058463ac94c66c241345aec4af19ada"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:175"><span class="id" title="variable">kn</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f058463ac94c66c241345aec4af19ada"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#kn:175"><span class="id" title="variable">kn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#lookup"><span class="id" title="definition">lookup</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> <span class="id" title="var">map</span> <span class="id" title="var">repr</span>]. <span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_sq_wf"><span class="id" title="definition">referenced_impl_sq_wf</span></a> <span class="id" title="var">Σ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.lookup_spec"><span class="id" title="lemma">EnvMap.lookup_spec</span></a>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#WfEnv"><span class="id" title="section">WfEnv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Create HintDb</span> <span class="id" title="var">wf_env</span> <span class="id" title="var">discriminated</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Hint</span> <span class="id" title="var">Constants</span> <span class="id" title="keyword">Opaque</span> : <span class="id" title="var">wf_env</span>.<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Variables</span> <span class="id" title="keyword">Opaque</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">referenced_impl_ext_wf</span> : <span class="id" title="var">wf_env</span>.<br/>
<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">referenced_impl_wf</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="60741ce1afc60d6333387ca49e214dc0" class="idref" href="#60741ce1afc60d6333387ca49e214dc0"><span class="id" title="definition">Σudecl_ref</span></a> {<a id="cf:176" class="idref" href="#cf:176"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:177" class="idref" href="#guard:177"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="9578c8ca712ef7a7ad3e8570c0f38f92" class="idref" href="#9578c8ca712ef7a7ad3e8570c0f38f92"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a>) : <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9578c8ca712ef7a7ad3e8570c0f38f92"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9578c8ca712ef7a7ad3e8570c0f38f92"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<span class="id" title="keyword">fun</span> <a id="x:179" class="idref" href="#x:179"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#x:179"><span class="id" title="variable">x</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9578c8ca712ef7a7ad3e8570c0f38f92"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="01940b9990bcd09b0c63884b8fe04517" class="idref" href="#01940b9990bcd09b0c63884b8fe04517"><span class="id" title="definition">Σudecl</span></a> {<a id="cf:180" class="idref" href="#cf:180"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:181" class="idref" href="#guard:181"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="a79e40464235e89aff1db6e8d131ce66" class="idref" href="#a79e40464235e89aff1db6e8d131ce66"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a>) : <br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a79e40464235e89aff1db6e8d131ce66"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a79e40464235e89aff1db6e8d131ce66"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a>)<a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCSquash.html#map_squash"><span class="id" title="lemma">map_squash</span></a> (<span class="id" title="keyword">fun</span> <a id="x:183" class="idref" href="#x:183"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#x:183"><span class="id" title="variable">x</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a79e40464235e89aff1db6e8d131ce66"><span class="id" title="variable">Σ</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Global Hint Resolve</span> <span class="id" title="var">Σudecl</span> : <span class="id" title="var">wf_env</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">wf_env</span> := <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">wf_env</span>.<br/>

<br/>
</div>

<div class="doc">
Build an optimized environment representation for lookups along with the graph associated to a well-formed
  global environment. The graph building is separated, so that <span class="inlinecode">(<span class="id" title="var">build_wf_env_ext</span></span> <span class="inlinecode"><span class="id" title="var">Σ</span></span> <span class="inlinecode"><span class="id" title="var">wfΣ</span>).(<span class="id" title="var">wf_env_ext_env</span>)</span> is
  convertible to <span class="inlinecode"><span class="id" title="var">Σ</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_wf_env_ext" class="idref" href="#build_wf_env_ext"><span class="id" title="definition">build_wf_env_ext</span></a> {<a id="cf:184" class="idref" href="#cf:184"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:185" class="idref" href="#guard:185"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} (<a id="f95f1e88d28d837cd72b8674833b46fb" class="idref" href="#f95f1e88d28d837cd72b8674833b46fb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="6279351959213587b99bf4abd764155d" class="idref" href="#6279351959213587b99bf4abd764155d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f95f1e88d28d837cd72b8674833b46fb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a> := <br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f95f1e88d28d837cd72b8674833b46fb"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_wf"><span class="id" title="projection">referenced_impl_ext_wf</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#6279351959213587b99bf4abd764155d"><span class="id" title="variable">wfΣ</span></a> |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map"><span class="id" title="projection">wf_env_ext_map</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f95f1e88d28d837cd72b8674833b46fb"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr_global_env"><span class="id" title="lemma">EnvMap.repr_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#f95f1e88d28d837cd72b8674833b46fb"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
|}.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="GraphSpec" class="idref" href="#GraphSpec"><span class="id" title="section">GraphSpec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="cf:188" class="idref" href="#cf:188"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:189" class="idref" href="#guard:189"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} {<a id="b2a195965d386570a3ea1c826f7e2031" class="idref" href="#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} (<a id="01f3a1a920c1cbf718f58211e9a18c23" class="idref" href="#01f3a1a920c1cbf718f58211e9a18c23"><span class="id" title="binder">HΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b6e7a72b487f62627bfffba96b0b07c9" class="idref" href="#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="binder">H</span></a><a id="b6e7a72b487f62627bfffba96b0b07c9" class="idref" href="#b6e7a72b487f62627bfffba96b0b07c9"><span class="id" title="binder">φ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="G:193" class="idref" href="#G:193"><span class="id" title="binder">G</span></a> : <a class="idref" href="MetaCoq.Template.common.uGraph.html#universes_graph"><span class="id" title="definition">universes_graph</span></a>) (<a id="HG:194" class="idref" href="#HG:194"><span class="id" title="binder">HG</span></a> : <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#G:193"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b2a195965d386570a3ea1c826f7e2031"><span class="id" title="variable">Σ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Definition</span> <a id="8bebae1adb9ff7f367ce0ade63a93c16" class="idref" href="#8bebae1adb9ff7f367ce0ade63a93c16"><span class="id" title="definition">HΣ'</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#22df98beaa5c9b73b2e1607081fb8d15"><span class="id" title="variable">HΣ</span></a>, <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#4b50f4dd05cb3d345eb8596bfac3a701"><span class="id" title="variable">H</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#4b50f4dd05cb3d345eb8596bfac3a701"><span class="id" title="variable">φ</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="check_constraints_spec" class="idref" href="#check_constraints_spec"><span class="id" title="lemma">check_constraints_spec</span></a> <a id="ctrs:195" class="idref" href="#ctrs:195"><span class="id" title="binder">ctrs</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;: <a class="idref" href="MetaCoq.Template.common.uGraph.html#check_constraints"><span class="id" title="definition">check_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ctrs:195"><span class="id" title="variable">ctrs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#valid_constraints"><span class="id" title="definition">valid_constraints</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ctrs:195"><span class="id" title="variable">ctrs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HG</span> <span class="id" title="var">HΣ</span> <span class="id" title="var">H</span>φ.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bebae1adb9ff7f367ce0ade63a93c16"><span class="id" title="definition">HΣ'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_constraints_spec"><span class="id" title="lemma">check_constraints_spec</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.HG"><span class="id" title="variable">HG</span></a> <span class="id" title="var">_</span> <span class="id" title="var">HH</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">sq</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#global_ext_uctx_consistent"><span class="id" title="definition">global_ext_uctx_consistent</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="check_constraints_complete" class="idref" href="#check_constraints_complete"><span class="id" title="lemma">check_constraints_complete</span></a> <a id="ctrs:196" class="idref" href="#ctrs:196"><span class="id" title="binder">ctrs</span></a> (<a id="H:197" class="idref" href="#H:197"><span class="id" title="binder">H</span></a> : <a class="idref" href="MetaCoq.Template.config.html#check_univs"><span class="id" title="method">check_univs</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.common.uGraph.html#uctx_invariants"><span class="id" title="definition">uctx_invariants</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ctrs:196"><span class="id" title="variable">ctrs</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.Universes.html#valid_constraints"><span class="id" title="definition">valid_constraints</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ctrs:196"><span class="id" title="variable">ctrs</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.Template.common.uGraph.html#check_constraints"><span class="id" title="definition">check_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#ctrs:196"><span class="id" title="variable">ctrs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#8bebae1adb9ff7f367ce0ade63a93c16"><span class="id" title="definition">HΣ'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Huctx</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">refine</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#check_constraints_complete"><span class="id" title="lemma">check_constraints_complete</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.HG"><span class="id" title="variable">HG</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">HH</span>); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#global_ext_uctx_consistent"><span class="id" title="definition">global_ext_uctx_consistent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICGlobalEnv.html#wf_ext_global_uctx_invariants"><span class="id" title="definition">wf_ext_global_uctx_invariants</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">H0</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">H1</span> <span class="id" title="var">H2</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="is_graph_of_uctx_levels" class="idref" href="#is_graph_of_uctx_levels"><span class="id" title="lemma">is_graph_of_uctx_levels</span></a> (<a id="l:198" class="idref" href="#l:198"><span class="id" title="binder">l</span></a> : <a class="idref" href="MetaCoq.Template.Universes.html#Level.t"><span class="id" title="definition">Level.t</span></a>) :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#l:198"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#wGraph.V"><span class="id" title="definition">uGraph.wGraph.V</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.G"><span class="id" title="variable">G</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#l:198"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_levels"><span class="id" title="definition">global_ext_levels</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx"><span class="id" title="definition">is_graph_of_uctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">case_eq</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>)); [<span class="id" title="tactic">intros</span> [<span class="id" title="var">lvs</span> <span class="id" title="var">cts</span>] <span class="id" title="var">XX</span>|<span class="id" title="tactic">intro</span> <span class="id" title="var">XX</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">XX</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; [|<span class="id" title="var">contradiction</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_uctx"><span class="id" title="definition">gc_of_uctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">XX</span>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">XX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#gc_of_constraints"><span class="id" title="definition">gc_of_constraints</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#9dad178b64a9f88bc5b0ac03a6e98eb7"><span class="id" title="variable">Σ</span></a>); [|<span class="id" title="tactic">discriminate</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">XX</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaCoq.Template.Universes.html#LevelSet.mem_spec"><span class="id" title="lemma">LevelSet.mem_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec.HG"><span class="id" title="variable">HG</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#GraphSpec"><span class="id" title="section">GraphSpec</span></a>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="canonical_abstract_env_ext_prop" class="idref" href="#canonical_abstract_env_ext_prop"><span class="id" title="instance">canonical_abstract_env_ext_prop</span></a> {<a id="cf:199" class="idref" href="#cf:199"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:200" class="idref" href="#guard:200"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_prop"><span class="id" title="class">abstract_env_ext_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_ext_struct"><span class="id" title="instance">canonical_abstract_env_ext_struct</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_exists"><span class="id" title="method">abstract_env_ext_exists</span></a> := <span class="id" title="keyword">fun</span> <a id="04b30a0dfd81ed0f4796958cc8a58857" class="idref" href="#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>; |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#check_conv_pb_relb_correct"><span class="id" title="definition">check_conv_pb_relb_correct</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">).π2</span></a>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Bool.Bool.html#reflect_iff"><span class="id" title="lemma">reflect_iff</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICEqualityDec.html#reflect_R_global_instance"><span class="id" title="lemma">reflect_R_global_instance</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ ? ? /<a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_reflect"><span class="id" title="lemma">wf_universe_reflect</span></a> ? - /<a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_reflect"><span class="id" title="lemma">wf_universe_reflect</span></a> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Bool.Bool.html#iff_reflect"><span class="id" title="lemma">iff_reflect</span></a>;  <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#check_conv_pb_relb_correct"><span class="id" title="definition">check_conv_pb_relb_correct</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">conv_pb</span> := <a class="idref" href="MetaCoq.Template.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>); <span class="id" title="tactic">eauto</span>; <span class="id" title="var">wf_env</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">).π2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ ? ? /<a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_reflect"><span class="id" title="lemma">wf_universe_reflect</span></a> ? - /<a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_reflect"><span class="id" title="lemma">wf_universe_reflect</span></a> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">X0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universeb_instance_forall"><span class="id" title="lemma">wf_universeb_instance_forall</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">move</span> ⇒ / <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_instanceP"><span class="id" title="lemma">wf_universe_instanceP</span></a> ?; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">move</span> ⇒ / <a class="idref" href="MetaCoq.PCUIC.PCUICWfUniverses.html#wf_universe_instanceP"><span class="id" title="lemma">wf_universe_instanceP</span></a> ?; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#check_constraints_complete"><span class="id" title="lemma">check_constraints_complete</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_sq_wf"><span class="id" title="definition">referenced_impl_sq_wf</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#60741ce1afc60d6333387ca49e214dc0"><span class="id" title="definition">Σudecl_ref</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">).π2</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#check_constraints_spec"><span class="id" title="lemma">check_constraints_spec</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_sq_wf"><span class="id" title="definition">referenced_impl_sq_wf</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#60741ce1afc60d6333387ca49e214dc0"><span class="id" title="definition">Σudecl_ref</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf_ext"><span class="id" title="lemma">graph_of_wf_ext</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">).π2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_correct"><span class="id" title="method">guard_correct</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="optimized_abstract_env_ext_prop" class="idref" href="#optimized_abstract_env_ext_prop"><span class="id" title="instance">optimized_abstract_env_ext_prop</span></a> {<a id="cf:202" class="idref" href="#cf:202"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:203" class="idref" href="#guard:203"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_prop"><span class="id" title="class">abstract_env_ext_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_ext_struct"><span class="id" title="instance">optimized_abstract_env_ext_struct</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_exists"><span class="id" title="method">abstract_env_ext_exists</span></a> := <span class="id" title="keyword">fun</span> <a id="c27827c3cdb017ea2f080dc5adaf2a36" class="idref" href="#c27827c3cdb017ea2f080dc5adaf2a36"><span class="id" title="binder">Σ</span></a> ⇒ <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#sq"><span class="id" title="constructor">sq</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env_ext"><span class="id" title="projection">referenced_impl_env_ext</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c27827c3cdb017ea2f080dc5adaf2a36"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#7957360534ce47b451efaf295515cd1d"><span class="id" title="notation">)</span></a>; |}.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">pose</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext_wf"><span class="id" title="projection">referenced_impl_ext_wf</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.lookup_spec"><span class="id" title="lemma">EnvMap.lookup_spec</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_fresh_globals"><span class="id" title="lemma">wf_fresh_globals</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_map_repr"><span class="id" title="projection">wf_env_ext_map_repr</span></a>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_compare_universe_correct"><span class="id" title="method">abstract_env_compare_universe_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>)). <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_compare_global_instance_correct"><span class="id" title="method">abstract_env_compare_global_instance_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>)); <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_check_constraints_correct"><span class="id" title="method">abstract_env_check_constraints_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext_referenced"><span class="id" title="projection">wf_env_ext_referenced</span></a>)); <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Defined</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#guard_correct"><span class="id" title="method">guard_correct</span></a>. <span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="canonical_abstract_env_prop" class="idref" href="#canonical_abstract_env_prop"><span class="id" title="instance">canonical_abstract_env_prop</span></a> {<a id="cf:205" class="idref" href="#cf:205"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:206" class="idref" href="#guard:206"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_prop"><span class="id" title="class">abstract_env_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_ext_struct"><span class="id" title="instance">canonical_abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_struct"><span class="id" title="instance">canonical_abstract_env_struct</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.Template.common.uGraph.html#is_consistent_spec"><span class="id" title="lemma">is_consistent_spec</span></a> <span class="id" title="var">udecl</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hconsistent</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_consistent"><span class="id" title="definition">is_consistent</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconsistent</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hconsistent</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hudecl</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_graph"><span class="id" title="projection">referenced_impl_graph</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.utils.MCProd.html#andb_and"><span class="id" title="lemma">andb_and</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_graph_wf"><span class="id" title="projection">referenced_impl_graph_wf</span></a> <span class="id" title="var">X</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">gph</span> := <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#graph_of_wf"><span class="id" title="lemma">graph_of_wf</span></a> <span class="id" title="var">X</span><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">).π1</span></a>) <span class="id" title="tactic">in</span> ×. <span class="id" title="var">clearbody</span> <span class="id" title="var">gph</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HG</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">HG'</span> := <a class="idref" href="MetaCoq.Template.common.uGraph.html#is_graph_of_uctx_add"><span class="id" title="lemma">is_graph_of_uctx_add</span></a> <span class="id" title="var">Hudecl</span> <span class="id" title="var">HG</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - (<a class="idref" href="MetaCoq.Template.common.uGraph.html#is_consistent_spec"><span class="id" title="lemma">is_consistent_spec</span></a> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">X</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) (<a class="idref" href="MetaCoq.Template.common.uGraph.html#is_consistent_spec2"><span class="id" title="lemma">is_consistent_spec2</span></a> <span class="id" title="var">HG'</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">reorder</span> : <span class="id" title="keyword">∀</span> <a id="a:210" class="idref" href="#a:210"><span class="id" title="binder">a</span></a> <a id="b:211" class="idref" href="#b:211"><span class="id" title="binder">b</span></a> <a id="c:212" class="idref" href="#c:212"><span class="id" title="binder">c</span></a> : <span class="id" title="keyword">Prop</span>, <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:207"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:208"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:209"><span class="id" title="variable">c</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:207"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#b:208"><span class="id" title="variable">b</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#a:207"><span class="id" title="variable">a</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#c:209"><span class="id" title="variable">c</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="tactic">intuition</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">reorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ ?; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaCoq.Template.Universes.html#consistent_extension_on_union"><span class="id" title="lemma">consistent_extension_on_union</span></a>.<br/>
&nbsp;&nbsp;1:{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> <span class="id" title="var">X</span>); <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#levels_global_constraint"><span class="id" title="lemma">PCUICUnivSubstitutionConv.levels_global_constraint</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaCoq.Template.Universes.html#CS.union"><span class="id" title="definition">CS.union</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#global_ext_uctx"><span class="id" title="definition">global_ext_uctx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">X</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="MetaCoq.Template.utils.MCProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.Template.common.uGraph.html#consistent_ext_on_full_ext"><span class="id" title="lemma">consistent_ext_on_full_ext</span></a>⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaCoq.Template.common.uGraph.html#add_uctx_subgraph"><span class="id" title="lemma">add_uctx_subgraph</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> <span class="id" title="var">X</span> <span class="id" title="var">decls</span> <span class="id" title="var">prf</span> <span class="id" title="var">X</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> <span class="id" title="var">X</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Program Global Instance</span> <a id="optimized_abstract_env_prop" class="idref" href="#optimized_abstract_env_prop"><span class="id" title="instance">optimized_abstract_env_prop</span></a> {<a id="cf:213" class="idref" href="#cf:213"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:214" class="idref" href="#guard:214"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} :<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_prop"><span class="id" title="class">abstract_env_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_ext_struct"><span class="id" title="instance">optimized_abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">sq</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">wf_env</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">split</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> (@<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_correct"><span class="id" title="method">abstract_env_is_consistent_correct</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_prop"><span class="id" title="instance">canonical_abstract_env_prop</span></a>); <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_is_consistent_uctx_correct"><span class="id" title="method">abstract_env_is_consistent_uctx_correct</span></a> <span class="id" title="var">X</span>.(<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a>)); <span class="id" title="tactic">eauto</span>. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop"><span class="id" title="definition">optim_pop</span></a>. <span class="id" title="tactic">set</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optim_pop_obligation_1"><span class="id" title="lemma">optim_pop_obligation_1</span></a> <span class="id" title="var">cf</span> <span class="id" title="var">X</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#reference_pop_decls_correct"><span class="id" title="lemma">reference_pop_decls_correct</span></a> <span class="id" title="var">X</span> <span class="id" title="var">decls</span> <span class="id" title="var">prf</span> <span class="id" title="var">X</span> (<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_pop"><span class="id" title="definition">referenced_pop</span></a> <span class="id" title="var">X</span>) <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">prf</span> <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.16+rc1/stdlib//Coq.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <span class="id" title="var">X</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">prf</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="canonical_abstract_env_ext_impl" class="idref" href="#canonical_abstract_env_ext_impl"><span class="id" title="definition">canonical_abstract_env_ext_impl</span></a> {<a id="cf:215" class="idref" href="#cf:215"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:216" class="idref" href="#guard:216"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_impl"><span class="id" title="definition">abstract_env_ext_impl</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_ext"><span class="id" title="record">referenced_impl_ext</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_ext_struct"><span class="id" title="instance">canonical_abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#canonical_abstract_env_ext_prop"><span class="id" title="instance">canonical_abstract_env_ext_prop</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="optimized_abstract_env_ext_impl" class="idref" href="#optimized_abstract_env_ext_impl"><span class="id" title="definition">optimized_abstract_env_ext_impl</span></a> {<a id="cf:217" class="idref" href="#cf:217"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:218" class="idref" href="#guard:218"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_ext_impl"><span class="id" title="definition">abstract_env_ext_impl</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_ext"><span class="id" title="record">wf_env_ext</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_ext_struct"><span class="id" title="instance">optimized_abstract_env_ext_struct</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_ext_prop"><span class="id" title="instance">optimized_abstract_env_ext_prop</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#cdd198d55a4475b214740b8083e472ab"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="optimized_abstract_env_impl" class="idref" href="#optimized_abstract_env_impl"><span class="id" title="definition">optimized_abstract_env_impl</span></a> {<a id="cf:219" class="idref" href="#cf:219"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="guard:220" class="idref" href="#guard:220"><span class="id" title="binder">guard</span></a> : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#abstract_guard_impl"><span class="id" title="class">abstract_guard_impl</span></a>} : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnv.html#abstract_env_impl"><span class="id" title="definition">abstract_env_impl</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">(</span></a><a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_ext_impl"><span class="id" title="definition">optimized_abstract_env_ext_impl</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_struct"><span class="id" title="instance">optimized_abstract_env_struct</span></a> <a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">;</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#optimized_abstract_env_prop"><span class="id" title="instance">optimized_abstract_env_prop</span></a><a class="idref" href="MetaCoq.Template.utils.MCPrelude.html#10ad76a80d07304ebf924e74a1314ea7"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="build_wf_env_from_env" class="idref" href="#build_wf_env_from_env"><span class="id" title="definition">build_wf_env_from_env</span></a> {<a id="cf:221" class="idref" href="#cf:221"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaCoq.Template.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="993af1b5c399b2f9776f36ea13eef1c0" class="idref" href="#993af1b5c399b2f9776f36ea13eef1c0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) (<a id="7a61a73010c1b6ca5e037c1ef0252b3e" class="idref" href="#7a61a73010c1b6ca5e037c1ef0252b3e"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a> <a class="idref" href="MetaCoq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#993af1b5c399b2f9776f36ea13eef1c0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaCoq.Template.utils.MCSquash.html#2403cb4f4230cf3f6910dd7542d09118"><span class="id" title="notation">∥</span></a>) : <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env"><span class="id" title="record">wf_env</span></a>  <br/>
&nbsp;&nbsp;:= <br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="bba18150447b2e6ea96770864ebd28c4" class="idref" href="#bba18150447b2e6ea96770864ebd28c4"><span class="id" title="binder">Σm</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.of_global_env"><span class="id" title="definition">EnvMap.of_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#993af1b5c399b2f9776f36ea13eef1c0"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_referenced"><span class="id" title="projection">wf_env_referenced</span></a> := {| <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_env"><span class="id" title="projection">referenced_impl_env</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#993af1b5c399b2f9776f36ea13eef1c0"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#referenced_impl_wf"><span class="id" title="projection">referenced_impl_wf</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#7a61a73010c1b6ca5e037c1ef0252b3e"><span class="id" title="variable">wfΣ</span></a> |} ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map"><span class="id" title="projection">wf_env_map</span></a> := <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#bba18150447b2e6ea96770864ebd28c4"><span class="id" title="variable">Σm</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#wf_env_map_repr"><span class="id" title="projection">wf_env_map_repr</span></a> := <a class="idref" href="MetaCoq.Template.EnvMap.html#EnvMap.repr_global_env"><span class="id" title="lemma">EnvMap.repr_global_env</span></a> <a class="idref" href="MetaCoq.SafeChecker.PCUICWfEnvImpl.html#993af1b5c399b2f9776f36ea13eef1c0"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaCoq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>);<br/>
&nbsp;|}.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
