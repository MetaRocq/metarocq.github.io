<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library Malfunction.Mcase</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#"><span class="id" title="library">List</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.micromega.Lia.html#"><span class="id" title="library">Lia</span></a>.<br/>
<span class="id" title="keyword">Export</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ListNotations"><span class="id" title="module">ListNotations</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.bytestring.html#"><span class="id" title="library">bytestring</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.All_Forall.html#"><span class="id" title="library">All_Forall</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#"><span class="id" title="library">MRList</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.ReflectEq.html#"><span class="id" title="library">ReflectEq</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Common.BasicAst.html#"><span class="id" title="library">BasicAst</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Erasure.EWcbvEvalNamed.html#"><span class="id" title="library">EWcbvEvalNamed</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Malfunction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Malfunction.utils_array.html#"><span class="id" title="library">utils_array</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#"><span class="id" title="library">SemanticsSpec</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Malfunction</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Malfunction.Malfunction.html#"><span class="id" title="library">Malfunction</span></a> <a class="idref" href="Malfunction.Compile.html#"><span class="id" title="library">Compile</span></a>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list_scope</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="Func_" class="idref" href="#Func_"><span class="id" title="definition">Func_</span></a> `{<a id="H:2" class="idref" href="#H:2"><span class="id" title="binder">H</span></a> : <a class="idref" href="Malfunction.SemanticsSpec.html#Heap"><span class="id" title="class">Heap</span></a>} <a id="nms:3" class="idref" href="#nms:3"><span class="id" title="binder">nms</span></a> <a id="locals:4" class="idref" href="#locals:4"><span class="id" title="binder">locals</span></a> <a id="b:5" class="idref" href="#b:5"><span class="id" title="binder">b</span></a> <a id="v:6" class="idref" href="#v:6"><span class="id" title="binder">v</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#nms:3"><span class="id" title="variable">nms</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">nms</span> ⇒ <a class="idref" href="Malfunction.SemanticsSpec.html#Func"><span class="id" title="constructor">Func</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#locals:4"><span class="id" title="variable">locals</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">n</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Compile.html#Mlambda_"><span class="id" title="definition">Mlambda_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#nms:3"><span class="id" title="variable">nms</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#b:5"><span class="id" title="variable">b</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> ⇒ <a class="idref" href="Malfunction.Mcase.html#v:6"><span class="id" title="variable">v</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Fixpoint</span> <a id="Mnapply" class="idref" href="#Mnapply"><span class="id" title="definition">Mnapply</span></a> (<a id="l:8" class="idref" href="#l:8"><span class="id" title="binder">l</span></a> : <a class="idref" href="Malfunction.Malfunction.html#t"><span class="id" title="inductive">t</span></a>) (<a id="args:9" class="idref" href="#args:9"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Malfunction.Malfunction.html#t"><span class="id" title="inductive">t</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#args:9"><span class="id" title="variable">args</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> ⇒ <a class="idref" href="Malfunction.Mcase.html#l:8"><span class="id" title="variable">l</span></a><br/>
&nbsp;&nbsp;| <span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span> ⇒ <a class="idref" href="Malfunction.Mcase.html#Mnapply:10"><span class="id" title="definition">Mnapply</span></a> (<a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#l:8"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#args:9"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Mnapply_app" class="idref" href="#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a> <a id="l:12" class="idref" href="#l:12"><span class="id" title="binder">l</span></a> <a id="args1:13" class="idref" href="#args1:13"><span class="id" title="binder">args1</span></a> <a id="args2:14" class="idref" href="#args2:14"><span class="id" title="binder">args2</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:12"><span class="id" title="variable">l</span></a> (<a class="idref" href="Malfunction.Mcase.html#args1:13"><span class="id" title="variable">args1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#args2:14"><span class="id" title="variable">args2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> (<a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:12"><span class="id" title="variable">l</span></a> <a class="idref" href="Malfunction.Mcase.html#args1:13"><span class="id" title="variable">args1</span></a>) <a class="idref" href="Malfunction.Mcase.html#args2:14"><span class="id" title="variable">args2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">args2</span> |- *; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHargs1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Arguments</span> <a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">SemanticsSpec.eval</span></a> {<span class="id" title="var">_</span> <span class="id" title="var">_</span>}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_app_nested_" class="idref" href="#eval_app_nested_"><span class="id" title="lemma">eval_app_nested_</span></a> `{<a id="H0:16" class="idref" href="#H0:16"><span class="id" title="binder">Heap</span></a>} <a id="globals:17" class="idref" href="#globals:17"><span class="id" title="binder">globals</span></a> <a id="locals:18" class="idref" href="#locals:18"><span class="id" title="binder">locals</span></a> <a id="args:19" class="idref" href="#args:19"><span class="id" title="binder">args</span></a> <a id="l:20" class="idref" href="#l:20"><span class="id" title="binder">l</span></a> <a id="args':21" class="idref" href="#args':21"><span class="id" title="binder">args'</span></a> <a id="v:22" class="idref" href="#v:22"><span class="id" title="binder">v</span></a> <a id="h:23" class="idref" href="#h:23"><span class="id" title="binder">h</span></a> <a id="h':24" class="idref" href="#h':24"><span class="id" title="binder">h'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">SemanticsSpec.eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:17"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:18"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:23"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:20"><span class="id" title="variable">l</span></a> (<a class="idref" href="Malfunction.Mcase.html#args':21"><span class="id" title="variable">args'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#args:19"><span class="id" title="variable">args</span></a>)) <a class="idref" href="Malfunction.Mcase.html#h':24"><span class="id" title="variable">h'</span></a> <a class="idref" href="Malfunction.Mcase.html#v:22"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">SemanticsSpec.eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:17"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:18"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:23"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:20"><span class="id" title="variable">l</span></a> <a class="idref" href="Malfunction.Mcase.html#args':21"><span class="id" title="variable">args'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#args:19"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h':24"><span class="id" title="variable">h'</span></a> <a class="idref" href="Malfunction.Mcase.html#v:22"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="tactic">in</span> <span class="id" title="var">args'</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHargs</span> (<span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="Malfunction.Mcase.html#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_app_nested_inv" class="idref" href="#eval_app_nested_inv"><span class="id" title="lemma">eval_app_nested_inv</span></a> `{<a id="H0:26" class="idref" href="#H0:26"><span class="id" title="binder">Heap</span></a>} <a id="globals:27" class="idref" href="#globals:27"><span class="id" title="binder">globals</span></a> <a id="locals:28" class="idref" href="#locals:28"><span class="id" title="binder">locals</span></a> <a id="args:29" class="idref" href="#args:29"><span class="id" title="binder">args</span></a> <a id="l:30" class="idref" href="#l:30"><span class="id" title="binder">l</span></a> <a id="args':31" class="idref" href="#args':31"><span class="id" title="binder">args'</span></a> <a id="v:32" class="idref" href="#v:32"><span class="id" title="binder">v</span></a> <a id="h:33" class="idref" href="#h:33"><span class="id" title="binder">h</span></a> <a id="h':34" class="idref" href="#h':34"><span class="id" title="binder">h'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">SemanticsSpec.eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:27"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:28"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:33"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:30"><span class="id" title="variable">l</span></a> <a class="idref" href="Malfunction.Mcase.html#args':31"><span class="id" title="variable">args'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#args:29"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h':34"><span class="id" title="variable">h'</span></a> <a class="idref" href="Malfunction.Mcase.html#v:32"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">SemanticsSpec.eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:27"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:28"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:33"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Mcase.html#Mnapply"><span class="id" title="definition">Mnapply</span></a> <a class="idref" href="Malfunction.Mcase.html#l:30"><span class="id" title="variable">l</span></a> (<a class="idref" href="Malfunction.Mcase.html#args':31"><span class="id" title="variable">args'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#args:29"><span class="id" title="variable">args</span></a>)) <a class="idref" href="Malfunction.Mcase.html#h':34"><span class="id" title="variable">h'</span></a> <a class="idref" href="Malfunction.Mcase.html#v:32"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="tactic">in</span> <span class="id" title="var">args'</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHargs</span> (<span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>). <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Mnapply_app"><span class="id" title="lemma">Mnapply_app</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.FunctionalExtensionality.html#"><span class="id" title="library">FunctionalExtensionality</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="add_multiple" class="idref" href="#add_multiple"><span class="id" title="definition">add_multiple</span></a> `{<a id="H0:36" class="idref" href="#H0:36"><span class="id" title="binder">Heap</span></a>} <a id="nms:37" class="idref" href="#nms:37"><span class="id" title="binder">nms</span></a> <a id="values:38" class="idref" href="#values:38"><span class="id" title="binder">values</span></a> <a id="locals:39" class="idref" href="#locals:39"><span class="id" title="binder">locals</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:42" class="idref" href="#pat:42"><span class="id" title="binder">(</span></a><a id="a:41" class="idref" href="#a:41"><span class="id" title="binder"><span id="pat:42" class="id">a</span></span></a><a id="pat:42" class="idref" href="#pat:42"><span class="id" title="binder">,</span></a><a id="b:40" class="idref" href="#b:40"><span class="id" title="binder"><span id="pat:42" class="id">b</span></span></a><a id="pat:42" class="idref" href="#pat:42"><span class="id" title="binder">)</span></a> <a id="l:43" class="idref" href="#l:43"><span class="id" title="binder">l</span></a> ⇒ @<a class="idref" href="Malfunction.Malfunction.html#Ident.Map.add"><span class="id" title="definition">Ident.Map.add</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#value"><span class="id" title="inductive">value</span></a> <a class="idref" href="Malfunction.Mcase.html#a:41"><span class="id" title="variable">a</span></a> <a class="idref" href="Malfunction.Mcase.html#b:40"><span class="id" title="variable">b</span></a> <a class="idref" href="Malfunction.Mcase.html#l:43"><span class="id" title="variable">l</span></a>) <a class="idref" href="Malfunction.Mcase.html#locals:39"><span class="id" title="variable">locals</span></a> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#pair"><span class="id" title="constructor">pair</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:37"><span class="id" title="variable">nms</span></a> <a class="idref" href="Malfunction.Mcase.html#values:38"><span class="id" title="variable">values</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="add_to_add_multiple" class="idref" href="#add_to_add_multiple"><span class="id" title="lemma">add_to_add_multiple</span></a> `{<a id="H0:45" class="idref" href="#H0:45"><span class="id" title="binder">Heap</span></a>} <a id="nm:46" class="idref" href="#nm:46"><span class="id" title="binder">nm</span></a> <a id="y:47" class="idref" href="#y:47"><span class="id" title="binder">y</span></a> <a id="nms':48" class="idref" href="#nms':48"><span class="id" title="binder">nms'</span></a> <a id="values':49" class="idref" href="#values':49"><span class="id" title="binder">values'</span></a> <a id="locals:50" class="idref" href="#locals:50"><span class="id" title="binder">locals</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Malfunction.Mcase.html#nm:46"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="Malfunction.Mcase.html#nms':48"><span class="id" title="variable">nms'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#nms':48"><span class="id" title="variable">nms'</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#values':49"><span class="id" title="variable">values'</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.Malfunction.html#Ident.Map.add"><span class="id" title="definition">Ident.Map.add</span></a> <a class="idref" href="Malfunction.Mcase.html#nm:46"><span class="id" title="variable">nm</span></a> <a class="idref" href="Malfunction.Mcase.html#y:47"><span class="id" title="variable">y</span></a> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> <a class="idref" href="Malfunction.Mcase.html#nms':48"><span class="id" title="variable">nms'</span></a> <a class="idref" href="Malfunction.Mcase.html#values':49"><span class="id" title="variable">values'</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:50"><span class="id" title="variable">locals</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> (<a class="idref" href="Malfunction.Mcase.html#nms':48"><span class="id" title="variable">nms'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="Malfunction.Mcase.html#nm:46"><span class="id" title="variable">nm</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) (<a class="idref" href="Malfunction.Mcase.html#values':49"><span class="id" title="variable">values'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="Malfunction.Mcase.html#y:47"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <a class="idref" href="Malfunction.Mcase.html#locals:50"><span class="id" title="variable">locals</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span> <span class="id" title="var">Hlen</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">nms'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">values'</span>, <span class="id" title="var">H</span>, <span class="id" title="var">Hlen</span>, <span class="id" title="var">nm</span>, <span class="id" title="var">y</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">values'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">values'</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> (<span class="id" title="var">nms'</span>) (<span class="id" title="var">values'</span>) <span class="id" title="var">locals</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">fold</span> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> (<span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) (<span class="id" title="var">values'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">y</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">locals</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHnms'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3: <span class="id" title="var">lia</span>. 2:{ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">nm</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <span class="id" title="var">a</span>). { <span class="id" title="tactic">intros</span> ?. <span class="id" title="tactic">subst</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Logic.FunctionalExtensionality.html#functional_extensionality"><span class="id" title="lemma">functional_extensionality</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.Malfunction.html#Ident.Map.add"><span class="id" title="definition">Ident.Map.add</span></a>, <a class="idref" href="Malfunction.Malfunction.html#Ident.eqb"><span class="id" title="definition">Ident.eqb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">x</span> <span class="id" title="var">nm</span>), (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> <span class="id" title="var">x</span> <span class="id" title="var">a</span>); <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="NoDup_app" class="idref" href="#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> {<a id="X:51" class="idref" href="#X:51"><span class="id" title="binder">X</span></a>} (<a id="l1:52" class="idref" href="#l1:52"><span class="id" title="binder">l1</span></a> <a id="l2:53" class="idref" href="#l2:53"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="Malfunction.Mcase.html#X:51"><span class="id" title="variable">X</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Malfunction.Mcase.html#l1:52"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#l2:53"><span class="id" title="variable">l2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="Malfunction.Mcase.html#l1:52"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="Malfunction.Mcase.html#l2:53"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l1</span>; <span class="id" title="tactic">inversion</span> 1; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_app_" class="idref" href="#eval_app_"><span class="id" title="lemma">eval_app_</span></a> `{<a id="H0:55" class="idref" href="#H0:55"><span class="id" title="binder">Heap</span></a>} <a id="globals:56" class="idref" href="#globals:56"><span class="id" title="binder">globals</span></a> <a id="locals:57" class="idref" href="#locals:57"><span class="id" title="binder">locals</span></a> <a id="args:58" class="idref" href="#args:58"><span class="id" title="binder">args</span></a> <a id="values:59" class="idref" href="#values:59"><span class="id" title="binder">values</span></a> <a id="values':60" class="idref" href="#values':60"><span class="id" title="binder">values'</span></a> <a id="nms':61" class="idref" href="#nms':61"><span class="id" title="binder">nms'</span></a> <a id="nms:62" class="idref" href="#nms:62"><span class="id" title="binder">nms</span></a> <a id="b:63" class="idref" href="#b:63"><span class="id" title="binder">b</span></a> <a id="v:64" class="idref" href="#v:64"><span class="id" title="binder">v</span></a> <a id="l:65" class="idref" href="#l:65"><span class="id" title="binder">l</span></a> <a id="h:66" class="idref" href="#h:66"><span class="id" title="binder">h</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#args:58"><span class="id" title="variable">args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#nms:62"><span class="id" title="variable">nms</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#nms':61"><span class="id" title="variable">nms'</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#values':60"><span class="id" title="variable">values'</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> (<a class="idref" href="Malfunction.Mcase.html#nms':61"><span class="id" title="variable">nms'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:62"><span class="id" title="variable">nms</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> <a id="e:67" class="idref" href="#e:67"><span class="id" title="binder">e</span></a> <a id="v:68" class="idref" href="#v:68"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:56"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:57"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#e:67"><span class="id" title="variable">e</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:68"><span class="id" title="variable">v</span></a>) <a class="idref" href="Malfunction.Mcase.html#args:58"><span class="id" title="variable">args</span></a> <a class="idref" href="Malfunction.Mcase.html#values:59"><span class="id" title="variable">values</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:56"><span class="id" title="variable">globals</span></a> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> (<a class="idref" href="Malfunction.Mcase.html#nms':61"><span class="id" title="variable">nms'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:62"><span class="id" title="variable">nms</span></a>) (<a class="idref" href="Malfunction.Mcase.html#values':60"><span class="id" title="variable">values'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="Malfunction.Mcase.html#values:59"><span class="id" title="variable">values</span></a>) <a class="idref" href="Malfunction.Mcase.html#locals:57"><span class="id" title="variable">locals</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#b:63"><span class="id" title="variable">b</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:64"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:56"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:57"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#l:65"><span class="id" title="variable">l</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Mcase.html#Func_"><span class="id" title="definition">Func_</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:62"><span class="id" title="variable">nms</span></a> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> <a class="idref" href="Malfunction.Mcase.html#nms':61"><span class="id" title="variable">nms'</span></a> <a class="idref" href="Malfunction.Mcase.html#values':60"><span class="id" title="variable">values'</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:57"><span class="id" title="variable">locals</span></a>) <a class="idref" href="Malfunction.Mcase.html#b:63"><span class="id" title="variable">b</span></a> <a class="idref" href="Malfunction.Mcase.html#v:64"><span class="id" title="variable">v</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:56"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:57"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#l:65"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#args:58"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:66"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:64"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hlenv</span> <span class="id" title="var">Hdup</span> <span class="id" title="var">H</span> <span class="id" title="var">Heval</span> <span class="id" title="var">Hl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="Malfunction.Mcase.html#eval_app_nested_"><span class="id" title="lemma">eval_app_nested_</span></a> <span class="id" title="var">globals</span> <span class="id" title="var">locals</span> <span class="id" title="var">args</span> <span class="id" title="var">l</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>, <span class="id" title="var">b</span>, <span class="id" title="var">nms</span>, <span class="id" title="var">nms'</span>, <span class="id" title="var">Hlen</span>, <span class="id" title="var">Heval</span>, <span class="id" title="var">v</span>, <span class="id" title="var">values</span>, <span class="id" title="var">values'</span>, <span class="id" title="var">Hl</span>, <span class="id" title="var">l</span>, <span class="id" title="var">Hdup</span>, <span class="id" title="var">Hlenv</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">nm</span> <span class="id" title="var">nms</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>. 1: <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">Hx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hlen</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#add_to_add_multiple"><span class="id" title="lemma">add_to_add_multiple</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup_incl_NoDup"><span class="id" title="lemma">NoDup_incl_NoDup</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span> <span class="id" title="keyword">as</span> [ | <span class="id" title="var">nm'</span> <span class="id" title="var">nms</span>]. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">nms'</span> := <span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) (<span class="id" title="var">values'</span> := <span class="id" title="var">values'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">y</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;5:{ <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Heval</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. 1:{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. } 1:{ <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>. } <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; [ <span class="id" title="tactic">eauto</span>.. | ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#add_to_add_multiple"><span class="id" title="lemma">add_to_add_multiple</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <span class="id" title="var">nm'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Eq</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.Mcase.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdup</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup_incl_NoDup"><span class="id" title="lemma">NoDup_incl_NoDup</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assert</span> (<span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">nm</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">nm'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">nms</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">nms'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">nm</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">nm'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">nms</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">Eq</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.Mcase.html#NoDup_app"><span class="id" title="lemma">NoDup_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hdup</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hdup</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup_incl_NoDup"><span class="id" title="lemma">NoDup_incl_NoDup</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="var">lia</span>. <span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#in_app_iff"><span class="id" title="lemma">in_app_iff</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">firstorder</span> <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_apply_lambda" class="idref" href="#eval_apply_lambda"><span class="id" title="lemma">eval_apply_lambda</span></a> `{<a id="H0:70" class="idref" href="#H0:70"><span class="id" title="binder">Heap</span></a>} <a id="globals:71" class="idref" href="#globals:71"><span class="id" title="binder">globals</span></a> <a id="locals:72" class="idref" href="#locals:72"><span class="id" title="binder">locals</span></a> <a id="args:73" class="idref" href="#args:73"><span class="id" title="binder">args</span></a> <a id="nms:74" class="idref" href="#nms:74"><span class="id" title="binder">nms</span></a> <a id="b:75" class="idref" href="#b:75"><span class="id" title="binder">b</span></a> <a id="values:76" class="idref" href="#values:76"><span class="id" title="binder">values</span></a> <a id="v:77" class="idref" href="#v:77"><span class="id" title="binder">v</span></a> <a id="h:78" class="idref" href="#h:78"><span class="id" title="binder">h</span></a> : <br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#args:73"><span class="id" title="variable">args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#nms:74"><span class="id" title="variable">nms</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:74"><span class="id" title="variable">nms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> <a id="e:79" class="idref" href="#e:79"><span class="id" title="binder">e</span></a> <a id="v:80" class="idref" href="#v:80"><span class="id" title="binder">v</span></a> ⇒ <a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:71"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:72"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#e:79"><span class="id" title="variable">e</span></a> <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:80"><span class="id" title="variable">v</span></a>) <a class="idref" href="Malfunction.Mcase.html#args:73"><span class="id" title="variable">args</span></a> <a class="idref" href="Malfunction.Mcase.html#values:76"><span class="id" title="variable">values</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:71"><span class="id" title="variable">globals</span></a> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:74"><span class="id" title="variable">nms</span></a> <a class="idref" href="Malfunction.Mcase.html#values:76"><span class="id" title="variable">values</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:72"><span class="id" title="variable">locals</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#b:75"><span class="id" title="variable">b</span></a> <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:77"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:71"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:72"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Compile.html#Mlambda_"><span class="id" title="definition">Mlambda_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#nms:74"><span class="id" title="variable">nms</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#b:75"><span class="id" title="variable">b</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="Malfunction.Mcase.html#args:73"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:78"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:77"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.Mcase.html#eval_app_"><span class="id" title="lemma">eval_app_</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">nms'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) (<span class="id" title="var">values'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">firstorder</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.ZArith.html#"><span class="id" title="library">ZArith</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_case_block" class="idref" href="#eval_case_block"><span class="id" title="lemma">eval_case_block</span></a> `{<a id="H0:82" class="idref" href="#H0:82"><span class="id" title="binder">Heap</span></a>} <a id="globals:83" class="idref" href="#globals:83"><span class="id" title="binder">globals</span></a> <a id="locals:84" class="idref" href="#locals:84"><span class="id" title="binder">locals</span></a> <a id="discr:85" class="idref" href="#discr:85"><span class="id" title="binder">discr</span></a> <a id="i:86" class="idref" href="#i:86"><span class="id" title="binder">i</span></a> <a id="args:87" class="idref" href="#args:87"><span class="id" title="binder">args</span></a> <a id="brs:88" class="idref" href="#brs:88"><span class="id" title="binder">brs</span></a> <a id="nms:89" class="idref" href="#nms:89"><span class="id" title="binder">nms</span></a> <a id="br:90" class="idref" href="#br:90"><span class="id" title="binder">br</span></a> <a id="v:91" class="idref" href="#v:91"><span class="id" title="binder">v</span></a> <a id="h:92" class="idref" href="#h:92"><span class="id" title="binder">h</span></a> <a id="num_args:93" class="idref" href="#num_args:93"><span class="id" title="binder">num_args</span></a>  :<br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:83"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:84"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#discr:85"><span class="id" title="variable">discr</span></a> <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.SemanticsSpec.html#Block"><span class="id" title="constructor">Block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.utils_array.html#int_of_nat"><span class="id" title="definition">int_of_nat</span></a> (<a class="idref" href="Malfunction.Compile.html#blocks_until"><span class="id" title="definition">blocks_until</span></a> <a class="idref" href="Malfunction.Mcase.html#i:86"><span class="id" title="variable">i</span></a> <a class="idref" href="Malfunction.Mcase.html#num_args:93"><span class="id" title="variable">num_args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#args:87"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#num_args:93"><span class="id" title="variable">num_args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="Malfunction.Malfunction.html#Int63.wB"><span class="id" title="abbreviation">Int63.wB</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#args:87"><span class="id" title="variable">args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Malfunction.utils_array.html#int_to_nat"><span class="id" title="definition">int_to_nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Array.PArray.html#max_length"><span class="id" title="abbreviation">PArray.max_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="Malfunction.Mcase.html#num_args:93"><span class="id" title="variable">num_args</span></a> <a class="idref" href="Malfunction.Mcase.html#i:86"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="Malfunction.Mcase.html#brs:88"><span class="id" title="variable">brs</span></a> <a class="idref" href="Malfunction.Mcase.html#i:86"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#br:90"><span class="id" title="variable">br</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#NoDup"><span class="id" title="inductive">NoDup</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#args:87"><span class="id" title="variable">args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:83"><span class="id" title="variable">globals</span></a> (<a class="idref" href="Malfunction.Mcase.html#add_multiple"><span class="id" title="definition">add_multiple</span></a> <a class="idref" href="Malfunction.Mcase.html#nms:89"><span class="id" title="variable">nms</span></a> <a class="idref" href="Malfunction.Mcase.html#args:87"><span class="id" title="variable">args</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:84"><span class="id" title="variable">locals</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#br:90"><span class="id" title="variable">br</span></a> <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:91"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:83"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:84"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mcase"><span class="id" title="definition">Mcase</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#num_args:93"><span class="id" title="variable">num_args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#discr:85"><span class="id" title="variable">discr</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#brs:88"><span class="id" title="variable">brs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:92"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:91"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdiscr</span> <span class="id" title="var">Hnms</span> <span class="id" title="var">Hln</span> <span class="id" title="var">Hargs</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hdup</span> <span class="id" title="var">Hlen</span> <span class="id" title="var">Hbr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.SemanticsSpec.html#eval_switch"><span class="id" title="constructor">eval_switch</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <a class="idref" href="Malfunction.Compile.html#Mapply_"><span class="id" title="definition">Mapply_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Compile.html#Mlambda_"><span class="id" title="definition">Mlambda_</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">nms</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">br</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">),</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<span class="id" title="keyword">fun</span> <a id="i:94" class="idref" href="#i:94"><span class="id" title="binder"><span id="i:95" class="id">i</span></span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="Malfunction.Malfunction.html#Mfield"><span class="id" title="constructor">Mfield</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.utils_array.html#int_of_nat"><span class="id" title="definition">int_of_nat</span></a> <a class="idref" href="Malfunction.Mcase.html#i:94"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">discr</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<span class="id" title="var">nms</span>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> - <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnms</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hnms</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">num_args</span> <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">num_args</span>) <span class="id" title="tactic">at</span> 2 3 4 5 6 7 8.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">at</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0 <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">brs0</span> <span class="id" title="var">Hbrs0</span> <span class="id" title="var">Hnms</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">brs</span> <span class="id" title="keyword">as</span> [ | [<span class="id" title="var">nms'</span> <span class="id" title="var">br'</span>] <span class="id" title="var">brs</span> <span class="id" title="var">IH</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>, <span class="id" title="var">Hnth</span>, <span class="id" title="var">Hnms</span>, <span class="id" title="var">nms</span>, <span class="id" title="var">br</span>, <span class="id" title="var">n</span>, <span class="id" title="var">brs0</span>, <span class="id" title="var">Hbrs0</span>, <span class="id" title="var">Hnum</span>, <span class="id" title="var">Hln</span>, <span class="id" title="var">num_args</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">num_args</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hln</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnth</span> <span class="id" title="keyword">as</span> [ ]. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hnth</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">Bool.orb_false_r</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a>, <a class="idref" href="Malfunction.Malfunction.html#Int63.eqb_refl"><span class="id" title="abbreviation">Int63.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> [<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">fold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>. <span class="id" title="tactic">specialize</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <span class="id" title="var">i</span>) (<span class="id" title="var">n</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<span class="id" title="var">brs0</span> := <span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">n0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">num_args</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">n0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">num_args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">revert</span> <span class="id" title="var">Hln</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">Bool.orb_false_r</span></a>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.Compile.html#blocks_until"><span class="id" title="definition">blocks_until</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#firstn_app_left"><span class="id" title="lemma">firstn_app_left</span></a>. 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app"><span class="id" title="lemma">firstn_app</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#firstn_ge"><span class="id" title="lemma">firstn_ge</span></a>. 2: <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">brs0</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">brs0</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#filter_app"><span class="id" title="lemma">filter_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Numbers.Cyclic.Int63.Uint63.html#eqb_correct"><span class="id" title="abbreviation">Uint63.eqb_correct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#f_equal"><span class="id" title="lemma">f_equal</span></a> <a class="idref" href="Malfunction.utils_array.html#int_to_nat"><span class="id" title="definition">int_to_nat</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="Malfunction.utils_array.html#int_to_of_nat"><span class="id" title="lemma">int_to_of_nat</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hln</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Malfunction.utils_array.html#filter_length"><span class="id" title="lemma">filter_length</span></a> <span class="id" title="var">brs0</span> (<span class="id" title="keyword">fun</span> <a id="x:96" class="idref" href="#x:96"><span class="id" title="binder"><span id="x:98" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#x:96"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Malfunction.utils_array.html#filter_length"><span class="id" title="lemma">filter_length</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <span class="id" title="var">i</span> <span class="id" title="var">num_args</span>) (<span class="id" title="keyword">fun</span> <a id="x:100" class="idref" href="#x:100"><span class="id" title="binder"><span id="x:102" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#x:100"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hln</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Malfunction.utils_array.html#filter_length"><span class="id" title="lemma">filter_length</span></a> <span class="id" title="var">brs0</span> (<span class="id" title="keyword">fun</span> <a id="x:104" class="idref" href="#x:104"><span class="id" title="binder"><span id="x:106" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#x:104"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.Mcase.html#eval_apply_lambda"><span class="id" title="lemma">eval_apply_lambda</span></a>. 2: <span class="id" title="var">eassumption</span>. 3: <span class="id" title="var">eassumption</span>. 1: <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi_length"><span class="id" title="lemma">mapi_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">change</span> 0 <span class="id" title="keyword">with</span> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a>@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#value"><span class="id" title="inductive">value</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hdiscr</span>. <span class="id" title="tactic">change</span> <span class="id" title="var">args</span> <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">args</span>) <span class="id" title="tactic">at</span> 1 2. <span class="id" title="tactic">generalize</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#value"><span class="id" title="inductive">value</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">args'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">args'</span> <span class="id" title="var">Hdiscr</span> <span class="id" title="var">Hargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hargs</span>, <span class="id" title="var">nms</span>, <span class="id" title="var">Hlen</span>, <span class="id" title="var">Hdup</span>, <span class="id" title="var">Hdiscr</span>, <span class="id" title="var">args'</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">nms</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlen</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">specialize</span> <span class="id" title="var">IHargs</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">args'</span> := <span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHargs</span>. 2: <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">replace</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args'</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args'</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1) <span class="id" title="tactic">by</span> <span class="id" title="var">lia_max_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">evar</span> (<span class="id" title="var">v'</span> : <a class="idref" href="Malfunction.SemanticsSpec.html#value"><span class="id" title="inductive">value</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">a</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">v'</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdiscr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia_max_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.utils_array.html#int_to_of_nat"><span class="id" title="lemma">int_to_of_nat</span></a>; <span class="id" title="var">lia_max_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">v'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.utils_array.html#int_to_of_nat"><span class="id" title="lemma">int_to_of_nat</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nth2"><span class="id" title="lemma">app_nth2</span></a>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">PeanoNat.Nat.sub_diag</span></a>; [ <span class="id" title="tactic">reflexivity</span> | <span class="id" title="var">lia_max_length</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia_max_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hdup</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">Hdiscr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia_max_length</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Z_and_int" class="idref" href="#Z_and_int"><span class="id" title="lemma">Z_and_int</span></a> <a id="n:108" class="idref" href="#n:108"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <a class="idref" href="Malfunction.Mcase.html#n:108"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#::Z_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Malfunction.Malfunction.html#Int63.wB"><span class="id" title="abbreviation">Int63.wB</span></a>)%<span class="id" title="var">Z</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.Malfunction.html#Int63.to_Z"><span class="id" title="abbreviation">Int63.to_Z</span></a> (<a class="idref" href="Malfunction.utils_array.html#int_of_nat"><span class="id" title="definition">int_of_nat</span></a> <a class="idref" href="Malfunction.Mcase.html#n:108"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z.of_nat"><span class="id" title="definition">Z.of_nat</span></a> <a class="idref" href="Malfunction.Mcase.html#n:108"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.utils_array.html#int_of_nat"><span class="id" title="definition">int_of_nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Malfunction.html#Int63.of_Z_spec"><span class="id" title="lemma">Int63.of_Z_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z.mod_small"><span class="id" title="lemma">Z.mod_small</span></a>. 2:<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_case_int" class="idref" href="#eval_case_int"><span class="id" title="lemma">eval_case_int</span></a> `{<a id="H0:110" class="idref" href="#H0:110"><span class="id" title="binder">Heap</span></a>} <a id="globals:111" class="idref" href="#globals:111"><span class="id" title="binder">globals</span></a> <a id="locals:112" class="idref" href="#locals:112"><span class="id" title="binder">locals</span></a> <a id="discr:113" class="idref" href="#discr:113"><span class="id" title="binder">discr</span></a> <a id="i:114" class="idref" href="#i:114"><span class="id" title="binder">i</span></a> <a id="brs:115" class="idref" href="#brs:115"><span class="id" title="binder">brs</span></a> <a id="br:116" class="idref" href="#br:116"><span class="id" title="binder">br</span></a> <a id="v:117" class="idref" href="#v:117"><span class="id" title="binder">v</span></a> <a id="h:118" class="idref" href="#h:118"><span class="id" title="binder">h</span></a>  <a id="num_args:119" class="idref" href="#num_args:119"><span class="id" title="binder">num_args</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:111"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:112"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#discr:113"><span class="id" title="variable">discr</span></a> <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.SemanticsSpec.html#value_Int"><span class="id" title="constructor">value_Int</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Malfunction.html#Int"><span class="id" title="constructor">Int</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z_of_nat"><span class="id" title="abbreviation">Z_of_nat</span></a> (<a class="idref" href="Malfunction.Compile.html#nonblocks_until"><span class="id" title="definition">nonblocks_until</span></a> <a class="idref" href="Malfunction.Mcase.html#i:114"><span class="id" title="variable">i</span></a> <a class="idref" href="Malfunction.Mcase.html#num_args:119"><span class="id" title="variable">num_args</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="Malfunction.Mcase.html#num_args:119"><span class="id" title="variable">num_args</span></a><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.BinInt.html#Z.to_nat"><span class="id" title="definition">Z.to_nat</span></a> <a class="idref" href="Malfunction.Malfunction.html#Int63.wB"><span class="id" title="abbreviation">Int63.wB</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="Malfunction.Mcase.html#num_args:119"><span class="id" title="variable">num_args</span></a> <a class="idref" href="Malfunction.Mcase.html#i:114"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="Malfunction.Mcase.html#brs:115"><span class="id" title="variable">brs</span></a> <a class="idref" href="Malfunction.Mcase.html#i:114"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#br:116"><span class="id" title="variable">br</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:111"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:112"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#br:116"><span class="id" title="variable">br</span></a> <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:117"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="Malfunction.SemanticsSpec.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="Malfunction.Mcase.html#globals:111"><span class="id" title="variable">globals</span></a> <a class="idref" href="Malfunction.Mcase.html#locals:112"><span class="id" title="variable">locals</span></a> <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> (<a class="idref" href="Malfunction.Compile.html#Mcase"><span class="id" title="definition">Mcase</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Malfunction.Mcase.html#num_args:119"><span class="id" title="variable">num_args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#discr:113"><span class="id" title="variable">discr</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="Malfunction.Mcase.html#brs:115"><span class="id" title="variable">brs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="Malfunction.Mcase.html#h:118"><span class="id" title="variable">h</span></a> <a class="idref" href="Malfunction.Mcase.html#v:117"><span class="id" title="variable">v</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H</span> <span class="id" title="var">into</span> <span class="id" title="var">HP</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H0</span> <span class="id" title="var">into</span> <span class="id" title="var">HH</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdiscr</span> <span class="id" title="var">Hln</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hbr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="Malfunction.SemanticsSpec.html#eval_switch"><span class="id" title="constructor">eval_switch</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">e</span> := <span class="id" title="var">br</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">clear</span> - <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">num_args</span> <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">num_args</span>) <span class="id" title="tactic">at</span> 2 3 4 5 6 7 8.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="tactic">by</span> <span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">revert</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span> (0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">at</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> 0 <span class="id" title="tactic">at</span> 1 3 4 <span class="id" title="keyword">as</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">brs0</span> <span class="id" title="var">Hbrs0</span> <span class="id" title="var">Hnth</span> <span class="id" title="var">Hnum</span> <span class="id" title="var">Hln</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">brs</span> <span class="id" title="keyword">as</span> [ | [<span class="id" title="var">nms'</span> <span class="id" title="var">br'</span>] <span class="id" title="var">brs</span> <span class="id" title="var">IH</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">Hln</span>, <span class="id" title="var">i</span>, <span class="id" title="var">Hnth</span>, <span class="id" title="var">br</span>, <span class="id" title="var">n</span>, <span class="id" title="var">brs0</span>, <span class="id" title="var">Hbrs0</span>, <span class="id" title="var">Hnum</span>, <span class="id" title="var">num_args</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">num_args</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">clear</span> <span class="id" title="var">Hln</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">i</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnth</span> <span class="id" title="keyword">as</span> [ ]. <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">Hnth</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hnum</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#cond"><span class="id" title="definition">cond</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">Bool.orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#andb_true_intro"><span class="id" title="lemma">andb_true_intro</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Z_and_int"><span class="id" title="lemma">Z_and_int</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#plus_n_O"><span class="id" title="lemma">plus_n_O</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.Compile.html#nonblocks_until"><span class="id" title="definition">nonblocks_until</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#firstn_app_left"><span class="id" title="lemma">firstn_app_left</span></a>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Malfunction.utils_array.html#filter_length"><span class="id" title="lemma">filter_length</span></a> <span class="id" title="var">brs0</span> (<span class="id" title="keyword">fun</span> <a id="x:120" class="idref" href="#x:120"><span class="id" title="binder"><span id="x:122" class="id"><span id="x:124" class="id">x</span></span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#x:120"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)); <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hln</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hln</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> [<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#mapi_rec"><span class="id" title="definition">mapi_rec</span></a>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">fold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">fold</span> <a class="idref" href="Malfunction.SemanticsSpec.html#find_match"><span class="id" title="definition">find_match</span></a>. <span class="id" title="tactic">specialize</span> <span class="id" title="var">IH</span> <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> := <span class="id" title="var">i</span>) (<span class="id" title="var">n</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) (<span class="id" title="var">brs0</span> := <span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">n0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> ((<span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">num_args</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">(</span></a><span class="id" title="var">brs0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">n0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">num_args</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> &lt;- !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} <span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">E</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_app2"><span class="id" title="lemma">nth_error_app2</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>; <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#existsb"><span class="id" title="definition">existsb</span></a> <a class="idref" href="Malfunction.SemanticsSpec.html#cond"><span class="id" title="definition">cond</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>]. 2: <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">Bool.orb_false_r</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a>. <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ZArith.Zbool.html#Zle_bool_imp_le"><span class="id" title="lemma">Zle_bool_imp_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Malfunction.Compile.html#nonblocks_until"><span class="id" title="definition">nonblocks_until</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#firstn_app_left"><span class="id" title="lemma">firstn_app_left</span></a> <span class="id" title="tactic">at</span> 2. 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app"><span class="id" title="lemma">firstn_app</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#firstn_ge"><span class="id" title="lemma">firstn_ge</span></a>. 2: <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">brs0</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">brs0</span><a class="idref" href="https://metarocq.github.io/v1.4-9.0//MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a>]. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#filter_app"><span class="id" title="lemma">filter_app</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#app"><span class="id" title="definition">app</span></a>]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#filter"><span class="id" title="definition">filter</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="Malfunction.Mcase.html#Z_and_int"><span class="id" title="lemma">Z_and_int</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="Malfunction.utils_array.html#filter_length"><span class="id" title="lemma">filter_length</span></a> <span class="id" title="var">brs0</span> (<span class="id" title="keyword">fun</span> <a id="x:126" class="idref" href="#x:126"><span class="id" title="binder"><span id="x:128" class="id">x</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">match</span> <a class="idref" href="Malfunction.Mcase.html#x:126"><span class="id" title="variable">x</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| 0%<span class="id" title="var">nat</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hln</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hln</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
