<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Erasure.EConstructorsAsBlocks</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8.html#"><span class="id" title="library">Utf8</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Program.Program.html#"><span class="id" title="library">Program</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.config.html#"><span class="id" title="library">config</span></a> <a class="idref" href="MetaRocq.Common.Kernames.html#"><span class="id" title="library">Kernames</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#"><span class="id" title="library">BasicAst</span></a> <a class="idref" href="MetaRocq.Common.EnvMap.html#"><span class="id" title="library">EnvMap</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#"><span class="id" title="library">EPrimitive</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#"><span class="id" title="library">EAst</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#"><span class="id" title="library">EAstUtils</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#"><span class="id" title="library">EInduction</span></a> <a class="idref" href="MetaRocq.Erasure.EArities.html#"><span class="id" title="library">EArities</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#"><span class="id" title="library">ELiftSubst</span></a> <a class="idref" href="MetaRocq.Erasure.ESpineView.html#"><span class="id" title="library">ESpineView</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#"><span class="id" title="library">EGlobalEnv</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#"><span class="id" title="library">EWellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#"><span class="id" title="library">EEnvMap</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#"><span class="id" title="library">EWcbvEval</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#"><span class="id" title="library">EEtaExpanded</span></a> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#"><span class="id" title="library">ECSubst</span></a> <a class="idref" href="MetaRocq.Erasure.EWcbvEvalEtaInd.html#"><span class="id" title="library">EWcbvEvalEtaInd</span></a> <a class="idref" href="MetaRocq.Erasure.EProgram.html#"><span class="id" title="library">EProgram</span></a>.<br/>

<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">string_scope</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Asymmetric</span> <span class="id" title="var">Patterns</span>.<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.monad_utils.html#MRMonadNotation"><span class="id" title="module">MRMonadNotation</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Transparent</span>.<br/>
<span class="id" title="keyword">Local</span> <span class="id" title="keyword">Set</span> <span class="id" title="var">Keyed</span> <span class="id" title="var">Unification</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a>.<br/>

<br/>
</div>

<div class="doc">
We assume <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <span class="inlinecode">&lt;/=</span> <span class="inlinecode"><span class="id" title="keyword">Type</span></span> and universes are checked correctly in the following. 
</div>
<div class="code">
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">introdep</span> := <span class="id" title="keyword">let</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>]<br/>
<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Constructors</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#eval"><span class="id" title="inductive">eval</span></a> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.MRList.html#"><span class="id" title="module">MRList</span></a> (<span class="id" title="var">map_InP</span>, <span class="id" title="var">map_InP_elim</span>, <span class="id" title="var">map_InP_spec</span>).<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="transform_blocks" class="idref" href="#transform_blocks"><span class="id" title="section">transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> (<a id="e6ed1b21a7d22bc6ab9a29a926de5bef" class="idref" href="#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Section</span> <a id="transform_blocks.Def" class="idref" href="#transform_blocks.Def"><span class="id" title="section">Def</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView"><span class="id" title="module">TermSpineView</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Equations</span>? <a id="transform_blocks" class="idref" href="#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a id="t:2" class="idref" href="#t:2"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">by</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">t</span> (<span class="id" title="keyword">fun</span> <a id="x:87" class="idref" href="#x:87"><span class="id" title="binder">x</span></a> <a id="y:88" class="idref" href="#y:88"><span class="id" title="binder">y</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">EAst.term</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:87"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#y:88"><span class="id" title="variable">y</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e:4"><span class="id" title="variable">e</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view"><span class="id" title="definition">TermSpineView.view</span></a> <span class="id" title="var">e</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#i:6"><span class="id" title="variable">i</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tRel"><span class="id" title="constructor">EAst.tRel</span></a> <span class="id" title="var">i</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tEvar"><span class="id" title="constructor">tEvar</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ev:9"><span class="id" title="variable">ev</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:7"><span class="id" title="variable">args</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tEvar"><span class="id" title="constructor">EAst.tEvar</span></a> <span class="id" title="var">ev</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">args</span> (<span class="id" title="keyword">fun</span> <a id="x:89" class="idref" href="#x:89"><span class="id" title="binder">x</span></a> <a id="H:90" class="idref" href="#H:90"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:89"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tLambda"><span class="id" title="constructor">tLambda</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#na:12"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#M:10"><span class="id" title="variable">M</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLambda"><span class="id" title="constructor">EAst.tLambda</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">M</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#u:16"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#v:17"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#napp:14"><span class="id" title="variable">napp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#nnil:15"><span class="id" title="variable">nnil</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">u</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ | <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_construct"><span class="id" title="constructor">view_construct</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:22"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#i:21"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_args:18"><span class="id" title="variable">block_args</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args"><span class="id" title="definition">GlobalContextMap.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> := {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#npars:35"><span class="id" title="variable">npars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#nargs:33"><span class="id" title="variable">nargs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:93" class="idref" href="#args:93"><span class="id" title="binder">args</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">v</span> (<span class="id" title="keyword">fun</span> <a id="x:91" class="idref" href="#x:91"><span class="id" title="binder">x</span></a> <a id="H:92" class="idref" href="#H:92"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:91"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">MRList.chop</span></a> <span class="id" title="var">nargs</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:93"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:93"><span class="id" title="variable">args</span></a>) <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:96" class="idref" href="#args:96"><span class="id" title="binder">args</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">v</span> (<span class="id" title="keyword">fun</span> <a id="x:94" class="idref" href="#x:94"><span class="id" title="binder">x</span></a> <a id="H:95" class="idref" href="#H:95"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:94"><span class="id" title="variable">x</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:96"><span class="id" title="variable">args</span></a> }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">view_other</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">_</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">_</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">u</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">v</span> (<span class="id" title="keyword">fun</span> <a id="x:97" class="idref" href="#x:97"><span class="id" title="binder">x</span></a> <a id="H:98" class="idref" href="#H:98"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:97"><span class="id" title="variable">x</span></a>)) }<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tLetIn"><span class="id" title="constructor">tLetIn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#na:58"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b:55"><span class="id" title="variable">b</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b':56"><span class="id" title="variable">b'</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLetIn"><span class="id" title="constructor">EAst.tLetIn</span></a> <span class="id" title="var">na</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">b</span>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">b'</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tCase"><span class="id" title="constructor">tCase</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:62"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:60"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#brs:59"><span class="id" title="variable">brs</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="brs':101" class="idref" href="#brs':101"><span class="id" title="binder">brs'</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">brs</span> (<span class="id" title="keyword">fun</span> <a id="x:99" class="idref" href="#x:99"><span class="id" title="binder">x</span></a> <a id="H:100" class="idref" href="#H:100"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:99"><span class="id" title="variable">x</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:99"><span class="id" title="variable">x</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tCase"><span class="id" title="constructor">EAst.tCase</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> 0<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">c</span>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#brs':101"><span class="id" title="variable">brs'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tProj"><span class="id" title="constructor">tProj</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#p:65"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:63"><span class="id" title="variable">c</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tProj"><span class="id" title="constructor">EAst.tProj</span></a> {| <a class="idref" href="MetaRocq.Common.Kernames.html#proj_ind"><span class="id" title="projection">proj_ind</span></a> := <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.Common.Kernames.html#proj_ind"><span class="id" title="projection">proj_ind</span></a>); <a class="idref" href="MetaRocq.Common.Kernames.html#proj_npars"><span class="id" title="projection">proj_npars</span></a> := 0; <a class="idref" href="MetaRocq.Common.Kernames.html#proj_arg"><span class="id" title="projection">proj_arg</span></a> := <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.Common.Kernames.html#proj_arg"><span class="id" title="projection">proj_arg</span></a>) |} (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">c</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:68"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:67"><span class="id" title="variable">idx</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mfix':104" class="idref" href="#mfix':104"><span class="id" title="binder">mfix'</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">mfix</span> (<span class="id" title="keyword">fun</span> <a id="d:102" class="idref" href="#d:102"><span class="id" title="binder">d</span></a> <a id="H:103" class="idref" href="#H:103"><span class="id" title="binder">H</span></a> ⇒ {| <a class="idref" href="MetaRocq.Erasure.EAst.html#dname"><span class="id" title="projection">dname</span></a> := <a class="idref" href="MetaRocq.Erasure.EAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:102"><span class="id" title="variable">d</span></a>; <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:102"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a>); <a class="idref" href="MetaRocq.Erasure.EAst.html#rarg"><span class="id" title="projection">rarg</span></a> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:102"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#rarg"><span class="id" title="projection">rarg</span></a>) |}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tFix"><span class="id" title="constructor">EAst.tFix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix':104"><span class="id" title="variable">mfix'</span></a> <span class="id" title="var">idx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tCoFix"><span class="id" title="constructor">tCoFix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:71"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:70"><span class="id" title="variable">idx</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="mfix':107" class="idref" href="#mfix':107"><span class="id" title="binder">mfix'</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#map_InP"><span class="id" title="definition">map_InP</span></a> <span class="id" title="var">mfix</span> (<span class="id" title="keyword">fun</span> <a id="d:105" class="idref" href="#d:105"><span class="id" title="binder">d</span></a> <a id="H:106" class="idref" href="#H:106"><span class="id" title="binder">H</span></a> ⇒ {| <a class="idref" href="MetaRocq.Erasure.EAst.html#dname"><span class="id" title="projection">dname</span></a> := <a class="idref" href="MetaRocq.Erasure.EAst.html#dname"><span class="id" title="projection">dname</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:105"><span class="id" title="variable">d</span></a>; <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:105"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a>); <a class="idref" href="MetaRocq.Erasure.EAst.html#rarg"><span class="id" title="projection">rarg</span></a> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:105"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#rarg"><span class="id" title="projection">rarg</span></a>) |}) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tCoFix"><span class="id" title="constructor">EAst.tCoFix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix':107"><span class="id" title="variable">mfix'</span></a> <span class="id" title="var">idx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tBox"><span class="id" title="constructor">tBox</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tBox"><span class="id" title="constructor">EAst.tBox</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tVar"><span class="id" title="constructor">tVar</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:74"><span class="id" title="variable">n</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tVar"><span class="id" title="constructor">EAst.tVar</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tConst"><span class="id" title="constructor">tConst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:76"><span class="id" title="variable">n</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tConst"><span class="id" title="constructor">EAst.tConst</span></a> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:80"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#i:79"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_args:77"><span class="id" title="variable">block_args</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tPrim"><span class="id" title="constructor">tPrim</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#p:82"><span class="id" title="variable">p</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tPrim"><span class="id" title="constructor">EAst.tPrim</span></a> (<a class="idref" href="MetaRocq.Erasure.EPrimitive.html#map_primIn"><span class="id" title="definition">map_primIn</span></a> <span class="id" title="var">p</span> (<span class="id" title="keyword">fun</span> <a id="x:108" class="idref" href="#x:108"><span class="id" title="binder">x</span></a> <a id="H:109" class="idref" href="#H:109"><span class="id" title="binder">H</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:108"><span class="id" title="variable">x</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tLazy"><span class="id" title="constructor">tLazy</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:84"><span class="id" title="variable">t</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tLazy"><span class="id" title="constructor">EAst.tLazy</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">t</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.tForce"><span class="id" title="constructor">tForce</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:86"><span class="id" title="variable">t</span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#tForce"><span class="id" title="constructor">EAst.tForce</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks:3"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">t</span>) }.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">setoid_rewrite</span> &lt;- (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="var">H</span>); <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:110" class="idref" href="#x:110"><span class="id" title="binder"><span id="x:111" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:110"><span class="id" title="variable">x</span></a>)) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:112" class="idref" href="#x:112"><span class="id" title="binder"><span id="x:113" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:112"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size_mkApps"><span class="id" title="lemma">size_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:114" class="idref" href="#x:114"><span class="id" title="binder"><span id="x:115" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:114"><span class="id" title="variable">x</span></a>)) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:116" class="idref" href="#x:116"><span class="id" title="binder"><span id="x:117" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:116"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size_mkApps"><span class="id" title="lemma">size_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size_mkApps_f"><span class="id" title="lemma">size_mkApps_f</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:118" class="idref" href="#x:118"><span class="id" title="binder"><span id="x:119" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:118"><span class="id" title="variable">x</span></a>)) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="keyword">fun</span> <a id="x:120" class="idref" href="#x:120"><span class="id" title="binder"><span id="x:121" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:120"><span class="id" title="variable">x</span></a>) <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EInduction.html#size_mkApps_l"><span class="id" title="lemma">size_mkApps_l</span></a> <span class="id" title="var">napp</span> <span class="id" title="var">nnil</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#snd"><span class="id" title="definition">snd</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#In_size"><span class="id" title="lemma">In_size</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Erasure.EInduction.html#size"><span class="id" title="definition">size</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EInduction.html#InPrim_size"><span class="id" title="lemma">InPrim_size</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks.Def"><span class="id" title="section">Def</span></a>.<br/>

<br/>
&nbsp;&nbsp;#[<span class="id" title="var">universes</span>(<span class="id" title="var">polymorphic</span>)]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Erasure.EPrimitive.html#map_primIn_spec"><span class="id" title="lemma">map_primIn_spec</span></a> @<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP_spec"><span class="id" title="lemma">map_InP_spec</span></a> : <span class="id" title="var">transform_blocks</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Arguments</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb"><span class="id" title="method">eqb</span></a> : <span class="id" title="tactic">simpl</span> <span class="id" title="var">never</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_unfold_clause_1"><span class="id" title="definition">transform_blocks_unfold_clause_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_unfold_clause_1"><span class="id" title="definition">isEtaExp_unfold_clause_1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="chop_firstn_skipn" class="idref" href="#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> {<a id="A:122" class="idref" href="#A:122"><span class="id" title="binder">A</span></a>} <a id="n:123" class="idref" href="#n:123"><span class="id" title="binder">n</span></a> (<a id="l:124" class="idref" href="#l:124"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#A:122"><span class="id" title="variable">A</span></a>) : <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:123"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:124"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:123"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:124"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:123"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:124"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHn</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_S"><span class="id" title="lemma">skipn_S</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="chop_eq" class="idref" href="#chop_eq"><span class="id" title="lemma">chop_eq</span></a> {<a id="A:125" class="idref" href="#A:125"><span class="id" title="binder">A</span></a>} <a id="n:126" class="idref" href="#n:126"><span class="id" title="binder">n</span></a> (<a id="l:127" class="idref" href="#l:127"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#A:125"><span class="id" title="variable">A</span></a>) <a id="l1:128" class="idref" href="#l1:128"><span class="id" title="binder">l1</span></a> <a id="l2:129" class="idref" href="#l2:129"><span class="id" title="binder">l2</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:126"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:127"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l1:128"><span class="id" title="variable">l1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l2:129"><span class="id" title="variable">l2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:127"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l1:128"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l2:129"><span class="id" title="variable">l2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a>. <span class="id" title="tactic">intros</span> [= &lt;- &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_skipn"><span class="id" title="lemma">firstn_skipn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="closed_transform_blocks" class="idref" href="#closed_transform_blocks"><span class="id" title="lemma">closed_transform_blocks</span></a> <a id="t:130" class="idref" href="#t:130"><span class="id" title="binder">t</span></a> <a id="k:131" class="idref" href="#k:131"><span class="id" title="binder">k</span></a> : <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:131"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:130"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:131"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:130"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">t</span>); <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>; <span class="id" title="tactic">rewrite</span> &lt;-?<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>; <span class="id" title="var">toAll</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaRocq.Utils.MRProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#test_def"><span class="id" title="definition">test_def</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closed</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closed</span></a>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="var">solve_all</span>]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">solve_all_k</span> 6.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">nargs</span> <span class="id" title="var">v</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop_map"><span class="id" title="lemma">chop_map</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_eq"><span class="id" title="lemma">chop_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span> <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_app"><span class="id" title="lemma">All_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ×. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Hint Rewrite</span> @<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_InP_spec"><span class="id" title="lemma">forallb_InP_spec</span></a> : <span class="id" title="var">isEtaExp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_unfold_clause_1"><span class="id" title="definition">isEtaExp_unfold_clause_1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Transparent</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_unfold_clause_1"><span class="id" title="definition">transform_blocks_unfold_clause_1</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Local Lemma</span> <a id="transform_blocks_mkApps" class="idref" href="#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> <a id="f:132" class="idref" href="#f:132"><span class="id" title="binder">f</span></a> <a id="v:133" class="idref" href="#v:133"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#isApp"><span class="id" title="definition">isApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:132"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:132"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#v:133"><span class="id" title="variable">v</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:132"><span class="id" title="variable">f</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_construct"><span class="id" title="constructor">view_construct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <span class="id" title="var">block_args</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">npars</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">nargs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:134" class="idref" href="#args:134"><span class="id" title="binder">args</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#v:133"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">MRList.chop</span></a> <span class="id" title="var">nargs</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:134"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">EAst.mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:134"><span class="id" title="variable">args</span></a>) <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:135" class="idref" href="#args:135"><span class="id" title="binder">args</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#v:133"><span class="id" title="variable">v</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <span class="id" title="var">ind</span> <span class="id" title="var">i</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:135"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">view_other</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:132"><span class="id" title="variable">f</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#v:133"><span class="id" title="variable">v</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">napp</span>; <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">vc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">hargs</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">n1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view"><span class="id" title="definition">TermSpineView.view</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view_mkApps"><span class="id" title="lemma">TermSpineView.view_mkApps</span></a> <span class="id" title="var">v'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">hf</span> [<span class="id" title="var">vn</span> <span class="id" title="var">eq</span>]] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">heq</span> /=. <span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">hargs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view"><span class="id" title="definition">TermSpineView.view</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view_mkApps"><span class="id" title="lemma">TermSpineView.view_mkApps</span></a> <span class="id" title="var">v'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">hf</span> [<span class="id" title="var">vn</span> <span class="id" title="var">eq</span>]] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> /=. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="var">heq</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span> <span class="id" title="var">eqn</span>:<span class="id" title="var">hargs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">v'</span> := <a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view"><span class="id" title="definition">TermSpineView.view</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.ESpineView.html#TermSpineView.view_mkApps"><span class="id" title="lemma">TermSpineView.view_mkApps</span></a> <span class="id" title="var">v'</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">hf</span> [<span class="id" title="var">vn</span> <span class="id" title="var">eq</span>]] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eq</span> /= <span class="id" title="var">vc</span> /=. <span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_decompose" class="idref" href="#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a> <a id="f:136" class="idref" href="#f:136"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:136"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> (<a id="fn:137" class="idref" href="#fn:137"><span class="id" title="binder">fn</span></a>, <a id="args:138" class="idref" href="#args:138"><span class="id" title="binder">args</span></a>) := <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:136"><span class="id" title="variable">f</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:137"><span class="id" title="variable">fn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_construct"><span class="id" title="constructor">view_construct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">npars</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">nargs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:139" class="idref" href="#args:139"><span class="id" title="binder">args</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:138"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">MRList.chop</span></a> <span class="id" title="var">nargs</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:139"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:139"><span class="id" title="variable">args</span></a>) <span class="id" title="var">rest</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:140" class="idref" href="#args:140"><span class="id" title="binder">args</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:138"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:140"><span class="id" title="variable">args</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">view_other</span></a> <span class="id" title="var">fn</span> <span class="id" title="var">nconstr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:137"><span class="id" title="variable">fn</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:138"><span class="id" title="variable">args</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_inv"><span class="id" title="lemma">decompose_app_inv</span></a> <span class="id" title="var">da</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_mkApps_eta" class="idref" href="#transform_blocks_mkApps_eta"><span class="id" title="lemma">transform_blocks_mkApps_eta</span></a> (<a id="P:141" class="idref" href="#P:141"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Prop</span>) <a id="fn:142" class="idref" href="#fn:142"><span class="id" title="binder">fn</span></a> <a id="args:143" class="idref" href="#args:143"><span class="id" title="binder">args</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#isApp"><span class="id" title="definition">EAst.isApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:142"><span class="id" title="variable">fn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:142"><span class="id" title="variable">fn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:143"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:142"><span class="id" title="variable">fn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_construct"><span class="id" title="constructor">view_construct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="var">block_args</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="pars:144" class="idref" href="#pars:144"><span class="id" title="binder">pars</span></a> <a id="nargs:145" class="idref" href="#nargs:145"><span class="id" title="binder">nargs</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#pars:144"><span class="id" title="variable">pars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#nargs:145"><span class="id" title="variable">nargs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cargs:146" class="idref" href="#cargs:146"><span class="id" title="binder">cargs</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:143"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">cargs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">MRList.chop</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#nargs:145"><span class="id" title="variable">nargs</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cargs:146"><span class="id" title="variable">cargs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:141"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cargs:146"><span class="id" title="variable">cargs</span></a>) <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">view_other</span></a> <span class="id" title="var">fn</span> <span class="id" title="var">nconstr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:141"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:142"><span class="id" title="variable">fn</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:143"><span class="id" title="variable">args</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:141"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:142"><span class="id" title="variable">fn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:143"><span class="id" title="variable">args</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">napp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps"><span class="id" title="lemma">isEtaExp_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">vc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> // /= <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="var">hargs</span> <span class="id" title="var">etaargs</span> <span class="id" title="var">bargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">block_args</span>; <span class="id" title="var">invs</span> <span class="id" title="var">bargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/(<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">intros</span> <span class="id" title="var">ht</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> // <span class="id" title="var">vc</span> //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_mkApps_eta_fn" class="idref" href="#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">transform_blocks_mkApps_eta_fn</span></a> <a id="f:147" class="idref" href="#f:147"><span class="id" title="binder">f</span></a> <a id="args:148" class="idref" href="#args:148"><span class="id" title="binder">args</span></a> : <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:147"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:148"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:147"><span class="id" title="variable">f</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:148"><span class="id" title="variable">args</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">f</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">df</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_inv"><span class="id" title="lemma">decompose_app_inv</span></a> <span class="id" title="var">df</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ef</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps"><span class="id" title="lemma">isEtaExp_mkApps</span></a>: <span class="id" title="var">ef</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">df</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">vc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">etanl</span> <span class="id" title="var">etal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">pars</span> <span class="id" title="var">args'</span>]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> // /= <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">etanl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> ⇒ <span class="id" title="var">hl'</span> <span class="id" title="var">hall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#firstn_map"><span class="id" title="lemma">firstn_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_app"><span class="id" title="lemma">firstn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_O"><span class="id" title="abbreviation">firstn_O</span></a> // <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#firstn_map"><span class="id" title="lemma">firstn_map</span></a> //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_app"><span class="id" title="lemma">skipn_app</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_0"><span class="id" title="lemma">skipn_0</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#skipn_map"><span class="id" title="lemma">skipn_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">etanl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="var">hl</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">etat</span> <span class="id" title="var">etal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="var">t</span> <span class="id" title="var">l</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">vc</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_csubst" class="idref" href="#transform_blocks_csubst"><span class="id" title="lemma">transform_blocks_csubst</span></a> <a id="a:149" class="idref" href="#a:149"><span class="id" title="binder">a</span></a> <a id="k:150" class="idref" href="#k:150"><span class="id" title="binder">k</span></a> <a id="b:151" class="idref" href="#b:151"><span class="id" title="binder">b</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closed"><span class="id" title="abbreviation">closed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:149"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:149"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b:151"><span class="id" title="variable">b</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">ECSubst.csubst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:149"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:150"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b:151"><span class="id" title="variable">b</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">ECSubst.csubst</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:149"><span class="id" title="variable">a</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:150"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b:151"><span class="id" title="variable">b</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cla</span> <span class="id" title="var">etaa</span>. <span class="id" title="tactic">move</span> <span class="id" title="var">b</span> <span class="id" title="tactic">at</span> <span class="id" title="var">bottom</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">b</span>); <span class="id" title="var">cbn</span>; <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span> <span class="id" title="var">isEtaExp</span>; <span class="id" title="tactic">rewrite</span> -?<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_equation_1"><span class="id" title="definition">isEtaExp_equation_1</span></a> -?<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>; <span class="id" title="var">toAll</span>; <span class="id" title="tactic">simpl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → ?<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>, ?<a class="idref" href="MetaRocq.Utils.MRProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a>, ?<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>, ?<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#test_def"><span class="id" title="definition">test_def</span></a> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closed</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#subst"><span class="id" title="definition">subst</span></a>; <span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closed</span></a>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="var">solve_all</span>]; <span class="id" title="tactic">try</span> <span class="id" title="var">easy</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.compare"><span class="id" title="definition">Nat.compare</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">b</span> ⇒ [] <span class="id" title="var">_</span> <span class="id" title="var">he</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst_mkApps"><span class="id" title="lemma">csubst_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">u</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">v</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="var">u</span> <span class="id" title="var">v</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;) <span class="id" title="keyword">as</span> →. { <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta"><span class="id" title="lemma">transform_blocks_mkApps_eta</span></a> (<span class="id" title="keyword">fun</span> <a id="x:152" class="idref" href="#x:152"><span class="id" title="binder"><span id="x:153" class="id">x</span></span></a> ⇒ <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">csubst</span></a> <span class="id" title="var">a</span> <span class="id" title="var">k</span> <span class="id" title="var">u</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">csubst</span></a> <span class="id" title="var">a</span> <span class="id" title="var">k</span>) <span class="id" title="var">v</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">csubst</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">a</span>) <span class="id" title="var">k</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#x:152"><span class="id" title="variable">x</span></a>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst_mkApps"><span class="id" title="lemma">csubst_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps_napp"><span class="id" title="lemma">isEtaExp_mkApps_napp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ⇒ //. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H1</span> <span class="id" title="var">into</span> <span class="id" title="var">etau</span>. <span class="id" title="tactic">rename</span> <span class="id" title="var">H2</span> <span class="id" title="var">into</span> <span class="id" title="var">etav</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - <span class="id" title="var">H</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">transform_blocks_mkApps_eta_fn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#etaExp_csubst"><span class="id" title="lemma">etaExp_csubst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">H1</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#etaExp_csubst"><span class="id" title="lemma">etaExp_csubst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> <span class="id" title="var">_</span> <span class="id" title="var">etaa</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst_mkApps"><span class="id" title="lemma">csubst_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">csubst</span></a> <span class="id" title="var">a</span> <span class="id" title="var">k</span>) <span class="id" title="var">v</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H1</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>. <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">etaapp</span> <span class="id" title="var">etav</span> <span class="id" title="var">bargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">block_args</span>; <span class="id" title="var">invs</span> <span class="id" title="var">bargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">etaapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">etaapp</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">nargs</span> <span class="id" title="var">v</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">heqc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#chop_map"><span class="id" title="lemma">chop_map</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst_mkApps"><span class="id" title="lemma">csubst_mkApps</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_eq"><span class="id" title="lemma">chop_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">heqc</span> <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H0</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">He1</span> <span class="id" title="var">He2</span> <span class="id" title="var">He3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_app"><span class="id" title="lemma">All_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">repeat</span> <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">assert</span> (<span class="id" title="var">H1</span> := <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#etaExp_csubst"><span class="id" title="lemma">etaExp_csubst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k</span> <span class="id" title="var">_</span> <span class="id" title="var">etaa</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst_mkApps"><span class="id" title="lemma">csubst_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#csubst"><span class="id" title="definition">csubst</span></a> <span class="id" title="var">a</span> <span class="id" title="var">k</span>) <span class="id" title="var">v</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">v</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> : <span class="id" title="var">H1</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>. <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">etaapp</span> <span class="id" title="var">etav</span> <span class="id" title="var">bargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive_pars"><span class="id" title="definition">lookup_inductive_pars</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">etaapp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">pars</span> <span class="id" title="var">args</span>]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">eqpars</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_substl" class="idref" href="#transform_blocks_substl"><span class="id" title="lemma">transform_blocks_substl</span></a> <a id="s:154" class="idref" href="#s:154"><span class="id" title="binder">s</span></a> <a id="t:155" class="idref" href="#t:155"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:155"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.ECSubst.html#substl"><span class="id" title="definition">substl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#s:154"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:155"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.ECSubst.html#substl"><span class="id" title="definition">substl</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#s:154"><span class="id" title="variable">s</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:155"><span class="id" title="variable">t</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">s</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">cla</span> <span class="id" title="var">cls</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">etaa</span> <span class="id" title="var">etas</span> <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHs</span> //. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#etaExp_csubst"><span class="id" title="lemma">etaExp_csubst</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_csubst"><span class="id" title="lemma">transform_blocks_csubst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_iota_red" class="idref" href="#transform_blocks_iota_red"><span class="id" title="lemma">transform_blocks_iota_red</span></a> <a id="pars:156" class="idref" href="#pars:156"><span class="id" title="binder">pars</span></a> <a id="args:157" class="idref" href="#args:157"><span class="id" title="binder">args</span></a> <a id="br:158" class="idref" href="#br:158"><span class="id" title="binder">br</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:157"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:157"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#br:158"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#iota_red"><span class="id" title="definition">EGlobalEnv.iota_red</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#pars:156"><span class="id" title="variable">pars</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:157"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#br:158"><span class="id" title="variable">br</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#iota_red"><span class="id" title="definition">EGlobalEnv.iota_red</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#pars:156"><span class="id" title="variable">pars</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:157"><span class="id" title="variable">args</span></a>) (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#br:158"><span class="id" title="variable">br</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cl</span> <span class="id" title="var">etaargs</span> <span class="id" title="var">etabr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#iota_red"><span class="id" title="definition">EGlobalEnv.iota_red</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_substl"><span class="id" title="lemma">transform_blocks_substl</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_skipn"><span class="id" title="lemma">forallb_skipn</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_skipn"><span class="id" title="lemma">forallb_skipn</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_skipn"><span class="id" title="lemma">map_skipn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_fix_subst" class="idref" href="#transform_blocks_fix_subst"><span class="id" title="lemma">transform_blocks_fix_subst</span></a> <a id="mfix:159" class="idref" href="#mfix:159"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#fix_subst"><span class="id" title="definition">EGlobalEnv.fix_subst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:159"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#fix_subst"><span class="id" title="definition">EGlobalEnv.fix_subst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:159"><span class="id" title="variable">mfix</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#fix_subst"><span class="id" title="definition">EGlobalEnv.fix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_cofix_subst" class="idref" href="#transform_blocks_cofix_subst"><span class="id" title="lemma">transform_blocks_cofix_subst</span></a> <a id="mfix:160" class="idref" href="#mfix:160"><span class="id" title="binder">mfix</span></a> : <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cofix_subst"><span class="id" title="definition">EGlobalEnv.cofix_subst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:160"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cofix_subst"><span class="id" title="definition">EGlobalEnv.cofix_subst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:160"><span class="id" title="variable">mfix</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cofix_subst"><span class="id" title="definition">EGlobalEnv.cofix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_cunfold_fix" class="idref" href="#transform_blocks_cunfold_fix"><span class="id" title="lemma">transform_blocks_cunfold_fix</span></a> <a id="mfix:161" class="idref" href="#mfix:161"><span class="id" title="binder">mfix</span></a> <a id="idx:162" class="idref" href="#idx:162"><span class="id" title="binder">idx</span></a> <a id="n:163" class="idref" href="#n:163"><span class="id" title="binder">n</span></a> <a id="f:164" class="idref" href="#f:164"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#fix_subst"><span class="id" title="definition">fix_subst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:161"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<span class="id" title="keyword">fun</span> <a id="d:165" class="idref" href="#d:165"><span class="id" title="binder">d</span></a> ⇒  <a class="idref" href="MetaRocq.Erasure.EAst.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:165"><span class="id" title="variable">d</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:165"><span class="id" title="variable">d</span></a>)) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:161"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_fix"><span class="id" title="definition">cunfold_fix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:161"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:162"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:163"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:164"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_fix"><span class="id" title="definition">cunfold_fix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:161"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:162"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:163"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:164"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hfix</span> <span class="id" title="var">heta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_fix"><span class="id" title="definition">cunfold_fix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;- &lt;-] ⇒ /=. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_substl"><span class="id" title="lemma">transform_blocks_substl</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_fix_subst"><span class="id" title="lemma">isEtaExp_fix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">heta</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">heta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_fix_subst"><span class="id" title="lemma">transform_blocks_fix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_cunfold_cofix" class="idref" href="#transform_blocks_cunfold_cofix"><span class="id" title="lemma">transform_blocks_cunfold_cofix</span></a> <a id="mfix:166" class="idref" href="#mfix:166"><span class="id" title="binder">mfix</span></a> <a id="idx:167" class="idref" href="#idx:167"><span class="id" title="binder">idx</span></a> <a id="n:168" class="idref" href="#n:168"><span class="id" title="binder">n</span></a> <a id="f:169" class="idref" href="#f:169"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.ELiftSubst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cofix_subst"><span class="id" title="definition">cofix_subst</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:166"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e6ed1b21a7d22bc6ab9a29a926de5bef"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#dbody"><span class="id" title="projection">dbody</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:166"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_cofix"><span class="id" title="definition">cunfold_cofix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:166"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:167"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:168"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:169"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_cofix"><span class="id" title="definition">cunfold_cofix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mfix:166"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idx:167"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:168"><span class="id" title="variable">n</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:169"><span class="id" title="variable">f</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hcofix</span> <span class="id" title="var">heta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#cunfold_cofix"><span class="id" title="definition">cunfold_cofix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= &lt;- &lt;-] ⇒ /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_substl"><span class="id" title="lemma">transform_blocks_substl</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_cofix_subst"><span class="id" title="lemma">isEtaExp_cofix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">heta</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_cofix_subst"><span class="id" title="lemma">transform_blocks_cofix_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_nth" class="idref" href="#transform_blocks_nth"><span class="id" title="lemma">transform_blocks_nth</span></a> {<a id="n:170" class="idref" href="#n:170"><span class="id" title="binder">n</span></a> <a id="l:171" class="idref" href="#l:171"><span class="id" title="binder">l</span></a> <a id="d:172" class="idref" href="#d:172"><span class="id" title="binder">d</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:170"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:171"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:172"><span class="id" title="variable">d</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:170"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:171"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:172"><span class="id" title="variable">d</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span> <span class="id" title="keyword">using</span> <span class="id" title="keyword">Type</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="switch_constructor_as_block" class="idref" href="#switch_constructor_as_block"><span class="id" title="definition">switch_constructor_as_block</span></a> <a id="fl:173" class="idref" href="#fl:173"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#Build_WcbvFlags"><span class="id" title="constructor">EWcbvEval.Build_WcbvFlags</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fl:173"><span class="id" title="variable">fl</span></a>.(@<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_prop_case"><span class="id" title="method">with_prop_case</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fl:173"><span class="id" title="variable">fl</span></a>.(@<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_guarded_fix"><span class="id" title="method">with_guarded_fix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="section">transform_blocks</span></a>.<br/>

<br/>
#[<span class="id" title="var">universes</span>(<span class="id" title="var">polymorphic</span>)]<br/>
<span class="id" title="keyword">Global</span> <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Rewrite</span> @<a class="idref" href="MetaRocq.Erasure.EPrimitive.html#map_primIn_spec"><span class="id" title="lemma">map_primIn_spec</span></a> @<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP_spec"><span class="id" title="lemma">map_InP_spec</span></a> : <span class="id" title="var">transform_blocks</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="transform_blocks_constant_decl" class="idref" href="#transform_blocks_constant_decl"><span class="id" title="definition">transform_blocks_constant_decl</span></a> <a id="f058463ac94c66c241345aec4af19ada" class="idref" href="#f058463ac94c66c241345aec4af19ada"><span class="id" title="binder">Σ</span></a> <a id="cb:175" class="idref" href="#cb:175"><span class="id" title="binder">cb</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.EAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f058463ac94c66c241345aec4af19ada"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cb:175"><span class="id" title="variable">cb</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#cst_body"><span class="id" title="projection">cst_body</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="transform_blocks_decl" class="idref" href="#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a id="12b563e13a9f6a0b9ec6f713dd653f25" class="idref" href="#12b563e13a9f6a0b9ec6f713dd653f25"><span class="id" title="binder">Σ</span></a> <a id="d:177" class="idref" href="#d:177"><span class="id" title="binder">d</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:177"><span class="id" title="variable">d</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> <span class="id" title="var">cb</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#ConstantDecl"><span class="id" title="constructor">ConstantDecl</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_constant_decl"><span class="id" title="definition">transform_blocks_constant_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#12b563e13a9f6a0b9ec6f713dd653f25"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">cb</span>)<br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">idecl</span> ⇒ <a class="idref" href="MetaRocq.Erasure.EAst.html#InductiveDecl"><span class="id" title="constructor">InductiveDecl</span></a> <span class="id" title="var">idecl</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="transform_blocks_env" class="idref" href="#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a id="1e1aaa9c2472685a6034e69f58121c1e" class="idref" href="#1e1aaa9c2472685a6034e69f58121c1e"><span class="id" title="binder">Σ</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1e1aaa9c2472685a6034e69f58121c1e"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1e1aaa9c2472685a6034e69f58121c1e"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.global_decls"><span class="id" title="projection">GlobalContextMap.global_decls</span></a>).<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="transform_blocks_program" class="idref" href="#transform_blocks_program"><span class="id" title="definition">transform_blocks_program</span></a> (<a id="p:180" class="idref" href="#p:180"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Erasure.EProgram.html#eprogram_env"><span class="id" title="definition">eprogram_env</span></a>) :=<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#p:180"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#p:180"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#p:180"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="switch_cstr_as_blocks" class="idref" href="#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> (<a id="fl:181" class="idref" href="#fl:181"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_axioms"><span class="id" title="method">has_axioms</span></a> := <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_axioms"><span class="id" title="method">has_axioms</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> := <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#term_switches"><span class="id" title="method">term_switches</span></a> := <a class="idref" href="MetaRocq.Erasure.EWellformed.html#term_switches"><span class="id" title="method">term_switches</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="block_wcbv_flags" class="idref" href="#block_wcbv_flags"><span class="id" title="definition">block_wcbv_flags</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_prop_case"><span class="id" title="method">with_prop_case</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ; <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_guarded_fix"><span class="id" title="method">with_guarded_fix</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> ; <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Local Hint Resolve</span> <span class="id" title="var">wellformed_closed</span> : <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wellformed_lookup_inductive_pars" class="idref" href="#wellformed_lookup_inductive_pars"><span class="id" title="lemma">wellformed_lookup_inductive_pars</span></a> {<a id="efl:182" class="idref" href="#efl:182"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} <a id="15ce385211aa9e5e6049ba8e2de3ccb2" class="idref" href="#15ce385211aa9e5e6049ba8e2de3ccb2"><span class="id" title="binder">Σ</span></a> <a id="kn:184" class="idref" href="#kn:184"><span class="id" title="binder">kn</span></a> <a id="mdecl:185" class="idref" href="#mdecl:185"><span class="id" title="binder">mdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#15ce385211aa9e5e6049ba8e2de3ccb2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#15ce385211aa9e5e6049ba8e2de3ccb2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:184"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:185"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:185"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> ⇒ [|].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> ⇒ //. <span class="id" title="tactic">intros</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_minductive"><span class="id" title="definition">wf_minductive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hasp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_eq"><span class="id" title="lemma">eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHwf_glob</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wellformed_lookup_constructor_pars" class="idref" href="#wellformed_lookup_constructor_pars"><span class="id" title="lemma">wellformed_lookup_constructor_pars</span></a> {<a id="efl:186" class="idref" href="#efl:186"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="13ce99c998910778525c07f31a0be534" class="idref" href="#13ce99c998910778525c07f31a0be534"><span class="id" title="binder">Σ</span></a> <a id="kn:188" class="idref" href="#kn:188"><span class="id" title="binder">kn</span></a> <a id="c:189" class="idref" href="#c:189"><span class="id" title="binder">c</span></a> <a id="mdecl:190" class="idref" href="#mdecl:190"><span class="id" title="binder">mdecl</span></a> <a id="idecl:191" class="idref" href="#idecl:191"><span class="id" title="binder">idecl</span></a> <a id="cdecl:192" class="idref" href="#cdecl:192"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#13ce99c998910778525c07f31a0be534"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#13ce99c998910778525c07f31a0be534"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:188"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:189"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:190"><span class="id" title="variable">mdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idecl:191"><span class="id" title="variable">idecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:192"><span class="id" title="variable">cdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:190"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span> <span class="id" title="keyword">wf</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_inductive_pars"><span class="id" title="lemma">wellformed_lookup_inductive_pars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span> ⇒ //. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_constructor_pars_args_spec" class="idref" href="#lookup_constructor_pars_args_spec"><span class="id" title="lemma">lookup_constructor_pars_args_spec</span></a> {<a id="efl:193" class="idref" href="#efl:193"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="32f6d9a9f81b36f8e6632cecdda03ddf" class="idref" href="#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="binder">Σ</span></a> <a id="ind:195" class="idref" href="#ind:195"><span class="id" title="binder">ind</span></a> <a id="n:196" class="idref" href="#n:196"><span class="id" title="binder">n</span></a> <a id="mdecl:197" class="idref" href="#mdecl:197"><span class="id" title="binder">mdecl</span></a> <a id="idecl:198" class="idref" href="#idecl:198"><span class="id" title="binder">idecl</span></a> <a id="cdecl:199" class="idref" href="#cdecl:199"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:195"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:196"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:197"><span class="id" title="variable">mdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idecl:198"><span class="id" title="variable">idecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:199"><span class="id" title="variable">cdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#32f6d9a9f81b36f8e6632cecdda03ddf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:195"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:196"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:197"><span class="id" title="variable">mdecl</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:199"><span class="id" title="variable">cdecl</span></a>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_nargs"><span class="id" title="projection">cstr_nargs</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>] ⇒ <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">mdecl'</span> <span class="id" title="var">idecl'</span>] [<span class="id" title="var">pars</span> <span class="id" title="var">args</span>]]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [= → → &lt;-]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wellformed_lookup_constructor_pars_args" class="idref" href="#wellformed_lookup_constructor_pars_args"><span class="id" title="lemma">wellformed_lookup_constructor_pars_args</span></a> {<a id="efl:200" class="idref" href="#efl:200"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="04b30a0dfd81ed0f4796958cc8a58857" class="idref" href="#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="binder">Σ</span></a> <a id="ind:202" class="idref" href="#ind:202"><span class="id" title="binder">ind</span></a> <a id="k:203" class="idref" href="#k:203"><span class="id" title="binder">k</span></a> <a id="n:204" class="idref" href="#n:204"><span class="id" title="binder">n</span></a> <a id="block_args:205" class="idref" href="#block_args:205"><span class="id" title="binder">block_args</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:203"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">EAst.tConstruct</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:202"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:204"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_args:205"><span class="id" title="variable">block_args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="args:206" class="idref" href="#args:206"><span class="id" title="binder">args</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#04b30a0dfd81ed0f4796958cc8a58857"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:202"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:204"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:206"><span class="id" title="variable">args</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">hasp</span> <span class="id" title="keyword">wf</span>. <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span>] <span class="id" title="var">cdecl</span>]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">cdecl</span>.(<a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_nargs"><span class="id" title="projection">cstr_nargs</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_constructor_pars"><span class="id" title="lemma">wellformed_lookup_constructor_pars</span></a> <span class="id" title="var">hasp</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">hl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_pars_args_spec"><span class="id" title="lemma">lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span> ⇒ //. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tConstruct"><span class="id" title="method">has_tConstruct</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="constructor_isprop_pars_decl_params" class="idref" href="#constructor_isprop_pars_decl_params"><span class="id" title="lemma">constructor_isprop_pars_decl_params</span></a> {<a id="efl:207" class="idref" href="#efl:207"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="6de8d10d47b483c72089211e79fa533d" class="idref" href="#6de8d10d47b483c72089211e79fa533d"><span class="id" title="binder">Σ</span></a> <a id="ind:209" class="idref" href="#ind:209"><span class="id" title="binder">ind</span></a> <a id="c:210" class="idref" href="#c:210"><span class="id" title="binder">c</span></a> <a id="b:211" class="idref" href="#b:211"><span class="id" title="binder">b</span></a> <a id="pars:212" class="idref" href="#pars:212"><span class="id" title="binder">pars</span></a> <a id="cdecl:213" class="idref" href="#cdecl:213"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#6de8d10d47b483c72089211e79fa533d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#constructor_isprop_pars_decl"><span class="id" title="definition">constructor_isprop_pars_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#6de8d10d47b483c72089211e79fa533d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:209"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:210"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b:211"><span class="id" title="variable">b</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#pars:212"><span class="id" title="variable">pars</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:213"><span class="id" title="variable">cdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#pars:212"><span class="id" title="variable">pars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span> <span class="id" title="var">hwf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#constructor_isprop_pars_decl"><span class="id" title="definition">constructor_isprop_pars_decl</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span>|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ /= //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_inductive_pars"><span class="id" title="lemma">wellformed_lookup_inductive_pars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span> ⇒ //. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="skipn_ge" class="idref" href="#skipn_ge"><span class="id" title="lemma">skipn_ge</span></a> <a id="m:214" class="idref" href="#m:214"><span class="id" title="binder">m</span></a> {<a id="A:215" class="idref" href="#A:215"><span class="id" title="binder">A</span></a>} (<a id="l:216" class="idref" href="#l:216"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#A:215"><span class="id" title="variable">A</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#m:214"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:216"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#m:214"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:216"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">m</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">m</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="chop_all" class="idref" href="#chop_all"><span class="id" title="lemma">chop_all</span></a> {<a id="A:217" class="idref" href="#A:217"><span class="id" title="binder">A</span></a>} (<a id="l:218" class="idref" href="#l:218"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#A:217"><span class="id" title="variable">A</span></a>) <a id="m:219" class="idref" href="#m:219"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#m:219"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#length"><span class="id" title="definition">length</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:218"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#m:219"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:218"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:218"><span class="id" title="variable">l</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#firstn_ge"><span class="id" title="lemma">firstn_ge</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#skipn_ge"><span class="id" title="lemma">skipn_ge</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_tApp" class="idref" href="#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a> (<a id="efl:220" class="idref" href="#efl:220"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>) {<a id="a64a867eb3871e7528f7f78d097b24f0" class="idref" href="#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="t:222" class="idref" href="#t:222"><span class="id" title="binder">t</span></a> <a id="a:223" class="idref" href="#a:223"><span class="id" title="binder">a</span></a> (<a id="P:224" class="idref" href="#P:224"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Set</span>) <a id="k:225" class="idref" href="#k:225"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#k:225"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">let</span> (<a id="fn:226" class="idref" href="#fn:226"><span class="id" title="binder">fn</span></a>, <a id="args:227" class="idref" href="#args:227"><span class="id" title="binder">args</span></a>) := <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fn:226"><span class="id" title="variable">fn</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_construct"><span class="id" title="constructor">view_construct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="var">block_args</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args"><span class="id" title="definition">GlobalContextMap.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>0<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">nargs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cargs:228" class="idref" href="#cargs:228"><span class="id" title="binder">cargs</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:227"><span class="id" title="variable">args</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">cargs</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">rest</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">MRList.chop</span></a> <span class="id" title="var">nargs</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cargs:228"><span class="id" title="variable">cargs</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:227"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;&gt;'_x"><span class="id" title="notation">≠</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <span class="id" title="var">block_args</span>) (<a class="idref" href="MetaRocq.Utils.MRList.html#remove_last"><span class="id" title="definition">remove_last</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:227"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:227"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:224"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <span class="id" title="var">kn</span> <span class="id" title="var">c</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cargs:228"><span class="id" title="variable">cargs</span></a>) <span class="id" title="var">rest</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#True"><span class="id" title="inductive">True</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;| <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#view_other"><span class="id" title="constructor">view_other</span></a> <span class="id" title="var">fn</span> <span class="id" title="var">nconstr</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:224"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:222"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#P:224"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a64a867eb3871e7528f7f78d097b24f0"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:222"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:223"><span class="id" title="variable">a</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">haspars</span> <span class="id" title="var">wfΣ</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decompose"><span class="id" title="lemma">transform_blocks_decompose</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t</span> <span class="id" title="var">a</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EInduction.html#decompose_app_app"><span class="id" title="lemma">EInduction.decompose_app_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">vc</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#decompose_app_tApp_split"><span class="id" title="lemma">EEtaExpandedFix.decompose_app_tApp_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="keyword">wf</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[]. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>⇒ [<span class="id" title="var">haapp</span>]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> // ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">wfc</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wft</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_constructor_pars_args"><span class="id" title="lemma">wellformed_lookup_constructor_pars_args</span></a> <span class="id" title="var">wfΣ</span> <span class="id" title="var">haspars</span> <span class="id" title="var">wfc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;+ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Erasure.EInduction.html#decompose_app_app"><span class="id" title="lemma">EInduction.decompose_app_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpandedFix.html#decompose_app_tApp_split"><span class="id" title="lemma">EEtaExpandedFix.decompose_app_tApp_split</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Ha</span> <span class="id" title="var">Ht</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">Ha</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> // <span class="id" title="var">vc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {3} (<a class="idref" href="MetaRocq.Utils.MRList.html#remove_last_last"><span class="id" title="lemma">remove_last_last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">a</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_mkApps_Construct_inv" class="idref" href="#eval_mkApps_Construct_inv"><span class="id" title="lemma">eval_mkApps_Construct_inv</span></a> {<a id="fl:229" class="idref" href="#fl:229"><span class="id" title="binder">fl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#WcbvFlags"><span class="id" title="class">WcbvFlags</span></a>} <a id="93db78aaebd8fd38e5903ba9b7df17c8" class="idref" href="#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="binder">Σ</span></a> <a id="kn:231" class="idref" href="#kn:231"><span class="id" title="binder">kn</span></a> <a id="c:232" class="idref" href="#c:232"><span class="id" title="binder">c</span></a> <a id="args:233" class="idref" href="#args:233"><span class="id" title="binder">args</span></a> <a id="e:234" class="idref" href="#e:234"><span class="id" title="binder">e</span></a> <a id="block_args:235" class="idref" href="#block_args:235"><span class="id" title="binder">block_args</span></a> <a id="mdecl:236" class="idref" href="#mdecl:236"><span class="id" title="binder">mdecl</span></a> <a id="idecl:237" class="idref" href="#idecl:237"><span class="id" title="binder">idecl</span></a> <a id="cdecl:238" class="idref" href="#cdecl:238"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:231"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:232"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:236"><span class="id" title="variable">mdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#idecl:237"><span class="id" title="variable">idecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:238"><span class="id" title="variable">cdecl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:231"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:232"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_args:235"><span class="id" title="variable">block_args</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:233"><span class="id" title="variable">args</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e:234"><span class="id" title="variable">e</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="args':239" class="idref" href="#args':239"><span class="id" title="binder">args'</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e:234"><span class="id" title="variable">e</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tConstruct"><span class="id" title="constructor">tConstruct</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:231"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:232"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args':239"><span class="id" title="variable">args'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#93db78aaebd8fd38e5903ba9b7df17c8"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:233"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args':239"><span class="id" title="variable">args'</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_args:235"><span class="id" title="variable">block_args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#args:233"><span class="id" title="variable">args</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#mdecl:236"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cdecl:238"><span class="id" title="variable">cdecl</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hblock</span> <span class="id" title="var">hlook</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ev</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">ev</span>. <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">∃</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>⇒ //. <span class="id" title="var">invs</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">block_args</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H0</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ev</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">ev</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">IHargs</span> <span class="id" title="var">_</span> <span class="id" title="var">ev1</span>) <span class="id" title="keyword">as</span> [? []]. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHargs</span> <span class="id" title="var">_</span> <span class="id" title="var">ev1</span>) <span class="id" title="keyword">as</span> [? []]; <span class="id" title="tactic">try</span> <span class="id" title="var">solve_discr</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">∃</span> (<span class="id" title="var">x0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">a'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> /= //. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_app"><span class="id" title="lemma">All2_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e1</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hlook</span>; <span class="id" title="var">invs</span> <span class="id" title="var">hlook</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">subst</span> <span class="id" title="var">f'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_isConstructApp" class="idref" href="#transform_blocks_isConstructApp"><span class="id" title="lemma">transform_blocks_isConstructApp</span></a> {<a id="efl:240" class="idref" href="#efl:240"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="fc8ad4f2c9645b87ad5bd2985675ad97" class="idref" href="#fc8ad4f2c9645b87ad5bd2985675ad97"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="t:242" class="idref" href="#t:242"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fc8ad4f2c9645b87ad5bd2985675ad97"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fc8ad4f2c9645b87ad5bd2985675ad97"><span class="id" title="variable">Σ</span></a> 0 <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:242"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp"><span class="id" title="definition">isConstructApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fc8ad4f2c9645b87ad5bd2985675ad97"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:242"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp"><span class="id" title="definition">isConstructApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:242"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">haspars</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [ [[]] | ]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a>. <span class="id" title="tactic">intros</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="var">t1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwf'</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_isPrimApp" class="idref" href="#transform_blocks_isPrimApp"><span class="id" title="lemma">transform_blocks_isPrimApp</span></a> {<a id="efl:243" class="idref" href="#efl:243"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="2a5ac0b53e33ae97eae64b5a870ce766" class="idref" href="#2a5ac0b53e33ae97eae64b5a870ce766"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="t:245" class="idref" href="#t:245"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#2a5ac0b53e33ae97eae64b5a870ce766"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#2a5ac0b53e33ae97eae64b5a870ce766"><span class="id" title="variable">Σ</span></a> 0 <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:245"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isPrimApp"><span class="id" title="definition">isPrimApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#2a5ac0b53e33ae97eae64b5a870ce766"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:245"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isPrimApp"><span class="id" title="definition">isPrimApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:245"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">haspars</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [ [[]] | ]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a>. <span class="id" title="tactic">intros</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isPrimApp_mkApps"><span class="id" title="lemma">isPrimApp_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="var">t1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isPrimApp_mkApps"><span class="id" title="lemma">isPrimApp_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwf'</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_isLazyApp" class="idref" href="#transform_blocks_isLazyApp"><span class="id" title="lemma">transform_blocks_isLazyApp</span></a> {<a id="efl:246" class="idref" href="#efl:246"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="45ad452e18d5a81c71fd6fb580d7a22c" class="idref" href="#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="t:248" class="idref" href="#t:248"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="variable">Σ</span></a> 0 <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:248"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isLazyApp"><span class="id" title="definition">isLazyApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#45ad452e18d5a81c71fd6fb580d7a22c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:248"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isLazyApp"><span class="id" title="definition">isLazyApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:248"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">haspars</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hwf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [ [[]] | ]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a>. <span class="id" title="tactic">intros</span> (? &amp; ? &amp; ?). <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isLazyApp_mkApps"><span class="id" title="lemma">isLazyApp_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <span class="id" title="var">t1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span>)) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isLazyApp_mkApps"><span class="id" title="lemma">isLazyApp_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hwf'</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">intuition</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_env_transform_blocks" class="idref" href="#lookup_env_transform_blocks"><span class="id" title="lemma">lookup_env_transform_blocks</span></a> {<a id="147419d37c9ad39321d8c49e14219600" class="idref" href="#147419d37c9ad39321d8c49e14219600"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="kn:250" class="idref" href="#kn:250"><span class="id" title="binder">kn</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#147419d37c9ad39321d8c49e14219600"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:250"><span class="id" title="variable">kn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#147419d37c9ad39321d8c49e14219600"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#147419d37c9ad39321d8c49e14219600"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#kn:250"><span class="id" title="variable">kn</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Σ</span> ? ? ?]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span> <span class="id" title="tactic">at</span> 2 4; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_declared_constant" class="idref" href="#transform_blocks_declared_constant"><span class="id" title="lemma">transform_blocks_declared_constant</span></a> {<a id="0b14b55db9d97ac76093678c3c588e71" class="idref" href="#0b14b55db9d97ac76093678c3c588e71"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="c:252" class="idref" href="#c:252"><span class="id" title="binder">c</span></a> <a id="decl:253" class="idref" href="#decl:253"><span class="id" title="binder">decl</span></a> :<br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#declared_constant"><span class="id" title="definition">declared_constant</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#0b14b55db9d97ac76093678c3c588e71"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:252"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#decl:253"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#declared_constant"><span class="id" title="definition">declared_constant</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#0b14b55db9d97ac76093678c3c588e71"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:252"><span class="id" title="variable">c</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_constant_decl"><span class="id" title="definition">transform_blocks_constant_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#0b14b55db9d97ac76093678c3c588e71"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#decl:253"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">red</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_env_transform_blocks"><span class="id" title="lemma">lookup_env_transform_blocks</span></a> <span class="id" title="var">H</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_inductive_transform_blocks" class="idref" href="#lookup_inductive_transform_blocks"><span class="id" title="lemma">lookup_inductive_transform_blocks</span></a> <a id="502932cb5c683f7d8457df62e646fd3a" class="idref" href="#502932cb5c683f7d8457df62e646fd3a"><span class="id" title="binder">Σ</span></a> <a id="ind:255" class="idref" href="#ind:255"><span class="id" title="binder">ind</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#502932cb5c683f7d8457df62e646fd3a"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:255"><span class="id" title="variable">ind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#502932cb5c683f7d8457df62e646fd3a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:255"><span class="id" title="variable">ind</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_env_transform_blocks"><span class="id" title="lemma">lookup_env_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="keyword">as</span> [ [] | ]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_constructor_transform_blocks" class="idref" href="#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a> <a id="2439574c47c02230f59bb2b62f3425e4" class="idref" href="#2439574c47c02230f59bb2b62f3425e4"><span class="id" title="binder">Σ</span></a> <a id="ind:257" class="idref" href="#ind:257"><span class="id" title="binder">ind</span></a> <a id="c:258" class="idref" href="#c:258"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#2439574c47c02230f59bb2b62f3425e4"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:257"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:258"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#2439574c47c02230f59bb2b62f3425e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#ind:257"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:258"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_env_transform_blocks"><span class="id" title="lemma">lookup_env_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="keyword">as</span> [ [] | ]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isLambda_transform_blocks" class="idref" href="#isLambda_transform_blocks"><span class="id" title="lemma">isLambda_transform_blocks</span></a> <a id="94d0c84ed07cc9827b73907d01f025a5" class="idref" href="#94d0c84ed07cc9827b73907d01f025a5"><span class="id" title="binder">Σ</span></a> <a id="c:260" class="idref" href="#c:260"><span class="id" title="binder">c</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#isLambda"><span class="id" title="definition">isLambda</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:260"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#isLambda"><span class="id" title="definition">isLambda</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#94d0c84ed07cc9827b73907d01f025a5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c:260"><span class="id" title="variable">c</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_wellformed" class="idref" href="#transform_wellformed"><span class="id" title="lemma">transform_wellformed</span></a> {<a id="efl:261" class="idref" href="#efl:261"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="48a43f736daee0cd5111b893d90ae5d3" class="idref" href="#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="n:263" class="idref" href="#n:263"><span class="id" title="binder">n</span></a> <a id="t:264" class="idref" href="#t:264"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:261"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:263"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:264"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:264"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:261"><span class="id" title="variable">efl</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:263"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#48a43f736daee0cd5111b893d90ae5d3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:264"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span> <span class="id" title="var">cstrbl</span> <span class="id" title="var">hasa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">move</span> <span class="id" title="var">t</span> <span class="id" title="keyword">after</span> <span class="id" title="var">hasa</span>. <span class="id" title="tactic">move</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">after</span> <span class="id" title="var">hasa</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t</span>); <span class="id" title="var">simp_eta</span>; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constant"><span class="id" title="definition">lookup_constant</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args"><span class="id" title="definition">GlobalContextMap.lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a>]; <span class="id" title="tactic">intros</span> <span class="id" title="var">m</span> <span class="id" title="var">Hwf</span> <span class="id" title="var">Hw</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP_spec"><span class="id" title="lemma">map_InP_spec</span></a>; <span class="id" title="var">toAll</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constant"><span class="id" title="definition">lookup_constant</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_env_transform_blocks"><span class="id" title="lemma">lookup_env_transform_blocks</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> ⇒ //=; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#cst_body"><span class="id" title="projection">cst_body</span></a> <span class="id" title="var">c</span>) ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstrbl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="keyword">as</span> [[[]] | ]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="var">cbn</span> - [<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstrbl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[] ?]|]=&gt; //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">len</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_brs"><span class="id" title="definition">wf_brs</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_inductive_transform_blocks"><span class="id" title="lemma">lookup_inductive_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#isLambda_transform_blocks"><span class="id" title="lemma">isLambda_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a>] <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">len</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">solve_all_k</span> 7.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> |- × ⇒ //. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps"><span class="id" title="lemma">isEtaExp_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a>. <span class="id" title="tactic">try</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqcall</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> |- × ⇒ //. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> ] <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstrbl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>] <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">invs</span> <span class="id" title="var">Heq</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ec</span>. <span class="id" title="var">invs</span> <span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_firstn"><span class="id" title="lemma">length_firstn</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">m0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="keyword">as</span> [ [] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#lookup_env_wellformed"><span class="id" title="lemma">lookup_env_wellformed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_minductive"><span class="id" title="definition">wf_minductive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">E'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">hasp</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.eqb_eq"><span class="id" title="lemma">Nat.eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a>; <span class="id" title="var">invs</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a>; <span class="id" title="var">invs</span> <span class="id" title="var">H10</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ec</span>. <span class="id" title="var">invs</span> <span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_firstn"><span class="id" title="lemma">All_firstn</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ec</span>. <span class="id" title="var">invs</span> <span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_skipn"><span class="id" title="lemma">All_skipn</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="keyword">as</span> [[] | ]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">Hw</span> ⇒ [<span class="id" title="keyword">wf</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="keyword">wf</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hw</span> ⇒ //. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps"><span class="id" title="lemma">isEtaExp_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_wellformed_decl" class="idref" href="#transform_wellformed_decl"><span class="id" title="lemma">transform_wellformed_decl</span></a> {<a id="efl:265" class="idref" href="#efl:265"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="5d61b44cf28aef9a9aecc422be7f8514" class="idref" href="#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} <a id="d:267" class="idref" href="#d:267"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_global_decl"><span class="id" title="definition">wf_global_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:265"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:267"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_decl"><span class="id" title="definition">isEtaExp_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:267"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_global_decl"><span class="id" title="definition">wf_global_decl</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:265"><span class="id" title="variable">efl</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#5d61b44cf28aef9a9aecc422be7f8514"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d:267"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wfd</span> <span class="id" title="var">etad</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> ⇒ //=. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [[]] ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_wellformed"><span class="id" title="lemma">transform_wellformed</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EGenericMapEnv.html#"><span class="id" title="library">EGenericMapEnv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_extends" class="idref" href="#transform_blocks_extends"><span class="id" title="lemma">transform_blocks_extends</span></a> {<a id="efl:268" class="idref" href="#efl:268"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="c5eb81f3d74238e2cfc5fd1e6cd758cd" class="idref" href="#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>) (<a id="t:270" class="idref" href="#t:270"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#term"><span class="id" title="inductive">term</span></a>) (<a id="n:271" class="idref" href="#n:271"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#n:271"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:270"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="aa37fc0f7cc60af7392db1205953ebcf" class="idref" href="#aa37fc0f7cc60af7392db1205953ebcf"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">extends</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#aa37fc0f7cc60af7392db1205953ebcf"><span class="id" title="variable">Σ'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#aa37fc0f7cc60af7392db1205953ebcf"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#c5eb81f3d74238e2cfc5fd1e6cd758cd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:270"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#aa37fc0f7cc60af7392db1205953ebcf"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:270"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasapp</span> <span class="id" title="var">Σ</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Opaque</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">funelim</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">t</span>); <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constant"><span class="id" title="definition">lookup_constant</span></a> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_projection"><span class="id" title="definition">lookup_projection</span></a>]; <span class="id" title="tactic">intros</span> ⇒ //; <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>; <span class="id" title="tactic">rewrite</span> -?<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_InP_spec"><span class="id" title="lemma">map_InP_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="var">toAll</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">rtoProp</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ⇒ //. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">try</span> <span class="id" title="tactic">clear</span> <span class="id" title="var">Heqcall</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ⇒ //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>]. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">E'</span>; <span class="id" title="var">invs</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#extends_lookup_constructor"><span class="id" title="lemma">extends_lookup_constructor</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_nargs"><span class="id" title="projection">cstr_nargs</span></a> <span class="id" title="var">c</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ'</span>) <span class="id" title="var">v</span>) ) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>, <span class="id" title="var">Ec</span>. <span class="id" title="var">invs</span> <span class="id" title="var">E</span>. <span class="id" title="var">invs</span> <span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_decl_extends" class="idref" href="#transform_blocks_decl_extends"><span class="id" title="lemma">transform_blocks_decl_extends</span></a> {<a id="efl:273" class="idref" href="#efl:273"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">(</span></a><a id="cc664e2ebdb5001557a38eea9d90b077" class="idref" href="#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>) <a id="t:275" class="idref" href="#t:275"><span class="id" title="binder">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_global_decl"><span class="id" title="definition">wf_global_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:275"><span class="id" title="variable">t</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">∀</span></a> <a id="b965fd88bc663b091859b647deb0097b" class="idref" href="#b965fd88bc663b091859b647deb0097b"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#e15f3fa8414cf45e36c73a91b3f5f2c2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">extends</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b965fd88bc663b091859b647deb0097b"><span class="id" title="variable">Σ'</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b965fd88bc663b091859b647deb0097b"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#cc664e2ebdb5001557a38eea9d90b077"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:275"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_decl"><span class="id" title="definition">transform_blocks_decl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b965fd88bc663b091859b647deb0097b"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:275"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [[]] ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_constant_decl"><span class="id" title="definition">transform_blocks_constant_decl</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_extends"><span class="id" title="lemma">transform_blocks_extends</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Erasure</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#"><span class="id" title="library">EGenericGlobalMap</span></a>.<br/>

<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="GT" class="idref" href="#GT"><span class="id" title="instance">GT</span></a> : <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#GenTransform"><span class="id" title="class">GenTransform</span></a> := { <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform"><span class="id" title="method">gen_transform</span></a> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>; <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform_inductive_decl"><span class="id" title="method">gen_transform_inductive_decl</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> }.<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="GTID" class="idref" href="#GTID"><span class="id" title="instance">GTID</span></a> : <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#GenTransformId"><span class="id" title="class">GenTransformId</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GT"><span class="id" title="instance">GT</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="GTExt" class="idref" href="#GTExt"><span class="id" title="instance">GTExt</span></a> <a id="efl:277" class="idref" href="#efl:277"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#GenTransformExtends"><span class="id" title="class">GenTransformExtends</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:277"><span class="id" title="variable">efl</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:277"><span class="id" title="variable">efl</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GT"><span class="id" title="instance">GT</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">t</span> <span class="id" title="var">n</span> <span class="id" title="var">wfΣ</span> <span class="id" title="var">Σ'</span> <span class="id" title="var">ext</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform"><span class="id" title="method">gen_transform</span></a>, <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GT"><span class="id" title="instance">GT</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_extends"><span class="id" title="lemma">transform_blocks_extends</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>]<br/>
<span class="id" title="keyword">Instance</span> <a id="GTWf" class="idref" href="#GTWf"><span class="id" title="instance">GTWf</span></a> <a id="efl:278" class="idref" href="#efl:278"><span class="id" title="binder">efl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#GenTransformWf"><span class="id" title="class">GenTransformWf</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:278"><span class="id" title="variable">efl</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:278"><span class="id" title="variable">efl</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GT"><span class="id" title="instance">GT</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">refine</span> {| <a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform_pre"><span class="id" title="method">gen_transform_pre</span></a> := <span class="id" title="keyword">fun</span> <a id="d67063351bf8ca77b4cdd88504e2fd91" class="idref" href="#d67063351bf8ca77b4cdd88504e2fd91"><span class="id" title="binder"><span id="814c8bffd75ac79057558b0ba1e67cc7" class="id">Σ</span></span></a> <a id="t:280" class="idref" href="#t:280"><span class="id" title="binder"><span id="t:282" class="id">t</span></span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#d67063351bf8ca77b4cdd88504e2fd91"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:280"><span class="id" title="variable">t</span></a> |}; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">n</span> <span class="id" title="var">t</span> [<span class="id" title="var">hasapp</span> [<span class="id" title="var">cstrp</span> [<span class="id" title="var">cstrb</span> <span class="id" title="var">pre</span>]]] <span class="id" title="var">wfΣ</span> <span class="id" title="var">wft</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_wellformed"><span class="id" title="lemma">transform_wellformed</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_env_extends" class="idref" href="#transform_blocks_env_extends"><span class="id" title="lemma">transform_blocks_env_extends</span></a> {<a id="efl:283" class="idref" href="#efl:283"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="e39378fca6a63b9b46c8b96c180b5ee0" class="idref" href="#e39378fca6a63b9b46c8b96c180b5ee0"><span class="id" title="binder">Σ</span></a> <a id="19ebda19d4053372dae56586679c40d5" class="idref" href="#19ebda19d4053372dae56586679c40d5"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">extends</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e39378fca6a63b9b46c8b96c180b5ee0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#19ebda19d4053372dae56586679c40d5"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e39378fca6a63b9b46c8b96c180b5ee0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#19ebda19d4053372dae56586679c40d5"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#extends"><span class="id" title="definition">extends</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#e39378fca6a63b9b46c8b96c180b5ee0"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#19ebda19d4053372dae56586679c40d5"><span class="id" title="variable">Σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hast</span> <span class="id" title="var">ext</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform_extends"><span class="id" title="lemma">gen_transform_extends</span></a> (<span class="id" title="var">gt</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GTExt"><span class="id" title="instance">GTExt</span></a> <span class="id" title="var">efl</span> <span class="id" title="var">hast</span>) <span class="id" title="var">ext</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Pre_glob" class="idref" href="#Pre_glob"><span class="id" title="lemma">Pre_glob</span></a> <a id="efl:286" class="idref" href="#efl:286"><span class="id" title="binder">efl</span></a> <a id="b81b43d02c4b43f61fdd7203ece36bc9" class="idref" href="#b81b43d02c4b43f61fdd7203ece36bc9"><span class="id" title="binder">Σ</span></a> <a id="wf:288" class="idref" href="#wf:288"><span class="id" title="binder">wf</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_env"><span class="id" title="definition">EEtaExpanded.isEtaExp_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b81b43d02c4b43f61fdd7203ece36bc9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#Pre_glob"><span class="id" title="definition">Pre_glob</span></a> (<span class="id" title="var">GTWF</span>:=<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GTWf"><span class="id" title="instance">GTWf</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:286"><span class="id" title="variable">efl</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#b81b43d02c4b43f61fdd7203ece36bc9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wf:288"><span class="id" title="variable">wf</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cstrp</span> <span class="id" title="var">cstrb</span> <span class="id" title="var">happ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kn</span> <span class="id" title="var">d</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [[[|]]|] ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H</span> ⇒ /= [] /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_constant_decl"><span class="id" title="definition">isEtaExp_constant_decl</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHΣ</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_wf_global" class="idref" href="#transform_wf_global"><span class="id" title="lemma">transform_wf_global</span></a> {<a id="efl:289" class="idref" href="#efl:289"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} {<a id="bbd035773a529b63dc6323e3d43b3600" class="idref" href="#bbd035773a529b63dc6323e3d43b3600"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tBox"><span class="id" title="method">has_tBox</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tRel"><span class="id" title="method">has_tRel</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_env"><span class="id" title="definition">EEtaExpanded.isEtaExp_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#bbd035773a529b63dc6323e3d43b3600"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> (<span class="id" title="var">efl</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:289"><span class="id" title="variable">efl</span></a>) <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#bbd035773a529b63dc6323e3d43b3600"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> (<span class="id" title="var">efl</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#switch_cstr_as_blocks"><span class="id" title="definition">switch_cstr_as_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:289"><span class="id" title="variable">efl</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#bbd035773a529b63dc6323e3d43b3600"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hasp</span> <span class="id" title="var">cstrbl</span> <span class="id" title="var">hasapp</span> <span class="id" title="var">hasb</span> <span class="id" title="var">hasr</span> <span class="id" title="var">etag</span> <span class="id" title="var">wfg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#gen_transform_env_wf"><span class="id" title="lemma">gen_transform_env_wf</span></a> (<span class="id" title="var">gt</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#GTExt"><span class="id" title="instance">GTExt</span></a> <span class="id" title="var">efl</span> <span class="id" title="var">_</span>)) ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#Pre_glob"><span class="id" title="lemma">Pre_glob</span></a> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Transparent</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fst_decompose_app_rec" class="idref" href="#fst_decompose_app_rec"><span class="id" title="lemma">fst_decompose_app_rec</span></a> <a id="t:291" class="idref" href="#t:291"><span class="id" title="binder">t</span></a> <a id="l:292" class="idref" href="#l:292"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app_rec"><span class="id" title="definition">decompose_app_rec</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:291"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#l:292"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:291"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHt1</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHt1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">t2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="head_tapp" class="idref" href="#head_tapp"><span class="id" title="lemma">head_tapp</span></a> <a id="t1:293" class="idref" href="#t1:293"><span class="id" title="binder">t1</span></a> <a id="t2:294" class="idref" href="#t2:294"><span class="id" title="binder">t2</span></a> : <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head"><span class="id" title="definition">head</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t1:293"><span class="id" title="variable">t1</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t2:294"><span class="id" title="variable">t2</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head"><span class="id" title="definition">head</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t1:293"><span class="id" title="variable">t1</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#head"><span class="id" title="definition">head</span></a> /<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> /= <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#fst_decompose_app_rec"><span class="id" title="lemma">fst_decompose_app_rec</span></a> //. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="tApp_mkApps" class="idref" href="#tApp_mkApps"><span class="id" title="lemma">tApp_mkApps</span></a> <a id="f:295" class="idref" href="#f:295"><span class="id" title="binder">f</span></a> <a id="a:296" class="idref" href="#a:296"><span class="id" title="binder">a</span></a> : <a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:295"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:296"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Erasure.EAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#f:295"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#a:296"><span class="id" title="variable">a</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="transform_blocks_eval" class="idref" href="#transform_blocks_eval"><span class="id" title="lemma">transform_blocks_eval</span></a> {<a id="efl:297" class="idref" href="#efl:297"><span class="id" title="binder">efl</span></a> : <a class="idref" href="MetaRocq.Erasure.EWellformed.html#EEnvFlags"><span class="id" title="class">EEnvFlags</span></a>} (<a id="fl:298" class="idref" href="#fl:298"><span class="id" title="binder">fl</span></a> := <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#target_wcbv_flags"><span class="id" title="definition">EWcbvEval.target_wcbv_flags</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#cstr_as_blocks"><span class="id" title="method">cstr_as_blocks</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_tApp"><span class="id" title="method">has_tApp</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="1cefb00bb9cae8ba045c1ffabab038ab" class="idref" href="#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.t"><span class="id" title="record">GlobalContextMap.t</span></a>), <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_env"><span class="id" title="definition">isEtaExp_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> @<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_glob"><span class="id" title="inductive">wf_glob</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:297"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="t:300" class="idref" href="#t:300"><span class="id" title="binder">t</span></a> <a id="t':301" class="idref" href="#t':301"><span class="id" title="binder">t'</span></a>,<br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#efl:297"><span class="id" title="variable">efl</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> 0 <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp"><span class="id" title="definition">isEtaExp</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">EWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:300"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t':301"><span class="id" title="variable">t'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval"><span class="id" title="inductive">EWcbvEval.eval</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#block_wcbv_flags"><span class="id" title="definition">block_wcbv_flags</span></a> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_env"><span class="id" title="definition">transform_blocks_env</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t:300"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#1cefb00bb9cae8ba045c1ffabab038ab"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#t':301"><span class="id" title="variable">t'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cstrbl</span> <span class="id" title="var">haspars</span> <span class="id" title="var">hasapp</span> <span class="id" title="var">Σ</span> <span class="id" title="var">etaΣ</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span><br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.EWcbvEvalEtaInd.html#eval_preserve_mkApps_ind"><span class="id" title="lemma">EWcbvEvalEtaInd.eval_preserve_mkApps_ind</span></a> <span class="id" title="var">fl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> (<span class="id" title="var">efl</span> := <span class="id" title="var">efl</span>) <span class="id" title="var">Σ</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a> <span class="id" title="var">Σ</span>) (<span class="id" title="var">Qpres</span> := <a class="idref" href="MetaRocq.Erasure.EWcbvEvalEtaInd.html#Qpreserves_wellformed"><span class="id" title="lemma">Qpreserves_wellformed</span></a> <span class="id" title="var">efl</span> <span class="id" title="var">_</span> <span class="id" title="var">cstrbl</span> <span class="id" title="var">wfΣ</span>)) ⇒ //; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_wellformed"><span class="id" title="lemma">EWcbvEval.eval_wellformed</span></a> ⇒ //; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">intros</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. { <span class="id" title="var">cbn</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">fn</span> <span class="id" title="var">args</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[[] <span class="id" title="var">args'</span>]|] ⇒ // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hl</span> [<span class="id" title="var">ha</span> <span class="id" title="var">ht</span>]]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_mkApps_Construct_block_inv"><span class="id" title="lemma">eval_mkApps_Construct_block_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; <span class="id" title="var">Ha3</span>); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i3</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i3</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">hel</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#eval_mkApps_Construct_inv"><span class="id" title="lemma">eval_mkApps_Construct_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; → &amp; ?); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">fn</span> <span class="id" title="var">args</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[] |] ⇒ // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hl</span> [<span class="id" title="var">ha</span> <span class="id" title="var">ht</span>]]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_mkApps_Construct_block_inv"><span class="id" title="lemma">eval_mkApps_Construct_block_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; <span class="id" title="var">Ha3</span>); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i7</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i7</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">hel</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#eval_mkApps_Construct_inv"><span class="id" title="lemma">eval_mkApps_Construct_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; → &amp; ?); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">revert</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">f0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_csubst"><span class="id" title="lemma">transform_blocks_csubst</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">now</span> <span class="id" title="var">simp_eta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> - <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_csubst"><span class="id" title="lemma">transform_blocks_csubst</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#add"><span class="id" title="definition">plus</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">pars</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#constructor_isprop_pars_decl_params"><span class="id" title="lemma">constructor_isprop_pars_decl_params</span></a>; <span class="id" title="tactic">eauto</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">Hcon</span> := <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#constructor_isprop_pars_decl"><span class="id" title="definition">constructor_isprop_pars_decl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">eqc</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args_cstr_arity"><span class="id" title="lemma">lookup_constructor_pars_args_cstr_arity</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">eqc</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_all"><span class="id" title="lemma">chop_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. 2:<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_iota_block"><span class="id" title="constructor">eval_iota_block</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>]. <span class="id" title="tactic">eapply</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#constructor_isprop_pars_decl"><span class="id" title="definition">constructor_isprop_pars_decl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqc</span> //= <span class="id" title="var">H8</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H3</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H9</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i4</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i6</span> ⇒ //. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_iota_red"><span class="id" title="lemma">transform_blocks_iota_red</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_nth_error"><span class="id" title="lemma">forallb_nth_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">H3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H9</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="keyword">as</span> [ <span class="id" title="var">f</span> <span class="id" title="var">args</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[] |] ⇒ // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hl</span> [<span class="id" title="var">ha</span> <span class="id" title="var">ht</span>]]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_mkApps_Construct_block_inv"><span class="id" title="lemma">eval_mkApps_Construct_block_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; <span class="id" title="var">Ha3</span>); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i7</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i7</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">hel</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H9</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#eval_mkApps_Construct_inv"><span class="id" title="lemma">eval_mkApps_Construct_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; → &amp; ?); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+  <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_fix'"><span class="id" title="constructor">eval_fix'</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">revert</span> <span class="id" title="var">e1</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">x</span> := <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks"><span class="id" title="definition">transform_blocks</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">f5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i8</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_fix_gen"><span class="id" title="definition">wf_fix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i8</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_cunfold_fix"><span class="id" title="lemma">transform_blocks_cunfold_fix</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closed_fix_subst"><span class="id" title="lemma">closed_fix_subst</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span> |- ×. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp_eta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i10</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">revert</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">cbn</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_cunfold_fix"><span class="id" title="lemma">wellformed_cunfold_fix</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">fn</span> <span class="id" title="var">av</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">t0</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="var">Σ</span> <span class="id" title="var">ind</span> <span class="id" title="var">n</span>) <span class="id" title="keyword">as</span> [ [[ ]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">E2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="keyword">zeta</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E3</span>. <span class="id" title="tactic">intros</span> (? &amp; ? &amp; ?).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>. <span class="id" title="tactic">rewrite</span> → <span class="id" title="var">H7</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">intros</span> <span class="id" title="var">He</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_mkApps_Construct_block_inv"><span class="id" title="lemma">eval_mkApps_Construct_block_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">He</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; ?); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#last"><span class="id" title="definition">last</span></a> <span class="id" title="var">l</span> <span class="id" title="var">av</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">i1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">H7</span> - <a class="idref" href="MetaRocq.Utils.MRList.html#remove_last_last"><span class="id" title="lemma">remove_last_last</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i1</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_Constructor"><span class="id" title="lemma">isEtaExp_Constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">E2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>, <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.Compare_dec.html#leb_complete"><span class="id" title="lemma">leb_complete</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>, <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">exfalso</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">enough</span> (<span class="id" title="var">n0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#73030c22bc0b1fa771c65aa5414c65f9"><span class="id" title="notation">≥</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#remove_last_length"><span class="id" title="lemma">remove_last_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H3</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>, <span class="id" title="var">H3</span>, <span class="id" title="var">H13</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">n0</span> <span class="id" title="var">l</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop_map"><span class="id" title="lemma">chop_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E3</span> ⇒ //. 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">E3</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l2</span>; <span class="id" title="var">invs</span> <span class="id" title="var">H15</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ec</span>. <span class="id" title="var">invs</span> <span class="id" title="var">Ec</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#skipn_nil_length"><span class="id" title="lemma">PCUICSR.skipn_nil_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H15</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#add"><span class="id" title="definition">plus</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ev</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">eta</span> <span class="id" title="var">etad</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">eta</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">wfcof</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_cofix_case"><span class="id" title="constructor">eval_cofix_case</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_cunfold_cofix"><span class="id" title="lemma">transform_blocks_cunfold_cofix</span></a>; <span class="id" title="var">trea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closed_cofix_subst"><span class="id" title="lemma">closed_cofix_subst</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_closed"><span class="id" title="lemma">wellformed_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfcof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps_napp"><span class="id" title="lemma">isEtaExp_mkApps_napp</span></a> //= <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">i</span> ⇒ [] <span class="id" title="var">etacof</span> <span class="id" title="var">etaargs</span>. <span class="id" title="var">now</span> <span class="id" title="var">simp_eta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">etacof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">transform_blocks_mkApps_eta_fn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> //= <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> //. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">hasp</span> <span class="id" title="var">wffn</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">i4</span>; <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> //. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">wfcof</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">i6</span> ⇒ /=; <span class="id" title="var">simp_eta</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_mkApps_napp"><span class="id" title="lemma">isEtaExp_mkApps_napp</span></a> //=. <span class="id" title="tactic">move</span>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">etacof</span> <span class="id" title="var">etaargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_cunfold_cofix"><span class="id" title="lemma">transform_blocks_cunfold_cofix</span></a>; <span class="id" title="var">trea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#closed_cofix_subst"><span class="id" title="lemma">closed_cofix_subst</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_closed"><span class="id" title="lemma">wellformed_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfcof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simp_eta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">etacof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps_eta_fn"><span class="id" title="lemma">transform_blocks_mkApps_eta_fn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_declared_constant"><span class="id" title="lemma">transform_blocks_declared_constant</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> //= <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>; <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>; <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">i4</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> // ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">hasc</span> <span class="id" title="var">hl</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstrbl</span> ⇒ <span class="id" title="var">_</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [[[<span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span>] <span class="id" title="var">cdecl'</span>]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hc</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EGenericGlobalMap.html#constructor_isprop_pars_decl_constructor"><span class="id" title="lemma">constructor_isprop_pars_decl_constructor</span></a> <span class="id" title="var">hc</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args_cstr_arity"><span class="id" title="lemma">lookup_constructor_pars_args_cstr_arity</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hc</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Erasure.EAst.html#ind_npars"><span class="id" title="projection">ind_npars</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#wellformed_lookup_constructor_pars"><span class="id" title="lemma">wellformed_lookup_constructor_pars</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_all"><span class="id" title="lemma">chop_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_proj_block"><span class="id" title="constructor">eval_proj_block</span></a> ⇒ //; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#constructor_isprop_pars_decl"><span class="id" title="definition">constructor_isprop_pars_decl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>. <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">hc</span> //= <span class="id" title="var">H1</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> /=. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H6</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">f</span> <span class="id" title="var">args</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">npars</span> <span class="id" title="var">args'</span>]|] <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">npars</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">eqch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">Hl</span> [<span class="id" title="var">ha</span> <span class="id" title="var">ht</span>]]. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> <span class="id" title="var">ev</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hev</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#with_constructor_as_block"><span class="id" title="method">with_constructor_as_block</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_mkApps_Construct_block_inv"><span class="id" title="lemma">eval_mkApps_Construct_block_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hev</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; <span class="id" title="var">Ha3</span>); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span> <span class="id" title="keyword">as</span> [ | []]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ha</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i3</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed_mkApps"><span class="id" title="lemma">wellformed_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i3</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">rtoProp</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wellformed"><span class="id" title="definition">wellformed</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">rtoProp</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">hel</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#eval_mkApps_Construct_inv"><span class="id" title="lemma">eval_mkApps_Construct_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hev</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">args''</span> &amp; <span class="id" title="var">Ha1</span> &amp; <span class="id" title="var">Ha2</span> &amp; → &amp; ?); <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">f'</span> <span class="id" title="var">a'</span>)). <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a> <span class="id" title="var">t0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [ [[]] | ] <span class="id" title="var">eqn</span>:<span class="id" title="var">hpa</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Nat.html#add"><span class="id" title="definition">plus</span></a>]. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">heqch</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">hl</span> [<span class="id" title="var">ht</span> <span class="id" title="var">ha</span>]]. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ht</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isPrimApp_mkApps"><span class="id" title="lemma">isPrimApp_mkApps</span></a> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isLazyApp_mkApps"><span class="id" title="lemma">isLazyApp_mkApps</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_true_r"><span class="id" title="lemma">orb_true_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_app_cong"><span class="id" title="constructor">eval_app_cong</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f'</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">tauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_isConstructApp"><span class="id" title="lemma">transform_blocks_isConstructApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_isPrimApp"><span class="id" title="lemma">transform_blocks_isPrimApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_isLazyApp"><span class="id" title="lemma">transform_blocks_isLazyApp</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#negb_or"><span class="id" title="lemma">negb_or</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [] <span class="id" title="var">ncstr</span> <span class="id" title="var">nprim</span> <span class="id" title="var">nlazy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Erasure.EAstUtils.html#isConstructApp"><span class="id" title="definition">isConstructApp</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">f'1</span> <span class="id" title="var">f'2</span>)) <span class="id" title="var">eqn</span>:<span class="id" title="var">heq'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ncstr</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_tApp"><span class="id" title="lemma">transform_blocks_tApp</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">nprim</span> <span class="id" title="var">nlazy</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#negbTE"><span class="id" title="lemma">negbTE</span></a>: <span class="id" title="var">nlazy</span> →. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#negbTE"><span class="id" title="lemma">negbTE</span></a>: <span class="id" title="var">nprim</span> → ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EEnvMap.html#GlobalContextMap.lookup_constructor_pars_args_spec"><span class="id" title="lemma">GlobalContextMap.lookup_constructor_pars_args_spec</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args"><span class="id" title="definition">lookup_constructor_pars_args</span></a> <span class="id" title="keyword">as</span> [[[]] | ]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l1</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_case"><span class="id" title="lemma">rev_case</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [<span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.MRProd.html#and5"><span class="id" title="inductive">MRProd.and5</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>. <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_mkApps"><span class="id" title="lemma">transform_blocks_mkApps</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#construct_viewc"><span class="id" title="definition">construct_viewc</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor_pars_args_cstr_arity"><span class="id" title="lemma">lookup_constructor_pars_args_cstr_arity</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_nargs"><span class="id" title="projection">cstr_nargs</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="var">args</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#chop"><span class="id" title="definition">chop</span></a> (<a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_nargs"><span class="id" title="projection">cstr_nargs</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="var">args'</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">E2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#chop_map"><span class="id" title="lemma">chop_map</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>, <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_env"><span class="id" title="definition">lookup_env</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">E</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWellformed.html#lookup_env_wellformed"><span class="id" title="lemma">lookup_env_wellformed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Heq</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">inv</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a>; <span class="id" title="var">invs</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Erasure.EWellformed.html#wf_minductive"><span class="id" title="definition">wf_minductive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">E</span>. <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4</span> <span class="id" title="var">into</span> <span class="id" title="var">H4_old</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">H4'</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <span class="id" title="keyword">context</span>[<a class="idref" href="MetaRocq.Erasure.EWellformed.html#has_cstr_params"><span class="id" title="method">has_cstr_params</span></a>] |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">H</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">H4'</span> <span class="id" title="var">into</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">haspars</span> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_eq"><span class="id" title="lemma">eqb_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <span class="id" title="var">H4</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">E1</span> <span class="id" title="var">E2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#chop_firstn_skipn"><span class="id" title="lemma">chop_firstn_skipn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_all"><span class="id" title="lemma">firstn_all</span></a>. <span class="id" title="tactic">intros</span> [= &lt;- &lt;-] [= &lt;- &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">X0'</span> := <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">H</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X0'</span> <span class="id" title="var">into</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#skipn_all"><span class="id" title="lemma">skipn_all</span></a> <span class="id" title="var">Hlen</span> <a class="idref" href="MetaRocq.Utils.MRList.html#skipn_all"><span class="id" title="lemma">skipn_all</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#firstn_all"><span class="id" title="lemma">firstn_all</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_construct_block"><span class="id" title="constructor">eval_construct_block</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H4</span>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">X0</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#All2_All2_Set"><span class="id" title="lemma">All2_All2_Set</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">H</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">X</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">X</span>; <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#All2_over_undep"><span class="id" title="lemma">All2_over_undep</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#All2_Set_All2"><span class="id" title="lemma">All2_Set_All2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EPrimitive.html#All2_All2_Set"><span class="id" title="lemma">All2_All2_Set</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">evl</span> <span class="id" title="var">evt'</span> [<span class="id" title="var">evt</span> <span class="id" title="var">wft</span> <span class="id" title="var">wflt</span> <span class="id" title="var">etat</span> <span class="id" title="var">etalt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">evt''</span> <span class="id" title="var">wft'</span> <span class="id" title="var">wfv</span> <span class="id" title="var">etat'</span> <span class="id" title="var">etav</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span>; <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">simp</span> <span class="id" title="var">transform_blocks</span> <span class="id" title="tactic">in</span> <span class="id" title="var">evt</span>; <span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#transform_blocks_equation_1"><span class="id" title="definition">transform_blocks_equation_1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">evt</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>, <span class="id" title="var">H0</span> |- *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>] <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Erasure.EGlobalEnv.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hl</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span>] <span class="id" title="var">cdecl</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Erasure.EWcbvEval.html#eval_construct_block"><span class="id" title="constructor">eval_construct_block</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_transform_blocks"><span class="id" title="lemma">lookup_constructor_transform_blocks</span></a> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">simp_eta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EEtaExpanded.html#isEtaExp_app"><span class="id" title="definition">isEtaExp_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Erasure.EConstructorsAsBlocks.html#lookup_constructor_pars_args_spec"><span class="id" title="lemma">lookup_constructor_pars_args_spec</span></a> <span class="id" title="var">wfΣ</span> <span class="id" title="var">hl</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Erasure.EAst.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
