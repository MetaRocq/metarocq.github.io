<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.Examples.metarocq_tour</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.config.html#"><span class="id" title="library">config</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Template.All.html#"><span class="id" title="library">All</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Template.TemplateMonad.html#"><span class="id" title="library">TemplateMonad</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="library">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#"><span class="id" title="library">PCUICReduction</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#"><span class="id" title="library">PCUICCumulativity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="library">PCUICTyping</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSafeLemmata.html#"><span class="id" title="library">PCUICSafeLemmata</span></a>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.monad_utils.html#MRMonadNotation"><span class="id" title="module">MRMonadNotation</span></a>.<br/>
<span class="id" title="keyword">Local Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bs_scope</span>.<br/>

<br/>
</div>

<div class="doc">
MetaRocq is:

<div class="paragraph"> </div>

<ul class="doclist">
<li> The "template-rocq" monad, dealing with reification of terms
    and environments.

</li>
<li> The PCUIC development of the syntactic metatheory of Rocq.

</li>
<li> The SafeChecker package implementing reduction, conversion
    and typechecking in a sound and complete way.

</li>
<li> The Erasure package implementing verified extraction to
    untyped lambda-calculus

</li>
</ul>

</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">Ast.term</span>.<br/>

<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Quote</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">reifx</span> := (<span class="id" title="keyword">fun</span> <a id="x:1" class="idref" href="#x:1"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#x:1"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Definition</span> <a id="foo" class="idref" href="#foo"><span class="id" title="definition">foo</span></a> := (<span class="id" title="keyword">fun</span> <a id="x:2" class="idref" href="#x:2"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">fun</span> <a id="x:3" class="idref" href="#x:3"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#x:3"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Quote</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">reifx'</span> := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="tactic">in</span> (<span class="id" title="keyword">fun</span> <a id="x:4" class="idref" href="#x:4"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <span class="id" title="keyword">let</span> <a id="y:5" class="idref" href="#y:5"><span class="id" title="binder">y</span></a> := <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#x:4"><span class="id" title="variable">x</span></a> <span class="id" title="tactic">in</span> <span class="id" title="keyword">fun</span> <a id="x:6" class="idref" href="#x:6"><span class="id" title="binder">x</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#y:5"><span class="id" title="variable">y</span></a>).<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">reifx'</span>.<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Unquote</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">x</span> :=<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Template.Ast.html#tConstruct"><span class="id" title="constructor">Ast.tConstruct</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#mkInd"><span class="id" title="constructor">mkInd</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.Kernames.html#MPfile"><span class="id" title="constructor">MPfile</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a>"Datatypes"<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Init"<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Corelib"<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> "nat"<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> 0) 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>

<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Run</span> (<a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmBind"><span class="id" title="constructor">tmBind</span></a> (<a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmQuote"><span class="id" title="constructor">tmQuote</span></a> (3 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 3)) <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmPrint"><span class="id" title="constructor">tmPrint</span></a>).<br/>

<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Run</span> (<a id="t:7" class="idref" href="#t:7"><span class="id" title="binder">t</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmLemma"><span class="id" title="constructor">tmLemma</span></a> "foo44" <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="qt:8" class="idref" href="#qt:8"><span class="id" title="binder">qt</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmQuote"><span class="id" title="constructor">tmQuote</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a id="t:9" class="idref" href="#t:9"><span class="id" title="binder">t</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmEval"><span class="id" title="constructor">tmEval</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Common.html#all"><span class="id" title="constructor">all</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#t:7"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmPrint"><span class="id" title="constructor">tmPrint</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#qt:8"><span class="id" title="variable">qt</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#3d31a9d36591ef0fb917aef4149126dc"><span class="id" title="notation">;;</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmPrint"><span class="id" title="constructor">tmPrint</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#t:9"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Next</span> <span class="id" title="keyword">Obligation</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (3<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a>2).<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Print</span> <span class="id" title="var">typing</span>.<br/>

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_Sort"><span class="id" title="constructor">type_Sort</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_LetIn"><span class="id" title="constructor">type_LetIn</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_Const"><span class="id" title="constructor">type_Const</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#"><span class="id" title="library">PCUICSR</span></a>.<br/>

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#subject_reduction"><span class="id" title="lemma">PCUICSR.subject_reduction</span></a>.<br/>

<br/>
</div>

<div class="doc">
Verified conversion and type-checking 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.SafeChecker</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICErrors.html#"><span class="id" title="library">PCUICErrors</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnv.html#"><span class="id" title="library">PCUICWfEnv</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICWfEnvImpl.html#"><span class="id" title="library">PCUICWfEnvImpl</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICTypeChecker.html#"><span class="id" title="library">PCUICTypeChecker</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeChecker.html#"><span class="id" title="library">PCUICSafeChecker</span></a> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeRetyping.html#"><span class="id" title="library">PCUICSafeRetyping</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.SafeCheckerPlugin</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.SafeCheckerPlugin.Loader.html#"><span class="id" title="library">Loader</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeConversion.html#isconv_term_sound"><span class="id" title="lemma">PCUICSafeConversion.isconv_term_sound</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeConversion.html#isconv_term_complete"><span class="id" title="lemma">PCUICSafeConversion.isconv_term_complete</span></a>.<br/>

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeChecker.html#infer_wf_env"><span class="id" title="definition">PCUICSafeChecker.infer_wf_env</span></a>.<br/>
</div>

<div class="doc">
Proof of completeness is near completion. 
<div class="paragraph"> </div>

 Verified retyping: from a term that is known to be well-typeable,
  compute its principal type. Very common in tactics to avoid retypechecking
  the whole term. 
</div>
<div class="code">
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeRetyping.html#type_of"><span class="id" title="definition">type_of</span></a>.<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.SafeChecker.PCUICSafeRetyping.html#type_of_subtype"><span class="id" title="definition">type_of_subtype</span></a>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Examples</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Examples.metarocq_tour_prelude.html#"><span class="id" title="library">metarocq_tour_prelude</span></a>.<br/>

<br/>
<span class="id" title="keyword">Check</span> <a class="idref" href="MetaRocq.Examples.metarocq_tour_prelude.html#check_inh"><span class="id" title="definition">check_inh</span></a>.<br/>

<br/>
</div>

<div class="doc">
We construct a proof of typing entirely within Rocq, calling the typechecker to produce the derivation 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
The extracted typechecker also runs in OCaml 
</div>
<div class="code">

<br/>
</div>

<div class="doc">
Erasure 
</div>
<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.ErasurePlugin</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#"><span class="id" title="library">Erasure</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Loader.html#"><span class="id" title="library">Loader</span></a>.<br/>

<br/>
</div>

<div class="doc">
Running erasure live in Rocq 
</div>
<div class="code">
<span class="id" title="keyword">Definition</span> <a id="test" class="idref" href="#test"><span class="id" title="definition">test</span></a> (<a id="p:10" class="idref" href="#p:10"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.Template.Ast.html#Env.program"><span class="id" title="definition">Ast.Env.program</span></a>) : <a class="idref" href="MetaRocq.Utils.bytestring.html#string"><span class="id" title="abbreviation">string</span></a> :=<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#erase_and_print_template_program"><span class="id" title="definition">erase_and_print_template_program</span></a> <a class="idref" href="MetaRocq.ErasurePlugin.Erasure.html#default_erasure_config"><span class="id" title="definition">default_erasure_config</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#p:10"><span class="id" title="variable">p</span></a>.<br/>

<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Quote</span> <span class="id" title="var">Recursively</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">zero</span> := 0.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="zerocst" class="idref" href="#zerocst"><span class="id" title="definition">zerocst</span></a> := <span class="id" title="keyword">Eval</span> <span class="id" title="tactic">lazy</span> <span class="id" title="tactic">in</span> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#test"><span class="id" title="definition">test</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#zero"><span class="id" title="definition">zero</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="singleton_elim" class="idref" href="#singleton_elim"><span class="id" title="definition">singleton_elim</span></a> :=<br/>
&nbsp;&nbsp;((<span class="id" title="keyword">fun</span> (<a id="X:11" class="idref" href="#X:11"><span class="id" title="binder">X</span></a> : <span class="id" title="keyword">Set</span>) (<a id="x:12" class="idref" href="#x:12"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#X:11"><span class="id" title="variable">X</span></a>) (<a id="e:13" class="idref" href="#e:13"><span class="id" title="binder">e</span></a> : <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#x:12"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#x:12"><span class="id" title="variable">x</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#e:13"><span class="id" title="variable">e</span></a> <span class="id" title="tactic">in</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">x'</span> <span class="id" title="keyword">return</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>)).<br/>

<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Run</span> (<a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmEval"><span class="id" title="constructor">tmEval</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Common.html#lazy"><span class="id" title="constructor">lazy</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#singleton_elim"><span class="id" title="definition">singleton_elim</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#68976a3eebb409e5f0e334588f8ba23d"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmQuoteRec"><span class="id" title="definition">tmQuoteRec</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#68976a3eebb409e5f0e334588f8ba23d"><span class="id" title="notation">&gt;&gt;=</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <a id="p:16" class="idref" href="#p:16"><span class="id" title="binder">p</span></a> ⇒ <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmEval"><span class="id" title="constructor">tmEval</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Common.html#lazy"><span class="id" title="constructor">lazy</span></a> (<a class="idref" href="MetaRocq.Examples.metarocq_tour.html#test"><span class="id" title="definition">test</span></a> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#p:16"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.Utils.monad_utils.html#68976a3eebb409e5f0e334588f8ba23d"><span class="id" title="notation">&gt;&gt;=</span></a> <a class="idref" href="MetaRocq.Template.TemplateMonad.Core.html#tmPrint"><span class="id" title="constructor">tmPrint</span></a>). 
<br/>
<span class="id" title="var">MetaRocq</span> <span class="id" title="var">Erase</span> <a class="idref" href="MetaRocq.Examples.metarocq_tour.html#singleton_elim"><span class="id" title="definition">singleton_elim</span></a>.<br/>

<br/>
</div>

<div class="doc">
Conclusion: Status of MetaRocq

<div class="paragraph"> </div>

<ul class="doclist">
<li> Correctness and complete typechecker for (a large fragment of) Rocq.

<div class="paragraph"> </div>


</li>
<li> All metatheory proofs are finished. Compared to Rocq's implementation:

<div class="paragraph"> </div>

<ul class="doclist">
<li> full (max (i + k, j + l)) universe support (including a naïve acyclicity checking
      algorithm)

<div class="paragraph"> </div>


</li>
<li> partial support for SProp (in programs but not yet formalized typing rules)

<div class="paragraph"> </div>


</li>
<li> approximate cumulative inductive types checking (not yet up to reduction)

<div class="paragraph"> </div>


</li>
<li> missing eta-conversion: the plan is to use contravariant subtyping and eta-reduction,
      as in Rocq CEP 47

    - missing template-polymorphism: we're studying a sort polymorphism extension
      (with G. Gilbert, K. Maillard and N. Tabareau) to subsume it completely.

    - missing modules and fast conversion machines.

  - Much work to come on the template-rocq side to ease meta-programming.

  - Relation to CertiRocq: fast and verified correct erasure, not depending on type-checking
    (only retyping).

    + CertiRocq needs to have all constructors eta-expanded, a proof of the
      syntactic translation expanding constructors is in progress.

    + Otherwise the front-end part of CertiRocq is complete with proofs.

    + Future work: handling of primitive types (ints, floats, arrays, ...)



</li>
</ul>

</li>
</ul>
</div>
<div class="code">

<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
