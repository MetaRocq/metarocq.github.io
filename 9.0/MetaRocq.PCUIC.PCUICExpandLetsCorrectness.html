<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="../">Project Page</a>
      <a href="./index.html"> Index </a>
      <a href="./toc.html"> Table of Contents </a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Library MetaRocq.PCUIC.PCUICExpandLetsCorrectness</h1>

<div class="code">
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssreflect.html#"><span class="id" title="library">ssreflect</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.ssr.ssrbool.html#"><span class="id" title="library">ssrbool</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8.html#"><span class="id" title="library">Utf8</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Classes.CRelationClasses.html#"><span class="id" title="library">CRelationClasses</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Equations.Type</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Relation</span> <span class="id" title="library">Relation_Properties</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Equations.Prop</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">DepElim</span>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="keyword">Equations</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">Equations</span>.<br/>

<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "-notation-overridden".<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Utils</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.utils.html#"><span class="id" title="library">utils</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.Common</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Common.config.html#"><span class="id" title="library">config</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="library">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#"><span class="id" title="library">PCUICAstUtils</span></a> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICOnOne.html#"><span class="id" title="library">PCUICOnOne</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#"><span class="id" title="library">PCUICCases</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#"><span class="id" title="library">PCUICInduction</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#"><span class="id" title="library">PCUICLiftSubst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#"><span class="id" title="library">PCUICEquality</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#"><span class="id" title="library">PCUICReduction</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#"><span class="id" title="library">PCUICCasesContexts</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICTactics.html#"><span class="id" title="library">PCUICTactics</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#"><span class="id" title="library">PCUICSigmaCalculus</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#"><span class="id" title="library">PCUICClosed</span></a> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#"><span class="id" title="library">PCUICClosedTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#"><span class="id" title="library">PCUICContexts</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#"><span class="id" title="library">PCUICSubstitution</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#"><span class="id" title="library">PCUICWeakeningEnv</span></a> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#"><span class="id" title="library">PCUICWeakeningEnvTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#"><span class="id" title="library">PCUICEquality</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICWeakeningConv.html#"><span class="id" title="library">PCUICWeakeningConv</span></a> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#"><span class="id" title="library">PCUICWeakeningTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#"><span class="id" title="library">PCUICCumulativity</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#"><span class="id" title="library">PCUICUnivSubst</span></a> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#"><span class="id" title="library">PCUICUnivSubstitutionTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#"><span class="id" title="library">PCUICGlobalEnv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="library">PCUICTyping</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICGeneration.html#"><span class="id" title="library">PCUICGeneration</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#"><span class="id" title="library">PCUICConversion</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#"><span class="id" title="library">PCUICOnFreeVars</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#"><span class="id" title="library">PCUICValidity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#"><span class="id" title="library">PCUICArities</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#"><span class="id" title="library">PCUICInversion</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#"><span class="id" title="library">PCUICCases</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#"><span class="id" title="library">PCUICWellScopedCumulativity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#"><span class="id" title="library">PCUICSpine</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#"><span class="id" title="library">PCUICSR</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSafeLemmata.html#"><span class="id" title="library">PCUICSafeLemmata</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#"><span class="id" title="library">PCUICInductives</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#"><span class="id" title="library">PCUICInductiveInversion</span></a>.<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#"><span class="id" title="library">PCUICExpandLets</span></a>.<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Warnings</span> "+notation-overridden".<br/>

<br/>
<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.Utils.monad_utils.html#MRMonadNotation"><span class="id" title="module">MRMonadNotation</span></a>.<br/>

<br/>
<span class="id" title="keyword">Implicit</span> <span class="id" title="keyword">Types</span> (<span class="id" title="var">cf</span> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>) (<span class="id" title="var">Σ</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>). 
<br/>
<span class="id" title="keyword">Set</span> <span class="id" title="var">Default</span> <span class="id" title="keyword">Proof</span> <span class="id" title="var">Using</span> "Type*".<br/>

<br/>
</div>

<div class="doc">
Translation which expands the lets in constructor arguments contexts and the correspomding
  branches of pattern-matchings, so that let-expansion becomes unnecessary on the resulting terms.

<div class="paragraph"> </div>

  The proof of correctness is complicated by the fact that the translation is valid only on well-scoped
  terms, at the lowest level, so we carry around `on_free_vars` hypotheses everywhere. Reduction is
  only preserved when we are translating well-typed terms, as it relies on even stronger invariants on the
  representation of cases. Finally, the let-expansion of constructor's argument contexts is shown to
  preserve positivity and the cumulativity relation for cumulative inductive types, which is not entirely
  trivial. 
<div class="paragraph"> </div>

 Source = PCUIC, Target = Rocq 
</div>
<div class="code">
<span class="id" title="keyword">Module</span> <a id="S" class="idref" href="#S"><span class="id" title="module">S</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="SE" class="idref" href="#SE"><span class="id" title="module">SE</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment"><span class="id" title="module">PCUICEnvironment</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="ST" class="idref" href="#ST"><span class="id" title="module">ST</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="module">PCUICTyping</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="T" class="idref" href="#T"><span class="id" title="module">T</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#S"><span class="id" title="module">S</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="TT" class="idref" href="#TT"><span class="id" title="module">TT</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ST"><span class="id" title="module">ST</span></a>.<br/>

<br/>
<span class="id" title="keyword">Module</span> <a id="SL" class="idref" href="#SL"><span class="id" title="module">SL</span></a> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#"><span class="id" title="module">PCUICLiftSubst</span></a>.<br/>
<span class="id" title="keyword">Module</span> <a id="TL" class="idref" href="#TL"><span class="id" title="module">TL</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#SL"><span class="id" title="module">SL</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">solve_list</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> ?<a class="idref" href="MetaRocq.Utils.MRProd.html#compose_on_snd"><span class="id" title="lemma">compose_on_snd</span></a> ?<a class="idref" href="MetaRocq.Common.BasicAst.html#compose_map_def"><span class="id" title="lemma">compose_map_def</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">typeclasses</span> <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">core</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mapOne" class="idref" href="#mapOne"><span class="id" title="lemma">mapOne</span></a> {<a id="X:1" class="idref" href="#X:1"><span class="id" title="binder">X</span></a> <a id="Y:2" class="idref" href="#Y:2"><span class="id" title="binder">Y</span></a>} (<a id="f:3" class="idref" href="#f:3"><span class="id" title="binder">f</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#X:1"><span class="id" title="variable">X</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Y:2"><span class="id" title="variable">Y</span></a>) <a id="x:4" class="idref" href="#x:4"><span class="id" title="binder">x</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:3"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:4"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:3"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:4"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_local_app" class="idref" href="#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <a id="a66eb0e7c85ea280f33904e5ac83af54" class="idref" href="#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="binder">Γ</span></a> <a id="b678146ccad37efbf79e1ef5fce260c8" class="idref" href="#b678146ccad37efbf79e1ef5fce260c8"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b678146ccad37efbf79e1ef5fce260c8"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a66eb0e7c85ea280f33904e5ac83af54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b678146ccad37efbf79e1ef5fce260c8"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forget_types_map_context" class="idref" href="#forget_types_map_context"><span class="id" title="lemma">forget_types_map_context</span></a> {<a id="term:7" class="idref" href="#term:7"><span class="id" title="binder">term</span></a> <a id="term':8" class="idref" href="#term':8"><span class="id" title="binder">term'</span></a>} (<a id="f:9" class="idref" href="#f:9"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#term':8"><span class="id" title="variable">term'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#term:7"><span class="id" title="variable">term</span></a>) <a id="ctx:10" class="idref" href="#ctx:10"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:9"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:10"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:10"><span class="id" title="variable">ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_map_context"><span class="id" title="lemma">map_map_context</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All_fold_map_context" class="idref" href="#All_fold_map_context"><span class="id" title="lemma">All_fold_map_context</span></a> (<a id="P:11" class="idref" href="#P:11"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="f:12" class="idref" href="#f:12"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>) <a id="ctx:13" class="idref" href="#ctx:13"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:11"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:12"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:13"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="MetaRocq.Utils.MRRelations.html#e8aac4a093c83da9a780e8c256235d19"><span class="id" title="notation">&lt;~&gt;</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="6f77cad99d2eda9ef19109858c066b07" class="idref" href="#6f77cad99d2eda9ef19109858c066b07"><span class="id" title="binder">Γ</span></a> <a id="d:15" class="idref" href="#d:15"><span class="id" title="binder">d</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:11"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:12"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6f77cad99d2eda9ef19109858c066b07"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:12"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:15"><span class="id" title="variable">d</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:13"><span class="id" title="variable">ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHctx</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_decl_trans_on_free_vars_decl" class="idref" href="#on_decl_trans_on_free_vars_decl"><span class="id" title="lemma">on_decl_trans_on_free_vars_decl</span></a> (<a id="a2b47ff948e41f039782f954507c588d" class="idref" href="#a2b47ff948e41f039782f954507c588d"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="n:17" class="idref" href="#n:17"><span class="id" title="binder">n</span></a> (<a id="d:18" class="idref" href="#d:18"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#ondecl"><span class="id" title="definition">ondecl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="t:19" class="idref" href="#t:19"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a2b47ff948e41f039782f954507c588d"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:17"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:19"><span class="id" title="variable">t</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:18"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a2b47ff948e41f039782f954507c588d"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:17"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:18"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a>, <a class="idref" href="MetaRocq.Common.BasicAst.html#test_decl"><span class="id" title="definition">test_decl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × ⇒ //;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context_length"><span class="id" title="lemma">map_context_length</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_closedP"><span class="id" title="lemma">shiftnP_closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_xpredT"><span class="id" title="lemma">shiftnP_xpredT</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All_fold_closed_on_free_vars_ctx" class="idref" href="#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a> <a id="n:20" class="idref" href="#n:20"><span class="id" title="binder">n</span></a> <a id="ctx:21" class="idref" href="#ctx:21"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold"><span class="id" title="inductive">All_fold</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="87cf4a9792a33e96b1c656d15f1aa3be" class="idref" href="#87cf4a9792a33e96b1c656d15f1aa3be"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#ondecl"><span class="id" title="definition">ondecl</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="t:23" class="idref" href="#t:23"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#87cf4a9792a33e96b1c656d15f1aa3be"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:20"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:23"><span class="id" title="variable">t</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:21"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:20"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:21"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">af</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_All_fold"><span class="id" title="lemma">on_free_vars_ctx_All_fold</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_map_context"><span class="id" title="lemma">All_fold_map_context</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold_impl"><span class="id" title="lemma">All_fold_impl</span></a>; <span class="id" title="var">tea</span> ⇒ <span class="id" title="var">ctx'</span> <span class="id" title="var">d</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_decl_trans_on_free_vars_decl"><span class="id" title="lemma">on_decl_trans_on_free_vars_decl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="plengths" class="idref" href="#plengths"><span class="id" title="definition">plengths</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_context"><span class="id" title="lemma">context_assumptions_subst_context</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_app"><span class="id" title="lemma">context_assumptions_app</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_instance"><span class="id" title="lemma">context_assumptions_subst_instance</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_lift_context"><span class="id" title="lemma">context_assumptions_lift_context</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx_length"><span class="id" title="lemma">expand_lets_ctx_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_length"><span class="id" title="lemma">subst_context_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_instance_length"><span class="id" title="lemma">subst_instance_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx_length"><span class="id" title="lemma">expand_lets_k_ctx_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inds_length"><span class="id" title="lemma">inds_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_context_length"><span class="id" title="lemma">lift_context_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_rev"><span class="id" title="lemma">List.length_rev</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst_length"><span class="id" title="lemma">extended_subst_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#reln_length"><span class="id" title="lemma">reln_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_nil_r"><span class="id" title="lemma">app_nil_r</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_length"><span class="id" title="lemma">mapi_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_length"><span class="id" title="lemma">mapi_rec_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.Common.BasicAst.html#fold_context_k_length"><span class="id" title="lemma">fold_context_k_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cofix_subst_length"><span class="id" title="lemma">cofix_subst_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#fix_subst_length"><span class="id" title="lemma">fix_subst_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_length"><span class="id" title="lemma">smash_context_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context_length"><span class="id" title="lemma">arities_context_length</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_assumption_context_spec" class="idref" href="#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> <a id="c14c0b2265abf3ec26ac01165fe38870" class="idref" href="#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#reflect"><span class="id" title="inductive">reflect</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">PCUICLiftSubst.assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.is_assumption_context"><span class="id" title="definition">is_assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c14c0b2265abf3ec26ac01165fe38870"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">ass</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>.<br/>
&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">elim</span>: <span class="id" title="var">IHΓ</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">pcuic</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">n</span>; <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="assumption_context_assumptions" class="idref" href="#assumption_context_assumptions"><span class="id" title="lemma">assumption_context_assumptions</span></a> <a id="8ca488d962adcdfae0a5af1368ee12c6" class="idref" href="#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ca488d962adcdfae0a5af1368ee12c6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="bcontext_trans_length" class="idref" href="#bcontext_trans_length"><span class="id" title="lemma">bcontext_trans_length</span></a> <a id="p:26" class="idref" href="#p:26"><span class="id" title="binder">p</span></a> <a id="br:27" class="idref" href="#br:27"><span class="id" title="binder">br</span></a> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:26"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:27"><span class="id" title="variable">br</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:27"><span class="id" title="variable">br</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">ass</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#assumption_context_assumptions"><span class="id" title="lemma">assumption_context_assumptions</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_length"><span class="id" title="lemma">smash_context_length</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_on_free_vars" class="idref" href="#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a> <a id="P:28" class="idref" href="#P:28"><span class="id" title="binder">P</span></a> <a id="t:29" class="idref" href="#t:29"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:28"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:29"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:28"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:29"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">P</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#term_on_free_vars_ind"><span class="id" title="lemma">term_on_free_vars_ind</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> |- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaRocq.Common.BasicAst.html#case_info"><span class="id" title="record">case_info</span></a>] ⇒ <span class="id" title="tactic">idtac</span> | <span class="id" title="var">_</span> ⇒ <span class="id" title="var">solve_all</span> <span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context_length"><span class="id" title="lemma">map_context_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_forallb"><span class="id" title="lemma">All_forallb</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">br</span> [<span class="id" title="var">hctx</span> <span class="id" title="var">ihctx</span> <span class="id" title="var">hb</span> <span class="id" title="var">ihb</span>]. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>]. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context0"><span class="id" title="lemma">on_free_vars_ctx_subst_context0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ihctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ihctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a> ⇒ <span class="id" title="var">hlt</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#orP"><span class="id" title="lemma">orP</span></a>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">ihb</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ctx_trans" class="idref" href="#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a> <a id="k:30" class="idref" href="#k:30"><span class="id" title="binder">k</span></a> <a id="ctx:31" class="idref" href="#ctx:31"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:30"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:31"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:30"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:31"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_All_fold"><span class="id" title="lemma">on_free_vars_ctx_All_fold</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_fold_closed_on_free_vars_ctx"><span class="id" title="lemma">All_fold_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold_impl"><span class="id" title="lemma">All_fold_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ? <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; (<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">h</span> ⇒ /= // || <span class="id" title="tactic">move</span>: <span class="id" title="var">h</span>) ;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_closedP"><span class="id" title="lemma">shiftnP_closedP</span></a> ?<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_xpredT"><span class="id" title="lemma">shiftnP_xpredT</span></a> //;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_on_free_vars_ctx" class="idref" href="#trans_on_free_vars_ctx"><span class="id" title="lemma">trans_on_free_vars_ctx</span></a> <a id="k:32" class="idref" href="#k:32"><span class="id" title="binder">k</span></a> <a id="ctx:33" class="idref" href="#ctx:33"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:32"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:33"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:32"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:33"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closedP_mon" class="idref" href="#closedP_mon"><span class="id" title="lemma">closedP_mon</span></a> <a id="n:34" class="idref" href="#n:34"><span class="id" title="binder">n</span></a> <a id="n':35" class="idref" href="#n':35"><span class="id" title="binder">n'</span></a> <a id="P:36" class="idref" href="#P:36"><span class="id" title="binder">P</span></a> <a id="i:37" class="idref" href="#i:37"><span class="id" title="binder">i</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':35"><span class="id" title="variable">n'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:34"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:37"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':35"><span class="id" title="variable">n'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:36"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:37"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hn</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">len</span> := <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_lift" class="idref" href="#trans_lift"><span class="id" title="lemma">trans_lift</span></a> (<a id="t:38" class="idref" href="#t:38"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#term"><span class="id" title="inductive">S.term</span></a>) <a id="P:39" class="idref" href="#P:39"><span class="id" title="binder">P</span></a> <a id="n:40" class="idref" href="#n:40"><span class="id" title="binder">n</span></a> <a id="k:41" class="idref" href="#k:41"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:39"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:38"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift"><span class="id" title="definition">S.lift</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:41"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:38"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift"><span class="id" title="definition">T.lift</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:40"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:41"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:38"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onfvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">P</span> <span class="id" title="var">t</span> <span class="id" title="var">onfvs</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#term_on_free_vars_ind"><span class="id" title="lemma">term_on_free_vars_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_predicate_k"><span class="id" title="definition">T.map_predicate_k</span></a> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">PCUICAst.map_predicate</span></a> /= /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context_length"><span class="id" title="lemma">map_context_length</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span> ⇒ [<span class="id" title="var">br</span> [<span class="id" title="var">hbctx</span> <span class="id" title="var">ihbctx</span> <span class="id" title="var">hb</span> <span class="id" title="var">ihb</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_branch_k"><span class="id" title="definition">T.map_branch_k</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> /=. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">ihb</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ihb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_lift"><span class="id" title="lemma">expand_lets_lift</span></a>. 2:<span class="id" title="var">len</span>. 2:<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_context"><span class="id" title="lemma">distr_lift_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closed_ctx_lift"><span class="id" title="lemma">PCUICClosed.closed_ctx_lift</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedP_mon"><span class="id" title="lemma">closedP_mon</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>, <span class="id" title="var">X0</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="on_fst" class="idref" href="#on_fst"><span class="id" title="definition">on_fst</span></a> {<a id="A:42" class="idref" href="#A:42"><span class="id" title="binder">A</span></a> <a id="B:43" class="idref" href="#B:43"><span class="id" title="binder">B</span></a> <a id="C:44" class="idref" href="#C:44"><span class="id" title="binder">C</span></a>} (<a id="f:45" class="idref" href="#f:45"><span class="id" title="binder">f</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:42"><span class="id" title="variable">A</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:44"><span class="id" title="variable">C</span></a>) (<a id="p:46" class="idref" href="#p:46"><span class="id" title="binder">p</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:42"><span class="id" title="variable">A</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:43"><span class="id" title="variable">B</span></a>) := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:45"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:46"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:46"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="trans_def" class="idref" href="#trans_def"><span class="id" title="definition">trans_def</span></a> (<a id="decl:47" class="idref" href="#decl:47"><span class="id" title="binder">decl</span></a>:<a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) : <a class="idref" href="MetaRocq.Common.BasicAst.html#def"><span class="id" title="record">def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">dname</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">dtype</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">dbody</span>).<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">exact</span> <span class="id" title="var">rarg</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_global_ext_levels" class="idref" href="#trans_global_ext_levels"><span class="id" title="lemma">trans_global_ext_levels</span></a> <a id="1599156b531db08541b0ea734472e882" class="idref" href="#1599156b531db08541b0ea734472e882"><span class="id" title="binder">Σ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">S.global_ext_levels</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1599156b531db08541b0ea734472e882"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">T.global_ext_levels</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1599156b531db08541b0ea734472e882"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_global_ext_constraints" class="idref" href="#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a> <a id="bee78f44e79dd1f39e7aa3afe03ef2db" class="idref" href="#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_constraints"><span class="id" title="definition">S.global_ext_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_constraints"><span class="id" title="definition">T.global_ext_constraints</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bee78f44e79dd1f39e7aa3afe03ef2db"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_mem_level_set" class="idref" href="#trans_mem_level_set"><span class="id" title="lemma">trans_mem_level_set</span></a> <a id="l:50" class="idref" href="#l:50"><span class="id" title="binder">l</span></a> <a id="cbbfa2396495d39f80c59fc2f71e0bb6" class="idref" href="#cbbfa2396495d39f80c59fc2f71e0bb6"><span class="id" title="binder">Σ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:50"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">S.global_ext_levels</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbbfa2396495d39f80c59fc2f71e0bb6"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#LevelSet.mem"><span class="id" title="definition">LevelSet.mem</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:50"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">T.global_ext_levels</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbbfa2396495d39f80c59fc2f71e0bb6"><span class="id" title="variable">Σ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_in_level_set" class="idref" href="#trans_in_level_set"><span class="id" title="lemma">trans_in_level_set</span></a> <a id="l:52" class="idref" href="#l:52"><span class="id" title="binder">l</span></a> <a id="20d7c0ecc86fe88fa924e57d0c585b54" class="idref" href="#20d7c0ecc86fe88fa924e57d0c585b54"><span class="id" title="binder">Σ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#LevelSet.In"><span class="id" title="definition">LevelSet.In</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:52"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">S.global_ext_levels</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#20d7c0ecc86fe88fa924e57d0c585b54"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#LevelSet.In"><span class="id" title="definition">LevelSet.In</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:52"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_levels"><span class="id" title="definition">T.global_ext_levels</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#20d7c0ecc86fe88fa924e57d0c585b54"><span class="id" title="variable">Σ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_lookup" class="idref" href="#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a> (<a id="7674e0ce7f4ec5e4ff169924724c4b41" class="idref" href="#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) <a id="cst:55" class="idref" href="#cst:55"><span class="id" title="binder">cst</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cst:55"><span class="id" title="variable">cst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decl"><span class="id" title="definition">trans_global_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_env"><span class="id" title="definition">SE.lookup_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7674e0ce7f4ec5e4ff169924724c4b41"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cst:55"><span class="id" title="variable">cst</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs</span> <span class="id" title="var">Σ</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">case</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHΣ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_declared_constant" class="idref" href="#trans_declared_constant"><span class="id" title="lemma">trans_declared_constant</span></a> {<a id="cf:56" class="idref" href="#cf:56"><span class="id" title="binder">cf</span></a>} (<a id="cb0630687a5a3dec7d46ec6926ccb84b" class="idref" href="#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) {<a id="90b456ece7c7b685ce0c32158ac74dc1" class="idref" href="#90b456ece7c7b685ce0c32158ac74dc1"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="variable">Σ</span></a>} <a id="cst:59" class="idref" href="#cst:59"><span class="id" title="binder">cst</span></a> <a id="decl:60" class="idref" href="#decl:60"><span class="id" title="binder">decl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constant"><span class="id" title="definition">S.declared_constant</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cst:59"><span class="id" title="variable">cst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:60"><span class="id" title="variable">decl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constant"><span class="id" title="definition">T.declared_constant</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cb0630687a5a3dec7d46ec6926ccb84b"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cst:59"><span class="id" title="variable">cst</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constant_body"><span class="id" title="definition">trans_constant_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:60"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constant_to_gen"><span class="id" title="lemma">declared_constant_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constant_from_gen"><span class="id" title="lemma">declared_constant_from_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>:<span class="id" title="var">H</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constant"><span class="id" title="definition">T.declared_constant</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constant_gen"><span class="id" title="definition">T.declared_constant_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constant"><span class="id" title="definition">S.declared_constant</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_constraintSet_in" class="idref" href="#trans_constraintSet_in"><span class="id" title="lemma">trans_constraintSet_in</span></a> <a id="x:61" class="idref" href="#x:61"><span class="id" title="binder">x</span></a> <a id="e4cd9633ec2d0ee09ebe5d497f8dd196" class="idref" href="#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="binder">Σ</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#ConstraintSet.In"><span class="id" title="definition">ConstraintSet.In</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:61"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_constraints"><span class="id" title="definition">S.global_ext_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#ConstraintSet.In"><span class="id" title="definition">ConstraintSet.In</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:61"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_constraints"><span class="id" title="definition">T.global_ext_constraints</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e4cd9633ec2d0ee09ebe5d497f8dd196"><span class="id" title="variable">Σ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_consistent_instance_ext" class="idref" href="#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a> {<a id="cf:63" class="idref" href="#cf:63"><span class="id" title="binder">cf</span></a>} <a id="cc2b65564304e5a54a9642e62d8a48fa" class="idref" href="#cc2b65564304e5a54a9642e62d8a48fa"><span class="id" title="binder">Σ</span></a> <a id="decl:65" class="idref" href="#decl:65"><span class="id" title="binder">decl</span></a> <a id="u:66" class="idref" href="#u:66"><span class="id" title="binder">u</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#consistent_instance_ext"><span class="id" title="definition">S.consistent_instance_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc2b65564304e5a54a9642e62d8a48fa"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:65"><span class="id" title="variable">decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:66"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#consistent_instance_ext"><span class="id" title="definition">T.consistent_instance_ext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc2b65564304e5a54a9642e62d8a48fa"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:65"><span class="id" title="variable">decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:66"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_declared_inductive" class="idref" href="#trans_declared_inductive"><span class="id" title="lemma">trans_declared_inductive</span></a> {<a id="cf:67" class="idref" href="#cf:67"><span class="id" title="binder">cf</span></a>} (<a id="8d0ba020def2f27826d5cbe2d613c0cf" class="idref" href="#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) {<a id="66a989a3488b39a7fb81d621c1565f60" class="idref" href="#66a989a3488b39a7fb81d621c1565f60"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="variable">Σ</span></a>} <a id="ind:70" class="idref" href="#ind:70"><span class="id" title="binder">ind</span></a> <a id="mdecl:71" class="idref" href="#mdecl:71"><span class="id" title="binder">mdecl</span></a> <a id="idecl:72" class="idref" href="#idecl:72"><span class="id" title="binder">idecl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_inductive"><span class="id" title="definition">S.declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:70"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:71"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:72"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_inductive"><span class="id" title="definition">T.declared_inductive</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d0ba020def2f27826d5cbe2d613c0cf"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:70"><span class="id" title="variable">ind</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:71"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:71"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:70"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:72"><span class="id" title="variable">idecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_inductive_to_gen"><span class="id" title="lemma">declared_inductive_to_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_inductive_from_gen"><span class="id" title="lemma">declared_inductive_from_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>:<span class="id" title="var">H</span>. <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_minductive"><span class="id" title="definition">T.declared_minductive</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_minductive_gen"><span class="id" title="definition">T.declared_minductive_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_minductive"><span class="id" title="definition">S.declared_minductive</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a> <span class="id" title="var">H0</span> /=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_declared_constructor" class="idref" href="#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> {<a id="cf:73" class="idref" href="#cf:73"><span class="id" title="binder">cf</span></a>} (<a id="0bb1b226b53b6455e93ad6a4d211d8ec" class="idref" href="#0bb1b226b53b6455e93ad6a4d211d8ec"><span class="id" title="binder">Σ</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>) {<a id="585ee31184b6a738d426576933f0141f" class="idref" href="#585ee31184b6a738d426576933f0141f"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0bb1b226b53b6455e93ad6a4d211d8ec"><span class="id" title="variable">Σ</span></a>} <a id="c:76" class="idref" href="#c:76"><span class="id" title="binder">c</span></a> <a id="mdecl:77" class="idref" href="#mdecl:77"><span class="id" title="binder">mdecl</span></a> <a id="idecl:78" class="idref" href="#idecl:78"><span class="id" title="binder">idecl</span></a> <a id="cdecl:79" class="idref" href="#cdecl:79"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ind:80" class="idref" href="#ind:80"><span class="id" title="binder">ind</span></a> := (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#fst"><span class="id" title="definition">fst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:76"><span class="id" title="variable">c</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constructor"><span class="id" title="definition">S.declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0bb1b226b53b6455e93ad6a4d211d8ec"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:76"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:77"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:78"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:79"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_constructor"><span class="id" title="definition">T.declared_constructor</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0bb1b226b53b6455e93ad6a4d211d8ec"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:76"><span class="id" title="variable">c</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:77"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:77"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:80"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:78"><span class="id" title="variable">idecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:80"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:77"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:79"><span class="id" title="variable">cdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ind</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_inductive"><span class="id" title="lemma">trans_declared_inductive</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_mkApps" class="idref" href="#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a id="t:81" class="idref" href="#t:81"><span class="id" title="binder">t</span></a> <a id="args:82" class="idref" href="#args:82"><span class="id" title="binder">args</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">PCUICAst.mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:81"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:82"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:81"><span class="id" title="variable">t</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:82"><span class="id" title="variable">args</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_decl_type" class="idref" href="#trans_decl_type"><span class="id" title="lemma">trans_decl_type</span></a> <a id="decl:83" class="idref" href="#decl:83"><span class="id" title="binder">decl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:83"><span class="id" title="variable">decl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:83"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_subst_comm" class="idref" href="#expand_lets_subst_comm"><span class="id" title="lemma">expand_lets_subst_comm</span></a> <a id="9f2f2171bb09ae89187003f4d4733ede" class="idref" href="#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="binder">Γ</span></a> <a id="k:85" class="idref" href="#k:85"><span class="id" title="binder">k</span></a> <a id="s:86" class="idref" href="#s:86"><span class="id" title="binder">s</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:86"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:85"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:86"><span class="id" title="variable">s</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:85"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRPrelude.html#44b19bd81f7a1388073ea8a65e6fa993"><span class="id" title="notation">=1</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:86"><span class="id" title="variable">s</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:85"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.Utils.MRPrelude.html#c90061783c20674b3a3a6b46d343da03"><span class="id" title="notation">∘</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9f2f2171bb09ae89187003f4d4733ede"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#subst_extended_subst"><span class="id" title="lemma">PCUICSigmaCalculus.subst_extended_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_subst"><span class="id" title="lemma">distr_subst</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#commut_lift_subst_rec"><span class="id" title="lemma">commut_lift_subst_rec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_context_subst_context" class="idref" href="#subst_context_subst_context"><span class="id" title="lemma">subst_context_subst_context</span></a> <a id="s:87" class="idref" href="#s:87"><span class="id" title="binder">s</span></a> <a id="k:88" class="idref" href="#k:88"><span class="id" title="binder">k</span></a> <a id="s':89" class="idref" href="#s':89"><span class="id" title="binder">s'</span></a> <a id="db027aca38788e2b507c990d428e4c0e" class="idref" href="#db027aca38788e2b507c990d428e4c0e"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:88"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':89"><span class="id" title="variable">s'</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#db027aca38788e2b507c990d428e4c0e"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:87"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:88"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':89"><span class="id" title="variable">s'</span></a>) 0 (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:87"><span class="id" title="variable">s</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:88"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':89"><span class="id" title="variable">s'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#db027aca38788e2b507c990d428e4c0e"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] <span class="id" title="var">Γ'</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_snoc"><span class="id" title="lemma">subst_context_snoc</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_decl"><span class="id" title="definition">subst_decl</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /=; <span class="id" title="tactic">f_equal</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">auto</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">len</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_subst_rec"><span class="id" title="lemma">distr_subst_rec</span></a>; <span class="id" title="var">lia_f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst" class="idref" href="#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <a id="p:91" class="idref" href="#p:91"><span class="id" title="binder">p</span></a> <a id="q:92" class="idref" href="#q:92"><span class="id" title="binder">q</span></a> <a id="xs:93" class="idref" href="#xs:93"><span class="id" title="binder">xs</span></a> <a id="k:94" class="idref" href="#k:94"><span class="id" title="binder">k</span></a> <a id="t:95" class="idref" href="#t:95"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:91"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:95"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:92"><span class="id" title="variable">q</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:93"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst"><span class="id" title="definition">S.subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:93"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:94"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:95"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst"><span class="id" title="definition">T.subst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:93"><span class="id" title="variable">xs</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:94"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:95"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onfvs</span>; <span class="id" title="var">revert</span> <span class="id" title="var">p</span> <span class="id" title="var">t</span> <span class="id" title="var">onfvs</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#term_on_free_vars_ind"><span class="id" title="lemma">term_on_free_vars_ind</span></a>; <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">cbn</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb"><span class="id" title="definition">Nat.leb</span></a>;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span>;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">q</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_forallb"><span class="id" title="lemma">nth_error_forallb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">b</span> //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> // <span class="id" title="var">H2</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> // <span class="id" title="var">H2</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> // <span class="id" title="var">H2</span> // <span class="id" title="var">H4</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> // <span class="id" title="var">H2</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_predicate_k"><span class="id" title="definition">T.map_predicate_k</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate_k"><span class="id" title="definition">map_predicate_k</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">b</span> //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span> //. <span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context_length"><span class="id" title="lemma">map_context_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H3</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X3</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hctx</span> <span class="id" title="var">ihctx</span> <span class="id" title="var">hb</span> <span class="id" title="var">ihb</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_branch_k"><span class="id" title="definition">T.map_branch_k</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> /= <span class="id" title="var">ihb</span> //. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ihb</span> // /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>))) <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> ((<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">pred</span>))) 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">pred</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>))). 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_subst_comm"><span class="id" title="lemma">expand_lets_subst_comm</span></a>. <span class="id" title="tactic">f_equal</span>. 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context_subst_context"><span class="id" title="lemma">subst_context_subst_context</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>; <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">b</span> //. <span class="id" title="var">solve_all</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#closed_ctx_subst"><span class="id" title="lemma">PCUICSpine.closed_ctx_subst</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedP_mon"><span class="id" title="lemma">closedP_mon</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span> //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>, <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">toAll</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">a</span> //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">b1</span> //. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">toAll</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">a</span> //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">b</span> //. <span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">b</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_ctx" class="idref" href="#trans_subst_ctx"><span class="id" title="lemma">trans_subst_ctx</span></a> (<a id="8390bcd372144a00bd1845dbd75d2a34" class="idref" href="#8390bcd372144a00bd1845dbd75d2a34"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="xs:97" class="idref" href="#xs:97"><span class="id" title="binder">xs</span></a> <a id="k:98" class="idref" href="#k:98"><span class="id" title="binder">k</span></a> <a id="t:99" class="idref" href="#t:99"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:97"><span class="id" title="variable">xs</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8390bcd372144a00bd1845dbd75d2a34"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:99"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8390bcd372144a00bd1845dbd75d2a34"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:97"><span class="id" title="variable">xs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst"><span class="id" title="definition">S.subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:97"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:98"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:99"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst"><span class="id" title="definition">T.subst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:97"><span class="id" title="variable">xs</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:98"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:99"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ont</span> <span class="id" title="var">onxs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst10" class="idref" href="#trans_subst10"><span class="id" title="lemma">trans_subst10</span></a> <a id="u:100" class="idref" href="#u:100"><span class="id" title="binder">u</span></a> <a id="p:101" class="idref" href="#p:101"><span class="id" title="binder">p</span></a> <a id="q:102" class="idref" href="#q:102"><span class="id" title="binder">q</span></a> <a id="B:103" class="idref" href="#B:103"><span class="id" title="binder">B</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:101"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:103"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:102"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:100"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst1"><span class="id" title="definition">S.subst1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:100"><span class="id" title="variable">u</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:103"><span class="id" title="variable">B</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst10"><span class="id" title="abbreviation">T.subst10</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:100"><span class="id" title="variable">u</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:103"><span class="id" title="variable">B</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst1"><span class="id" title="definition">S.subst1</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">onB</span> <span class="id" title="var">onu</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">onu</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_instance" class="idref" href="#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a> <a id="u:104" class="idref" href="#u:104"><span class="id" title="binder">u</span></a> <a id="t:105" class="idref" href="#t:105"><span class="id" title="binder">t</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:104"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:105"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:104"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:105"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">u</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#term_forall_list_ind"><span class="id" title="lemma">PCUICInduction.term_forall_list_ind</span></a>;<span class="id" title="var">cbn</span>;<span class="id" title="tactic">auto</span>;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_map"><span class="id" title="lemma">map_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>, <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> /=. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? []. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_expand_lets</span></a> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_subst_context"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_subst_context</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> [<span class="id" title="var">_@</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>]<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">rewrite</span> [<span class="id" title="var">_@</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>] <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#compose_map_decl"><span class="id" title="lemma">compose_map_decl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_two"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_two</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> [<span class="id" title="var">_@</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>]<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#tFixProp"><span class="id" title="definition">tFixProp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#tFixProp"><span class="id" title="definition">tFixProp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">autorewrite</span> <span class="id" title="keyword">with</span> <span class="id" title="var">map</span>. <span class="id" title="var">solve_all_one</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_instance_ctx" class="idref" href="#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> <a id="b3c7ccaae8c465e07e25793f53653087" class="idref" href="#b3c7ccaae8c465e07e25793f53653087"><span class="id" title="binder">Γ</span></a> <a id="u:107" class="idref" href="#u:107"><span class="id" title="binder">u</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b3c7ccaae8c465e07e25793f53653087"><span class="id" title="variable">Γ@</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:107"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b3c7ccaae8c465e07e25793f53653087"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:107"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_instance_context"><span class="id" title="instance">SE.subst_instance_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_instance_context"><span class="id" title="instance">subst_instance_context</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /=; <span class="id" title="tactic">f_equal</span>; <span class="id" title="var">cbn</span>;<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cst_type" class="idref" href="#trans_cst_type"><span class="id" title="lemma">trans_cst_type</span></a> <a id="decl:108" class="idref" href="#decl:108"><span class="id" title="binder">decl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cst_type"><span class="id" title="projection">SE.cst_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:108"><span class="id" title="variable">decl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cst_type"><span class="id" title="projection">cst_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constant_body"><span class="id" title="definition">trans_constant_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:108"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ind_type" class="idref" href="#trans_ind_type"><span class="id" title="lemma">trans_ind_type</span></a> <a id="mdecl:109" class="idref" href="#mdecl:109"><span class="id" title="binder">mdecl</span></a> <a id="i:110" class="idref" href="#i:110"><span class="id" title="binder">i</span></a> <a id="idecl:111" class="idref" href="#idecl:111"><span class="id" title="binder">idecl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind_type"><span class="id" title="projection">SE.ind_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:111"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_type"><span class="id" title="projection">ind_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:109"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:110"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:111"><span class="id" title="variable">idecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_dtype" class="idref" href="#trans_dtype"><span class="id" title="lemma">trans_dtype</span></a> <a id="decl:112" class="idref" href="#decl:112"><span class="id" title="binder">decl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:112"><span class="id" title="variable">decl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_def"><span class="id" title="definition">trans_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:112"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_dbody" class="idref" href="#trans_dbody"><span class="id" title="lemma">trans_dbody</span></a> <a id="decl:113" class="idref" href="#decl:113"><span class="id" title="binder">decl</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:113"><span class="id" title="variable">decl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_def"><span class="id" title="definition">trans_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:113"><span class="id" title="variable">decl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_inds" class="idref" href="#trans_inds"><span class="id" title="lemma">trans_inds</span></a> <a id="ind:114" class="idref" href="#ind:114"><span class="id" title="binder">ind</span></a> <a id="u:115" class="idref" href="#u:115"><span class="id" title="binder">u</span></a> <a id="mdecl:116" class="idref" href="#mdecl:116"><span class="id" title="binder">mdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">PCUICAst.inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:114"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:115"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind_bodies"><span class="id" title="projection">SE.ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:116"><span class="id" title="variable">mdecl</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:114"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:115"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:116"><span class="id" title="variable">mdecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inds_spec"><span class="id" title="lemma">PCUICCases.inds_spec</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inds_spec"><span class="id" title="lemma">inds_spec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_mapi"><span class="id" title="lemma">map_mapi</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_mapi"><span class="id" title="lemma">mapi_mapi</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_ext"><span class="id" title="lemma">mapi_ext</span></a> ⇒ <span class="id" title="var">n</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_declared_projection" class="idref" href="#trans_declared_projection"><span class="id" title="lemma">trans_declared_projection</span></a> {<a id="cf:117" class="idref" href="#cf:117"><span class="id" title="binder">cf</span></a>} <a id="e45305f10276415d21877ab43bec03cf" class="idref" href="#e45305f10276415d21877ab43bec03cf"><span class="id" title="binder">Σ</span></a> {<a id="c39f0168a266b154a11dc9b0674694ce" class="idref" href="#c39f0168a266b154a11dc9b0674694ce"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e45305f10276415d21877ab43bec03cf"><span class="id" title="variable">Σ</span></a>} <a id="p:120" class="idref" href="#p:120"><span class="id" title="binder">p</span></a> <a id="mdecl:121" class="idref" href="#mdecl:121"><span class="id" title="binder">mdecl</span></a> <a id="idecl:122" class="idref" href="#idecl:122"><span class="id" title="binder">idecl</span></a> <a id="cdecl:123" class="idref" href="#cdecl:123"><span class="id" title="binder">cdecl</span></a> <a id="pdecl:124" class="idref" href="#pdecl:124"><span class="id" title="binder">pdecl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ind:125" class="idref" href="#ind:125"><span class="id" title="binder">ind</span></a> := (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:120"><span class="id" title="variable">p</span></a>.(<a class="idref" href="MetaRocq.Common.Kernames.html#proj_ind"><span class="id" title="projection">proj_ind</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_projection"><span class="id" title="definition">S.declared_projection</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e45305f10276415d21877ab43bec03cf"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:120"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:121"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:122"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:123"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pdecl:124"><span class="id" title="variable">pdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_projection"><span class="id" title="definition">T.declared_projection</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e45305f10276415d21877ab43bec03cf"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:120"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:121"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:121"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:125"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:122"><span class="id" title="variable">idecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:125"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:121"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:123"><span class="id" title="variable">cdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_projection_body"><span class="id" title="definition">trans_projection_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pdecl:124"><span class="id" title="variable">pdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ind</span> []. <span class="id" title="tactic">split</span>; [|<span class="id" title="tactic">split</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">pdecl</span>, <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">mdecl</span>;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="inv_opt_monad" class="idref" href="#inv_opt_monad"><span class="id" title="lemma">inv_opt_monad</span></a> {<a id="X:126" class="idref" href="#X:126"><span class="id" title="binder">X</span></a> <a id="Y:127" class="idref" href="#Y:127"><span class="id" title="binder">Y</span></a> <a id="Z:128" class="idref" href="#Z:128"><span class="id" title="binder">Z</span></a>} (<a id="f:129" class="idref" href="#f:129"><span class="id" title="binder">f</span></a>:<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#X:126"><span class="id" title="variable">X</span></a>) (<a id="g:130" class="idref" href="#g:130"><span class="id" title="binder">g</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#X:126"><span class="id" title="variable">X</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Y:127"><span class="id" title="variable">Y</span></a>) (<a id="h:131" class="idref" href="#h:131"><span class="id" title="binder">h</span></a>:<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#X:126"><span class="id" title="variable">X</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Y:127"><span class="id" title="variable">Y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Z:128"><span class="id" title="variable">Z</span></a>) <a id="c:132" class="idref" href="#c:132"><span class="id" title="binder">c</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a id="x:133" class="idref" href="#x:133"><span class="id" title="binder">x</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:129"><span class="id" title="variable">f</span></a><a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;<a id="y:134" class="idref" href="#y:134"><span class="id" title="binder">y</span></a> <a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">&lt;-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:130"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:133"><span class="id" title="variable">x</span></a><a class="idref" href="MetaRocq.Utils.monad_utils.html#8af26cd2ebe96eaae34c9438ab910a63"><span class="id" title="notation">;;</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#h:131"><span class="id" title="variable">h</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:133"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:134"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:132"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="a:135" class="idref" href="#a:135"><span class="id" title="binder">a</span></a> <a id="b:136" class="idref" href="#b:136"><span class="id" title="binder">b</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:129"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:135"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:130"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:135"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:136"><span class="id" title="variable">b</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#h:131"><span class="id" title="variable">h</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:135"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:136"><span class="id" title="variable">b</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:132"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">f</span> <span class="id" title="var">eqn</span>: ?;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">g</span> <span class="id" title="var">x</span>) <span class="id" title="var">eqn</span>: ?;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *;<span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;<span class="id" title="var">eassumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_destr_arity" class="idref" href="#trans_destr_arity"><span class="id" title="lemma">trans_destr_arity</span></a> <a id="x:137" class="idref" href="#x:137"><span class="id" title="binder">x</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:137"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:140" class="idref" href="#pat:140"><span class="id" title="binder">(</span></a><a id="xs:139" class="idref" href="#xs:139"><span class="id" title="binder"><span id="pat:140" class="id">xs</span></span></a><a id="pat:140" class="idref" href="#pat:140"><span class="id" title="binder">,</span></a><a id="u:138" class="idref" href="#u:138"><span class="id" title="binder"><span id="pat:140" class="id">u</span></span></a><a id="pat:140" class="idref" href="#pat:140"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:139"><span class="id" title="variable">xs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:138"><span class="id" title="variable">u</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:137"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> <span class="id" title="var">xs</span> := (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a>). <span class="id" title="tactic">unfold</span> <span class="id" title="var">xs</span> <span class="id" title="tactic">at</span> 1.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <span class="id" title="var">xs</span>) <span class="id" title="tactic">at</span> 1 <span class="id" title="tactic">by</span> (<span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>). <span class="id" title="var">clearbody</span> <span class="id" title="var">xs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="var">xs</span> |- *;<span class="id" title="var">cbn</span>;<span class="id" title="tactic">trivial</span>;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHx2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> &lt;- <span class="id" title="var">IHx3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_mkProd_or_LetIn" class="idref" href="#trans_mkProd_or_LetIn"><span class="id" title="lemma">trans_mkProd_or_LetIn</span></a> <a id="a:141" class="idref" href="#a:141"><span class="id" title="binder">a</span></a> <a id="t:142" class="idref" href="#t:142"><span class="id" title="binder">t</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mkProd_or_LetIn"><span class="id" title="definition">SE.mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:141"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:142"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.mkProd_or_LetIn"><span class="id" title="definition">mkProd_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:141"><span class="id" title="variable">a</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:142"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [? [] ?];<span class="id" title="var">cbn</span>;<span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_it_mkProd_or_LetIn" class="idref" href="#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a> <a id="xs:143" class="idref" href="#xs:143"><span class="id" title="binder">xs</span></a> <a id="t:144" class="idref" href="#t:144"><span class="id" title="binder">t</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#it_mkProd_or_LetIn"><span class="id" title="definition">SE.it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:143"><span class="id" title="variable">xs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:144"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#xs:143"><span class="id" title="variable">xs</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:144"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">xs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span> |- *;<span class="id" title="tactic">simpl</span>;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHxs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkProd_or_LetIn"><span class="id" title="lemma">trans_mkProd_or_LetIn</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_nth" class="idref" href="#trans_nth"><span class="id" title="lemma">trans_nth</span></a> <a id="n:145" class="idref" href="#n:145"><span class="id" title="binder">n</span></a> <a id="l:146" class="idref" href="#l:146"><span class="id" title="binder">l</span></a> <a id="x:147" class="idref" href="#x:147"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:145"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:146"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:147"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#nth"><span class="id" title="definition">nth</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:145"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:146"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:147"><span class="id" title="variable">x</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">congruence</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_isLambda" class="idref" href="#trans_isLambda"><span class="id" title="lemma">trans_isLambda</span></a> <a id="t:148" class="idref" href="#t:148"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isLambda"><span class="id" title="definition">T.isLambda</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:148"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isLambda"><span class="id" title="definition">S.isLambda</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:148"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="var">cbnr</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_unfold_fix" class="idref" href="#trans_unfold_fix"><span class="id" title="lemma">trans_unfold_fix</span></a> <a id="p:149" class="idref" href="#p:149"><span class="id" title="binder">p</span></a> <a id="mfix:150" class="idref" href="#mfix:150"><span class="id" title="binder">mfix</span></a> <a id="idx:151" class="idref" href="#idx:151"><span class="id" title="binder">idx</span></a> <a id="narg:152" class="idref" href="#narg:152"><span class="id" title="binder">narg</span></a> <a id="fn:153" class="idref" href="#fn:153"><span class="id" title="binder">fn</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:149"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:150"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:151"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_fix"><span class="id" title="definition">unfold_fix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:150"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:151"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:152"><span class="id" title="variable">narg</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:153"><span class="id" title="variable">fn</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_fix"><span class="id" title="definition">unfold_fix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:150"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:151"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:152"><span class="id" title="variable">narg</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:153"><span class="id" title="variable">fn</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_fix"><span class="id" title="definition">unfold_fix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdef</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onfvs</span> [= &lt;- &lt;-]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">p</span>) <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_forallb"><span class="id" title="lemma">nth_error_forallb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onfvs</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">onfvs</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_fix_subst"><span class="id" title="lemma">on_free_vars_fix_subst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">idx</span>). <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hdef</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#fix_subst"><span class="id" title="definition">fix_subst</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">onfvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">mfix</span> <span class="id" title="tactic">at</span> 1 2 3 5.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">mfix</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">mfix'</span> <span class="id" title="var">hfvs</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHmfix</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_unfold_cofix" class="idref" href="#trans_unfold_cofix"><span class="id" title="lemma">trans_unfold_cofix</span></a> <a id="p:154" class="idref" href="#p:154"><span class="id" title="binder">p</span></a> <a id="mfix:155" class="idref" href="#mfix:155"><span class="id" title="binder">mfix</span></a> <a id="idx:156" class="idref" href="#idx:156"><span class="id" title="binder">idx</span></a> <a id="narg:157" class="idref" href="#narg:157"><span class="id" title="binder">narg</span></a> <a id="fn:158" class="idref" href="#fn:158"><span class="id" title="binder">fn</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:154"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:155"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:156"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_cofix"><span class="id" title="definition">unfold_cofix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:155"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:156"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:157"><span class="id" title="variable">narg</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:158"><span class="id" title="variable">fn</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_cofix"><span class="id" title="definition">unfold_cofix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:155"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:156"><span class="id" title="variable">idx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:157"><span class="id" title="variable">narg</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:158"><span class="id" title="variable">fn</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#unfold_cofix"><span class="id" title="definition">unfold_cofix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hdef</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onfvs</span> [= &lt;- &lt;-]. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">p</span>) <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_forallb"><span class="id" title="lemma">nth_error_forallb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onfvs</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">onfvs</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_cofix_subst"><span class="id" title="lemma">on_free_vars_cofix_subst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">idx</span>). <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">Hdef</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cofix_subst"><span class="id" title="definition">cofix_subst</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">onfvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <span class="id" title="var">mfix</span> <span class="id" title="tactic">at</span> 1 2 3 5.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">mfix</span>; <span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">mfix'</span> <span class="id" title="var">hfvs</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHmfix</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_is_constructor" class="idref" href="#trans_is_constructor"><span class="id" title="lemma">trans_is_constructor</span></a>:<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="args:159" class="idref" href="#args:159"><span class="id" title="binder">args</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#term"><span class="id" title="inductive">S.term</span></a>) (<a id="narg:160" class="idref" href="#narg:160"><span class="id" title="binder">narg</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#is_constructor"><span class="id" title="definition">is_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:160"><span class="id" title="variable">narg</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:159"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#is_constructor"><span class="id" title="definition">is_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#narg:160"><span class="id" title="variable">narg</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:159"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">args</span> <span class="id" title="var">narg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#is_constructor"><span class="id" title="definition">is_constructor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> //. <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#isConstruct_app"><span class="id" title="definition">isConstruct_app</span></a>, <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_rec"><span class="id" title="definition">decompose_app_rec</span></a> <span class="id" title="var">t</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t0</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_rec_inv"><span class="id" title="lemma">decompose_app_rec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_rec_mkApps"><span class="id" title="lemma">decompose_app_rec_mkApps</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="refine_red1_r" class="idref" href="#refine_red1_r"><span class="id" title="lemma">refine_red1_r</span></a> <a id="dfdd3098104d36f1db39d747b93a3be1" class="idref" href="#dfdd3098104d36f1db39d747b93a3be1"><span class="id" title="binder">Σ</span></a> <a id="9694441249b61c326613811c16949842" class="idref" href="#9694441249b61c326613811c16949842"><span class="id" title="binder">Γ</span></a> <a id="t:163" class="idref" href="#t:163"><span class="id" title="binder">t</span></a> <a id="u:164" class="idref" href="#u:164"><span class="id" title="binder">u</span></a> <a id="u':165" class="idref" href="#u':165"><span class="id" title="binder">u'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:164"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u':165"><span class="id" title="variable">u'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfdd3098104d36f1db39d747b93a3be1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9694441249b61c326613811c16949842"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:164"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfdd3098104d36f1db39d747b93a3be1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9694441249b61c326613811c16949842"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:163"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u':165"><span class="id" title="variable">u'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="f1a9983fccb8f06779b2fc55ae6f41b0" class="idref" href="#f1a9983fccb8f06779b2fc55ae6f41b0"><span class="id" title="lemma">refine_red1_Γ</span></a> <a id="02e5d09468d184a097e8ccf600206b42" class="idref" href="#02e5d09468d184a097e8ccf600206b42"><span class="id" title="binder">Σ</span></a> <a id="47707ffe6e85ebfabd84f9b53dcaf992" class="idref" href="#47707ffe6e85ebfabd84f9b53dcaf992"><span class="id" title="binder">Γ</span></a> <a id="5d9a1215ced06139ee7e546e6c6639bd" class="idref" href="#5d9a1215ced06139ee7e546e6c6639bd"><span class="id" title="binder">Γ'</span></a> <a id="t:169" class="idref" href="#t:169"><span class="id" title="binder">t</span></a> <a id="u:170" class="idref" href="#u:170"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#47707ffe6e85ebfabd84f9b53dcaf992"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d9a1215ced06139ee7e546e6c6639bd"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02e5d09468d184a097e8ccf600206b42"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#47707ffe6e85ebfabd84f9b53dcaf992"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:169"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:170"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02e5d09468d184a097e8ccf600206b42"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d9a1215ced06139ee7e546e6c6639bd"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:169"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:170"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">trivial</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="forallb_mapi_ext" class="idref" href="#forallb_mapi_ext"><span class="id" title="lemma">forallb_mapi_ext</span></a> {<a id="A:171" class="idref" href="#A:171"><span class="id" title="binder">A</span></a> <a id="B:172" class="idref" href="#B:172"><span class="id" title="binder">B</span></a>} (<a id="p:173" class="idref" href="#p:173"><span class="id" title="binder">p</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:171"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bool"><span class="id" title="inductive">bool</span></a>) (<a id="l:174" class="idref" href="#l:174"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:171"><span class="id" title="variable">A</span></a>) {<a id="f:175" class="idref" href="#f:175"><span class="id" title="binder">f</span></a> <a id="g:176" class="idref" href="#g:176"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:171"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:172"><span class="id" title="variable">B</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:173"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:174"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:177" class="idref" href="#i:177"><span class="id" title="binder">i</span></a> <a id="x:178" class="idref" href="#x:178"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:173"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:178"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:175"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:177"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:178"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:176"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:177"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:178"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:175"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:174"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:176"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:174"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>; <span class="id" title="tactic">generalize</span> 0. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">n</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">pa</span> <span class="id" title="var">pl</span> <span class="id" title="var">hf</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">hf</span> //. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_fix_context" class="idref" href="#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> <a id="p:179" class="idref" href="#p:179"><span class="id" title="binder">p</span></a> <a id="mfix:180" class="idref" href="#mfix:180"><span class="id" title="binder">mfix</span></a> <a id="idx:181" class="idref" href="#idx:181"><span class="id" title="binder">idx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:179"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:180"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:181"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_context"><span class="id" title="definition">SE.fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:180"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:180"><span class="id" title="variable">mfix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_mapi"><span class="id" title="lemma">map_mapi</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onfvs</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_map"><span class="id" title="lemma">mapi_map</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#forallb_mapi_ext"><span class="id" title="lemma">forallb_mapi_ext</span></a>; <span class="id" title="var">tea</span> ⇒ <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">hx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">hx</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_decl" class="idref" href="#trans_subst_decl"><span class="id" title="lemma">trans_subst_decl</span></a> <a id="p:182" class="idref" href="#p:182"><span class="id" title="binder">p</span></a> <a id="q:183" class="idref" href="#q:183"><span class="id" title="binder">q</span></a> <a id="s:184" class="idref" href="#s:184"><span class="id" title="binder">s</span></a> <a id="k:185" class="idref" href="#k:185"><span class="id" title="binder">k</span></a> <a id="d:186" class="idref" href="#d:186"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:182"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:183"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:186"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_decl"><span class="id" title="definition">SE.subst_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:184"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:185"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:186"><span class="id" title="variable">d</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_decl"><span class="id" title="definition">subst_decl</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:184"><span class="id" title="variable">s</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:185"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:186"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_decl"><span class="id" title="definition">subst_decl</span></a> /= /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ons</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">q</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ond</span> ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">q</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ond</span> ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ons</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">q</span> <span class="id" title="var">p</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_context" class="idref" href="#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> <a id="p:187" class="idref" href="#p:187"><span class="id" title="binder">p</span></a> <a id="q:188" class="idref" href="#q:188"><span class="id" title="binder">q</span></a> <a id="s:189" class="idref" href="#s:189"><span class="id" title="binder">s</span></a> <a id="k:190" class="idref" href="#k:190"><span class="id" title="binder">k</span></a> <a id="ede4299ba3da3e1cc3357798d78c8645" class="idref" href="#ede4299ba3da3e1cc3357798d78c8645"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:187"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ede4299ba3da3e1cc3357798d78c8645"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:188"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:189"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context"><span class="id" title="definition">SE.subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:189"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:190"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ede4299ba3da3e1cc3357798d78c8645"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:189"><span class="id" title="variable">s</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:190"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ede4299ba3da3e1cc3357798d78c8645"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">d</span> <span class="id" title="var">Γ</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_snoc"><span class="id" title="lemma">subst_context_snoc</span></a> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onΓ</span> <span class="id" title="var">ond</span> <span class="id" title="var">ons</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_decl"><span class="id" title="lemma">trans_subst_decl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context"><span class="id" title="definition">app_context</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_lift_decl" class="idref" href="#trans_lift_decl"><span class="id" title="lemma">trans_lift_decl</span></a> <a id="p:192" class="idref" href="#p:192"><span class="id" title="binder">p</span></a> <a id="n:193" class="idref" href="#n:193"><span class="id" title="binder">n</span></a> <a id="k:194" class="idref" href="#k:194"><span class="id" title="binder">k</span></a> <a id="d:195" class="idref" href="#d:195"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:192"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:195"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_decl"><span class="id" title="definition">SE.lift_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:193"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:194"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:195"><span class="id" title="variable">d</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_decl"><span class="id" title="definition">lift_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:193"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:194"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:195"><span class="id" title="variable">d</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_decl"><span class="id" title="definition">lift_decl</span></a> /= /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ond</span> ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ond</span> ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">p</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_lift_context" class="idref" href="#trans_lift_context"><span class="id" title="lemma">trans_lift_context</span></a> <a id="p:196" class="idref" href="#p:196"><span class="id" title="binder">p</span></a> <a id="n:197" class="idref" href="#n:197"><span class="id" title="binder">n</span></a> <a id="k:198" class="idref" href="#k:198"><span class="id" title="binder">k</span></a> <a id="76c4b0292dca32d04f813338d8b3cc72" class="idref" href="#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:196"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_context"><span class="id" title="definition">SE.lift_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:197"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:198"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:197"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:198"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76c4b0292dca32d04f813338d8b3cc72"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">d</span>]; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_context_snoc"><span class="id" title="lemma">lift_context_snoc</span></a> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">onΓ</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_decl"><span class="id" title="lemma">trans_lift_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">p</span>)) //. <span class="id" title="var">len</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_smash_context" class="idref" href="#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <a id="p:200" class="idref" href="#p:200"><span class="id" title="binder">p</span></a> <a id="494ee1ad18291cf26f6424432125caa8" class="idref" href="#494ee1ad18291cf26f6424432125caa8"><span class="id" title="binder">Γ</span></a> <a id="788a31649f3eaaf49bc9643027f6db3d" class="idref" href="#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:200"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#494ee1ad18291cf26f6424432125caa8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:200"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#494ee1ad18291cf26f6424432125caa8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#494ee1ad18291cf26f6424432125caa8"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#788a31649f3eaaf49bc9643027f6db3d"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>, <span class="id" title="var">Γ</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onΓ</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> [] <span class="id" title="var">onΔ</span> <span class="id" title="var">ona</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHΔ</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context0"><span class="id" title="lemma">on_free_vars_ctx_subst_context0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ona</span> ⇒ [] /= → //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">p</span>)) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ona</span> ⇒ [] /= → //; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHΔ</span> <span class="id" title="var">p</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ona</span> ⇒ [] <span class="id" title="var">_</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_map" class="idref" href="#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> <a id="ctx:203" class="idref" href="#ctx:203"><span class="id" title="binder">ctx</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:203"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions"><span class="id" title="definition">SE.context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:203"><span class="id" title="variable">ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] <span class="id" title="var">ctx</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ctx_k_eq" class="idref" href="#on_free_vars_ctx_k_eq"><span class="id" title="lemma">on_free_vars_ctx_k_eq</span></a> <a id="p:204" class="idref" href="#p:204"><span class="id" title="binder">p</span></a> <a id="n:205" class="idref" href="#n:205"><span class="id" title="binder">n</span></a> <a id="2a8cf6d089ac10dd7be69b56b732374d" class="idref" href="#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_k"><span class="id" title="definition">on_free_vars_ctx_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:204"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:205"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:205"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:204"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a8cf6d089ac10dd7be69b56b732374d"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_k"><span class="id" title="definition">on_free_vars_ctx_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_shift"><span class="id" title="lemma">alli_shift</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_ext"><span class="id" title="lemma">alli_ext</span></a>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_extended_subst" class="idref" href="#trans_extended_subst"><span class="id" title="lemma">trans_extended_subst</span></a> <a id="p:207" class="idref" href="#p:207"><span class="id" title="binder">p</span></a> <a id="b7ad4894d1c67bc3f47eb41c22ad4d6b" class="idref" href="#b7ad4894d1c67bc3f47eb41c22ad4d6b"><span class="id" title="binder">Γ</span></a> <a id="n:209" class="idref" href="#n:209"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:207"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b7ad4894d1c67bc3f47eb41c22ad4d6b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b7ad4894d1c67bc3f47eb41c22ad4d6b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:209"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b7ad4894d1c67bc3f47eb41c22ad4d6b"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:209"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">p</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">onΓ</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onb</span> <span class="id" title="var">onty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_extended_subst"><span class="id" title="lemma">on_free_vars_extended_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_k_eq"><span class="id" title="lemma">on_free_vars_ctx_k_eq</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">pi</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nat_compare_specs</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">instantiate</span> (1 := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_lift"><span class="id" title="lemma">on_free_vars_lift</span></a>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">onb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">revgoals</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">onb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHΓ</span> <span class="id" title="var">p</span>) //. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onΓ</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_expand_lets_k" class="idref" href="#trans_expand_lets_k"><span class="id" title="lemma">trans_expand_lets_k</span></a> <a id="p:210" class="idref" href="#p:210"><span class="id" title="binder">p</span></a> <a id="dcc71771dbbab30de93aa8a879cf7dbb" class="idref" href="#dcc71771dbbab30de93aa8a879cf7dbb"><span class="id" title="binder">Γ</span></a> <a id="k:212" class="idref" href="#k:212"><span class="id" title="binder">k</span></a> <a id="T:213" class="idref" href="#T:213"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:210"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcc71771dbbab30de93aa8a879cf7dbb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcc71771dbbab30de93aa8a879cf7dbb"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:210"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:213"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k"><span class="id" title="definition">SE.expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcc71771dbbab30de93aa8a879cf7dbb"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:212"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:213"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcc71771dbbab30de93aa8a879cf7dbb"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:212"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:213"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k"><span class="id" title="definition">SE.expand_lets_k</span></a> ⇒ <span class="id" title="var">onΓ</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_extended_subst"><span class="id" title="lemma">on_free_vars_extended_subst</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_k_eq"><span class="id" title="lemma">on_free_vars_ctx_k_eq</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">onΓ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_lift"><span class="id" title="lemma">on_free_vars_lift</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span>) ⇒ //. 2:<span class="id" title="tactic">exact</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_extended_subst"><span class="id" title="lemma">trans_extended_subst</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_expand_lets" class="idref" href="#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> <a id="p:214" class="idref" href="#p:214"><span class="id" title="binder">p</span></a> <a id="28c45abaa76414f8959c23cb3a19ee26" class="idref" href="#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="binder">Γ</span></a> <a id="T:216" class="idref" href="#T:216"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:214"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:214"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:216"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:216"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#28c45abaa76414f8959c23cb3a19ee26"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:216"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onΓ</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets"><span class="id" title="definition">SE.expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k"><span class="id" title="definition">SE.expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_k"><span class="id" title="lemma">trans_expand_lets_k</span></a> <span class="id" title="var">p</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_expand_lets_map" class="idref" href="#trans_expand_lets_map"><span class="id" title="lemma">trans_expand_lets_map</span></a> <a id="p:217" class="idref" href="#p:217"><span class="id" title="binder">p</span></a> <a id="b049477b434d1524f13e35137a161630" class="idref" href="#b049477b434d1524f13e35137a161630"><span class="id" title="binder">Γ</span></a> <a id="T:219" class="idref" href="#T:219"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:217"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b049477b434d1524f13e35137a161630"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b049477b434d1524f13e35137a161630"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:217"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:219"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b049477b434d1524f13e35137a161630"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:219"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b049477b434d1524f13e35137a161630"><span class="id" title="variable">Γ</span></a>)) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:219"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onΓ</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onT</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> <span class="id" title="var">p</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="alpha_eq_trans" class="idref" href="#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a> {<a id="9b61ac88ea3088d6ba37ecfdf5a1a1c8" class="idref" href="#9b61ac88ea3088d6ba37ecfdf5a1a1c8"><span class="id" title="binder">Γ</span></a> <a id="5f09906f78485ef9771cb96ecf96be8c" class="idref" href="#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="binder">Δ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9b61ac88ea3088d6ba37ecfdf5a1a1c8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9b61ac88ea3088d6ba37ecfdf5a1a1c8"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5f09906f78485ef9771cb96ecf96be8c"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_impl"><span class="id" title="lemma">All2_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> []; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="wt" class="idref" href="#wt"><span class="id" title="definition">wt</span></a> {<a id="cf:222" class="idref" href="#cf:222"><span class="id" title="binder">cf</span></a>} <a id="040392d02029c4b11f0a5052d1a2cc1b" class="idref" href="#040392d02029c4b11f0a5052d1a2cc1b"><span class="id" title="binder">Σ</span></a> <a id="59bee43f66c481ca6ade2b332094044e" class="idref" href="#59bee43f66c481ca6ade2b332094044e"><span class="id" title="binder">Γ</span></a> <a id="t:225" class="idref" href="#t:225"><span class="id" title="binder">t</span></a> := <a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="T:226" class="idref" href="#T:226"><span class="id" title="binder">T</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#040392d02029c4b11f0a5052d1a2cc1b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#59bee43f66c481ca6ade2b332094044e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:225"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:226"><span class="id" title="variable">T</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isType_wt" class="idref" href="#isType_wt"><span class="id" title="lemma">isType_wt</span></a> {<a id="cf:227" class="idref" href="#cf:227"><span class="id" title="binder">cf</span></a>} {<a id="4777383971b98f432d32d2aebb274914" class="idref" href="#4777383971b98f432d32d2aebb274914"><span class="id" title="binder">Σ</span></a> <a id="9ad2b50a24cb26b00905e5d872037c4c" class="idref" href="#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="binder">Γ</span></a> <a id="T:230" class="idref" href="#T:230"><span class="id" title="binder">T</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4777383971b98f432d32d2aebb274914"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:230"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4777383971b98f432d32d2aebb274914"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9ad2b50a24cb26b00905e5d872037c4c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:230"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">hs</span> &amp; <span class="id" title="var">_</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">PCUICAst.tSort</span></a> <span class="id" title="var">s</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType_wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">&gt;-&gt;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">wt</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_wf_local" class="idref" href="#wt_wf_local"><span class="id" title="lemma">wt_wf_local</span></a> {<a id="cf:231" class="idref" href="#cf:231"><span class="id" title="binder">cf</span></a>} {<a id="25d4a4e1ff9e4bc0ce3937ee94e865bf" class="idref" href="#25d4a4e1ff9e4bc0ce3937ee94e865bf"><span class="id" title="binder">Σ</span></a>} {<a id="33aa1b7369ef98131122670f184cc21f" class="idref" href="#33aa1b7369ef98131122670f184cc21f"><span class="id" title="binder">Γ</span></a> <a id="t:234" class="idref" href="#t:234"><span class="id" title="binder">t</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#25d4a4e1ff9e4bc0ce3937ee94e865bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#33aa1b7369ef98131122670f184cc21f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:234"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#25d4a4e1ff9e4bc0ce3937ee94e865bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#33aa1b7369ef98131122670f184cc21f"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">hs</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Coercion</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_wf_local"><span class="id" title="lemma">wt_wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_wf_local"><span class="id" title="lemma">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_wf_local"><span class="id" title="lemma">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_wf_local"><span class="id" title="lemma">&gt;-&gt;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_wf_local"><span class="id" title="lemma">All_local_env</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_red" class="idref" href="#wt_red"><span class="id" title="lemma">wt_red</span></a> {<a id="cf:235" class="idref" href="#cf:235"><span class="id" title="binder">cf</span></a>} {<a id="793c4565b869a2f872db694b0162b014" class="idref" href="#793c4565b869a2f872db694b0162b014"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="1a10d16a518b12f35128d1bb3f9b10df" class="idref" href="#1a10d16a518b12f35128d1bb3f9b10df"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#793c4565b869a2f872db694b0162b014"><span class="id" title="variable">Σ</span></a>} {<a id="b75393e59bada921235dc0a1e3ae355a" class="idref" href="#b75393e59bada921235dc0a1e3ae355a"><span class="id" title="binder">Γ</span></a> <a id="t:239" class="idref" href="#t:239"><span class="id" title="binder">t</span></a> <a id="u:240" class="idref" href="#u:240"><span class="id" title="binder">u</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#793c4565b869a2f872db694b0162b014"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b75393e59bada921235dc0a1e3ae355a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:239"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#793c4565b869a2f872db694b0162b014"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b75393e59bada921235dc0a1e3ae355a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:239"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:240"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#793c4565b869a2f872db694b0162b014"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b75393e59bada921235dc0a1e3ae355a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:240"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">hs</span>] <span class="id" title="var">r</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#subject_reduction"><span class="id" title="lemma">subject_reduction</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wtsub" class="idref" href="#wtsub"><span class="id" title="section">wtsub</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wtsub.cf" class="idref" href="#wtsub.cf"><span class="id" title="variable">cf</span></a>} {<a id="5bdce1f78b3a897e1fc9da7fb2b2f345" class="idref" href="#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="3d685fba5466afa6a9a9ee9ce395817c" class="idref" href="#3d685fba5466afa6a9a9ee9ce395817c"><span class="id" title="variable">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#22337bb881c42df2da37d2d05d2544db"><span class="id" title="variable">Σ</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_subterm" class="idref" href="#wt_subterm"><span class="id" title="definition">wt_subterm</span></a> <a id="106fc6ce7472546bbf9056f996d95905" class="idref" href="#106fc6ce7472546bbf9056f996d95905"><span class="id" title="binder">Γ</span></a> (<a id="t:245" class="idref" href="#t:245"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>) : <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="wt:246" class="idref" href="#wt:246"><span class="id" title="binder">wt</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:245"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tLambda"><span class="id" title="constructor">tLambda</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">A</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProd"><span class="id" title="constructor">tProd</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">A</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) <span class="id" title="var">B</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tLetIn"><span class="id" title="constructor">tLetIn</span></a> <span class="id" title="var">na</span> <span class="id" title="var">b</span> <span class="id" title="var">ty</span> <span class="id" title="var">b'</span> ⇒ <a class="idref" href="MetaRocq.Utils.MRProd.html#bd8134d210bd52bab4e4b61c65bf150a"><span class="id" title="notation">[×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">b</span><a class="idref" href="MetaRocq.Utils.MRProd.html#bd8134d210bd52bab4e4b61c65bf150a"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">ty</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#bd8134d210bd52bab4e4b61c65bf150a"><span class="id" title="notation">&amp;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vdef"><span class="id" title="definition">vdef</span></a> <span class="id" title="var">na</span> <span class="id" title="var">b</span> <span class="id" title="var">ty</span>) <span class="id" title="var">b'</span><a class="idref" href="MetaRocq.Utils.MRProd.html#bd8134d210bd52bab4e4b61c65bf150a"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tApp"><span class="id" title="constructor">tApp</span></a> <span class="id" title="var">f</span> <span class="id" title="var">a</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">f</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">a</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">ci</span> <span class="id" title="var">p</span> <span class="id" title="var">c</span> <span class="id" title="var">brs</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a>) <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="mdecl:248" class="idref" href="#mdecl:248"><span class="id" title="binder">mdecl</span></a> <a id="idecl:249" class="idref" href="#idecl:249"><span class="id" title="binder">idecl</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">[×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:249"><span class="id" title="variable">idecl</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#consistent_instance_ext"><span class="id" title="definition">consistent_instance_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">PCUICEnvironment.ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">PCUICAst.puinst</span></a> <span class="id" title="var">p</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:249"><span class="id" title="variable">idecl</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">PCUICCases.ind_predicate_context</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:249"><span class="id" title="variable">idecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">PCUICAst.pcontext</span></a> <span class="id" title="var">p</span>)<a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_local_rel"><span class="id" title="definition">wf_local_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>) <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">pcontext</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">@[</span></a><span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#spine_subst"><span class="id" title="record">PCUICSpine.spine_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">PCUICAst.pparams</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">PCUICAst.pparams</span></a> <span class="id" title="var">p</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">PCUICEnvironment.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">PCUICEnvironment.ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">PCUICAst.puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">PCUICCases.case_predicate_context</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:249"><span class="id" title="variable">idecl</span></a> <span class="id" title="var">p</span>) <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#preturn"><span class="id" title="projection">preturn</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">c</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> (<span class="id" title="keyword">fun</span> <a id="i:250" class="idref" href="#i:250"><span class="id" title="binder">i</span></a> <a id="cdecl:251" class="idref" href="#cdecl:251"><span class="id" title="binder">cdecl</span></a> <a id="br:252" class="idref" href="#br:252"><span class="id" title="binder">br</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">[×</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:251"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:251"><span class="id" title="variable">cdecl</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_local_rel"><span class="id" title="definition">wf_local_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">@[</span></a><span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">PCUICCases.case_branch_context</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:251"><span class="id" title="variable">cdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="var">p</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>) <a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">&amp;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">PCUICCases.case_branch_context</span></a> <span class="id" title="var">ci</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:248"><span class="id" title="variable">mdecl</span></a> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:251"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:252"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#5acdc49a53cb0c88d730a6161981a83f"><span class="id" title="notation">]</span></a>) 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:249"><span class="id" title="variable">idecl</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_ctors"><span class="id" title="projection">ind_ctors</span></a>) <span class="id" title="var">brs</span><a class="idref" href="MetaRocq.Utils.MRProd.html#3ecbe522f45f61aa06ccb27f24307be2"><span class="id" title="notation">]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tProj"><span class="id" title="constructor">tProj</span></a> <span class="id" title="var">p</span> <span class="id" title="var">c</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">c</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span> | <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and5P"><span class="id" title="lemma">⇒</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<span class="id" title="keyword">fun</span> <a id="d:253" class="idref" href="#d:253"><span class="id" title="binder"><span id="d:254" class="id">d</span></span></a> =<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and4P"><span class="id" title="lemma">&gt;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:253"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dtype"><span class="id" title="projection">dtype</span></a>) <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <span class="id" title="var">mfix</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:253"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#dbody"><span class="id" title="projection">dbody</span></a>)) <span class="id" title="var">mfix</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tEvar"><span class="id" title="constructor">tEvar</span></a> <span class="id" title="var">_</span> <span class="id" title="var">l</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <span class="id" title="var">i</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tPrim"><span class="id" title="constructor">tPrim</span></a> <span class="id" title="var">p</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#primitive_typing_hyps"><span class="id" title="inductive">primitive_typing_hyps</span></a> (<span class="id" title="keyword">fun</span> <a id="909d71ef3eb6d1f9583fd04358b814cb" class="idref" href="#909d71ef3eb6d1f9583fd04358b814cb"><span class="id" title="binder">Σ</span></a> <a id="960babd034b3c95a2d35ab2b43180f96" class="idref" href="#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="binder">Γ</span></a> <a id="t:257" class="idref" href="#t:257"><span class="id" title="binder">t</span></a> <a id="T:258" class="idref" href="#T:258"><span class="id" title="binder">T</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt:246"><span class="id" title="variable">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#960babd034b3c95a2d35ab2b43180f96"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:257"><span class="id" title="variable">t</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#106fc6ce7472546bbf9056f996d95905"><span class="id" title="variable">Γ</span></a> <span class="id" title="var">p</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICGeneration.html#"><span class="id" title="module">PCUICGeneration</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#"><span class="id" title="module">PCUICInversion</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="spine_subst_wt" class="idref" href="#spine_subst_wt"><span class="id" title="lemma">spine_subst_wt</span></a> <a id="cf4647f6852be2fb9d1b73c2322db9ec" class="idref" href="#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="binder">Γ</span></a> <a id="args:260" class="idref" href="#args:260"><span class="id" title="binder">args</span></a> <a id="inst:261" class="idref" href="#inst:261"><span class="id" title="binder">inst</span></a> <a id="c5f6c0a3831263fdd5ef7f39c01b961f" class="idref" href="#c5f6c0a3831263fdd5ef7f39c01b961f"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#spine_subst"><span class="id" title="record">PCUICSpine.spine_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:260"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#inst:261"><span class="id" title="variable">inst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c5f6c0a3831263fdd5ef7f39c01b961f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf4647f6852be2fb9d1b73c2322db9ec"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#inst:261"><span class="id" title="variable">inst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">clear</span> -<span class="id" title="var">inst_subslet</span> <span class="id" title="var">wfΣ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">inst_subslet</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="lift_wt_inv" class="idref" href="#lift_wt_inv"><span class="id" title="lemma">lift_wt_inv</span></a> {<a id="02151d678be8d7481bfac909123b53dd" class="idref" href="#02151d678be8d7481bfac909123b53dd"><span class="id" title="binder">Γ</span></a> <a id="j:264" class="idref" href="#j:264"><span class="id" title="binder">j</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02151d678be8d7481bfac909123b53dd"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#j:264"><span class="id" title="variable">j</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_wf_term"><span class="id" title="definition">lift_wf_term</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02151d678be8d7481bfac909123b53dd"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#j:264"><span class="id" title="variable">j</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (? &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. 1: <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#j_term"><span class="id" title="projection">j_term</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eexists</span>; <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wt_inv" class="idref" href="#wt_inv"><span class="id" title="lemma">wt_inv</span></a> {<a id="214c735a57de399eaff00b426a3790f8" class="idref" href="#214c735a57de399eaff00b426a3790f8"><span class="id" title="binder">Γ</span></a> <a id="t:266" class="idref" href="#t:266"><span class="id" title="binder">t</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5bdce1f78b3a897e1fc9da7fb2b2f345"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#214c735a57de399eaff00b426a3790f8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:266"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_subterm"><span class="id" title="definition">wt_subterm</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#214c735a57de399eaff00b426a3790f8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:266"><span class="id" title="variable">t</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> <span class="id" title="var">h</span>]; <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Evar"><span class="id" title="lemma">inversion_Evar</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Prod"><span class="id" title="lemma">inversion_Prod</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;<span class="id" title="var">h1</span>&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_wt_inv"><span class="id" title="lemma">lift_wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">tas</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Lambda"><span class="id" title="lemma">inversion_Lambda</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;<span class="id" title="var">h1</span>&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_wt_inv"><span class="id" title="lemma">lift_wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="var">tas</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_LetIn"><span class="id" title="lemma">inversion_LetIn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;<span class="id" title="var">h1</span>&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_wt_inv"><span class="id" title="lemma">lift_wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h1</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">tas</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_App"><span class="id" title="lemma">inversion_App</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Case"><span class="id" title="lemma">inversion_Case</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">mdecl</span>&amp;<span class="id" title="var">idecl</span>&amp;<span class="id" title="var">decli</span>&amp;<span class="id" title="var">indices</span>&amp;[]&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">tty</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#validity"><span class="id" title="lemma">PCUICValidity.validity</span></a> <span class="id" title="var">scrut_ty</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#isType_mkApps_Ind_smash"><span class="id" title="lemma">PCUICInductiveInversion.isType_mkApps_Ind_smash</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tty</span> <span class="id" title="keyword">as</span> []; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate_length_pars"><span class="id" title="lemma">wf_predicate_length_pars</span></a> <span class="id" title="var">wf_pred</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#spine_subst_wt"><span class="id" title="lemma">spine_subst_wt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_rev_inv"><span class="id" title="lemma">All_rev_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">mdecl</span>, <span class="id" title="var">idecl</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_app_inv"><span class="id" title="definition">All_local_env_app_inv</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#wf_local_alpha"><span class="id" title="lemma">wf_local_alpha</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_app"><span class="id" title="lemma">All2_app</span></a>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_instance"><span class="id" title="lemma">alpha_eq_subst_instance</span></a>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_ind_predicate"><span class="id" title="lemma">wf_ind_predicate</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_All2"><span class="id" title="lemma">Forall2_All2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wf_brs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_All2_mix_left"><span class="id" title="lemma">All2i_All2_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">brs_ty</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_nth_hyp"><span class="id" title="lemma">All2i_nth_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">brs_ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_app_inv"><span class="id" title="definition">All_local_env_app_inv</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#wf_local_alpha"><span class="id" title="lemma">wf_local_alpha</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_app"><span class="id" title="lemma">All2_app</span></a>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_instance"><span class="id" title="lemma">alpha_eq_subst_instance</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#validity"><span class="id" title="lemma">validity</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">scrut_ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#wf_case_branch_type"><span class="id" title="lemma">wf_case_branch_type</span></a> <span class="id" title="var">ps</span> <span class="id" title="var">_</span> <span class="id" title="var">decli</span> <span class="id" title="var">scrut_ty</span> <span class="id" title="var">wf_pred</span> <span class="id" title="var">pret_ty</span> <span class="id" title="var">conv_pctx</span> <span class="id" title="var">i</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">X</span>. { <span class="id" title="tactic">split</span>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> <span class="id" title="var">a1</span>) <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_local_expand_lets"><span class="id" title="lemma">wf_local_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_subst_context"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_inds"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_inds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_id_mdecl"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_id_mdecl</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Proj"><span class="id" title="lemma">inversion_Proj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Fix"><span class="id" title="lemma">inversion_Fix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_prod"><span class="id" title="lemma">All_prod</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">a</span>). <span class="id" title="tactic">intros</span> ? (<span class="id" title="var">_</span> &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">a0</span>). <span class="id" title="tactic">intros</span> ? (<span class="id" title="var">h</span> &amp; <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_CoFix"><span class="id" title="lemma">inversion_CoFix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;?&amp;?&amp;?&amp;?&amp;?); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_prod"><span class="id" title="lemma">All_prod</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">a</span>). <span class="id" title="tactic">intros</span> ? (<span class="id" title="var">_</span> &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">a0</span>). <span class="id" title="tactic">intros</span> ? (<span class="id" title="var">h</span> &amp; <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">eexists</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Prim"><span class="id" title="lemma">inversion_Prim</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> (?&amp;?&amp;[]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">p0</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>. 1-2:<span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wtsub"><span class="id" title="section">wtsub</span></a>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">outtimes</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <span class="id" title="var">ih</span> : <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ih</span> <span class="id" title="keyword">as</span> [? ?]<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red1_cumul" class="idref" href="#red1_cumul"><span class="id" title="lemma">red1_cumul</span></a> {<a id="cf:267" class="idref" href="#cf:267"><span class="id" title="binder">cf</span></a>} (<a id="1c0e4273414546d17228b89ae2055cf6" class="idref" href="#1c0e4273414546d17228b89ae2055cf6"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="712547fc5951711867c35bbbb83e817a" class="idref" href="#712547fc5951711867c35bbbb83e817a"><span class="id" title="binder">Γ</span></a> <a id="T:270" class="idref" href="#T:270"><span class="id" title="binder">T</span></a> <a id="U:271" class="idref" href="#U:271"><span class="id" title="binder">U</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1c0e4273414546d17228b89ae2055cf6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#712547fc5951711867c35bbbb83e817a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:270"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:271"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1c0e4273414546d17228b89ae2055cf6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#712547fc5951711867c35bbbb83e817a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:270"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:271"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2; <span class="id" title="var">tea</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red1_cumul_inv" class="idref" href="#red1_cumul_inv"><span class="id" title="lemma">red1_cumul_inv</span></a> {<a id="cf:272" class="idref" href="#cf:272"><span class="id" title="binder">cf</span></a>} (<a id="f0c55a910be96e89e74c7f85c9a851d2" class="idref" href="#f0c55a910be96e89e74c7f85c9a851d2"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="bf69ad1ab87de471608679f4eb720d3a" class="idref" href="#bf69ad1ab87de471608679f4eb720d3a"><span class="id" title="binder">Γ</span></a> <a id="T:275" class="idref" href="#T:275"><span class="id" title="binder">T</span></a> <a id="U:276" class="idref" href="#U:276"><span class="id" title="binder">U</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0c55a910be96e89e74c7f85c9a851d2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bf69ad1ab87de471608679f4eb720d3a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:275"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:276"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0c55a910be96e89e74c7f85c9a851d2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bf69ad1ab87de471608679f4eb720d3a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:276"><span class="id" title="variable">U</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:275"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="var">tea</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="TTconv" class="idref" href="#TTconv"><span class="id" title="definition">TTconv</span></a> {<a id="cf:277" class="idref" href="#cf:277"><span class="id" title="binder">cf</span></a>} (<a id="2a3cde47c4ad7da712c9bc93ef5fbd78" class="idref" href="#2a3cde47c4ad7da712c9bc93ef5fbd78"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="d1a1282b755d50bc07dffad75c89a0fd" class="idref" href="#d1a1282b755d50bc07dffad75c89a0fd"><span class="id" title="binder">Γ</span></a> : <span class="id" title="definition">relation</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="inductive">clos_refl_sym_trans</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.CRelationClasses.html#relation_disjunction"><span class="id" title="definition">relation_disjunction</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a3cde47c4ad7da712c9bc93ef5fbd78"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d1a1282b755d50bc07dffad75c89a0fd"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term"><span class="id" title="abbreviation">eq_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a3cde47c4ad7da712c9bc93ef5fbd78"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_ext_constraints"><span class="id" title="definition">T.global_ext_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a3cde47c4ad7da712c9bc93ef5fbd78"><span class="id" title="variable">Σ</span></a>))).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red1_conv" class="idref" href="#red1_conv"><span class="id" title="lemma">red1_conv</span></a> {<a id="cf:280" class="idref" href="#cf:280"><span class="id" title="binder">cf</span></a>} (<a id="814c8bffd75ac79057558b0ba1e67cc7" class="idref" href="#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="c0622662ad6d4472c3deb12e49af5f71" class="idref" href="#c0622662ad6d4472c3deb12e49af5f71"><span class="id" title="binder">Γ</span></a> <a id="T:283" class="idref" href="#T:283"><span class="id" title="binder">T</span></a> <a id="U:284" class="idref" href="#U:284"><span class="id" title="binder">U</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c0622662ad6d4472c3deb12e49af5f71"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:283"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:284"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#TTconv"><span class="id" title="definition">TTconv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#814c8bffd75ac79057558b0ba1e67cc7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c0622662ad6d4472c3deb12e49af5f71"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:283"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:284"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_expand_lets_ctx" class="idref" href="#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a id="p:285" class="idref" href="#p:285"><span class="id" title="binder">p</span></a> <a id="q:286" class="idref" href="#q:286"><span class="id" title="binder">q</span></a> <a id="35493a41547c057322801923d5f36c5e" class="idref" href="#35493a41547c057322801923d5f36c5e"><span class="id" title="binder">Γ</span></a> <a id="1b6ae6272e381bd6f66533f8b4a1c1a4" class="idref" href="#1b6ae6272e381bd6f66533f8b4a1c1a4"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:285"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35493a41547c057322801923d5f36c5e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:286"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1b6ae6272e381bd6f66533f8b4a1c1a4"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_ctx"><span class="id" title="definition">SE.expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35493a41547c057322801923d5f36c5e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1b6ae6272e381bd6f66533f8b4a1c1a4"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35493a41547c057322801923d5f36c5e"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1b6ae6272e381bd6f66533f8b4a1c1a4"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onΓ</span> <span class="id" title="var">onΔ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_ctx"><span class="id" title="definition">SE.expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_ctx"><span class="id" title="definition">SE.expand_lets_k_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_extended_subst"><span class="id" title="lemma">trans_extended_subst</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_context"><span class="id" title="lemma">trans_lift_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_lift_context"><span class="id" title="lemma">on_free_vars_ctx_lift_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_extended_subst"><span class="id" title="lemma">on_free_vars_extended_subst</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_k_eq"><span class="id" title="lemma">on_free_vars_ctx_k_eq</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cstr_branch_context" class="idref" href="#trans_cstr_branch_context"><span class="id" title="lemma">trans_cstr_branch_context</span></a> <a id="p:289" class="idref" href="#p:289"><span class="id" title="binder">p</span></a> <a id="i:290" class="idref" href="#i:290"><span class="id" title="binder">i</span></a> <a id="ci:291" class="idref" href="#ci:291"><span class="id" title="binder">ci</span></a> <a id="mdecl:292" class="idref" href="#mdecl:292"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:293" class="idref" href="#cdecl:293"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:289"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:293"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:291"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:293"><span class="id" title="variable">cdecl</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:291"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:290"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:292"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:293"><span class="id" title="variable">cdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onpars</span> <span class="id" title="var">onargs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#expand_lets_smash_context"><span class="id" title="lemma">PCUICContexts.expand_lets_smash_context</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_subst_empty"><span class="id" title="lemma">PCUICContexts.smash_context_subst_empty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context"><span class="id" title="lemma">on_free_vars_ctx_subst_context</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">onargs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cstr_branch_context_inst" class="idref" href="#trans_cstr_branch_context_inst"><span class="id" title="lemma">trans_cstr_branch_context_inst</span></a> <a id="p:294" class="idref" href="#p:294"><span class="id" title="binder">p</span></a> <a id="i:295" class="idref" href="#i:295"><span class="id" title="binder">i</span></a> <a id="ci:296" class="idref" href="#ci:296"><span class="id" title="binder">ci</span></a> <a id="mdecl:297" class="idref" href="#mdecl:297"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:298" class="idref" href="#cdecl:298"><span class="id" title="binder">cdecl</span></a> <a id="u:299" class="idref" href="#u:299"><span class="id" title="binder">u</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:294"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:298"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:296"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:298"><span class="id" title="variable">cdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:299"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:296"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:295"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:297"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:298"><span class="id" title="variable">cdecl</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:299"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">onps</span> <span class="id" title="var">onargs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> -(<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_smash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cstr_branch_context"><span class="id" title="lemma">trans_cstr_branch_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">i</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#"><span class="id" title="library">PCUICContexts</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_names_smash_context" class="idref" href="#eq_names_smash_context"><span class="id" title="lemma">eq_names_smash_context</span></a> <a id="b101aa25c534ed367c9f95beb30141b5" class="idref" href="#b101aa25c534ed367c9f95beb30141b5"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:301" class="idref" href="#x:301"><span class="id" title="binder">x</span></a> <a id="y:302" class="idref" href="#y:302"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:301"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:302"><span class="id" title="variable">y</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b101aa25c534ed367c9f95beb30141b5"><span class="id" title="variable">Γ</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b101aa25c534ed367c9f95beb30141b5"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_assumption_context" class="idref" href="#trans_assumption_context"><span class="id" title="lemma">trans_assumption_context</span></a> <a id="dd125fcc2b8c954a6738e4c53da52f65" class="idref" href="#dd125fcc2b8c954a6738e4c53da52f65"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dd125fcc2b8c954a6738e4c53da52f65"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dd125fcc2b8c954a6738e4c53da52f65"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ass</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ass</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_inst_case_branch_context_gen" class="idref" href="#trans_inst_case_branch_context_gen"><span class="id" title="lemma">trans_inst_case_branch_context_gen</span></a> <a id="p:304" class="idref" href="#p:304"><span class="id" title="binder">p</span></a> <a id="q:305" class="idref" href="#q:305"><span class="id" title="binder">q</span></a> <a id="pred:306" class="idref" href="#pred:306"><span class="id" title="binder">pred</span></a> <a id="i:307" class="idref" href="#i:307"><span class="id" title="binder">i</span></a> <a id="br:308" class="idref" href="#br:308"><span class="id" title="binder">br</span></a> <a id="ci:309" class="idref" href="#ci:309"><span class="id" title="binder">ci</span></a> <a id="mdecl:310" class="idref" href="#mdecl:310"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:311" class="idref" href="#cdecl:311"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="pred':312" class="idref" href="#pred':312"><span class="id" title="binder">pred'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">PCUICAst.map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:306"><span class="id" title="variable">pred</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:311"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:308"><span class="id" title="variable">br</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:304"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:311"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:305"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:306"><span class="id" title="variable">pred</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:306"><span class="id" title="variable">pred</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:308"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:308"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">PCUICAst.bcontext</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:309"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:311"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="br':313" class="idref" href="#br':313"><span class="id" title="binder">br'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred':312"><span class="id" title="variable">pred'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:308"><span class="id" title="variable">br</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:309"><span class="id" title="variable">ci</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred':312"><span class="id" title="variable">pred'</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br':313"><span class="id" title="variable">br'</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:307"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:310"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:311"><span class="id" title="variable">cdecl</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:306"><span class="id" title="variable">pred</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:308"><span class="id" title="variable">br</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span> <span class="id" title="var">wfbr</span> <span class="id" title="var">onindpars</span> <span class="id" title="var">onargs</span> <span class="id" title="var">onpars</span> <span class="id" title="var">onbctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <span class="id" title="var">q</span>) //.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>. 2:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context"><span class="id" title="lemma">on_free_vars_ctx_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;3:<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i'</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> /=. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span>; <span class="id" title="tactic">auto</span> ⇒ //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">pred</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">q</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a> //. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_subst_empty"><span class="id" title="lemma">PCUICContexts.smash_context_subst_empty</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#map2_set_binder_name_alpha_eq"><span class="id" title="lemma">map2_set_binder_name_alpha_eq</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#eq_names_subst_context"><span class="id" title="lemma">eq_names_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_left"><span class="id" title="lemma">All2_map_left</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">pred</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_right"><span class="id" title="lemma">All2_map_right</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_smash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_right"><span class="id" title="lemma">All2_map_right</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_assumption_context"><span class="id" title="lemma">trans_assumption_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_assumption_context"><span class="id" title="lemma">smash_assumption_context</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_left"><span class="id" title="lemma">All2_map_left</span></a> ⇒ /=. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_refl"><span class="id" title="lemma">All2_refl</span></a>. <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eq_names_smash_context"><span class="id" title="lemma">eq_names_smash_context</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_context"><span class="id" title="lemma">alpha_eq_subst_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_instance"><span class="id" title="lemma">alpha_eq_subst_instance</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cstr_branch_context_inst"><span class="id" title="lemma">trans_cstr_branch_context_inst</span></a> <span class="id" title="var">p</span> <span class="id" title="var">i</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_smash_context"><span class="id" title="lemma">alpha_eq_smash_context</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">eq</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="alpha_eq_on_free_vars_ctx" class="idref" href="#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a> {<a id="p:314" class="idref" href="#p:314"><span class="id" title="binder">p</span></a> <a id="2d7a3e448b71da4bb4a7cde65a77d60e" class="idref" href="#2d7a3e448b71da4bb4a7cde65a77d60e"><span class="id" title="binder">Γ</span></a> <a id="b1780c14b2933d21d0bfac227333b466" class="idref" href="#b1780c14b2933d21d0bfac227333b466"><span class="id" title="binder">Δ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d7a3e448b71da4bb4a7cde65a77d60e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b1780c14b2933d21d0bfac227333b466"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:314"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d7a3e448b71da4bb4a7cde65a77d60e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:314"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b1780c14b2933d21d0bfac227333b466"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a>⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clx</span> <span class="id" title="var">cll</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">ws_decl</span></a>, <a class="idref" href="MetaRocq.Common.BasicAst.html#test_decl"><span class="id" title="definition">test_decl</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="var">X</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_inst_case_branch_context" class="idref" href="#trans_inst_case_branch_context"><span class="id" title="lemma">trans_inst_case_branch_context</span></a> {<a id="cf:317" class="idref" href="#cf:317"><span class="id" title="binder">cf</span></a>} {<a id="dcf172020ed7587215e246e9a220e523" class="idref" href="#dcf172020ed7587215e246e9a220e523"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="94ea6dbdf0c0010e9216ce579fbb3a76" class="idref" href="#94ea6dbdf0c0010e9216ce579fbb3a76"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcf172020ed7587215e246e9a220e523"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and5P"><span class="id" title="lemma">}</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and5P"><span class="id" title="lemma">{</span></a><a id="c0d490cf47be0c191d0ebda99525ce3d" class="idref" href="#c0d490cf47be0c191d0ebda99525ce3d"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>} {<a id="pred:321" class="idref" href="#pred:321"><span class="id" title="binder">pred</span></a> <a id="i:322" class="idref" href="#i:322"><span class="id" title="binder">i</span></a> <a id="br:323" class="idref" href="#br:323"><span class="id" title="binder">br</span></a> <a id="ci:324" class="idref" href="#ci:324"><span class="id" title="binder">ci</span></a> <a id="c:325" class="idref" href="#c:325"><span class="id" title="binder">c</span></a> <a id="mdecl:326" class="idref" href="#mdecl:326"><span class="id" title="binder">mdecl</span></a> <a id="idecl:327" class="idref" href="#idecl:327"><span class="id" title="binder">idecl</span></a> <a id="cdecl:328" class="idref" href="#cdecl:328"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="pred':329" class="idref" href="#pred':329"><span class="id" title="binder">pred'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">PCUICAst.map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:321"><span class="id" title="variable">pred</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="br':330" class="idref" href="#br':330"><span class="id" title="binder">br'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred':329"><span class="id" title="variable">pred'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:323"><span class="id" title="variable">br</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:326"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:327"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:321"><span class="id" title="variable">pred</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:328"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:323"><span class="id" title="variable">br</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dcf172020ed7587215e246e9a220e523"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:324"><span class="id" title="variable">ci</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:325"><span class="id" title="variable">c</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:326"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:327"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:328"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c0d490cf47be0c191d0ebda99525ce3d"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:321"><span class="id" title="variable">pred</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:323"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">PCUICAst.bcontext</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:324"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:326"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:328"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:324"><span class="id" title="variable">ci</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:326"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred':329"><span class="id" title="variable">pred'</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br':330"><span class="id" title="variable">br'</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:322"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:326"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:328"><span class="id" title="variable">cdecl</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pred:321"><span class="id" title="variable">pred</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:323"><span class="id" title="variable">br</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pred'</span> <span class="id" title="var">br'</span> <span class="id" title="var">wfp</span> <span class="id" title="var">wfbr</span> <span class="id" title="var">declc</span> <span class="id" title="var">onps</span> <span class="id" title="var">com</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inst_case_branch_context_gen"><span class="id" title="lemma">trans_inst_case_branch_context_gen</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closed_ctx_on_free_vars"><span class="id" title="lemma">closed_ctx_on_free_vars</span></a>; <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_params"><span class="id" title="lemma">declared_inductive_closed_params</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>; <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a>. <span class="id" title="tactic">symmetry</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">pred</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#closed_cstr_branch_context"><span class="id" title="lemma">closed_cstr_branch_context</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate_length_pars"><span class="id" title="lemma">wf_predicate_length_pars</span></a> <span class="id" title="var">wfp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_minductive_ind_npars"><span class="id" title="lemma">declared_minductive_ind_npars</span></a> <span class="id" title="var">declc</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#"><span class="id" title="library">PCUICSpine</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_reln" class="idref" href="#trans_reln"><span class="id" title="lemma">trans_reln</span></a> <a id="l:331" class="idref" href="#l:331"><span class="id" title="binder">l</span></a> <a id="p:332" class="idref" href="#p:332"><span class="id" title="binder">p</span></a> <a id="3b738d3c3e862ed23d2211f84304aeb6" class="idref" href="#3b738d3c3e862ed23d2211f84304aeb6"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#reln"><span class="id" title="definition">SE.reln</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:331"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:332"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3b738d3c3e862ed23d2211f84304aeb6"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.reln"><span class="id" title="definition">reln</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:331"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:332"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3b738d3c3e862ed23d2211f84304aeb6"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">as</span> [|[<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] <span class="id" title="var">Γ</span>] <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>, <span class="id" title="var">p</span> |- *; <span class="id" title="tactic">simpl</span>; [<span class="id" title="tactic">auto</span>..|].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHΓ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_to_extended_list" class="idref" href="#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a> <a id="86e59930b12a0702c03b78eb816bc0d9" class="idref" href="#86e59930b12a0702c03b78eb816bc0d9"><span class="id" title="binder">Γ</span></a> <a id="n:335" class="idref" href="#n:335"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#to_extended_list_k"><span class="id" title="definition">SE.to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#86e59930b12a0702c03b78eb816bc0d9"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:335"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#86e59930b12a0702c03b78eb816bc0d9"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:335"><span class="id" title="variable">n</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_reln"><span class="id" title="lemma">trans_reln</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ind_predicate_context" class="idref" href="#trans_ind_predicate_context"><span class="id" title="lemma">trans_ind_predicate_context</span></a> <a id="ci:336" class="idref" href="#ci:336"><span class="id" title="binder">ci</span></a> <a id="mdecl:337" class="idref" href="#mdecl:337"><span class="id" title="binder">mdecl</span></a> <a id="idecl:338" class="idref" href="#idecl:338"><span class="id" title="binder">idecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:337"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:337"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:338"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">PCUICCases.ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:336"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:337"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:338"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:336"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:337"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:337"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:336"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:338"><span class="id" title="variable">idecl</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">clpars</span> <span class="id" title="var">clindices</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">ind_predicate_context</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list"><span class="id" title="definition">to_extended_list</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ind_predicate_context_eq" class="idref" href="#trans_ind_predicate_context_eq"><span class="id" title="lemma">trans_ind_predicate_context_eq</span></a> <a id="p:339" class="idref" href="#p:339"><span class="id" title="binder">p</span></a> <a id="ci:340" class="idref" href="#ci:340"><span class="id" title="binder">ci</span></a> <a id="mdecl:341" class="idref" href="#mdecl:341"><span class="id" title="binder">mdecl</span></a> <a id="idecl:342" class="idref" href="#idecl:342"><span class="id" title="binder">idecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:341"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:341"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:342"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">PCUICAst.pcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:339"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">PCUICCases.ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:340"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:341"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:342"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="x:343" class="idref" href="#x:343"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#binder_annot"><span class="id" title="record">binder_annot</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a>) (<a id="y:344" class="idref" href="#y:344"><span class="id" title="binder">y</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:343"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:344"><span class="id" title="variable">y</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">PCUICAst.pcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:339"><span class="id" title="variable">p</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:340"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:341"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:341"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:340"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:342"><span class="id" title="variable">idecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">clpars</span> <span class="id" title="var">clindices</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_predicate_context"><span class="id" title="lemma">trans_ind_predicate_context</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_left"><span class="id" title="lemma">All2_map_left</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cstr_branch_context_eq" class="idref" href="#trans_cstr_branch_context_eq"><span class="id" title="lemma">trans_cstr_branch_context_eq</span></a> <a id="ci:345" class="idref" href="#ci:345"><span class="id" title="binder">ci</span></a> <a id="mdecl:346" class="idref" href="#mdecl:346"><span class="id" title="binder">mdecl</span></a> <a id="cdecl:347" class="idref" href="#cdecl:347"><span class="id" title="binder">cdecl</span></a> <a id="p:348" class="idref" href="#p:348"><span class="id" title="binder">p</span></a> <a id="i:349" class="idref" href="#i:349"><span class="id" title="binder">i</span></a> <a id="br:350" class="idref" href="#br:350"><span class="id" title="binder">br</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:347"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">PCUICAst.bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:350"><span class="id" title="variable">br</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">PCUICCases.cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:345"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:347"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:348"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:350"><span class="id" title="variable">br</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:345"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:349"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:346"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:347"><span class="id" title="variable">cdecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">clpars</span> <span class="id" title="var">clargs</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cstr_branch_context"><span class="id" title="lemma">trans_cstr_branch_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) //.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isass</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_assumption_context"><span class="id" title="lemma">smash_assumption_context</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>))) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_smash_context"><span class="id" title="lemma">alpha_eq_smash_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_smash_context"><span class="id" title="lemma">alpha_eq_smash_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_map2" class="idref" href="#map_map2"><span class="id" title="lemma">map_map2</span></a> {<a id="A:351" class="idref" href="#A:351"><span class="id" title="binder">A</span></a> <a id="B:352" class="idref" href="#B:352"><span class="id" title="binder">B</span></a> <a id="C:353" class="idref" href="#C:353"><span class="id" title="binder">C</span></a> <a id="D:354" class="idref" href="#D:354"><span class="id" title="binder">D</span></a>} (<a id="f:355" class="idref" href="#f:355"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:351"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:352"><span class="id" title="variable">B</span></a>) (<a id="g:356" class="idref" href="#g:356"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:353"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#D:354"><span class="id" title="variable">D</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:351"><span class="id" title="variable">A</span></a>) <a id="l:357" class="idref" href="#l:357"><span class="id" title="binder">l</span></a> <a id="l':358" class="idref" href="#l':358"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:355"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:356"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:357"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':358"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:359" class="idref" href="#x:359"><span class="id" title="binder">x</span></a> <a id="y:360" class="idref" href="#y:360"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:355"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:356"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:359"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:360"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:357"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':358"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_map_map" class="idref" href="#map2_map_map"><span class="id" title="lemma">map2_map_map</span></a> {<a id="A:361" class="idref" href="#A:361"><span class="id" title="binder">A</span></a> <a id="B:362" class="idref" href="#B:362"><span class="id" title="binder">B</span></a> <a id="C:363" class="idref" href="#C:363"><span class="id" title="binder">C</span></a> <a id="D:364" class="idref" href="#D:364"><span class="id" title="binder">D</span></a>} (<a id="f:365" class="idref" href="#f:365"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:361"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:362"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:363"><span class="id" title="variable">C</span></a>) (<a id="g:366" class="idref" href="#g:366"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#D:364"><span class="id" title="variable">D</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:362"><span class="id" title="variable">B</span></a>) <a id="l:367" class="idref" href="#l:367"><span class="id" title="binder">l</span></a> <a id="l':368" class="idref" href="#l':368"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:369" class="idref" href="#x:369"><span class="id" title="binder">x</span></a> <a id="y:370" class="idref" href="#y:370"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:365"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:369"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:366"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:370"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:367"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':368"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:365"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:367"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:366"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':368"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_set_binder" class="idref" href="#trans_set_binder"><span class="id" title="lemma">trans_set_binder</span></a> <a id="na:371" class="idref" href="#na:371"><span class="id" title="binder">na</span></a> <a id="y:372" class="idref" href="#y:372"><span class="id" title="binder">y</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">PCUICEnvironment.set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#na:371"><span class="id" title="variable">na</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:372"><span class="id" title="variable">y</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#na:371"><span class="id" title="variable">na</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:372"><span class="id" title="variable">y</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na'</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">Stdlib</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Classes.Morphisms.html#"><span class="id" title="library">Morphisms</span></a>.<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="map2_Proper" class="idref" href="#map2_Proper"><span class="id" title="instance">map2_Proper</span></a> {<a id="A:373" class="idref" href="#A:373"><span class="id" title="binder">A</span></a> <a id="B:374" class="idref" href="#B:374"><span class="id" title="binder">B</span></a> <a id="C:375" class="idref" href="#C:375"><span class="id" title="binder">C</span></a>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Morphisms.Proper</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:373"><span class="id" title="variable">A</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:374"><span class="id" title="variable">B</span></a> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:375"><span class="id" title="variable">C</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">Hfg</span> ? ? → ? ? →.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map2_ext"><span class="id" title="lemma">map2_ext</span></a>, <span class="id" title="var">Hfg</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_set_binder_name_eq" class="idref" href="#map2_set_binder_name_eq"><span class="id" title="lemma">map2_set_binder_name_eq</span></a> <a id="nas:376" class="idref" href="#nas:376"><span class="id" title="binder">nas</span></a> <a id="4f45f48e200ae4fb96ea46299c76791e" class="idref" href="#4f45f48e200ae4fb96ea46299c76791e"><span class="id" title="binder">Δ</span></a> <a id="f5f3f2140d1a1eaa178a97cecb807f92" class="idref" href="#f5f3f2140d1a1eaa178a97cecb807f92"><span class="id" title="binder">Δ'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4f45f48e200ae4fb96ea46299c76791e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f5f3f2140d1a1eaa178a97cecb807f92"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:376"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4f45f48e200ae4fb96ea46299c76791e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:376"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f5f3f2140d1a1eaa178a97cecb807f92"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">nas</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">nas</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHX</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">subst</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_binder_trans" class="idref" href="#eq_binder_trans"><span class="id" title="lemma">eq_binder_trans</span></a> (<a id="nas:379" class="idref" href="#nas:379"><span class="id" title="binder">nas</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="3fd275f5c4e178d89bcd9614e62a35c1" class="idref" href="#3fd275f5c4e178d89bcd9614e62a35c1"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">PCUICEnvironment.context</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:381" class="idref" href="#x:381"><span class="id" title="binder">x</span></a> <a id="y:382" class="idref" href="#y:382"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:381"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:382"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:379"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3fd275f5c4e178d89bcd9614e62a35c1"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:383" class="idref" href="#x:383"><span class="id" title="binder">x</span></a> <a id="y:384" class="idref" href="#y:384"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:383"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:384"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:379"><span class="id" title="variable">nas</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3fd275f5c4e178d89bcd9614e62a35c1"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_right"><span class="id" title="lemma">All2_map_right</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_impl"><span class="id" title="lemma">All2_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>; <span class="id" title="tactic">apply</span> <span class="id" title="var">H</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_local_set_binder" class="idref" href="#trans_local_set_binder"><span class="id" title="lemma">trans_local_set_binder</span></a> <a id="nas:385" class="idref" href="#nas:385"><span class="id" title="binder">nas</span></a> <a id="f1cc27ceacb888f76260bb398392933d" class="idref" href="#f1cc27ceacb888f76260bb398392933d"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">PCUICEnvironment.set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:385"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f1cc27ceacb888f76260bb398392933d"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:385"><span class="id" title="variable">nas</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f1cc27ceacb888f76260bb398392933d"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_map2"><span class="id" title="lemma">map_map2</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_set_binder"><span class="id" title="lemma">trans_set_binder</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map2_map_map"><span class="id" title="lemma">map2_map_map</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2_eq_binder_lift_context" class="idref" href="#All2_eq_binder_lift_context"><span class="id" title="lemma">All2_eq_binder_lift_context</span></a> (<a id="l:387" class="idref" href="#l:387"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#binder_annot"><span class="id" title="record">binder_annot</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a>)) <a id="n:388" class="idref" href="#n:388"><span class="id" title="binder">n</span></a> <a id="k:389" class="idref" href="#k:389"><span class="id" title="binder">k</span></a> (<a id="afe455686b2e85f8e8164be9ed14cd9c" class="idref" href="#afe455686b2e85f8e8164be9ed14cd9c"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">PCUICEnvironment.context</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:391" class="idref" href="#x:391"><span class="id" title="binder">x</span></a> <a id="y:392" class="idref" href="#y:392"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:391"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:392"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:387"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#afe455686b2e85f8e8164be9ed14cd9c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:393" class="idref" href="#x:393"><span class="id" title="binder">x</span></a> <a id="y:394" class="idref" href="#y:394"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:393"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:394"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:387"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">PCUICEnvironment.lift_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:388"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:389"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#afe455686b2e85f8e8164be9ed14cd9c"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_context_snoc"><span class="id" title="lemma">PCUICLiftSubst.lift_context_snoc</span></a> //; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2_eq_binder_expand_lets_ctx" class="idref" href="#All2_eq_binder_expand_lets_ctx"><span class="id" title="lemma">All2_eq_binder_expand_lets_ctx</span></a> (<a id="l:395" class="idref" href="#l:395"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#binder_annot"><span class="id" title="record">binder_annot</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#name"><span class="id" title="inductive">name</span></a>)) (<a id="1a7b49a1732db0712f5190b365cc1aec" class="idref" href="#1a7b49a1732db0712f5190b365cc1aec"><span class="id" title="binder">Δ</span></a> <a id="8c1cff6eee92851f7552765e854eba84" class="idref" href="#8c1cff6eee92851f7552765e854eba84"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">PCUICEnvironment.context</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:398" class="idref" href="#x:398"><span class="id" title="binder">x</span></a> <a id="y:399" class="idref" href="#y:399"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:398"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:399"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:395"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c1cff6eee92851f7552765e854eba84"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<span class="id" title="keyword">fun</span> <a id="x:400" class="idref" href="#x:400"><span class="id" title="binder">x</span></a> <a id="y:401" class="idref" href="#y:401"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:400"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:401"><span class="id" title="variable">y</span></a>.(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:395"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">PCUICEnvironment.expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a7b49a1732db0712f5190b365cc1aec"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c1cff6eee92851f7552765e854eba84"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#All2_eq_binder_subst_context"><span class="id" title="lemma">All2_eq_binder_subst_context</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All2_eq_binder_lift_context"><span class="id" title="lemma">All2_eq_binder_lift_context</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_local_set_binder_name_eq" class="idref" href="#trans_local_set_binder_name_eq"><span class="id" title="lemma">trans_local_set_binder_name_eq</span></a> <a id="nas:402" class="idref" href="#nas:402"><span class="id" title="binder">nas</span></a> <a id="975df62b1b9e7aa4f7094548b5d42643" class="idref" href="#975df62b1b9e7aa4f7094548b5d42643"><span class="id" title="binder">Γ</span></a> <a id="73bd942f9ba57c5d267fd3383f9d1bb3" class="idref" href="#73bd942f9ba57c5d267fd3383f9d1bb3"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#975df62b1b9e7aa4f7094548b5d42643"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73bd942f9ba57c5d267fd3383f9d1bb3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">PCUICEnvironment.set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:402"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#975df62b1b9e7aa4f7094548b5d42643"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">PCUICEnvironment.set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:402"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73bd942f9ba57c5d267fd3383f9d1bb3"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names_map2_set_binder_name_eq"><span class="id" title="lemma">eq_context_upto_names_map2_set_binder_name_eq</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map2_trans" class="idref" href="#map2_trans"><span class="id" title="lemma">map2_trans</span></a> <a id="l:405" class="idref" href="#l:405"><span class="id" title="binder">l</span></a> <a id="l':406" class="idref" href="#l':406"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="x:407" class="idref" href="#x:407"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="y:408" class="idref" href="#y:408"><span class="id" title="binder">y</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">PCUICEnvironment.context_decl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">PCUICEnvironment.set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:407"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:408"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:405"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':406"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> (<span class="id" title="keyword">fun</span> (<a id="x:409" class="idref" href="#x:409"><span class="id" title="binder">x</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="y:410" class="idref" href="#y:410"><span class="id" title="binder">y</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">PCUICEnvironment.context_decl</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:409"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:410"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:405"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':406"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map2_ext"><span class="id" title="lemma">map2_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">y</span>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closed_ctx_is_closed_context" class="idref" href="#closed_ctx_is_closed_context"><span class="id" title="lemma">closed_ctx_is_closed_context</span></a> <a id="94f2a4375c47f135e3ec5ade490692a3" class="idref" href="#94f2a4375c47f135e3ec5ade490692a3"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed_ctx"><span class="id" title="abbreviation">closed_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#94f2a4375c47f135e3ec5ade490692a3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#94f2a4375c47f135e3ec5ade490692a3"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">closed_ctx_is_closed_context</span> : <span class="id" title="var">pcuic</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">declared_inductive_closed_params</span> : <span class="id" title="var">pcuic</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closedn_ctx_on_free_vars" class="idref" href="#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a> <a id="n:412" class="idref" href="#n:412"><span class="id" title="binder">n</span></a> (<a id="4cc3298772d7450076a86a5267ad0df3" class="idref" href="#4cc3298772d7450076a86a5267ad0df3"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn_ctx"><span class="id" title="abbreviation">closedn_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:412"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4cc3298772d7450076a86a5267ad0df3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:412"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4cc3298772d7450076a86a5267ad0df3"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">closedn_ctx_on_free_vars</span> : <span class="id" title="var">pcuic</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="declared_inductive_closed_indices" class="idref" href="#declared_inductive_closed_indices"><span class="id" title="lemma">declared_inductive_closed_indices</span></a> {<a id="cf:414" class="idref" href="#cf:414"><span class="id" title="binder">cf</span></a>} {<a id="f330aa792ad4e8f5fdf1f36205d8b814" class="idref" href="#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>}<br/>
&nbsp;&nbsp;{<a id="59bd6f7329f0247e9b974a4e58b2e46a" class="idref" href="#59bd6f7329f0247e9b974a4e58b2e46a"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="variable">Σ</span></a>} <a id="ind:417" class="idref" href="#ind:417"><span class="id" title="binder">ind</span></a> <a id="mdecl:418" class="idref" href="#mdecl:418"><span class="id" title="binder">mdecl</span></a> <a id="idecl:419" class="idref" href="#idecl:419"><span class="id" title="binder">idecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f330aa792ad4e8f5fdf1f36205d8b814"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:417"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:418"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:419"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn_ctx"><span class="id" title="abbreviation">closedn_ctx</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:418"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:419"><span class="id" title="variable">idecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_pars_indices"><span class="id" title="lemma">declared_inductive_closed_pars_indices</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_ctx_app"><span class="id" title="lemma">closedn_ctx_app</span></a> /= ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">declared_inductive_closed_indices</span> : <span class="id" title="var">pcuic</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ind_predicate_context" class="idref" href="#on_free_vars_ind_predicate_context"><span class="id" title="lemma">on_free_vars_ind_predicate_context</span></a> {<a id="cf:420" class="idref" href="#cf:420"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="36013cbc3ef6602803ea984cc88ac610" class="idref" href="#36013cbc3ef6602803ea984cc88ac610"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="571e8f47feebd71e7a7605490b0a6832" class="idref" href="#571e8f47feebd71e7a7605490b0a6832"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#36013cbc3ef6602803ea984cc88ac610"><span class="id" title="variable">Σ</span></a>} {<a id="ind:423" class="idref" href="#ind:423"><span class="id" title="binder">ind</span></a> <a id="mdecl:424" class="idref" href="#mdecl:424"><span class="id" title="binder">mdecl</span></a> <a id="idecl:425" class="idref" href="#idecl:425"><span class="id" title="binder">idecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#36013cbc3ef6602803ea984cc88ac610"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:423"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:424"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:425"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:424"><span class="id" title="variable">mdecl</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:423"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:424"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:425"><span class="id" title="variable">idecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">decli</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">PCUICOnFreeVars.closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closed_ind_predicate_context"><span class="id" title="lemma">PCUICClosed.closed_ind_predicate_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_minductive_closed"><span class="id" title="lemma">PCUICClosedTyp.declared_minductive_closed</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> <span class="id" title="var">decli</span>)).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_case_predicate_context" class="idref" href="#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> {<a id="cf:426" class="idref" href="#cf:426"><span class="id" title="binder">cf</span></a>} {<a id="19a65a4b052e281bb9ccc652f6bb4b31" class="idref" href="#19a65a4b052e281bb9ccc652f6bb4b31"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>}<br/>
&nbsp;&nbsp;{<a id="a8e7063f56c32536edd9a5e7ca0670c3" class="idref" href="#a8e7063f56c32536edd9a5e7ca0670c3"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#19a65a4b052e281bb9ccc652f6bb4b31"><span class="id" title="variable">Σ</span></a>} {<a id="bbc8dc0cb6ec16e86396d2320ba50f91" class="idref" href="#bbc8dc0cb6ec16e86396d2320ba50f91"><span class="id" title="binder">Γ</span></a> <a id="ci:430" class="idref" href="#ci:430"><span class="id" title="binder">ci</span></a> <a id="mdecl:431" class="idref" href="#mdecl:431"><span class="id" title="binder">mdecl</span></a> <a id="idecl:432" class="idref" href="#idecl:432"><span class="id" title="binder">idecl</span></a> <a id="p:433" class="idref" href="#p:433"><span class="id" title="binder">p</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_inductive"><span class="id" title="definition">S.declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#19a65a4b052e281bb9ccc652f6bb4b31"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:430"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:432"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#consistent_instance_ext"><span class="id" title="definition">S.consistent_instance_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#19a65a4b052e281bb9ccc652f6bb4b31"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">PCUICEnvironment.ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">PCUICAst.puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="parctx:434" class="idref" href="#parctx:434"><span class="id" title="binder">parctx</span></a> := <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">PCUICEnvironment.ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">PCUICAst.puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#spine_subst"><span class="id" title="record">PCUICSpine.spine_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#19a65a4b052e281bb9ccc652f6bb4b31"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bbc8dc0cb6ec16e86396d2320ba50f91"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">PCUICAst.pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">PCUICAst.pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">PCUICEnvironment.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#parctx:434"><span class="id" title="variable">parctx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:432"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':435" class="idref" href="#p':435"><span class="id" title="binder">p'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:430"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:430"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:432"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p':435"><span class="id" title="variable">p'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">PCUICCases.case_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:430"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:431"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:432"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:433"><span class="id" title="variable">p</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">PCUICCases.case_predicate_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context_gen"><span class="id" title="definition">case_predicate_context_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context_gen"><span class="id" title="definition">PCUICCases.case_predicate_context_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_map2"><span class="id" title="lemma">map_map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map2_trans"><span class="id" title="lemma">map2_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#map2_map_r"><span class="id" title="lemma">PCUICUnivSubstitutionConv.map2_map_r</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">p'</span> /=. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#forget_types_map_context"><span class="id" title="lemma">forget_types_map_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#pre_case_predicate_context_gen"><span class="id" title="definition">pre_case_predicate_context_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#pre_case_predicate_context_gen"><span class="id" title="definition">PCUICCases.pre_case_predicate_context_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">PCUICCases.inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">mdecl</span>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ind_predicate_context"><span class="id" title="lemma">on_free_vars_ind_predicate_context</span></a> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#inst_subslet"><span class="id" title="projection">inst_subslet</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#subslet_open"><span class="id" title="lemma">subslet_open</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_predicate_context"><span class="id" title="lemma">trans_ind_predicate_context</span></a>; <span class="id" title="var">pcuic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="OnOne2All2i_OnOne2All" class="idref" href="#OnOne2All2i_OnOne2All"><span class="id" title="lemma">OnOne2All2i_OnOne2All</span></a> {<a id="A:436" class="idref" href="#A:436"><span class="id" title="binder">A</span></a> <a id="B:437" class="idref" href="#B:437"><span class="id" title="binder">B</span></a> : <span class="id" title="keyword">Type</span>} (<a id="l1:438" class="idref" href="#l1:438"><span class="id" title="binder">l1</span></a> <a id="l2:439" class="idref" href="#l2:439"><span class="id" title="binder">l2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a>) (<a id="l3:440" class="idref" href="#l3:440"><span class="id" title="binder">l3</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:437"><span class="id" title="variable">B</span></a>)<br/>
&nbsp;&nbsp;(<a id="R1:441" class="idref" href="#R1:441"><span class="id" title="binder">R1</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="R2:442" class="idref" href="#R2:442"><span class="id" title="binder">R2</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:437"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) (<a id="n:443" class="idref" href="#n:443"><span class="id" title="binder">n</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="R3:444" class="idref" href="#R3:444"><span class="id" title="binder">R3</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:437"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2"><span class="id" title="inductive">OnOne2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R1:441"><span class="id" title="variable">R1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l1:438"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l2:439"><span class="id" title="variable">l2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R2:442"><span class="id" title="variable">R2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:443"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l3:440"><span class="id" title="variable">l3</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l1:438"><span class="id" title="variable">l1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> (<a id="n0:445" class="idref" href="#n0:445"><span class="id" title="binder">n0</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<a id="x:446" class="idref" href="#x:446"><span class="id" title="binder">x</span></a> <a id="y:447" class="idref" href="#y:447"><span class="id" title="binder">y</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:436"><span class="id" title="variable">A</span></a>) (<a id="z:448" class="idref" href="#z:448"><span class="id" title="binder">z</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:437"><span class="id" title="variable">B</span></a>), <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R1:441"><span class="id" title="variable">R1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:446"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:447"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R2:442"><span class="id" title="variable">R2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n0:445"><span class="id" title="variable">n0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#z:448"><span class="id" title="variable">z</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:446"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R3:444"><span class="id" title="variable">R3</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#z:448"><span class="id" title="variable">z</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:446"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:447"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2All"><span class="id" title="inductive">OnOne2All</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R3:444"><span class="id" title="variable">R3</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l3:440"><span class="id" title="variable">l3</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l1:438"><span class="id" title="variable">l1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l2:439"><span class="id" title="variable">l2</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l3</span> |- *; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_length"><span class="id" title="lemma">All2i_length</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H'</span>. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_eq_binder_annot" class="idref" href="#trans_eq_binder_annot"><span class="id" title="lemma">trans_eq_binder_annot</span></a> (<a id="6552616fa39b717a1e3c55ad576eaf38" class="idref" href="#6552616fa39b717a1e3c55ad576eaf38"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) <a id="a9219ed7e5ee0c4c81efd5adfbb01d62" class="idref" href="#a9219ed7e5ee0c4c81efd5adfbb01d62"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> <a id="na:451" class="idref" href="#na:451"><span class="id" title="binder">na</span></a> <a id="decl:452" class="idref" href="#decl:452"><span class="id" title="binder">decl</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#na:451"><span class="id" title="variable">na</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:452"><span class="id" title="variable">decl</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6552616fa39b717a1e3c55ad576eaf38"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a9219ed7e5ee0c4c81efd5adfbb01d62"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#Forall2"><span class="id" title="inductive">Forall2</span></a> (<span class="id" title="keyword">fun</span> <a id="na:453" class="idref" href="#na:453"><span class="id" title="binder">na</span></a> <a id="decl:454" class="idref" href="#decl:454"><span class="id" title="binder">decl</span></a> ⇒ <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#na:453"><span class="id" title="variable">na</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decl:454"><span class="id" title="variable">decl</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6552616fa39b717a1e3c55ad576eaf38"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a9219ed7e5ee0c4c81efd5adfbb01d62"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_context_trans" class="idref" href="#map_context_trans"><span class="id" title="lemma">map_context_trans</span></a> <a id="7c28713cb82329e194002a6db7c34a62" class="idref" href="#7c28713cb82329e194002a6db7c34a62"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c28713cb82329e194002a6db7c34a62"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c28713cb82329e194002a6db7c34a62"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a>. <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_bcontext" class="idref" href="#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a> <a id="p:456" class="idref" href="#p:456"><span class="id" title="binder">p</span></a> <a id="br:457" class="idref" href="#br:457"><span class="id" title="binder">br</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:456"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:457"><span class="id" title="variable">br</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:457"><span class="id" title="variable">br</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_assumption_context"><span class="id" title="lemma">smash_assumption_context</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_bbody" class="idref" href="#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a> <a id="p:458" class="idref" href="#p:458"><span class="id" title="binder">p</span></a> <a id="br:459" class="idref" href="#br:459"><span class="id" title="binder">br</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:458"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:459"><span class="id" title="variable">br</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:458"><span class="id" title="variable">p</span></a>)) 0 <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:459"><span class="id" title="variable">br</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:458"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:459"><span class="id" title="variable">br</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_assumption_context"><span class="id" title="lemma">expand_lets_assumption_context</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_context"><span class="id" title="lemma">assumption_context_subst_context</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_instance"><span class="id" title="lemma">assumption_context_subst_instance</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="OnOne2All_map2_map_all" class="idref" href="#OnOne2All_map2_map_all"><span class="id" title="lemma">OnOne2All_map2_map_all</span></a> {<a id="A:460" class="idref" href="#A:460"><span class="id" title="binder">A</span></a> <a id="B:461" class="idref" href="#B:461"><span class="id" title="binder">B</span></a> <a id="I:462" class="idref" href="#I:462"><span class="id" title="binder">I</span></a> <a id="I':463" class="idref" href="#I':463"><span class="id" title="binder">I'</span></a>} {<a id="P:464" class="idref" href="#P:464"><span class="id" title="binder">P</span></a>} {<a id="i:465" class="idref" href="#i:465"><span class="id" title="binder">i</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#I:462"><span class="id" title="variable">I</span></a>} {<a id="l:466" class="idref" href="#l:466"><span class="id" title="binder">l</span></a> <a id="l':467" class="idref" href="#l':467"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:460"><span class="id" title="variable">A</span></a>} (<a id="g:468" class="idref" href="#g:468"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:461"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#I:462"><span class="id" title="variable">I</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#I':463"><span class="id" title="variable">I'</span></a>) (<a id="f:469" class="idref" href="#f:469"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:460"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:461"><span class="id" title="variable">B</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2All"><span class="id" title="inductive">OnOne2All</span></a> (<span class="id" title="keyword">fun</span> <a id="i:470" class="idref" href="#i:470"><span class="id" title="binder">i</span></a> <a id="x:471" class="idref" href="#x:471"><span class="id" title="binder">x</span></a> <a id="y:472" class="idref" href="#y:472"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:464"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:468"><span class="id" title="variable">g</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:471"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:470"><span class="id" title="variable">i</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:471"><span class="id" title="variable">x</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:472"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:465"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:466"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':467"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2All"><span class="id" title="inductive">OnOne2All</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:464"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:468"><span class="id" title="variable">g</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:466"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:465"><span class="id" title="variable">i</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:466"><span class="id" title="variable">l</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:469"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':467"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">congruence</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">assumption</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#map2_length"><span class="id" title="lemma">map2_length</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_on_free_vars" class="idref" href="#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> {<a id="cf:473" class="idref" href="#cf:473"><span class="id" title="binder">cf</span></a>} {<a id="c8728b44872dc223f6a93cb51c7e49a7" class="idref" href="#c8728b44872dc223f6a93cb51c7e49a7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="c0de781b98004b4c041c6e16c4b6301d" class="idref" href="#c0de781b98004b4c041c6e16c4b6301d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c8728b44872dc223f6a93cb51c7e49a7"><span class="id" title="variable">Σ</span></a>} {<a id="754c087e0915a93e37f778dd725516ef" class="idref" href="#754c087e0915a93e37f778dd725516ef"><span class="id" title="binder">Γ</span></a> <a id="t:477" class="idref" href="#t:477"><span class="id" title="binder">t</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c8728b44872dc223f6a93cb51c7e49a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#754c087e0915a93e37f778dd725516ef"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:477"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#754c087e0915a93e37f778dd725516ef"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:477"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> <span class="id" title="var">wt</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">fuse_shifts</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;[ <span class="id" title="var">H</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)) <span class="id" title="var">_</span>) |- <span class="id" title="var">_</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">tofvs</span> := <span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> [ <span class="id" title="var">H</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ] ⇒ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> <span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">inv_on_free_vars</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">fuse_shifts</span>.<br/>

<br/>
#[<span class="id" title="var">local</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Extern</span> 3 (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a> (<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>)) ⇒ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a> : <span class="id" title="var">pcuic</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="length_skipn_map" class="idref" href="#length_skipn_map"><span class="id" title="lemma">length_skipn_map</span></a> {<a id="A:478" class="idref" href="#A:478"><span class="id" title="binder">A</span></a> <a id="B:479" class="idref" href="#B:479"><span class="id" title="binder">B</span></a>} {<a id="n:480" class="idref" href="#n:480"><span class="id" title="binder">n</span></a>} {<a id="f:481" class="idref" href="#f:481"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:478"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:479"><span class="id" title="variable">B</span></a>} {<a id="l:482" class="idref" href="#l:482"><span class="id" title="binder">l</span></a>} : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:480"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:481"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:482"><span class="id" title="variable">l</span></a>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:480"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:482"><span class="id" title="variable">l</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_skipn"><span class="id" title="lemma">List.length_skipn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ctx_cstr_branch_context" class="idref" href="#on_free_vars_ctx_cstr_branch_context"><span class="id" title="lemma">on_free_vars_ctx_cstr_branch_context</span></a> {<a id="cf:483" class="idref" href="#cf:483"><span class="id" title="binder">cf</span></a>} {<a id="999ba247baa5dad2f6d1d58f9a90f0ca" class="idref" href="#999ba247baa5dad2f6d1d58f9a90f0ca"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="70f048802cac1594c92ae3e4528c4bd7" class="idref" href="#70f048802cac1594c92ae3e4528c4bd7"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999ba247baa5dad2f6d1d58f9a90f0ca"><span class="id" title="variable">Σ</span></a>} {<a id="c:486" class="idref" href="#c:486"><span class="id" title="binder">c</span></a> <a id="mdecl:487" class="idref" href="#mdecl:487"><span class="id" title="binder">mdecl</span></a> <a id="idecl:488" class="idref" href="#idecl:488"><span class="id" title="binder">idecl</span></a> <a id="cdecl:489" class="idref" href="#cdecl:489"><span class="id" title="binder">cdecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999ba247baa5dad2f6d1d58f9a90f0ca"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:486"><span class="id" title="variable">c</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:487"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:488"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:489"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:487"><span class="id" title="variable">mdecl</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:486"><span class="id" title="variable">c</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:487"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:489"><span class="id" title="variable">cdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICInstConv.html#closedn_ctx_cstr_branch_context"><span class="id" title="lemma">PCUICInstConv.closedn_ctx_cstr_branch_context</span></a> <span class="id" title="var">H</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="typing_spine_wt" class="idref" href="#typing_spine_wt"><span class="id" title="lemma">typing_spine_wt</span></a> {<a id="cf:490" class="idref" href="#cf:490"><span class="id" title="binder">cf</span></a>} {<a id="38298ad6e758e5d6f9ffc316b164fa84" class="idref" href="#38298ad6e758e5d6f9ffc316b164fa84"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="38da5f58bb8406b97235e6f25590062e" class="idref" href="#38da5f58bb8406b97235e6f25590062e"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#38298ad6e758e5d6f9ffc316b164fa84"><span class="id" title="variable">Σ</span></a>} {<a id="args:493" class="idref" href="#args:493"><span class="id" title="binder">args</span></a> <a id="2d0905c7802b043f25ff1bec917eb94f" class="idref" href="#2d0905c7802b043f25ff1bec917eb94f"><span class="id" title="binder">Γ</span></a> <a id="x2:495" class="idref" href="#x2:495"><span class="id" title="binder">x2</span></a> <a id="x3:496" class="idref" href="#x3:496"><span class="id" title="binder">x3</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine"><span class="id" title="inductive">typing_spine</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#38298ad6e758e5d6f9ffc316b164fa84"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d0905c7802b043f25ff1bec917eb94f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x2:495"><span class="id" title="variable">x2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:493"><span class="id" title="variable">args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x3:496"><span class="id" title="variable">x3</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#38298ad6e758e5d6f9ffc316b164fa84"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d0905c7802b043f25ff1bec917eb94f"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:493"><span class="id" title="variable">args</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">sp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">dependent</span> <span class="id" title="tactic">induction</span> <span class="id" title="var">sp</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_mkApps_inv" class="idref" href="#wt_mkApps_inv"><span class="id" title="lemma">wt_mkApps_inv</span></a> {<a id="cf:497" class="idref" href="#cf:497"><span class="id" title="binder">cf</span></a>} {<a id="84e3df7fcc5864ba6abc29c804f24eb3" class="idref" href="#84e3df7fcc5864ba6abc29c804f24eb3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="12ac0bc708f38b1e3df104d5d0bc07b4" class="idref" href="#12ac0bc708f38b1e3df104d5d0bc07b4"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e3df7fcc5864ba6abc29c804f24eb3"><span class="id" title="variable">Σ</span></a>} {<a id="98f71562a6b6e822f78917e3ba9ee793" class="idref" href="#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="binder">Γ</span></a> <a id="f:501" class="idref" href="#f:501"><span class="id" title="binder">f</span></a> <a id="args:502" class="idref" href="#args:502"><span class="id" title="binder">args</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e3df7fcc5864ba6abc29c804f24eb3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:501"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:502"><span class="id" title="variable">args</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e3df7fcc5864ba6abc29c804f24eb3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:501"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e3df7fcc5864ba6abc29c804f24eb3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#98f71562a6b6e822f78917e3ba9ee793"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:502"><span class="id" title="variable">args</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">ha</span> <span class="id" title="var">tapp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#inversion_mkApps"><span class="id" title="lemma">inversion_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">tapp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">ty</span> [<span class="id" title="var">tf</span> <span class="id" title="var">targs</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">∃</span> <span class="id" title="var">ty</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing_spine_wt"><span class="id" title="lemma">typing_spine_wt</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red_expand_lets" class="idref" href="#red_expand_lets"><span class="id" title="lemma">red_expand_lets</span></a> {<a id="cf:503" class="idref" href="#cf:503"><span class="id" title="binder">cf</span></a>} (<a id="bfb7c008f1ea8999b96ecf175882a4b7" class="idref" href="#bfb7c008f1ea8999b96ecf175882a4b7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="88b01790ee44f778897e427308b04569" class="idref" href="#88b01790ee44f778897e427308b04569"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bfb7c008f1ea8999b96ecf175882a4b7"><span class="id" title="variable">Σ</span></a>} <a id="b1477e2ccc08f64220235eab23ed8310" class="idref" href="#b1477e2ccc08f64220235eab23ed8310"><span class="id" title="binder">Γ</span></a> <a id="2746a865aaf39c205b3b9720c04da636" class="idref" href="#2746a865aaf39c205b3b9720c04da636"><span class="id" title="binder">Δ</span></a> <a id="t:508" class="idref" href="#t:508"><span class="id" title="binder">t</span></a> <a id="t':509" class="idref" href="#t':509"><span class="id" title="binder">t'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bfb7c008f1ea8999b96ecf175882a4b7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b1477e2ccc08f64220235eab23ed8310"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2746a865aaf39c205b3b9720c04da636"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:508"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⇝</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':509"><span class="id" title="variable">t'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bfb7c008f1ea8999b96ecf175882a4b7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b1477e2ccc08f64220235eab23ed8310"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2746a865aaf39c205b3b9720c04da636"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2746a865aaf39c205b3b9720c04da636"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:508"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⇝</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2746a865aaf39c205b3b9720c04da636"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':509"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">reds</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#untyped_closed_red_subst"><span class="id" title="lemma">untyped_closed_red_subst</span></a> (<span class="id" title="var">Γ</span> := <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">untyped_subslet_extended_subst</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span> ⇒ /=. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#foron_free_vars_extended_subst"><span class="id" title="lemma">foron_free_vars_extended_subst</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICAlpha.html#is_closed_context_app_right"><span class="id" title="lemma">PCUICAlpha.is_closed_context_app_right</span></a>: (<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#clrel_ctx"><span class="id" title="projection">clrel_ctx</span></a> <span class="id" title="var">reds</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Δ</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#weakening_closed_red"><span class="id" title="lemma">weakening_closed_red</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="var">len</span>. 2:<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#is_closed_context_smash_end"><span class="id" title="lemma">is_closed_context_smash_end</span></a>; <span class="id" title="var">fvs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConfluence.html#"><span class="id" title="library">PCUICConfluence</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#"><span class="id" title="library">PCUICNormal</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red_context_rel_assumptions" class="idref" href="#red_context_rel_assumptions"><span class="id" title="lemma">red_context_rel_assumptions</span></a> {<a id="cf:510" class="idref" href="#cf:510"><span class="id" title="binder">cf</span></a>} {<a id="616a46c7ef5d4a32e5be8d319ab1e242" class="idref" href="#616a46c7ef5d4a32e5be8d319ab1e242"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="3be05ec46d5a4f45a661c8acf9200b60" class="idref" href="#3be05ec46d5a4f45a661c8acf9200b60"><span class="id" title="binder">Γ</span></a> <a id="e1c30698acc0885785e9f8269f6acf0d" class="idref" href="#e1c30698acc0885785e9f8269f6acf0d"><span class="id" title="binder">Δ</span></a> <a id="98a324665add122abdd61a5f3b4eed18" class="idref" href="#98a324665add122abdd61a5f3b4eed18"><span class="id" title="binder">Δ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_context_rel"><span class="id" title="definition">red_context_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#616a46c7ef5d4a32e5be8d319ab1e242"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3be05ec46d5a4f45a661c8acf9200b60"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e1c30698acc0885785e9f8269f6acf0d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#98a324665add122abdd61a5f3b4eed18"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e1c30698acc0885785e9f8269f6acf0d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#98a324665add122abdd61a5f3b4eed18"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ws_cumul_pb_expand_lets" class="idref" href="#ws_cumul_pb_expand_lets"><span class="id" title="lemma">ws_cumul_pb_expand_lets</span></a> {<a id="cf:515" class="idref" href="#cf:515"><span class="id" title="binder">cf</span></a>} {<a id="32a59bc4d42857d1eb5376da2dfd6c5e" class="idref" href="#32a59bc4d42857d1eb5376da2dfd6c5e"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="88f21e7db7a4962bf5ca163b39ef9e38" class="idref" href="#88f21e7db7a4962bf5ca163b39ef9e38"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#32a59bc4d42857d1eb5376da2dfd6c5e"><span class="id" title="variable">Σ</span></a>} {<a id="dfebea68ca10b87f2e2a756a53043837" class="idref" href="#dfebea68ca10b87f2e2a756a53043837"><span class="id" title="binder">Γ</span></a>} {<a id="le:519" class="idref" href="#le:519"><span class="id" title="binder">le</span></a>} {<a id="caed358e7e27a42e1f94ab10a79f65db" class="idref" href="#caed358e7e27a42e1f94ab10a79f65db"><span class="id" title="binder">Δ</span></a>} {<a id="T:521" class="idref" href="#T:521"><span class="id" title="binder">T</span></a> <a id="T':522" class="idref" href="#T':522"><span class="id" title="binder">T'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#32a59bc4d42857d1eb5376da2dfd6c5e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfebea68ca10b87f2e2a756a53043837"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#caed358e7e27a42e1f94ab10a79f65db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:521"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">≤[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:519"><span class="id" title="variable">le</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T':522"><span class="id" title="variable">T'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#32a59bc4d42857d1eb5376da2dfd6c5e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfebea68ca10b87f2e2a756a53043837"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#caed358e7e27a42e1f94ab10a79f65db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#caed358e7e27a42e1f94ab10a79f65db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:521"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">≤[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:519"><span class="id" title="variable">le</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#35217f73df56646eb74cda65149cc63c"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#caed358e7e27a42e1f94ab10a79f65db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T':522"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_is_closed_context"><span class="id" title="lemma">ws_cumul_pb_is_closed_context</span></a> <span class="id" title="var">cum</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#weakening_ws_cumul_pb"><span class="id" title="lemma">weakening_ws_cumul_pb</span></a> (<span class="id" title="var">Γ''</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Δ</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#untyped_substitution_ws_cumul_pb"><span class="id" title="lemma">PCUICConversion.untyped_substitution_ws_cumul_pb</span></a> (<span class="id" title="var">Γ''</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tea</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">PCUICContexts.untyped_subslet_extended_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#foron_free_vars_extended_subst"><span class="id" title="lemma">foron_free_vars_extended_subst</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#is_closed_context_smash_end"><span class="id" title="lemma">is_closed_context_smash_end</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red_terms_lift" class="idref" href="#red_terms_lift"><span class="id" title="lemma">red_terms_lift</span></a> {<a id="cf:523" class="idref" href="#cf:523"><span class="id" title="binder">cf</span></a>} {<a id="8ac9895499135a065afaa7fcc1b247c9" class="idref" href="#8ac9895499135a065afaa7fcc1b247c9"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="5859ba493c9d5916738bf67fc94a80d5" class="idref" href="#5859ba493c9d5916738bf67fc94a80d5"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ac9895499135a065afaa7fcc1b247c9"><span class="id" title="variable">Σ</span></a>} {<a id="b754904fd09b2dd0f43709e92d9ff483" class="idref" href="#b754904fd09b2dd0f43709e92d9ff483"><span class="id" title="binder">Γ</span></a> <a id="9716ec0523b14b2ad5555d9a22b17591" class="idref" href="#9716ec0523b14b2ad5555d9a22b17591"><span class="id" title="binder">Δ</span></a> <a id="ts:528" class="idref" href="#ts:528"><span class="id" title="binder">ts</span></a> <a id="us:529" class="idref" href="#us:529"><span class="id" title="binder">us</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b754904fd09b2dd0f43709e92d9ff483"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9716ec0523b14b2ad5555d9a22b17591"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#red_terms"><span class="id" title="abbreviation">red_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ac9895499135a065afaa7fcc1b247c9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b754904fd09b2dd0f43709e92d9ff483"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ts:528"><span class="id" title="variable">ts</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#us:529"><span class="id" title="variable">us</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#red_terms"><span class="id" title="abbreviation">red_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8ac9895499135a065afaa7fcc1b247c9"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b754904fd09b2dd0f43709e92d9ff483"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9716ec0523b14b2ad5555d9a22b17591"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9716ec0523b14b2ad5555d9a22b17591"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ts:528"><span class="id" title="variable">ts</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9716ec0523b14b2ad5555d9a22b17591"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#us:529"><span class="id" title="variable">us</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#weakening_closed_red"><span class="id" title="lemma">weakening_closed_red</span></a> (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)) ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="onfvs_app" class="idref" href="#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a> <a id="6d46624d22398133fc53396dd593e536" class="idref" href="#6d46624d22398133fc53396dd593e536"><span class="id" title="binder">Γ</span></a> <a id="6a096efa43b617fdf360ca93b7b72f26" class="idref" href="#6a096efa43b617fdf360ca93b7b72f26"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6d46624d22398133fc53396dd593e536"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6a096efa43b617fdf360ca93b7b72f26"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6d46624d22398133fc53396dd593e536"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6d46624d22398133fc53396dd593e536"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6a096efa43b617fdf360ca93b7b72f26"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="untyped_subslet_ws_cumul_ctx_pb" class="idref" href="#untyped_subslet_ws_cumul_ctx_pb"><span class="id" title="lemma">untyped_subslet_ws_cumul_ctx_pb</span></a> {<a id="cf:532" class="idref" href="#cf:532"><span class="id" title="binder">cf</span></a>} {<a id="3b818408e74e86a5b3047bdb0d5aa4ce" class="idref" href="#3b818408e74e86a5b3047bdb0d5aa4ce"><span class="id" title="binder">Γ</span></a> <a id="06cf981c249b65bf83907d5cb7d08569" class="idref" href="#06cf981c249b65bf83907d5cb7d08569"><span class="id" title="binder">Γ'</span></a> <a id="9a36bc6e5c88bdca17df1a79ad3685ef" class="idref" href="#9a36bc6e5c88bdca17df1a79ad3685ef"><span class="id" title="binder">Δ</span></a> <a id="854b7efed19a5ca11cb2f771240b9888" class="idref" href="#854b7efed19a5ca11cb2f771240b9888"><span class="id" title="binder">Δ'</span></a>} {<a id="s:537" class="idref" href="#s:537"><span class="id" title="binder">s</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3b818408e74e86a5b3047bdb0d5aa4ce"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9a36bc6e5c88bdca17df1a79ad3685ef"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:537"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#06cf981c249b65bf83907d5cb7d08569"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3b818408e74e86a5b3047bdb0d5aa4ce"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#854b7efed19a5ca11cb2f771240b9888"><span class="id" title="variable">Δ'</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:537"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#06cf981c249b65bf83907d5cb7d08569"><span class="id" title="variable">Γ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="weakening_is_closed_context" class="idref" href="#weakening_is_closed_context"><span class="id" title="lemma">weakening_is_closed_context</span></a> <a id="773c4d79f04e2386d10c13303a600c4c" class="idref" href="#773c4d79f04e2386d10c13303a600c4c"><span class="id" title="binder">Γ</span></a> <a id="ca9c3c2fb1b20792d4d5bcd99d3b2565" class="idref" href="#ca9c3c2fb1b20792d4d5bcd99d3b2565"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#773c4d79f04e2386d10c13303a600c4c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ca9c3c2fb1b20792d4d5bcd99d3b2565"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#773c4d79f04e2386d10c13303a600c4c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ca9c3c2fb1b20792d4d5bcd99d3b2565"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ca9c3c2fb1b20792d4d5bcd99d3b2565"><span class="id" title="variable">Δ</span></a>) 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ca9c3c2fb1b20792d4d5bcd99d3b2565"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">cl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#is_closed_context_smash_end"><span class="id" title="lemma">is_closed_context_smash_end</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_lift_context0"><span class="id" title="lemma">on_free_vars_ctx_lift_context0</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span> ⇒ /=. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#addnP_shiftnP"><span class="id" title="lemma">addnP_shiftnP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICAlpha.html#is_closed_context_app_right"><span class="id" title="lemma">PCUICAlpha.is_closed_context_app_right</span></a>: <span class="id" title="var">cl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red_context_rel_conv_extended_subst" class="idref" href="#red_context_rel_conv_extended_subst"><span class="id" title="lemma">red_context_rel_conv_extended_subst</span></a> {<a id="cf:540" class="idref" href="#cf:540"><span class="id" title="binder">cf</span></a>} {<a id="13668b326994c45dc7ca08735d00aed5" class="idref" href="#13668b326994c45dc7ca08735d00aed5"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="4d15d2f43ebd580602c86522819b8a4f" class="idref" href="#4d15d2f43ebd580602c86522819b8a4f"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#13668b326994c45dc7ca08735d00aed5"><span class="id" title="variable">Σ</span></a>} {<a id="2da9c42c89b48ffe494c083cded82017" class="idref" href="#2da9c42c89b48ffe494c083cded82017"><span class="id" title="binder">Γ</span></a> <a id="3df730bdf76d819e3cc84b4323eb2643" class="idref" href="#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="binder">Δ</span></a> <a id="6183ffab85f88b413f842cc8bbfa227a" class="idref" href="#6183ffab85f88b413f842cc8bbfa227a"><span class="id" title="binder">Δ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2da9c42c89b48ffe494c083cded82017"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2da9c42c89b48ffe494c083cded82017"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6183ffab85f88b413f842cc8bbfa227a"><span class="id" title="variable">Δ'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_context_rel"><span class="id" title="definition">red_context_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#13668b326994c45dc7ca08735d00aed5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2da9c42c89b48ffe494c083cded82017"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6183ffab85f88b413f842cc8bbfa227a"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#red_terms"><span class="id" title="abbreviation">red_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#13668b326994c45dc7ca08735d00aed5"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2da9c42c89b48ffe494c083cded82017"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="variable">Δ</span></a> 0) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6183ffab85f88b413f842cc8bbfa227a"><span class="id" title="variable">Δ'</span></a> 0) <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_ctx_pb_rel"><span class="id" title="definition">ws_cumul_ctx_pb_rel</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#13668b326994c45dc7ca08735d00aed5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2da9c42c89b48ffe494c083cded82017"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3df730bdf76d819e3cc84b4323eb2643"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6183ffab85f88b413f842cc8bbfa227a"><span class="id" title="variable">Δ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wfr</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Δ</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#is_closed_context_smash_end"><span class="id" title="lemma">is_closed_context_smash_end</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfl</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">fvs</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">cum</span> <span class="id" title="tactic">in</span> |- *; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">split</span>; <span class="id" title="tactic">constructor</span> ⇒ //. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">depelim</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfl</span> ⇒ /= /<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#on_free_vars_ctx_snoc_ass_inv"><span class="id" title="lemma">on_free_vars_ctx_snoc_ass_inv</span></a> [] <span class="id" title="var">wfl</span> <span class="id" title="var">clT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfr</span> ⇒ /= /<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#on_free_vars_ctx_snoc_ass_inv"><span class="id" title="lemma">on_free_vars_ctx_snoc_ass_inv</span></a> [] <span class="id" title="var">wfr</span> <span class="id" title="var">clT'</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcum</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wfr</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">conv</span> <span class="id" title="var">cum'</span>];<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span>)) <span class="id" title="tactic">by</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">split</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> !(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_extended_subst"><span class="id" title="lemma">lift_extended_subst</span></a> <span class="id" title="var">_</span> 1).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= ![<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> /= /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /= ⇒ <span class="id" title="var">ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_terms_lift"><span class="id" title="lemma">red_terms_lift</span></a> (<span class="id" title="var">Δ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">rewrite</span> /= !(<a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) /=;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">cum'</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#red_ws_cumul_pb"><span class="id" title="lemma">red_ws_cumul_pb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ws_cumul_pb_expand_lets"><span class="id" title="lemma">ws_cumul_pb_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>;<span class="id" title="var">tea</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#length_of"><span class="id" title="abbreviation">length_of</span></a> <span class="id" title="var">cum</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_context_rel_assumptions"><span class="id" title="lemma">red_context_rel_assumptions</span></a> <span class="id" title="var">cum</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span>); <span class="id" title="var">cbn</span> ⇒ &lt;-. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#untyped_substitution_ws_cumul_pb_subst_conv"><span class="id" title="lemma">untyped_substitution_ws_cumul_pb_subst_conv</span></a> (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#red_terms_ws_cumul_pb_terms"><span class="id" title="lemma">red_terms_ws_cumul_pb_terms</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">conv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">PCUICContexts.untyped_subslet_extended_subst</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#untyped_subslet_ws_cumul_ctx_pb"><span class="id" title="lemma">untyped_subslet_ws_cumul_ctx_pb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">untyped_subslet_extended_subst</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#weakening_is_closed_context"><span class="id" title="lemma">weakening_is_closed_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">is_closed_context</span></a>]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#is_closed_context_smash_end"><span class="id" title="lemma">is_closed_context_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> ⇒ /=. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_lift_context0"><span class="id" title="lemma">on_free_vars_ctx_lift_context0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_context_rel_assumptions"><span class="id" title="lemma">red_context_rel_assumptions</span></a> <span class="id" title="var">cum</span>) <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#addnP_shiftnP"><span class="id" title="lemma">addnP_shiftnP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICAlpha.html#is_closed_context_app_right"><span class="id" title="lemma">PCUICAlpha.is_closed_context_app_right</span></a>: <span class="id" title="var">wfr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ0</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_length"><span class="id" title="lemma">smash_context_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ0</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#is_open_term_lift"><span class="id" title="lemma">is_open_term_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">cum</span>). <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">clT'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">move</span>: <span class="id" title="var">wfl</span> ⇒ /= /<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#on_free_vars_ctx_snoc_def_inv"><span class="id" title="lemma">on_free_vars_ctx_snoc_def_inv</span></a> ⇒ [] [] <span class="id" title="var">clΓ0</span> <span class="id" title="var">clb</span> <span class="id" title="var">clT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfr</span> ⇒ /= /<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#on_free_vars_ctx_snoc_def_inv"><span class="id" title="lemma">on_free_vars_ctx_snoc_def_inv</span></a> ⇒ [] [] <span class="id" title="var">clΓ0'</span> <span class="id" title="var">clb'</span> <span class="id" title="var">clT'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHcum</span> <span class="id" title="var">clΓ0</span> <span class="id" title="var">clΓ0'</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="tactic">auto</span>)) <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_expand_lets"><span class="id" title="lemma">red_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#length_of"><span class="id" title="abbreviation">length_of</span></a> <span class="id" title="var">cum</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_context_rel_assumptions"><span class="id" title="lemma">red_context_rel_assumptions</span></a> <span class="id" title="var">cum</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span>); <span class="id" title="var">cbn</span> ⇒ &lt;-. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">smash_context_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">Γ0</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#closed_red_red_subst"><span class="id" title="lemma">closed_red_red_subst</span></a> (<span class="id" title="var">Γ</span> := <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">PCUICContexts.untyped_subslet_extended_subst</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#weakening_is_closed_context"><span class="id" title="lemma">weakening_is_closed_context</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ0</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_length"><span class="id" title="lemma">smash_context_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>); <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ0</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#is_open_term_lift"><span class="id" title="lemma">is_open_term_lift</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">cum</span>). <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">clb'</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#"><span class="id" title="library">PCUICSubstitution</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_context_subst" class="idref" href="#is_closed_context_subst"><span class="id" title="lemma">is_closed_context_subst</span></a> <a id="946b60d9e369289c9e06a62360c2112d" class="idref" href="#946b60d9e369289c9e06a62360c2112d"><span class="id" title="binder">Γ</span></a> <a id="e50081f76a36dbdc254235eb6f51bcb3" class="idref" href="#e50081f76a36dbdc254235eb6f51bcb3"><span class="id" title="binder">Γ'</span></a> <a id="s:548" class="idref" href="#s:548"><span class="id" title="binder">s</span></a> <a id="c0d0c97c38973fea55ba4c0df88705de" class="idref" href="#c0d0c97c38973fea55ba4c0df88705de"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#946b60d9e369289c9e06a62360c2112d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e50081f76a36dbdc254235eb6f51bcb3"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c0d0c97c38973fea55ba4c0df88705de"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#946b60d9e369289c9e06a62360c2112d"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:548"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:548"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e50081f76a36dbdc254235eb6f51bcb3"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#946b60d9e369289c9e06a62360c2112d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:548"><span class="id" title="variable">s</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c0d0c97c38973fea55ba4c0df88705de"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">clΓ</span> <span class="id" title="var">cls</span> <span class="id" title="var">slen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span>  -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clΓ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">clΓ</span> ⇒ [] → /=; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">o</span> <span class="id" title="var">o'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context0"><span class="id" title="lemma">on_free_vars_ctx_subst_context0</span></a> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">slen</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="red_expand_lets_ctx" class="idref" href="#red_expand_lets_ctx"><span class="id" title="lemma">red_expand_lets_ctx</span></a> {<a id="cf:550" class="idref" href="#cf:550"><span class="id" title="binder">cf</span></a>} {<a id="5229862e14a26e61282fe32f54876c21" class="idref" href="#5229862e14a26e61282fe32f54876c21"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="22bdf462c3c08f76aeb8c5ed574f9a87" class="idref" href="#22bdf462c3c08f76aeb8c5ed574f9a87"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5229862e14a26e61282fe32f54876c21"><span class="id" title="variable">Σ</span></a>} {<a id="4d6182aa19d9f528dc3997303afd6707" class="idref" href="#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="binder">Γ</span></a> <a id="b3ab8f41a8234dde7c403b2152dcbb01" class="idref" href="#b3ab8f41a8234dde7c403b2152dcbb01"><span class="id" title="binder">Γ'</span></a> <a id="86f21488807632182548698f93a81bfd" class="idref" href="#86f21488807632182548698f93a81bfd"><span class="id" title="binder">Γ''</span></a> <a id="3eb91f14e7df8b54c04bf85f184b7650" class="idref" href="#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="binder">Δ</span></a> <a id="s:557" class="idref" href="#s:557"><span class="id" title="binder">s</span></a> <a id="s':558" class="idref" href="#s':558"><span class="id" title="binder">s'</span></a> <a id="t:559" class="idref" href="#t:559"><span class="id" title="binder">t</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b3ab8f41a8234dde7c403b2152dcbb01"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#86f21488807632182548698f93a81bfd"><span class="id" title="variable">Γ''</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:557"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b3ab8f41a8234dde7c403b2152dcbb01"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':558"><span class="id" title="variable">s'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#86f21488807632182548698f93a81bfd"><span class="id" title="variable">Γ''</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#closed_red"><span class="id" title="definition">closed_red</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5229862e14a26e61282fe32f54876c21"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:557"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':558"><span class="id" title="variable">s'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:557"><span class="id" title="variable">s</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:559"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5229862e14a26e61282fe32f54876c21"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4d6182aa19d9f528dc3997303afd6707"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:557"><span class="id" title="variable">s</span></a> 0 (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⊢</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:557"><span class="id" title="variable">s</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:559"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">⇝</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':558"><span class="id" title="variable">s'</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3eb91f14e7df8b54c04bf85f184b7650"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:559"><span class="id" title="variable">t</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#56f76c3496e694b3bed8bac7841a1cca"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wf'</span> <span class="id" title="var">subs</span> <span class="id" title="var">subs'</span> <span class="id" title="var">reds</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_subst"><span class="id" title="lemma">smash_context_subst</span></a> /= <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">cls</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">s</span> 0 <span class="id" title="var">Δ</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_closed_context_subst"><span class="id" title="lemma">is_closed_context_subst</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#closed_red_terms_open_left"><span class="id" title="lemma">closed_red_terms_open_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">reds</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet_length"><span class="id" title="lemma">untyped_subslet_length</span></a> <span class="id" title="var">subs'</span>) (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="var">reds</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">cls'</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <span class="id" title="var">s'</span> 0 <span class="id" title="var">Δ</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_closed_context_subst"><span class="id" title="lemma">is_closed_context_subst</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#closed_red_terms_open_right"><span class="id" title="lemma">closed_red_terms_open_right</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">reds</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet_length"><span class="id" title="lemma">untyped_subslet_length</span></a> <span class="id" title="var">subs'</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_expand_lets"><span class="id" title="lemma">red_expand_lets</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#closed_red_red_subst"><span class="id" title="lemma">closed_red_red_subst</span></a> (<span class="id" title="var">Γ</span> := <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;3:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#untyped_subslet_extended_subst"><span class="id" title="lemma">untyped_subslet_extended_subst</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#weakening_is_closed_context"><span class="id" title="lemma">weakening_is_closed_context</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_context_rel_conv_extended_subst"><span class="id" title="lemma">red_context_rel_conv_extended_subst</span></a>) ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#red_ctx_rel_subst"><span class="id" title="lemma">red_ctx_rel_subst</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#context_assumptions_subst"><span class="id" title="lemma">context_assumptions_subst</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Δ</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_length"><span class="id" title="lemma">smash_context_length</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#is_open_term_lift"><span class="id" title="lemma">is_open_term_lift</span></a>. 2-3:<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">ont</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#"><span class="id" title="library">PCUICSubstitution</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="untyped_subslet_lift" class="idref" href="#untyped_subslet_lift"><span class="id" title="lemma">untyped_subslet_lift</span></a> (<a id="5d84a5b6a8b42249f2b3d2a101bbc5c9" class="idref" href="#5d84a5b6a8b42249f2b3d2a101bbc5c9"><span class="id" title="binder">Γ</span></a> <a id="5ff91cb42acd96c59c3dbf4d21d5f0a6" class="idref" href="#5ff91cb42acd96c59c3dbf4d21d5f0a6"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="s:562" class="idref" href="#s:562"><span class="id" title="binder">s</span></a> <a id="14a5bb2647983c154ffb949347a6671f" class="idref" href="#14a5bb2647983c154ffb949347a6671f"><span class="id" title="binder">Δ'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d84a5b6a8b42249f2b3d2a101bbc5c9"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:562"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#14a5bb2647983c154ffb949347a6671f"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d84a5b6a8b42249f2b3d2a101bbc5c9"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5ff91cb42acd96c59c3dbf4d21d5f0a6"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5ff91cb42acd96c59c3dbf4d21d5f0a6"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:562"><span class="id" title="variable">s</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5ff91cb42acd96c59c3dbf4d21d5f0a6"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#14a5bb2647983c154ffb949347a6671f"><span class="id" title="variable">Δ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">rewrite</span> ?<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_context_snoc"><span class="id" title="lemma">lift_context_snoc</span></a> /=; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet_length"><span class="id" title="lemma">untyped_subslet_length</span></a> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst"><span class="id" title="lemma">distr_lift_subst</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="OnOne2_All2i_All2" class="idref" href="#OnOne2_All2i_All2"><span class="id" title="lemma">OnOne2_All2i_All2</span></a> {<a id="A:564" class="idref" href="#A:564"><span class="id" title="binder">A</span></a> <a id="B:565" class="idref" href="#B:565"><span class="id" title="binder">B</span></a>} {<a id="P:566" class="idref" href="#P:566"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:564"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:564"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="Q:567" class="idref" href="#Q:567"><span class="id" title="binder">Q</span></a> <a id="R:568" class="idref" href="#R:568"><span class="id" title="binder">R</span></a>} {<a id="n:569" class="idref" href="#n:569"><span class="id" title="binder">n</span></a>} {<a id="l:570" class="idref" href="#l:570"><span class="id" title="binder">l</span></a> <a id="l':571" class="idref" href="#l':571"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:564"><span class="id" title="variable">A</span></a>} {<a id="l'':572" class="idref" href="#l'':572"><span class="id" title="binder">l''</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:565"><span class="id" title="variable">B</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2"><span class="id" title="inductive">OnOne2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:566"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:570"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':571"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:569"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l'':572"><span class="id" title="variable">l''</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:570"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:573" class="idref" href="#n:573"><span class="id" title="binder">n</span></a> <a id="x:574" class="idref" href="#x:574"><span class="id" title="binder">x</span></a> <a id="y:575" class="idref" href="#y:575"><span class="id" title="binder">y</span></a> <a id="z:576" class="idref" href="#z:576"><span class="id" title="binder">z</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:566"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:574"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:575"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:573"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#z:576"><span class="id" title="variable">z</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:574"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:568"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:574"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:575"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="n:577" class="idref" href="#n:577"><span class="id" title="binder">n</span></a> <a id="x:578" class="idref" href="#x:578"><span class="id" title="binder">x</span></a> <a id="z:579" class="idref" href="#z:579"><span class="id" title="binder">z</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:567"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:577"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#z:579"><span class="id" title="variable">z</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:578"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:568"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:578"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:578"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:568"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:570"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':571"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">o</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">a</span> <span class="id" title="tactic">in</span> <span class="id" title="var">o</span>, <span class="id" title="var">l'</span> |- ×. <span class="id" title="var">depelim</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">a</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">X0</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHa</span>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#"><span class="id" title="library">PCUICUnivSubstitutionConv</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="OnOne2_All_OnOne2" class="idref" href="#OnOne2_All_OnOne2"><span class="id" title="lemma">OnOne2_All_OnOne2</span></a> {<a id="A:580" class="idref" href="#A:580"><span class="id" title="binder">A</span></a>} {<a id="P:581" class="idref" href="#P:581"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:580"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:580"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="Q:582" class="idref" href="#Q:582"><span class="id" title="binder">Q</span></a> <a id="R:583" class="idref" href="#R:583"><span class="id" title="binder">R</span></a>} <a id="l:584" class="idref" href="#l:584"><span class="id" title="binder">l</span></a> <a id="l':585" class="idref" href="#l':585"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2"><span class="id" title="inductive">OnOne2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:581"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':585"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:582"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:586" class="idref" href="#x:586"><span class="id" title="binder">x</span></a> <a id="y:587" class="idref" href="#y:587"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:582"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:586"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:581"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:586"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:587"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:583"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:586"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:587"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2"><span class="id" title="inductive">OnOne2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:583"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:584"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':585"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="OnOne2_All_All2" class="idref" href="#OnOne2_All_All2"><span class="id" title="lemma">OnOne2_All_All2</span></a> {<a id="A:588" class="idref" href="#A:588"><span class="id" title="binder">A</span></a>} {<a id="P:589" class="idref" href="#P:589"><span class="id" title="binder">P</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:588"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:588"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="Q:590" class="idref" href="#Q:590"><span class="id" title="binder">Q</span></a> <a id="R:591" class="idref" href="#R:591"><span class="id" title="binder">R</span></a>} <a id="l:592" class="idref" href="#l:592"><span class="id" title="binder">l</span></a> <a id="l':593" class="idref" href="#l':593"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2"><span class="id" title="inductive">OnOne2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:589"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:592"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':593"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:590"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:592"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:594" class="idref" href="#x:594"><span class="id" title="binder">x</span></a> <a id="y:595" class="idref" href="#y:595"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:590"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:594"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:589"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:594"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:595"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:591"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:594"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:595"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="x:596" class="idref" href="#x:596"><span class="id" title="binder">x</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:590"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:596"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:591"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:596"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:596"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#R:591"><span class="id" title="variable">R</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:592"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':593"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">IH</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">H</span> <span class="id" title="var">X</span>; <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2i_map_right_inv" class="idref" href="#All2i_map_right_inv"><span class="id" title="lemma">All2i_map_right_inv</span></a> {<a id="A:597" class="idref" href="#A:597"><span class="id" title="binder">A</span></a> <a id="B:598" class="idref" href="#B:598"><span class="id" title="binder">B</span></a> <a id="C:599" class="idref" href="#C:599"><span class="id" title="binder">C</span></a>} {<a id="P:600" class="idref" href="#P:600"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:597"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:598"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="f:601" class="idref" href="#f:601"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:599"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:598"><span class="id" title="variable">B</span></a>} <a id="n:602" class="idref" href="#n:602"><span class="id" title="binder">n</span></a> (<a id="l:603" class="idref" href="#l:603"><span class="id" title="binder">l</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:597"><span class="id" title="variable">A</span></a>) <a id="l':604" class="idref" href="#l':604"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:600"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:602"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:603"><span class="id" title="variable">l</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:601"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':604"><span class="id" title="variable">l'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> (<span class="id" title="keyword">fun</span> <a id="n:605" class="idref" href="#n:605"><span class="id" title="binder">n</span></a> <a id="x:606" class="idref" href="#x:606"><span class="id" title="binder">x</span></a> <a id="y:607" class="idref" href="#y:607"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:600"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:605"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:606"><span class="id" title="variable">x</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:601"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:607"><span class="id" title="variable">y</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:602"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:603"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':604"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2i_map_left_inv" class="idref" href="#All2i_map_left_inv"><span class="id" title="lemma">All2i_map_left_inv</span></a> {<a id="A:608" class="idref" href="#A:608"><span class="id" title="binder">A</span></a> <a id="B:609" class="idref" href="#B:609"><span class="id" title="binder">B</span></a> <a id="C:610" class="idref" href="#C:610"><span class="id" title="binder">C</span></a>} {<a id="P:611" class="idref" href="#P:611"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:608"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:609"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="f:612" class="idref" href="#f:612"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:610"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:608"><span class="id" title="variable">A</span></a>} <a id="n:613" class="idref" href="#n:613"><span class="id" title="binder">n</span></a> <a id="l:614" class="idref" href="#l:614"><span class="id" title="binder">l</span></a> <a id="l':615" class="idref" href="#l':615"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:611"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:613"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:612"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:614"><span class="id" title="variable">l</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':615"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> (<span class="id" title="keyword">fun</span> <a id="n:616" class="idref" href="#n:616"><span class="id" title="binder">n</span></a> <a id="x:617" class="idref" href="#x:617"><span class="id" title="binder">x</span></a> <a id="y:618" class="idref" href="#y:618"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:611"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:616"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:612"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:617"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:618"><span class="id" title="variable">y</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:613"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:614"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':615"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">l'</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_is_closed_context" class="idref" href="#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a> <a id="a72d2727d0fd133d48c3a48f712b8c56" class="idref" href="#a72d2727d0fd133d48c3a48f712b8c56"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a72d2727d0fd133d48c3a48f712b8c56"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a72d2727d0fd133d48c3a48f712b8c56"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">cl</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; [|<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a> 0)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a>; <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ind_params" class="idref" href="#on_free_vars_ind_params"><span class="id" title="lemma">on_free_vars_ind_params</span></a> {<a id="cf:620" class="idref" href="#cf:620"><span class="id" title="binder">cf</span></a>} {<a id="9107e47ac0aef0fe20aef1c0fe97166a" class="idref" href="#9107e47ac0aef0fe20aef1c0fe97166a"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="3b0a8c7b0594b81390afa54a22363037" class="idref" href="#3b0a8c7b0594b81390afa54a22363037"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9107e47ac0aef0fe20aef1c0fe97166a"><span class="id" title="variable">Σ</span></a>} {<a id="P:623" class="idref" href="#P:623"><span class="id" title="binder">P</span></a> <a id="ind:624" class="idref" href="#ind:624"><span class="id" title="binder">ind</span></a> <a id="mdecl:625" class="idref" href="#mdecl:625"><span class="id" title="binder">mdecl</span></a> <a id="idecl:626" class="idref" href="#idecl:626"><span class="id" title="binder">idecl</span></a> <a id="u:627" class="idref" href="#u:627"><span class="id" title="binder">u</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9107e47ac0aef0fe20aef1c0fe97166a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:624"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:625"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:626"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:623"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:625"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:627"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; [|<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>]; <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance_context"><span class="id" title="lemma">closedn_subst_instance_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_params"><span class="id" title="lemma">declared_inductive_closed_params</span></a> <span class="id" title="var">decl</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="shiftnP_mon" class="idref" href="#shiftnP_mon"><span class="id" title="lemma">shiftnP_mon</span></a> <a id="n:628" class="idref" href="#n:628"><span class="id" title="binder">n</span></a> <a id="n':629" class="idref" href="#n':629"><span class="id" title="binder">n'</span></a> <a id="i:630" class="idref" href="#i:630"><span class="id" title="binder">i</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:628"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':629"><span class="id" title="variable">n'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:628"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:630"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':629"><span class="id" title="variable">n'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:630"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="is_closed_context_cstr_branch_context" class="idref" href="#is_closed_context_cstr_branch_context"><span class="id" title="lemma">is_closed_context_cstr_branch_context</span></a> {<a id="cf:631" class="idref" href="#cf:631"><span class="id" title="binder">cf</span></a>} {<a id="c6b5f9029bb9ca769180d82c0b691063" class="idref" href="#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="904cfb084237e5d83be9178c3d858604" class="idref" href="#904cfb084237e5d83be9178c3d858604"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="variable">Σ</span></a>} {<a id="81fc2eb2774c19c8d8aeaad10b321e4f" class="idref" href="#81fc2eb2774c19c8d8aeaad10b321e4f"><span class="id" title="binder">Γ</span></a> <a id="ind:635" class="idref" href="#ind:635"><span class="id" title="binder">ind</span></a> <a id="mdecl:636" class="idref" href="#mdecl:636"><span class="id" title="binder">mdecl</span></a> <a id="idecl:637" class="idref" href="#idecl:637"><span class="id" title="binder">idecl</span></a> <a id="cdecl:638" class="idref" href="#cdecl:638"><span class="id" title="binder">cdecl</span></a> <a id="u:639" class="idref" href="#u:639"><span class="id" title="binder">u</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c6b5f9029bb9ca769180d82c0b691063"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:635"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:636"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:637"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:638"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#81fc2eb2774c19c8d8aeaad10b321e4f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#81fc2eb2774c19c8d8aeaad10b321e4f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:636"><span class="id" title="variable">mdecl</span></a>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:639"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:635"><span class="id" title="variable">ind</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:636"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:638"><span class="id" title="variable">cdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:639"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">declc</span> <span class="id" title="var">clΓ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> <span class="id" title="var">clΓ</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> ⇒ //. <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ind_params"><span class="id" title="lemma">on_free_vars_ind_params</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; [|<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_cstr_branch_context"><span class="id" title="lemma">on_free_vars_ctx_cstr_branch_context</span></a> <span class="id" title="var">declc</span>)].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#shiftnP_mon"><span class="id" title="lemma">shiftnP_mon</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#context_assumptions_bound"><span class="id" title="lemma">context_assumptions_bound</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)). <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_untyped_subslet" class="idref" href="#trans_untyped_subslet"><span class="id" title="lemma">trans_untyped_subslet</span></a> {<a id="cf:640" class="idref" href="#cf:640"><span class="id" title="binder">cf</span></a>} {<a id="6233861655363334c16178d214dafd8d" class="idref" href="#6233861655363334c16178d214dafd8d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="699124a0067271804c91c8127a57dde3" class="idref" href="#699124a0067271804c91c8127a57dde3"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6233861655363334c16178d214dafd8d"><span class="id" title="variable">Σ</span></a>} {<a id="037cd40b22ad3c9b4b96cbb75cb9d8f1" class="idref" href="#037cd40b22ad3c9b4b96cbb75cb9d8f1"><span class="id" title="binder">Γ</span></a> <a id="s:644" class="idref" href="#s:644"><span class="id" title="binder">s</span></a> <a id="f5f19904838d5026c80ae874e11b772d" class="idref" href="#f5f19904838d5026c80ae874e11b772d"><span class="id" title="binder">Δ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6233861655363334c16178d214dafd8d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#037cd40b22ad3c9b4b96cbb75cb9d8f1"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f5f19904838d5026c80ae874e11b772d"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6233861655363334c16178d214dafd8d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#037cd40b22ad3c9b4b96cbb75cb9d8f1"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:644"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#037cd40b22ad3c9b4b96cbb75cb9d8f1"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:644"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f5f19904838d5026c80ae874e11b772d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#037cd40b22ad3c9b4b96cbb75cb9d8f1"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:644"><span class="id" title="variable">s</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f5f19904838d5026c80ae874e11b772d"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 3 <span class="id" title="tactic">in</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">X</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">X</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>  <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> ; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="untyped_subslet_length" class="idref" href="#untyped_subslet_length"><span class="id" title="lemma">untyped_subslet_length</span></a> <a id="de39cbab1e4a543afa82440eb37b8f9d" class="idref" href="#de39cbab1e4a543afa82440eb37b8f9d"><span class="id" title="binder">Γ</span></a> <a id="s:647" class="idref" href="#s:647"><span class="id" title="binder">s</span></a> <a id="s':648" class="idref" href="#s':648"><span class="id" title="binder">s'</span></a> <a id="73a7c581412e97e224fbda41c357e57c" class="idref" href="#73a7c581412e97e224fbda41c357e57c"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#de39cbab1e4a543afa82440eb37b8f9d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:647"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73a7c581412e97e224fbda41c357e57c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:647"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':648"><span class="id" title="variable">s'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73a7c581412e97e224fbda41c357e57c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#de39cbab1e4a543afa82440eb37b8f9d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s':648"><span class="id" title="variable">s'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73a7c581412e97e224fbda41c357e57c"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">s'</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">s'</span> ⇒ /= //. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">constructor</span> ; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_local_ind_params_weaken" class="idref" href="#wf_local_ind_params_weaken"><span class="id" title="lemma">wf_local_ind_params_weaken</span></a> {<a id="cf:650" class="idref" href="#cf:650"><span class="id" title="binder">cf</span></a>} {<a id="46fecb2ec57cf64997ceb0f7e8ef40e0" class="idref" href="#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="0e35099c3c2c5f7bdd203f619fda6509" class="idref" href="#0e35099c3c2c5f7bdd203f619fda6509"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="variable">Σ</span></a>} {<a id="8cc7b6408193cccbd802d6a38c0bccf6" class="idref" href="#8cc7b6408193cccbd802d6a38c0bccf6"><span class="id" title="binder">Γ</span></a>} {<a id="ind:654" class="idref" href="#ind:654"><span class="id" title="binder">ind</span></a> <a id="mdecl:655" class="idref" href="#mdecl:655"><span class="id" title="binder">mdecl</span></a> <a id="u:656" class="idref" href="#u:656"><span class="id" title="binder">u</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_minductive"><span class="id" title="definition">declared_minductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:654"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:655"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8cc7b6408193cccbd802d6a38c0bccf6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#consistent_instance_ext"><span class="id" title="definition">consistent_instance_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:655"><span class="id" title="variable">mdecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:656"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#46fecb2ec57cf64997ceb0f7e8ef40e0"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8cc7b6408193cccbd802d6a38c0bccf6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:655"><span class="id" title="variable">mdecl</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:656"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">decli</span> <span class="id" title="var">wfΓ</span> <span class="id" title="var">cu</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#on_minductive_wf_params"><span class="id" title="lemma">on_minductive_wf_params</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="cf'" class="idref" href="#cf'"><span class="id" title="definition">cf'</span></a> <a id="cf:657" class="idref" href="#cf:657"><span class="id" title="binder">cf</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.Common.config.html#check_univs"><span class="id" title="method">check_univs</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:657"><span class="id" title="variable">cf</span></a>.(@<a class="idref" href="MetaRocq.Common.config.html#check_univs"><span class="id" title="method">check_univs</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.config.html#prop_sub_type"><span class="id" title="method">prop_sub_type</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:657"><span class="id" title="variable">cf</span></a>.(@<a class="idref" href="MetaRocq.Common.config.html#prop_sub_type"><span class="id" title="method">prop_sub_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.config.html#indices_matter"><span class="id" title="method">indices_matter</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:657"><span class="id" title="variable">cf</span></a>.(@<a class="idref" href="MetaRocq.Common.config.html#indices_matter"><span class="id" title="method">indices_matter</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.config.html#lets_in_constructor_types"><span class="id" title="method">lets_in_constructor_types</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> |}.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a id="wf_trans" class="idref" href="#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <span class="id" title="var">Σ</span> := (@<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">Σ</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)).<br/>
<span class="id" title="keyword">Notation</span> <a id="wf_ext_trans" class="idref" href="#wf_ext_trans"><span class="id" title="abbreviation">wf_ext_trans</span></a> <span class="id" title="var">Σ</span> := (@<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">_</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>)).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_red1" class="idref" href="#trans_red1"><span class="id" title="lemma">trans_red1</span></a> {<a id="cf:658" class="idref" href="#cf:658"><span class="id" title="binder">cf</span></a>} (<a id="84e2bef3c125c4f4ae5623734bf4d559" class="idref" href="#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="0f2e67528e9c473a62151479b7edb4bb" class="idref" href="#0f2e67528e9c473a62151479b7edb4bb"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a>} {<a id="f98a26b251cc153d176a624cdcd412a8" class="idref" href="#f98a26b251cc153d176a624cdcd412a8"><span class="id" title="binder">wfΣ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a>} <a id="7535b7c7548fadb5e3b90f9f3d796844" class="idref" href="#7535b7c7548fadb5e3b90f9f3d796844"><span class="id" title="binder">Γ</span></a> <a id="T:663" class="idref" href="#T:663"><span class="id" title="binder">T</span></a> <a id="U:664" class="idref" href="#U:664"><span class="id" title="binder">U</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7535b7c7548fadb5e3b90f9f3d796844"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:663"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:664"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7535b7c7548fadb5e3b90f9f3d796844"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:663"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red"><span class="id" title="definition">red</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#84e2bef3c125c4f4ae5623734bf4d559"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7535b7c7548fadb5e3b90f9f3d796844"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:663"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:664"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_ind_all"><span class="id" title="lemma">red1_ind_all</span></a>; <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">intros</span> <span class="id" title="var">wt</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCase"><span class="id" title="constructor">tCase</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] ⇒ <span class="id" title="tactic">idtac</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> ⇒ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>; <span class="id" title="tactic">repeat</span> <span class="id" title="var">outtimes</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>].<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="var">tofvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_ctx"><span class="id" title="lemma">trans_subst_ctx</span></a> <span class="id" title="var">Γ</span>) /=; [<span class="id" title="var">pcuic</span>..|]. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span>. <span class="id" title="var">tofvs</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_ctx"><span class="id" title="lemma">trans_subst_ctx</span></a> <span class="id" title="var">Γ</span>); [<span class="id" title="var">pcuic</span>..|]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span> ⇒ //. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>; <span class="id" title="var">noconf</span> <span class="id" title="var">H</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">i</span>) <span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_nth_error"><span class="id" title="lemma">All_local_env_nth_error</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt0</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">Heq</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="var">wt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Case"><span class="id" title="lemma">inversion_Case</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> [<span class="id" title="var">decli</span> [<span class="id" title="var">indices</span> [[] <span class="id" title="var">e</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#inversion_mkApps"><span class="id" title="lemma">PCUICValidity.inversion_mkApps</span></a> <span class="id" title="var">scrut_ty</span>) <span class="id" title="keyword">as</span> [? [<span class="id" title="var">hc</span> <span class="id" title="var">hsp</span>]]; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#inversion_Construct"><span class="id" title="lemma">inversion_Construct</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hc</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">mdecl'</span>&amp;<span class="id" title="var">idecl'</span>&amp;<span class="id" title="var">cdecl</span>&amp;<span class="id" title="var">wfΓ</span>&amp;<span class="id" title="var">declc</span>&amp;<span class="id" title="var">cu</span>&amp;<span class="id" title="var">tyc</span>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">decli_</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_inductive_to_gen"><span class="id" title="lemma">declared_inductive_to_gen</span></a> <span class="id" title="var">decli</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">declc_</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_inductive_to_gen"><span class="id" title="lemma">declared_inductive_to_gen</span></a> <span class="id" title="var">declc</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_inductive_inj"><span class="id" title="lemma">declared_inductive_inj</span></a> <span class="id" title="var">decli_</span> <span class="id" title="var">declc_</span>) <span class="id" title="keyword">as</span> [-&gt; -&gt;]. 2:<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">lenskip</span> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#ci_npar"><span class="id" title="projection">ci_npar</span></a> <span class="id" title="var">ci</span>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">args</span>)<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#Construct_Ind_ind_eq"><span class="id" title="lemma">Construct_Ind_ind_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">scrut_ty</span> <span class="id" title="var">declc</span>) <span class="id" title="keyword">as</span> [[? <span class="id" title="var">e'</span>] <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#length_skipn"><span class="id" title="lemma">length_skipn</span></a>; <span class="id" title="var">len</span>; <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_nth_error_r"><span class="id" title="lemma">All2i_nth_error_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">brs_ty</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">brs_ty</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">cdecl'</span> [<span class="id" title="var">Hcdecl'</span> [<span class="id" title="var">bctxeq</span> [<span class="id" title="var">wfbrctx</span> [<span class="id" title="var">hbody</span> <span class="id" title="var">hbodyty</span>]]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj2"><span class="id" title="definition">proj2</span></a> <span class="id" title="var">declc</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">Hcdecl'</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">Hcdecl'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">lenbctx</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_context_assumptions"><span class="id" title="lemma">alpha_eq_context_assumptions</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">bctxeq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context_assumptions"><span class="id" title="lemma">cstr_branch_context_assumptions</span></a>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#iota_red"><span class="id" title="definition">iota_red</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_iota"><span class="id" title="constructor">red_iota</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">all</span>:<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /= <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#iota_red"><span class="id" title="definition">iota_red</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#length_skipn_map"><span class="id" title="lemma">length_skipn_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">lenskip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">oninst</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">br</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a> <span class="id" title="var">bctxeq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbody</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbody</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbody</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">hbody</span> ⇒ [] //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">onb</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">br</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <span class="id" title="var">br</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a> <span class="id" title="var">bctxeq</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbody</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hbody</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_ctx"><span class="id" title="lemma">trans_subst_ctx</span></a> <span class="id" title="var">Γ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">lenskip</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_context"><span class="id" title="lemma">context_assumptions_subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_instance"><span class="id" title="lemma">context_assumptions_subst_instance</span></a>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_skipn"><span class="id" title="lemma">forallb_skipn</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_mkApps"><span class="id" title="lemma">on_free_vars_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">p3</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">p3</span> ⇒ /= //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_skipn"><span class="id" title="lemma">map_skipn</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_assumption_context"><span class="id" title="lemma">expand_lets_assumption_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_context"><span class="id" title="lemma">assumption_context_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_instance"><span class="id" title="lemma">assumption_context_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_assumption_context"><span class="id" title="lemma">smash_context_assumption_context</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a>; [<span class="id" title="tactic">symmetry</span>; <span class="id" title="var">tea</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; [|<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_cstr_branch_context"><span class="id" title="lemma">on_free_vars_ctx_cstr_branch_context</span></a> <span class="id" title="var">declc</span>)].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a> ⇒ <span class="id" title="var">H'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#context_assumptions_bound"><span class="id" title="lemma">context_assumptions_bound</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)). <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_mkApps_inv"><span class="id" title="lemma">wt_mkApps_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wtf</span> <span class="id" title="var">wtargs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#is_constructor"><span class="id" title="definition">is_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="var">hnth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_fix"><span class="id" title="constructor">red_fix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_fix"><span class="id" title="lemma">trans_unfold_fix</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wtf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_constructor"><span class="id" title="lemma">trans_is_constructor</span></a> (<span class="id" title="var">t0</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">args</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#is_constructor"><span class="id" title="definition">is_constructor</span></a> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">discriminate</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wtpars</span> [<span class="id" title="var">idecl</span> [<span class="id" title="var">cdecl</span> []]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_mkApps_inv"><span class="id" title="lemma">wt_mkApps_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w2</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_cofix"><span class="id" title="lemma">trans_unfold_cofix</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_cofix_case"><span class="id" title="constructor">red_cofix_case</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w2</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_mkApps_inv"><span class="id" title="lemma">wt_mkApps_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_cofix"><span class="id" title="lemma">trans_unfold_cofix</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_cofix_proj"><span class="id" title="constructor">red_cofix_proj</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">w</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>; <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constant"><span class="id" title="lemma">trans_declared_constant</span></a> <span class="id" title="var">_</span> <span class="id" title="var">c</span> <span class="id" title="var">decl</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">subst</span> <span class="id" title="var">cst_body0</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_abs"><span class="id" title="lemma">red_abs</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_abs"><span class="id" title="lemma">red_abs</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_letin"><span class="id" title="lemma">red_letin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_letin"><span class="id" title="lemma">red_letin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_letin"><span class="id" title="lemma">red_letin</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpars</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> []]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICOnOne.html#set_pparams"><span class="id" title="definition">set_pparams</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_case"><span class="id" title="lemma">red_case</span></a>. 5:<span class="id" title="tactic">reflexivity</span>. <span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_map"><span class="id" title="lemma">OnOne2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">h</span>. 2:<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#OnOne2_All_OnOne2"><span class="id" title="lemma">OnOne2_All_OnOne2</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">wtt</span> [[<span class="id" title="var">r</span> <span class="id" title="var">IH</span>] <span class="id" title="var">wt</span>]. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">wt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_All2_refl"><span class="id" title="lemma">All_All2_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_nth_hyp"><span class="id" title="lemma">All2i_nth_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_All_right"><span class="id" title="lemma">All2i_All_right</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctor</span> <span class="id" title="var">cdecl</span> <span class="id" title="var">br</span> [<span class="id" title="var">hnth</span> [<span class="id" title="var">wfbr</span> <span class="id" title="var">eqbctx</span> <span class="id" title="var">wfbctx</span> <span class="id" title="var">eqinst</span> <span class="id" title="var">wtb</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> ⇒ <span class="id" title="var">isass</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a>]. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_expand_lets_ctx"><span class="id" title="lemma">red_expand_lets_ctx</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ'</span> := (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ''</span> := (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;×  <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_app"><span class="id" title="lemma">All2_app</span></a>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_instance"><span class="id" title="lemma">alpha_eq_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">eqbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">declc</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ci</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctor</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_closed_context_cstr_branch_context"><span class="id" title="lemma">is_closed_context_cstr_branch_context</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">w2</span> <span class="id" title="keyword">as</span> [? ? % <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_app"><span class="id" title="lemma">All2_app</span></a>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_subst_instance"><span class="id" title="lemma">alpha_eq_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a>. <span class="id" title="tactic">symmetry</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">eqbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> - !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">declc</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ci</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">ctor</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_closed_context_cstr_branch_context"><span class="id" title="lemma">is_closed_context_cstr_branch_context</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">w2</span> <span class="id" title="keyword">as</span> [? ? % <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a>]; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_untyped_subslet"><span class="id" title="lemma">trans_untyped_subslet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_local_ind_params_weaken"><span class="id" title="lemma">wf_local_ind_params_weaken</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">w2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subslet_untyped_subslet"><span class="id" title="lemma">subslet_untyped_subslet</span></a>; <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_untyped_subslet"><span class="id" title="lemma">trans_untyped_subslet</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_local_ind_params_weaken"><span class="id" title="lemma">wf_local_ind_params_weaken</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">d</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">w2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#spine_subst_wt_terms"><span class="id" title="lemma">spine_subst_wt_terms</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_impl_All_r"><span class="id" title="lemma">OnOne2_impl_All_r</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">solve_all</span>. <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">wtx</span> [[<span class="id" title="var">Hr</span> <span class="id" title="var">_</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#untyped_subslet_length"><span class="id" title="lemma">untyped_subslet_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">s</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_length"><span class="id" title="lemma">OnOne2_length</span></a> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_rev"><span class="id" title="lemma">All2_rev</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#OnOne2_All_All2"><span class="id" title="lemma">OnOne2_All_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> <span class="id" title="var">wtx</span> [[<span class="id" title="var">r</span> <span class="id" title="var">Hr</span>] <span class="id" title="var">wt</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hr</span> <span class="id" title="var">wt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtx</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> []. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">len</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">wtb</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_length"><span class="id" title="lemma">case_branch_context_length</span></a> <span class="id" title="var">wfbr</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpars</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> []]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_case_p"><span class="id" title="lemma">red_case_p</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">symmetry</span> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_predicate_context_eq"><span class="id" title="lemma">inst_case_predicate_context_eq</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">w1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHX</span> <span class="id" title="var">w1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_predicate_context_eq"><span class="id" title="lemma">inst_case_predicate_context_eq</span></a> <span class="id" title="var">a</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_predicate_context"><span class="id" title="lemma">trans_ind_predicate_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closed_ctx_is_closed_context"><span class="id" title="lemma">closed_ctx_is_closed_context</span></a>, <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_params"><span class="id" title="lemma">declared_inductive_closed_params</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declared_inductive_closed_indices"><span class="id" title="lemma">declared_inductive_closed_indices</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">d</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_predicate_context_eq"><span class="id" title="lemma">inst_case_predicate_context_eq</span></a> (<span class="id" title="var">p</span>:=<span class="id" title="var">p'</span>) <span class="id" title="var">a</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> <span class="id" title="var">d</span> <span class="id" title="var">c0</span> <span class="id" title="var">s</span> <span class="id" title="var">w</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpars</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> []]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_case_c"><span class="id" title="lemma">red_case_c</span></a>; <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="var">wt</span>). <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">p4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hpars</span> [<span class="id" title="var">mdecl</span> [<span class="id" title="var">idecl</span> []]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_case_brs"><span class="id" title="lemma">red_case_brs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_All_mix_right"><span class="id" title="lemma">All2i_All_mix_right</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a0</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#OnOne2_All2i_All2"><span class="id" title="lemma">OnOne2_All2i_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">br</span> <span class="id" title="var">br'</span> <span class="id" title="var">cdecl</span> [[<span class="id" title="var">hred</span> <span class="id" title="var">ih</span>] <span class="id" title="var">eqctx</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [[] <span class="id" title="var">onfvs</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ctx</span>. <span class="id" title="tactic">split</span> ⇒ //. 2:{ <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqctx</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{1}(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a> <span class="id" title="var">a1</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">ih</span> <span class="id" title="var">w5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_subst"><span class="id" title="lemma">smash_context_subst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /=. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">eqctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#red_expand_lets"><span class="id" title="lemma">red_expand_lets</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>)). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) // <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">onfvs</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ih</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> -!(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">onfvs</span> ⇒ [] <span class="id" title="var">onctx</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#into_closed_red"><span class="id" title="lemma">into_closed_red</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context"><span class="id" title="definition">SE.subst_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a> (<span class="id" title="var">p</span>:=<span class="id" title="var">p</span>) <span class="id" title="var">a1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">w5</span> <span class="id" title="keyword">as</span> [? <span class="id" title="var">wt</span>]. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">onfvs</span> ⇒ [] <span class="id" title="var">onctx</span> <span class="id" title="var">onb</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. }<br/>
<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_proj_c"><span class="id" title="lemma">red_proj_c</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_app"><span class="id" title="lemma">red_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_app"><span class="id" title="lemma">red_app</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_prod"><span class="id" title="lemma">red_prod</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_prod"><span class="id" title="lemma">red_prod</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_fix_congr"><span class="id" title="lemma">red_fix_congr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_fix_congr"><span class="id" title="lemma">red_fix_congr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="var">wt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">idx</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_cofix_congr"><span class="id" title="lemma">red_cofix_congr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_cofix_congr"><span class="id" title="lemma">red_cofix_congr</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_on_free_vars"><span class="id" title="lemma">wt_on_free_vars</span></a> <span class="id" title="var">wt</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_inv"><span class="id" title="lemma">wt_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">idx</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="tactic">reflexivity</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_primArray_value"><span class="id" title="lemma">red_primArray_value</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">depelim</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#OnOne2_All_mix_left"><span class="id" title="lemma">OnOne2_All_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#OnOne2_All2"><span class="id" title="lemma">OnOne2_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">wt</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_primArray_default"><span class="id" title="lemma">red_primArray_default</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">wt</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_primArray_type"><span class="id" title="lemma">red_primArray_type</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cmp_global_instance" class="idref" href="#trans_cmp_global_instance"><span class="id" title="lemma">trans_cmp_global_instance</span></a> {<a id="b415d8a7d5376b766143ea0d21ee2bac" class="idref" href="#b415d8a7d5376b766143ea0d21ee2bac"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} <a id="Re:666" class="idref" href="#Re:666"><span class="id" title="binder">Re</span></a> <a id="Rle:667" class="idref" href="#Rle:667"><span class="id" title="binder">Rle</span></a> <a id="gref:668" class="idref" href="#gref:668"><span class="id" title="binder">gref</span></a> <a id="napp:669" class="idref" href="#napp:669"><span class="id" title="binder">napp</span></a> <a id="u:670" class="idref" href="#u:670"><span class="id" title="binder">u</span></a> <a id="u':671" class="idref" href="#u':671"><span class="id" title="binder">u'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#cmp_global_instance"><span class="id" title="abbreviation">cmp_global_instance</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b415d8a7d5376b766143ea0d21ee2bac"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Re:666"><span class="id" title="variable">Re</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Rle:667"><span class="id" title="variable">Rle</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#gref:668"><span class="id" title="variable">gref</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:669"><span class="id" title="variable">napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:670"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u':671"><span class="id" title="variable">u'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#cmp_global_instance"><span class="id" title="abbreviation">cmp_global_instance</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b415d8a7d5376b766143ea0d21ee2bac"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Re:666"><span class="id" title="variable">Re</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Rle:667"><span class="id" title="variable">Rle</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#gref:668"><span class="id" title="variable">gref</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:669"><span class="id" title="variable">napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:670"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u':671"><span class="id" title="variable">u'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#cmp_global_instance_gen"><span class="id" title="definition">PCUICEquality.cmp_global_instance</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#global_variance_gen"><span class="id" title="definition">PCUICEquality.global_variance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">gref</span>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_inductive"><span class="id" title="definition">S.lookup_inductive</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_minductive"><span class="id" title="definition">S.lookup_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_inductive_gen"><span class="id" title="definition">S.lookup_inductive_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_minductive_gen"><span class="id" title="definition">S.lookup_minductive_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_env"><span class="id" title="definition">SE.lookup_env</span></a> ⇒ //; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ /= //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_destr_arity"><span class="id" title="lemma">trans_destr_arity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">PCUICAst.destArity</span></a> <span class="id" title="keyword">as</span> [[<span class="id" title="var">ctx</span> <span class="id" title="var">ps</span>]|] ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_constructor"><span class="id" title="definition">S.lookup_constructor</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_inductive"><span class="id" title="definition">S.lookup_inductive</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_minductive"><span class="id" title="definition">S.lookup_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_constructor_gen"><span class="id" title="definition">S.lookup_constructor_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_inductive_gen"><span class="id" title="definition">S.lookup_inductive_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_minductive_gen"><span class="id" title="definition">S.lookup_minductive_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_constructor"><span class="id" title="definition">lookup_constructor</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_minductive"><span class="id" title="definition">lookup_minductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_env"><span class="id" title="definition">SE.lookup_env</span></a> ⇒ //; <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ /= //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ /= //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_eq_context_upto_names_eq_binder_annot" class="idref" href="#trans_eq_context_upto_names_eq_binder_annot"><span class="id" title="lemma">trans_eq_context_upto_names_eq_binder_annot</span></a> <a id="6393a0ec19b5ed4c827a06b97a3375da" class="idref" href="#6393a0ec19b5ed4c827a06b97a3375da"><span class="id" title="binder">Γ</span></a> <a id="759b6a91cbe3b03afa083273c754bba9" class="idref" href="#759b6a91cbe3b03afa083273c754bba9"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6393a0ec19b5ed4c827a06b97a3375da"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#759b6a91cbe3b03afa083273c754bba9"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#eq_binder_annot"><span class="id" title="definition">eq_binder_annot</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6393a0ec19b5ed4c827a06b97a3375da"><span class="id" title="variable">Γ</span></a>)) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_name"><span class="id" title="projection">decl_name</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#759b6a91cbe3b03afa083273c754bba9"><span class="id" title="variable">Δ</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_eq_context_upto_names" class="idref" href="#trans_eq_context_upto_names"><span class="id" title="lemma">trans_eq_context_upto_names</span></a> <a id="6d4f3732e721b496169aa8c408ff7176" class="idref" href="#6d4f3732e721b496169aa8c408ff7176"><span class="id" title="binder">Γ</span></a> <a id="139f15bc1f8b37b8932ed7ea0c632991" class="idref" href="#139f15bc1f8b37b8932ed7ea0c632991"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6d4f3732e721b496169aa8c408ff7176"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#139f15bc1f8b37b8932ed7ea0c632991"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6d4f3732e721b496169aa8c408ff7176"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#139f15bc1f8b37b8932ed7ea0c632991"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#trans_eq_context_upto_names"><span class="id" title="lemma">PCUICEquality.trans_eq_context_upto_names</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_term_upto_univ_expand_lets" class="idref" href="#eq_term_upto_univ_expand_lets"><span class="id" title="lemma">eq_term_upto_univ_expand_lets</span></a> {<a id="cf:676" class="idref" href="#cf:676"><span class="id" title="binder">cf</span></a>} {<a id="4180b8f1e25ad76b00cdc7da71abc9bf" class="idref" href="#4180b8f1e25ad76b00cdc7da71abc9bf"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="cmp_universe:678" class="idref" href="#cmp_universe:678"><span class="id" title="binder">cmp_universe</span></a> <a id="cmp_sort:679" class="idref" href="#cmp_sort:679"><span class="id" title="binder">cmp_sort</span></a> <a id="pb:680" class="idref" href="#pb:680"><span class="id" title="binder">pb</span></a> <a id="cd22bffa3bd569e7aec97741e96fd233" class="idref" href="#cd22bffa3bd569e7aec97741e96fd233"><span class="id" title="binder">Γ</span></a> <a id="d28bd9ab2acb907f76f731f8ab0e2d72" class="idref" href="#d28bd9ab2acb907f76f731f8ab0e2d72"><span class="id" title="binder">Δ</span></a> <a id="t:683" class="idref" href="#t:683"><span class="id" title="binder">t</span></a> <a id="u:684" class="idref" href="#u:684"><span class="id" title="binder">u</span></a> <a id="napp:685" class="idref" href="#napp:685"><span class="id" title="binder">napp</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.RelationClasses.html#subrelation"><span class="id" title="class">subrelation</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:678"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:678"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:680"><span class="id" title="variable">pb</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.RelationClasses.html#subrelation"><span class="id" title="class">subrelation</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:679"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:679"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:680"><span class="id" title="variable">pb</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto"><span class="id" title="abbreviation">eq_context_upto</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4180b8f1e25ad76b00cdc7da71abc9bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:678"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:679"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:680"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd22bffa3bd569e7aec97741e96fd233"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d28bd9ab2acb907f76f731f8ab0e2d72"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_napp"><span class="id" title="inductive">eq_term_upto_univ_napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4180b8f1e25ad76b00cdc7da71abc9bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:678"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:679"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:680"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:685"><span class="id" title="variable">napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:683"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:684"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_napp"><span class="id" title="inductive">eq_term_upto_univ_napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4180b8f1e25ad76b00cdc7da71abc9bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:678"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:679"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:680"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:685"><span class="id" title="variable">napp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd22bffa3bd569e7aec97741e96fd233"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:683"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d28bd9ab2acb907f76f731f8ab0e2d72"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:684"><span class="id" title="variable">u</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">subr</span> <span class="id" title="var">subr'</span> <span class="id" title="var">eqctx</span> <span class="id" title="var">eqt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_substs"><span class="id" title="lemma">eq_term_upto_univ_substs</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_length"><span class="id" title="lemma">eq_context_upto_length</span></a> <span class="id" title="var">eqctx</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConfluence.html#eq_context_gen_context_assumptions"><span class="id" title="lemma">eq_context_gen_context_assumptions</span></a> <span class="id" title="var">eqctx</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_lift"><span class="id" title="lemma">eq_term_upto_univ_lift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConfluence.html#eq_context_extended_subst"><span class="id" title="lemma">PCUICConfluence.eq_context_extended_subst</span></a> <span class="id" title="var">eqctx</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_eq_term_upto_univ" class="idref" href="#trans_eq_term_upto_univ"><span class="id" title="lemma">trans_eq_term_upto_univ</span></a> {<a id="cf:686" class="idref" href="#cf:686"><span class="id" title="binder">cf</span></a>} {<a id="76a94b7ba525ed794281c10517008d29" class="idref" href="#76a94b7ba525ed794281c10517008d29"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="cmp_universe:688" class="idref" href="#cmp_universe:688"><span class="id" title="binder">cmp_universe</span></a> <a id="cmp_sort:689" class="idref" href="#cmp_sort:689"><span class="id" title="binder">cmp_sort</span></a> <a id="pb:690" class="idref" href="#pb:690"><span class="id" title="binder">pb</span></a> <a id="t:691" class="idref" href="#t:691"><span class="id" title="binder">t</span></a> <a id="u:692" class="idref" href="#u:692"><span class="id" title="binder">u</span></a> <a id="napp:693" class="idref" href="#napp:693"><span class="id" title="binder">napp</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#SubstUnivPreserving"><span class="id" title="class">SubstUnivPreserving</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:688"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:688"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#SubstUnivPreserving"><span class="id" title="class">SubstUnivPreserving</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:688"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:689"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_napp"><span class="id" title="inductive">eq_term_upto_univ_napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76a94b7ba525ed794281c10517008d29"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:688"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:689"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:690"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:693"><span class="id" title="variable">napp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:691"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:692"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_term_upto_univ_napp"><span class="id" title="inductive">eq_term_upto_univ_napp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76a94b7ba525ed794281c10517008d29"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_universe:688"><span class="id" title="variable">cmp_universe</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cmp_sort:689"><span class="id" title="variable">cmp_sort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:690"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#napp:693"><span class="id" title="variable">napp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:691"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:692"><span class="id" title="variable">u</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">substu</span> <span class="id" title="var">substu'</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#term_forall_list_ind"><span class="id" title="lemma">term_forall_list_ind</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">pb</span>, <span class="id" title="var">napp</span>, <span class="id" title="var">u</span>, <span class="id" title="var">e</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">invs</span> <span class="id" title="var">e</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">constructor</span> ; <span class="id" title="tactic">auto</span> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">ih</span> : <span class="id" title="keyword">∀</span> <a id="Rle:694" class="idref" href="#Rle:694"><span class="id" title="binder"><span id="Rle:697" class="id">Rle</span></span></a> <a id="u:695" class="idref" href="#u:695"><span class="id" title="binder"><span id="u:698" class="id">u</span></span></a> (<a id="napp:696" class="idref" href="#napp:696"><span class="id" title="binder"><span id="napp:699" class="id">napp</span></span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>), <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">ih</span> ; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#subrelation_refl"><span class="id" title="lemma">subrelation_refl</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span><br/>
&nbsp;&nbsp;].<br/>
&nbsp;&nbsp;1,2,3,4,5,6: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_mfixpoint"><span class="id" title="definition">eq_mfixpoint</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#subrelation_refl"><span class="id" title="lemma">subrelation_refl</span></a> ].<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">constructor</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cmp_global_instance"><span class="id" title="lemma">trans_cmp_global_instance</span></a> ].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">X1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Hpars</span> [<span class="id" title="var">Huinst</span> [<span class="id" title="var">Hctx</span> <span class="id" title="var">Hret</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">IHpars</span> [<span class="id" title="var">IHctx</span> <span class="id" title="var">IHret</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_predicate"><span class="id" title="definition">eq_predicate</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_branches"><span class="id" title="definition">eq_branches</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_context_upto_names"><span class="id" title="lemma">trans_eq_context_upto_names</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names_smash_context"><span class="id" title="lemma">eq_context_upto_names_smash_context</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_context_upto_names"><span class="id" title="lemma">trans_eq_context_upto_names</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eq_term_upto_univ_expand_lets"><span class="id" title="lemma">eq_term_upto_univ_expand_lets</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_subst_context"><span class="id" title="lemma">eq_context_upto_subst_context</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConfluence.html#eq_context_upto_names_subst_instance"><span class="id" title="lemma">eq_context_upto_names_subst_instance</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">tc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1: <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_context_upto_names"><span class="id" title="lemma">trans_eq_context_upto_names</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_rev"><span class="id" title="lemma">All2_rev</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">X0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">now</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_compare_term" class="idref" href="#trans_compare_term"><span class="id" title="lemma">trans_compare_term</span></a> {<a id="cf:700" class="idref" href="#cf:700"><span class="id" title="binder">cf</span></a>} {<a id="00d0e2d7812fbba1953d6ff958442ab1" class="idref" href="#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="pb:702" class="idref" href="#pb:702"><span class="id" title="binder">pb</span></a> <a id="5e0b5ee06d56d37d37b555f07d6a9c85" class="idref" href="#5e0b5ee06d56d37d37b555f07d6a9c85"><span class="id" title="binder">ϕ</span></a> <a id="T:704" class="idref" href="#T:704"><span class="id" title="binder">T</span></a> <a id="U:705" class="idref" href="#U:705"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#compare_term"><span class="id" title="definition">compare_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5e0b5ee06d56d37d37b555f07d6a9c85"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:702"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:704"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:705"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#compare_term"><span class="id" title="definition">compare_term</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:700"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#00d0e2d7812fbba1953d6ff958442ab1"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5e0b5ee06d56d37d37b555f07d6a9c85"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:702"><span class="id" title="variable">pb</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:704"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:705"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_term_upto_univ"><span class="id" title="lemma">trans_eq_term_upto_univ</span></a> ; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">tc</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_leq_term" class="idref" href="#trans_leq_term"><span class="id" title="lemma">trans_leq_term</span></a> {<a id="cf:706" class="idref" href="#cf:706"><span class="id" title="binder">cf</span></a>} {<a id="af891992e985b9a045a6c1592aafc8b6" class="idref" href="#af891992e985b9a045a6c1592aafc8b6"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} <a id="a59ebe1658422805469f0ec8516e04f1" class="idref" href="#a59ebe1658422805469f0ec8516e04f1"><span class="id" title="binder">ϕ</span></a> <a id="T:709" class="idref" href="#T:709"><span class="id" title="binder">T</span></a> <a id="U:710" class="idref" href="#U:710"><span class="id" title="binder">U</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#leq_term"><span class="id" title="abbreviation">PCUICEquality.leq_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#af891992e985b9a045a6c1592aafc8b6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a59ebe1658422805469f0ec8516e04f1"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:709"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:710"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#compare_term"><span class="id" title="definition">compare_term</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:706"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#af891992e985b9a045a6c1592aafc8b6"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a59ebe1658422805469f0ec8516e04f1"><span class="id" title="variable">ϕ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:709"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:710"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_term_upto_univ"><span class="id" title="lemma">trans_eq_term_upto_univ</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">tc</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContextConversion.html#"><span class="id" title="library">PCUICContextConversion</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_red1_wt" class="idref" href="#wt_red1_wt"><span class="id" title="lemma">wt_red1_wt</span></a> {<a id="cf:711" class="idref" href="#cf:711"><span class="id" title="binder">cf</span></a>} {<a id="feb6eae9e57281fbbbb5f2cbdafd2919" class="idref" href="#feb6eae9e57281fbbbb5f2cbdafd2919"><span class="id" title="binder">Σ</span></a>} {<a id="6f01eb6a99f7c2017f8975f3d7f562bc" class="idref" href="#6f01eb6a99f7c2017f8975f3d7f562bc"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#feb6eae9e57281fbbbb5f2cbdafd2919"><span class="id" title="variable">Σ</span></a>} {<a id="fcf48e8c9e6b8c86e9a7e4b7dc6f5b54" class="idref" href="#fcf48e8c9e6b8c86e9a7e4b7dc6f5b54"><span class="id" title="binder">Γ</span></a> <a id="t:715" class="idref" href="#t:715"><span class="id" title="binder">t</span></a> <a id="u:716" class="idref" href="#u:716"><span class="id" title="binder">u</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#feb6eae9e57281fbbbb5f2cbdafd2919"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fcf48e8c9e6b8c86e9a7e4b7dc6f5b54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:715"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#feb6eae9e57281fbbbb5f2cbdafd2919"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fcf48e8c9e6b8c86e9a7e4b7dc6f5b54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:715"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:716"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#feb6eae9e57281fbbbb5f2cbdafd2919"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fcf48e8c9e6b8c86e9a7e4b7dc6f5b54"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:716"><span class="id" title="variable">u</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">s</span> <span class="id" title="var">ht</span>] <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">s</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#subject_reduction1"><span class="id" title="lemma">subject_reduction1</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wtcumul" class="idref" href="#wtcumul"><span class="id" title="section">wtcumul</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="module">PCUICTyping</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#"><span class="id" title="module">PCUICEquality</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wtcumul.cf" class="idref" href="#wtcumul.cf"><span class="id" title="variable">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>}.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Record</span> <a id="wt_red1" class="idref" href="#wt_red1"><span class="id" title="record">wt_red1</span></a> {<a id="cf:718" class="idref" href="#cf:718"><span class="id" title="binder">cf</span></a>} (<a id="ef738b8cc629eb095d852fe57e75db82" class="idref" href="#ef738b8cc629eb095d852fe57e75db82"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>) (<a id="60e31f1f27bbb7539a34ffb256f996e5" class="idref" href="#60e31f1f27bbb7539a34ffb256f996e5"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">PCUICEnvironment.context</span></a>) <a id="T:721" class="idref" href="#T:721"><span class="id" title="binder">T</span></a> <a id="U:722" class="idref" href="#U:722"><span class="id" title="binder">U</span></a> :=<br/>
&nbsp;&nbsp;{ <a id="wt_red1_red1" class="idref" href="#wt_red1_red1"><span class="id" title="projection">wt_red1_red1</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1"><span class="id" title="inductive">PCUICReduction.red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ef738b8cc629eb095d852fe57e75db82"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#60e31f1f27bbb7539a34ffb256f996e5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:721"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:722"><span class="id" title="variable">U</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wt_red1_dom" class="idref" href="#wt_red1_dom"><span class="id" title="projection">wt_red1_dom</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ef738b8cc629eb095d852fe57e75db82"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#60e31f1f27bbb7539a34ffb256f996e5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:721"><span class="id" title="variable">T</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a id="wt_red1_codom" class="idref" href="#wt_red1_codom"><span class="id" title="projection">wt_red1_codom</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ef738b8cc629eb095d852fe57e75db82"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#60e31f1f27bbb7539a34ffb256f996e5"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:722"><span class="id" title="variable">U</span></a> }.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Reserved Notation</span> &quot; Σ ;;; Γ |-- t &lt;=[ le ] u " (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">Γ</span>, <span class="id" title="var">le</span>, <span class="id" title="var">t</span>, <span class="id" title="var">u</span> <span class="id" title="tactic">at</span> <span class="id" title="var">next</span> <span class="id" title="keyword">level</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="wt_cumul_pb" class="idref" href="#wt_cumul_pb"><span class="id" title="definition, inductive"><span id="wt_cumul_pb_rect" class="id"><span id="wt_cumul_pb_ind" class="id"><span id="wt_cumul_pb_rec" class="id"><span id="wt_cumul_pb_sind" class="id">wt_cumul_pb</span></span></span></span></span></a> (<a id="pb:727" class="idref" href="#pb:727"><span class="id" title="binder">pb</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#conv_pb"><span class="id" title="inductive">conv_pb</span></a>) (<a id="76edf919733f387665f2bc317591d2e4" class="idref" href="#76edf919733f387665f2bc317591d2e4"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="7c4ea6893121bb1c435c2532c5675923" class="idref" href="#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="wt_cumul_refl" class="idref" href="#wt_cumul_refl"><span class="id" title="constructor">wt_cumul_refl</span></a> <a id="t:732" class="idref" href="#t:732"><span class="id" title="binder">t</span></a> <a id="u:733" class="idref" href="#u:733"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#compare_term"><span class="id" title="definition">compare_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:732"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:733"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:732"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:733"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;| <a id="wt_cumul_red_l" class="idref" href="#wt_cumul_red_l"><span class="id" title="constructor">wt_cumul_red_l</span></a> <a id="t:734" class="idref" href="#t:734"><span class="id" title="binder">t</span></a> <a id="u:735" class="idref" href="#u:735"><span class="id" title="binder">u</span></a> <a id="v:736" class="idref" href="#v:736"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red1"><span class="id" title="record">wt_red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:734"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:736"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:736"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:735"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:734"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:735"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;| <a id="wt_cumul_red_r" class="idref" href="#wt_cumul_red_r"><span class="id" title="constructor">wt_cumul_red_r</span></a> <a id="t:737" class="idref" href="#t:737"><span class="id" title="binder">t</span></a> <a id="u:738" class="idref" href="#u:738"><span class="id" title="binder">u</span></a> <a id="v:739" class="idref" href="#v:739"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:737"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:739"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red1"><span class="id" title="record">wt_red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:738"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:739"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#76edf919733f387665f2bc317591d2e4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7c4ea6893121bb1c435c2532c5675923"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:737"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:727"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:738"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">where</span> <a id="967aeeecf43cf11ae9b7310e27aaf43b" class="idref" href="#967aeeecf43cf11ae9b7310e27aaf43b"><span class="id" title="notation">&quot;</span></a> Σ ;;; Γ |-- t &lt;=[ pb ] u " := (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb:731"><span class="id" title="inductive">wt_cumul_pb</span></a> <span class="id" title="var">pb</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_cumul" class="idref" href="#wt_cumul"><span class="id" title="definition">wt_cumul</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_conv" class="idref" href="#wt_conv"><span class="id" title="definition">wt_conv</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cumul_decorate" class="idref" href="#cumul_decorate"><span class="id" title="lemma">cumul_decorate</span></a> (<a id="f80422d592db83ec49d473650033120e" class="idref" href="#f80422d592db83ec49d473650033120e"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="159a10d300b40918047a0245b79b4afd" class="idref" href="#159a10d300b40918047a0245b79b4afd"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f80422d592db83ec49d473650033120e"><span class="id" title="variable">Σ</span></a>} <a id="9020d35ffc6efeec8586e12b6ab046b6" class="idref" href="#9020d35ffc6efeec8586e12b6ab046b6"><span class="id" title="binder">Γ</span></a> <a id="T:743" class="idref" href="#T:743"><span class="id" title="binder">T</span></a> <a id="U:744" class="idref" href="#U:744"><span class="id" title="binder">U</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f80422d592db83ec49d473650033120e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9020d35ffc6efeec8586e12b6ab046b6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:743"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f80422d592db83ec49d473650033120e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9020d35ffc6efeec8586e12b6ab046b6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:744"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f80422d592db83ec49d473650033120e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9020d35ffc6efeec8586e12b6ab046b6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:743"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:744"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f80422d592db83ec49d473650033120e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9020d35ffc6efeec8586e12b6ab046b6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:743"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:744"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType_wt</span></a> ⇒ <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType_wt</span></a> ⇒ <span class="id" title="var">hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">ht</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">hu</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="conv_decorate" class="idref" href="#conv_decorate"><span class="id" title="lemma">conv_decorate</span></a> (<a id="cbd25b86907845699760e30adb7501dc" class="idref" href="#cbd25b86907845699760e30adb7501dc"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="76673b5691a023d8b61789678b9fca77" class="idref" href="#76673b5691a023d8b61789678b9fca77"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbd25b86907845699760e30adb7501dc"><span class="id" title="variable">Σ</span></a>} <a id="0411940a6617c5baf7cf6cda4c4a775e" class="idref" href="#0411940a6617c5baf7cf6cda4c4a775e"><span class="id" title="binder">Γ</span></a> <a id="T:748" class="idref" href="#T:748"><span class="id" title="binder">T</span></a> <a id="U:749" class="idref" href="#U:749"><span class="id" title="binder">U</span></a> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbd25b86907845699760e30adb7501dc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0411940a6617c5baf7cf6cda4c4a775e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:748"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbd25b86907845699760e30adb7501dc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0411940a6617c5baf7cf6cda4c4a775e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:749"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#convAlgo"><span class="id" title="abbreviation">convAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbd25b86907845699760e30adb7501dc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0411940a6617c5baf7cf6cda4c4a775e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:748"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:749"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbd25b86907845699760e30adb7501dc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0411940a6617c5baf7cf6cda4c4a775e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:748"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:749"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ht</span> <span class="id" title="var">hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">ht</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">hu</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_cumul_pb_ctx" class="idref" href="#wt_cumul_pb_ctx"><span class="id" title="definition">wt_cumul_pb_ctx</span></a> {<a id="cf:750" class="idref" href="#cf:750"><span class="id" title="binder">cf</span></a>} <a id="le:751" class="idref" href="#le:751"><span class="id" title="binder">le</span></a> <a id="5f2f7ae9e0a5cb8f79ece21aae78bb74" class="idref" href="#5f2f7ae9e0a5cb8f79ece21aae78bb74"><span class="id" title="binder">Σ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold"><span class="id" title="inductive">All2_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="57d0c39a9a6b319a0c02dae2dfb89362" class="idref" href="#57d0c39a9a6b319a0c02dae2dfb89362"><span class="id" title="binder">Γ</span></a> <a id="5eb4f953702a361f0a673197b7c3994f" class="idref" href="#5eb4f953702a361f0a673197b7c3994f"><span class="id" title="binder">Γ'</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#All_decls_alpha_pb"><span class="id" title="inductive">All_decls_alpha_pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:751"><span class="id" title="variable">le</span></a> (<span class="id" title="keyword">fun</span> <a id="le:755" class="idref" href="#le:755"><span class="id" title="binder">le</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:755"><span class="id" title="variable">le</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5f2f7ae9e0a5cb8f79ece21aae78bb74"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#57d0c39a9a6b319a0c02dae2dfb89362"><span class="id" title="variable">Γ</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_cumul_pb_ctx_rel" class="idref" href="#wt_cumul_pb_ctx_rel"><span class="id" title="definition">wt_cumul_pb_ctx_rel</span></a> {<a id="cf:756" class="idref" href="#cf:756"><span class="id" title="binder">cf</span></a>} <a id="le:757" class="idref" href="#le:757"><span class="id" title="binder">le</span></a> <a id="91dceb626bfd67932019d231f976ab73" class="idref" href="#91dceb626bfd67932019d231f976ab73"><span class="id" title="binder">Σ</span></a> <a id="a7cf864f33e8a8a0294c0d9c139aebff" class="idref" href="#a7cf864f33e8a8a0294c0d9c139aebff"><span class="id" title="binder">Γ</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold"><span class="id" title="inductive">All2_fold</span></a> (<span class="id" title="keyword">fun</span> <a id="c6c10286c3ef3532758e785573f8050d" class="idref" href="#c6c10286c3ef3532758e785573f8050d"><span class="id" title="binder">Δ</span></a> <a id="ccaf7bb99b09a2d9d9e607d91c5bc375" class="idref" href="#ccaf7bb99b09a2d9d9e607d91c5bc375"><span class="id" title="binder">Δ'</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#All_decls_alpha_pb"><span class="id" title="inductive">All_decls_alpha_pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:757"><span class="id" title="variable">le</span></a> (<span class="id" title="keyword">fun</span> <a id="le:762" class="idref" href="#le:762"><span class="id" title="binder">le</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb"><span class="id" title="inductive">wt_cumul_pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:762"><span class="id" title="variable">le</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91dceb626bfd67932019d231f976ab73"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a7cf864f33e8a8a0294c0d9c139aebff"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c6c10286c3ef3532758e785573f8050d"><span class="id" title="variable">Δ</span></a>))).<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wtcumul"><span class="id" title="section">wtcumul</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_conv" class="idref" href="#trans_conv"><span class="id" title="lemma">trans_conv</span></a> {<a id="cf:763" class="idref" href="#cf:763"><span class="id" title="binder">cf</span></a>} {<a id="91b4e3c37240a0f50471ee4e8e9789fb" class="idref" href="#91b4e3c37240a0f50471ee4e8e9789fb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="65303e2df88596cdcd3d9ea42dfa5a96" class="idref" href="#65303e2df88596cdcd3d9ea42dfa5a96"><span class="id" title="binder">Γ</span></a> <a id="T:766" class="idref" href="#T:766"><span class="id" title="binder">T</span></a> <a id="U:767" class="idref" href="#U:767"><span class="id" title="binder">U</span></a>} {<a id="789e0c62268eedea972b4daa3322f033" class="idref" href="#789e0c62268eedea972b4daa3322f033"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91b4e3c37240a0f50471ee4e8e9789fb"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91b4e3c37240a0f50471ee4e8e9789fb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_conv"><span class="id" title="definition">wt_conv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91b4e3c37240a0f50471ee4e8e9789fb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65303e2df88596cdcd3d9ea42dfa5a96"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:766"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:767"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo_gen"><span class="id" title="inductive">cumulAlgo_gen</span></a> (<span class="id" title="var">H</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:763"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91b4e3c37240a0f50471ee4e8e9789fb"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65303e2df88596cdcd3d9ea42dfa5a96"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:766"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:767"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span>; <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_compare_term"><span class="id" title="lemma">trans_compare_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_conv_conv"><span class="id" title="lemma">red_conv_conv</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_conv_conv_inv"><span class="id" title="lemma">red_conv_conv_inv</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cumul" class="idref" href="#trans_cumul"><span class="id" title="lemma">trans_cumul</span></a> {<a id="cf:769" class="idref" href="#cf:769"><span class="id" title="binder">cf</span></a>} {<a id="f0f9e6e9487651a269180f86fb36e481" class="idref" href="#f0f9e6e9487651a269180f86fb36e481"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="32ac31fb44a0ce8d04eedce0c2789ee4" class="idref" href="#32ac31fb44a0ce8d04eedce0c2789ee4"><span class="id" title="binder">Γ</span></a> <a id="T:772" class="idref" href="#T:772"><span class="id" title="binder">T</span></a> <a id="U:773" class="idref" href="#U:773"><span class="id" title="binder">U</span></a>} {<a id="4557da3b73300a5151d423d4fd926c63" class="idref" href="#4557da3b73300a5151d423d4fd926c63"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0f9e6e9487651a269180f86fb36e481"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0f9e6e9487651a269180f86fb36e481"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul"><span class="id" title="definition">wt_cumul</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0f9e6e9487651a269180f86fb36e481"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#32ac31fb44a0ce8d04eedce0c2789ee4"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:772"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:773"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo_gen"><span class="id" title="inductive">cumulAlgo_gen</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:769"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0f9e6e9487651a269180f86fb36e481"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#32ac31fb44a0ce8d04eedce0c2789ee4"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:772"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:773"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span>; <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_compare_term"><span class="id" title="lemma">trans_compare_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_cumul_cumul"><span class="id" title="lemma">red_cumul_cumul</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_cumul_cumul_inv"><span class="id" title="lemma">red_cumul_cumul_inv</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="TTwf_local" class="idref" href="#TTwf_local"><span class="id" title="definition">TTwf_local</span></a> {<a id="cf:775" class="idref" href="#cf:775"><span class="id" title="binder">cf</span></a>} <a id="136df8303f27079240f3eda161c7d5ac" class="idref" href="#136df8303f27079240f3eda161c7d5ac"><span class="id" title="binder">Σ</span></a> <a id="1bc3a68df3995cd0d51f733f889c7a56" class="idref" href="#1bc3a68df3995cd0d51f733f889c7a56"><span class="id" title="binder">Γ</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env"><span class="id" title="inductive">TT.All_local_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing"><span class="id" title="abbreviation">TT.lift_typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:775"><span class="id" title="variable">cf</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#136df8303f27079240f3eda161c7d5ac"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1bc3a68df3995cd0d51f733f889c7a56"><span class="id" title="variable">Γ</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_lift_typing_it" class="idref" href="#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> {<a id="P:778" class="idref" href="#P:778"><span class="id" title="binder">P</span></a> <a id="Q:779" class="idref" href="#Q:779"><span class="id" title="binder">Q</span></a>} {<a id="tm:780" class="idref" href="#tm:780"><span class="id" title="binder">tm</span></a> <a id="tm':781" class="idref" href="#tm':781"><span class="id" title="binder">tm'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>} {<a id="t:782" class="idref" href="#t:782"><span class="id" title="binder">t</span></a> <a id="t':783" class="idref" href="#t':783"><span class="id" title="binder">t'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>} {<a id="u:784" class="idref" href="#u:784"><span class="id" title="binder">u</span></a> <a id="r:785" class="idref" href="#r:785"><span class="id" title="binder">r</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="tu:786" class="idref" href="#tu:786"><span class="id" title="binder">tu</span></a>: <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing0"><span class="id" title="definition">ST.lift_typing0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:778"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#Judge"><span class="id" title="constructor">Judge</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm:780"><span class="id" title="variable">tm</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:782"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:784"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#r:785"><span class="id" title="variable">r</span></a>),<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="s:787" class="idref" href="#s:787"><span class="id" title="binder">s</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tu:786"><span class="id" title="variable">tu</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">.π1</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm':781"><span class="id" title="variable">tm'</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm:780"><span class="id" title="variable">tm</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#unit"><span class="id" title="inductive">unit</span></a> | <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">tm'</span>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">tm</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:778"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm:780"><span class="id" title="variable">tm</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:782"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:779"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm':781"><span class="id" title="variable">tm'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':783"><span class="id" title="variable">t'</span></a> | <span class="id" title="var">_</span>, <span class="id" title="var">_</span> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#False"><span class="id" title="inductive">False</span></a> <span class="id" title="keyword">end</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:778"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:782"><span class="id" title="variable">t</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:787"><span class="id" title="variable">s</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:779"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':783"><span class="id" title="variable">t'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:787"><span class="id" title="variable">s</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing0"><span class="id" title="definition">TT.lift_typing0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:779"><span class="id" title="variable">Q</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#Judge"><span class="id" title="constructor">Judge</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#tm':781"><span class="id" title="variable">tm'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':783"><span class="id" title="variable">t'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:784"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#r:785"><span class="id" title="variable">r</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (? &amp; ? &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">e</span>) <span class="id" title="var">s</span> <span class="id" title="var">HPQc</span> <span class="id" title="var">HPQs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">tm</span>, <span class="id" title="var">tm'</span> ⇒ //=. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HPQc</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eexists</span>. <span class="id" title="tactic">split</span>; [<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HPQs</span>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">u</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_local'" class="idref" href="#trans_wf_local'"><span class="id" title="lemma">trans_wf_local'</span></a> {<a id="cf:790" class="idref" href="#cf:790"><span class="id" title="binder">cf</span></a>} :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> (<a id="731eccd9ffdf1a56dd450a2b1f2d0a00" class="idref" href="#731eccd9ffdf1a56dd450a2b1f2d0a00"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_env_ext"><span class="id" title="definition">SE.global_env_ext</span></a>) <a id="1209fdac7954c59b397a09600be50307" class="idref" href="#1209fdac7954c59b397a09600be50307"><span class="id" title="binder">Γ</span></a> (<a id="a22289671fda446484e88365e4ed829c" class="idref" href="#a22289671fda446484e88365e4ed829c"><span class="id" title="binder">wfΓ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#731eccd9ffdf1a56dd450a2b1f2d0a00"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1209fdac7954c59b397a09600be50307"><span class="id" title="variable">Γ</span></a>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="P:798" class="idref" href="#P:798"><span class="id" title="binder">P</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="a5cab10e4e1887fa74c2018a4c6b5db5" class="idref" href="#a5cab10e4e1887fa74c2018a4c6b5db5"><span class="id" title="binder">Σ0</span></a> <a id="2cf78953903504796d4fa1d5c9e5aaa9" class="idref" href="#2cf78953903504796d4fa1d5c9e5aaa9"><span class="id" title="binder">Γ0</span></a> <span class="id" title="var">_</span> (<a id="t:796" class="idref" href="#t:796"><span class="id" title="binder">t</span></a> <a id="T:797" class="idref" href="#T:797"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) <span class="id" title="var">_</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:790"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a5cab10e4e1887fa74c2018a4c6b5db5"><span class="id" title="variable">Σ0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2cf78953903504796d4fa1d5c9e5aaa9"><span class="id" title="variable">Γ0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:796"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:797"><span class="id" title="variable">T</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env_over"><span class="id" title="definition">ST.All_local_env_over</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#731eccd9ffdf1a56dd450a2b1f2d0a00"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:798"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#731eccd9ffdf1a56dd450a2b1f2d0a00"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1209fdac7954c59b397a09600be50307"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a22289671fda446484e88365e4ed829c"><span class="id" title="variable">wfΓ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#TTwf_local"><span class="id" title="definition">TTwf_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#731eccd9ffdf1a56dd450a2b1f2d0a00"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1209fdac7954c59b397a09600be50307"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tu</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tu</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_local_env" class="idref" href="#trans_wf_local_env"><span class="id" title="lemma">trans_wf_local_env</span></a> {<a id="cf:799" class="idref" href="#cf:799"><span class="id" title="binder">cf</span></a>} <a id="1afef58d47a6ddb26868b13a95c67a19" class="idref" href="#1afef58d47a6ddb26868b13a95c67a19"><span class="id" title="binder">Σ</span></a> <a id="5abb3c5e2624067486a37e972af97f45" class="idref" href="#5abb3c5e2624067486a37e972af97f45"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env"><span class="id" title="inductive">ST.All_local_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing"><span class="id" title="abbreviation">ST.lift_typing</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="96ab4b3a912cb18bab40bae72d9784c5" class="idref" href="#96ab4b3a912cb18bab40bae72d9784c5"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_env_ext"><span class="id" title="definition">SE.global_env_ext</span></a>) <a id="3f370c8750d486a894951cea87437526" class="idref" href="#3f370c8750d486a894951cea87437526"><span class="id" title="binder">Γ</span></a> <a id="b:804" class="idref" href="#b:804"><span class="id" title="binder">b</span></a> <a id="ty:805" class="idref" href="#ty:805"><span class="id" title="binder">ty</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#96ab4b3a912cb18bab40bae72d9784c5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#96ab4b3a912cb18bab40bae72d9784c5"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3f370c8750d486a894951cea87437526"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:804"><span class="id" title="variable">b</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:805"><span class="id" title="variable">ty</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:799"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#96ab4b3a912cb18bab40bae72d9784c5"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3f370c8750d486a894951cea87437526"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:804"><span class="id" title="variable">b</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:805"><span class="id" title="variable">ty</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1afef58d47a6ddb26868b13a95c67a19"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5abb3c5e2624067486a37e972af97f45"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1afef58d47a6ddb26868b13a95c67a19"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#TTwf_local"><span class="id" title="definition">TTwf_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1afef58d47a6ddb26868b13a95c67a19"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5abb3c5e2624067486a37e972af97f45"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">t0</span> ⇒ // <span class="id" title="var">HT</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">t0</span> ⇒ // <span class="id" title="var">HT</span>. <span class="id" title="var">all</span>: <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HT</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_branches" class="idref" href="#trans_branches"><span class="id" title="lemma">trans_branches</span></a> {<a id="cf:806" class="idref" href="#cf:806"><span class="id" title="binder">cf</span></a>} <a id="11b7a8c29e1c6c50078d7ea69919deb4" class="idref" href="#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="binder">Σ</span></a> <a id="d0a15180f5e9536b38a7b44135659ffe" class="idref" href="#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="binder">Γ</span></a> <a id="brs:809" class="idref" href="#brs:809"><span class="id" title="binder">brs</span></a> <a id="btys:810" class="idref" href="#btys:810"><span class="id" title="binder">btys</span></a> <a id="ps:811" class="idref" href="#ps:811"><span class="id" title="binder">ps</span></a>:<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="br:812" class="idref" href="#br:812"><span class="id" title="binder">br</span></a> <a id="bty:813" class="idref" href="#bty:813"><span class="id" title="binder">bty</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">(((</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:812"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:813"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:812"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:813"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:812"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:813"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:813"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">PCUICAst.tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ps:811"><span class="id" title="variable">ps</span></a>)<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:813"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">PCUICAst.tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ps:811"><span class="id" title="variable">ps</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#brs:809"><span class="id" title="variable">brs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#btys:810"><span class="id" title="variable">btys</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="br:817" class="idref" href="#br:817"><span class="id" title="binder">br</span></a> <a id="bty:818" class="idref" href="#bty:818"><span class="id" title="binder">bty</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:817"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:818"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:817"><span class="id" title="variable">br</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:818"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11b7a8c29e1c6c50078d7ea69919deb4"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d0a15180f5e9536b38a7b44135659ffe"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bty:818"><span class="id" title="variable">bty</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ps:811"><span class="id" title="variable">ps</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#on_snd"><span class="id" title="definition">on_snd</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#brs:809"><span class="id" title="variable">brs</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> '<a id="pat:816" class="idref" href="#pat:816"><span class="id" title="binder">(</span></a><a id="x:815" class="idref" href="#x:815"><span class="id" title="binder"><span id="pat:816" class="id">x</span></span></a><a id="pat:816" class="idref" href="#pat:816"><span class="id" title="binder">,</span></a> <a id="y:814" class="idref" href="#y:814"><span class="id" title="binder"><span id="pat:816" class="id">y</span></span></a><a id="pat:816" class="idref" href="#pat:816"><span class="id" title="binder">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:815"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:814"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#btys:810"><span class="id" title="variable">btys</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">destruct</span> <span class="id" title="var">r</span> <span class="id" title="keyword">as</span> [[[[] ] ] ].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>,<span class="id" title="var">y</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>;<span class="id" title="tactic">trivial</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHX</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_mfix_All" class="idref" href="#trans_mfix_All"><span class="id" title="lemma">trans_mfix_All</span></a> {<a id="cf:819" class="idref" href="#cf:819"><span class="id" title="binder">cf</span></a>} <a id="dfa8d66ac523a2c0f92121c8c8d0ab70" class="idref" href="#dfa8d66ac523a2c0f92121c8c8d0ab70"><span class="id" title="binder">Σ</span></a> <a id="5979e0872f7d52f6a09cfba064a02c15" class="idref" href="#5979e0872f7d52f6a09cfba064a02c15"><span class="id" title="binder">Γ</span></a> <a id="mfix:822" class="idref" href="#mfix:822"><span class="id" title="binder">mfix</span></a> <a id="idx:823" class="idref" href="#idx:823"><span class="id" title="binder">idx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5979e0872f7d52f6a09cfba064a02c15"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:822"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:823"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env"><span class="id" title="inductive">ST.All_local_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing"><span class="id" title="abbreviation">ST.lift_typing</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="ea9687ab665a71d7ad47f5da1a3ef25c" class="idref" href="#ea9687ab665a71d7ad47f5da1a3ef25c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_env_ext"><span class="id" title="definition">SE.global_env_ext</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="88561c4781d18270674253b0a63521fa" class="idref" href="#88561c4781d18270674253b0a63521fa"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context"><span class="id" title="definition">SE.context</span></a>) (<a id="b:826" class="idref" href="#b:826"><span class="id" title="binder">b</span></a> <a id="ty:827" class="idref" href="#ty:827"><span class="id" title="binder">ty</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ea9687ab665a71d7ad47f5da1a3ef25c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88561c4781d18270674253b0a63521fa"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:826"><span class="id" title="variable">b</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:827"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:819"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ea9687ab665a71d7ad47f5da1a3ef25c"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88561c4781d18270674253b0a63521fa"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:826"><span class="id" title="variable">b</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:827"><span class="id" title="variable">ty</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfa8d66ac523a2c0f92121c8c8d0ab70"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5979e0872f7d52f6a09cfba064a02c15"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_context"><span class="id" title="definition">SE.fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:822"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">)</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#TTwf_local"><span class="id" title="definition">TTwf_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfa8d66ac523a2c0f92121c8c8d0ab70"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5979e0872f7d52f6a09cfba064a02c15"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:822"><span class="id" title="variable">mfix</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">clfix</span> ?.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">idx</span>) //.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;|- <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#TTwf_local"><span class="id" title="definition">TTwf_local</span></a> <span class="id" title="var">_</span> ?<span class="id" title="var">A</span> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> <span class="id" title="var">A</span> <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_context"><span class="id" title="definition">SE.fix_context</span></a> <span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">)</span></a>))<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;2: {<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a>, <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context"><span class="id" title="definition">app_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;}<br/>
<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">X</span>;<span class="id" title="var">cbn</span>;<span class="id" title="tactic">constructor</span>;<span class="id" title="tactic">auto</span>;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">t0</span> ⇒ // <span class="id" title="var">HT</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">t0</span> ⇒ // <span class="id" title="var">HT</span>. <span class="id" title="var">all</span>: <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">HT</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_decompose_prod_assum" class="idref" href="#trans_decompose_prod_assum"><span class="id" title="lemma">trans_decompose_prod_assum</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="1e1b50cdbc88028577dbbab690492194" class="idref" href="#1e1b50cdbc88028577dbbab690492194"><span class="id" title="binder">Γ</span></a> <a id="t:829" class="idref" href="#t:829"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Δ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1e1b50cdbc88028577dbbab690492194"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:829"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1e1b50cdbc88028577dbbab690492194"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:829"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">Δ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">c</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δ</span> <span class="id" title="var">c</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span>, <span class="id" title="var">Δ</span>, <span class="id" title="var">c</span>, <span class="id" title="var">e</span> |- ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [ <span class="id" title="tactic">inversion</span> <span class="id" title="var">e</span> ; <span class="id" title="tactic">subst</span> ; <span class="id" title="tactic">reflexivity</span> ].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt2</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> <span class="id" title="var">e'</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">e'</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHt3</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="keyword">as</span> <span class="id" title="var">e'</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_isApp" class="idref" href="#trans_isApp"><span class="id" title="lemma">trans_isApp</span></a> <a id="t:830" class="idref" href="#t:830"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#isApp"><span class="id" title="definition">PCUICAst.isApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:830"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#isApp"><span class="id" title="definition">isApp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:830"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_nisApp" class="idref" href="#trans_nisApp"><span class="id" title="lemma">trans_nisApp</span></a> <a id="t:831" class="idref" href="#t:831"><span class="id" title="binder">t</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#isApp"><span class="id" title="definition">PCUICAst.isApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:831"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#isApp"><span class="id" title="definition">isApp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:831"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_destInd" class="idref" href="#trans_destInd"><span class="id" title="lemma">trans_destInd</span></a> <a id="t:832" class="idref" href="#t:832"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#destInd"><span class="id" title="definition">ST.destInd</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:832"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#destInd"><span class="id" title="definition">TT.destInd</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:832"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_decompose_app" class="idref" href="#trans_decompose_app"><span class="id" title="lemma">trans_decompose_app</span></a> <a id="t:833" class="idref" href="#t:833"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> '<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">hd</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> := <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:833"><span class="id" title="variable">t</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:833"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">hd</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">args</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">da</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_notApp"><span class="id" title="lemma">decompose_app_notApp</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">da</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_rec_inv"><span class="id" title="lemma">decompose_app_rec_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">da</span>. <span class="id" title="tactic">subst</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isApp"><span class="id" title="lemma">trans_isApp</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2_map_option_out_mapi_Some_spec" class="idref" href="#All2_map_option_out_mapi_Some_spec"><span class="id" title="lemma">All2_map_option_out_mapi_Some_spec</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> {<a id="A:834" class="idref" href="#A:834"><span class="id" title="binder">A</span></a> <a id="B:835" class="idref" href="#B:835"><span class="id" title="binder">B</span></a> <a id="B':836" class="idref" href="#B':836"><span class="id" title="binder">B'</span></a>} (<a id="f:837" class="idref" href="#f:837"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:834"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:835"><span class="id" title="variable">B</span></a>) (<a id="g':838" class="idref" href="#g':838"><span class="id" title="binder">g'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:835"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B':836"><span class="id" title="variable">B'</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a id="g:839" class="idref" href="#g:839"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:834"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option"><span class="id" title="inductive">option</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B':836"><span class="id" title="variable">B'</span></a>) <a id="l:840" class="idref" href="#l:840"><span class="id" title="binder">l</span></a> <a id="t:841" class="idref" href="#t:841"><span class="id" title="binder">t</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:842" class="idref" href="#i:842"><span class="id" title="binder">i</span></a> <a id="x:843" class="idref" href="#x:843"><span class="id" title="binder">x</span></a> <a id="t:844" class="idref" href="#t:844"><span class="id" title="binder">t</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:837"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:842"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:843"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:844"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:839"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:842"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:843"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g':838"><span class="id" title="variable">g'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:844"><span class="id" title="variable">t</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:837"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:840"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:841"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:839"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:840"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g':838"><span class="id" title="variable">g'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:841"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">B'</span> <span class="id" title="var">f</span> <span class="id" title="var">g'</span> <span class="id" title="var">g</span> <span class="id" title="var">l</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">h</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="tactic">in</span> <span class="id" title="var">n</span>, <span class="id" title="var">e</span>, <span class="id" title="var">t</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MROption.html#some_inj"><span class="id" title="lemma">some_inj</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">f</span> <span class="id" title="var">n</span> <span class="id" title="var">a</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">e'</span>. 2: <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">h</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">h'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">h'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">type</span> <span class="id" title="keyword">of</span> <span class="id" title="var">e</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="keyword">context</span> [ <a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> ?<span class="id" title="var">t</span> ] ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">e''</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>. 2: <span class="id" title="tactic">discriminate</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e''</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e''</span>. <span class="id" title="var">now</span> <span class="id" title="var">noconf</span> <span class="id" title="var">e</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_it_mkProd_or_LetIn" class="idref" href="#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a> {<a id="P:845" class="idref" href="#P:845"><span class="id" title="binder">P</span></a> <a id="072f0d2a4a7dd589ec594cad9d0f7841" class="idref" href="#072f0d2a4a7dd589ec594cad9d0f7841"><span class="id" title="binder">Δ</span></a> <a id="t:847" class="idref" href="#t:847"><span class="id" title="binder">t</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:845"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#072f0d2a4a7dd589ec594cad9d0f7841"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:847"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:845"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#072f0d2a4a7dd589ec594cad9d0f7841"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::bool_scope:x_'&amp;&amp;'_x"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#072f0d2a4a7dd589ec594cad9d0f7841"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:845"><span class="id" title="variable">P</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:847"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">P</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a> ⇒ <span class="id" title="var">P</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.mkProd_or_LetIn"><span class="id" title="definition">mkProd_or_LetIn</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= <span class="id" title="var">IHΔ</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#plengths"><span class="id" title="definition">plengths</span></a> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_ctx_tip"><span class="id" title="lemma">on_free_vars_ctx_tip</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#test_decl"><span class="id" title="definition">test_decl</span></a> /=. <span class="id" title="tactic">ring</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= <span class="id" title="var">IHΔ</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICTactics.html#lengths"><span class="id" title="definition">lengths</span></a> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_ctx_tip"><span class="id" title="lemma">on_free_vars_ctx_tip</span></a> /=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#test_decl"><span class="id" title="definition">test_decl</span></a> /=. <span class="id" title="tactic">ring</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_check_one_fix" class="idref" href="#trans_check_one_fix"><span class="id" title="lemma">trans_check_one_fix</span></a> <a id="n:848" class="idref" href="#n:848"><span class="id" title="binder">n</span></a> <a id="p:849" class="idref" href="#p:849"><span class="id" title="binder">p</span></a> <a id="def:850" class="idref" href="#def:850"><span class="id" title="binder">def</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:849"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:848"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:849"><span class="id" title="variable">p</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#def:850"><span class="id" title="variable">def</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">TT.check_one_fix</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#def:850"><span class="id" title="variable">def</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">ST.check_one_fix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#def:850"><span class="id" title="variable">def</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">ST.check_one_fix</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">TT.check_one_fix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">def</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> <span class="id" title="var">ty</span> <span class="id" title="var">arg</span> <span class="id" title="var">rarg</span>] ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decompose_prod_assum"><span class="id" title="lemma">trans_decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ty</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">p'</span>] <span class="id" title="var">eqn</span>:<span class="id" title="var">decty</span> ⇒ /= →.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a> /=. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">onty</span> <span class="id" title="var">onarg</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#decompose_prod_assum_it_mkProd_or_LetIn"><span class="id" title="lemma">decompose_prod_assum_it_mkProd_or_LetIn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">decty</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">decty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">ty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">onty</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onctx</span> <span class="id" title="var">onp'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <span class="id" title="var">p</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">List.map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ /= //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decompose_app"><span class="id" title="lemma">trans_decompose_app</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <span class="id" title="var">c</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">intros</span> →.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_destInd"><span class="id" title="lemma">trans_destInd</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="on_free_vars_mfix" class="idref" href="#on_free_vars_mfix"><span class="id" title="definition">on_free_vars_mfix</span></a> <a id="p:851" class="idref" href="#p:851"><span class="id" title="binder">p</span></a> <a id="n:852" class="idref" href="#n:852"><span class="id" title="binder">n</span></a> <a id="mfix:853" class="idref" href="#mfix:853"><span class="id" title="binder">mfix</span></a> :=<br/>
&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#test_def"><span class="id" title="definition">test_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:851"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:852"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:851"><span class="id" title="variable">p</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:853"><span class="id" title="variable">mfix</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_option_out_check_one_fix" class="idref" href="#map_option_out_check_one_fix"><span class="id" title="lemma">map_option_out_check_one_fix</span></a> {<a id="p:854" class="idref" href="#p:854"><span class="id" title="binder">p</span></a> <a id="n:855" class="idref" href="#n:855"><span class="id" title="binder">n</span></a> <a id="mfix:856" class="idref" href="#mfix:856"><span class="id" title="binder">mfix</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_mfix"><span class="id" title="definition">on_free_vars_mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:854"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:855"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:856"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:857" class="idref" href="#x:857"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">TT.check_one_fix</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:857"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:856"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_fix"><span class="id" title="definition">ST.check_one_fix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:856"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> ⇒ <span class="id" title="var">hmfix</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_check_one_fix"><span class="id" title="lemma">trans_check_one_fix</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_check_one_cofix" class="idref" href="#trans_check_one_cofix"><span class="id" title="lemma">trans_check_one_cofix</span></a> <a id="mfix:858" class="idref" href="#mfix:858"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">TT.check_one_cofix</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:858"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">ST.check_one_cofix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:858"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">ST.check_one_cofix</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">TT.check_one_cofix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">mfix</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> <span class="id" title="var">ty</span> <span class="id" title="var">arg</span> <span class="id" title="var">rarg</span>] ⇒ /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decompose_prod_assum"><span class="id" title="lemma">trans_decompose_prod_assum</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ty</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_prod_assum"><span class="id" title="definition">decompose_prod_assum</span></a> <span class="id" title="keyword">as</span> [<span class="id" title="var">ctx</span> <span class="id" title="var">p</span>] ⇒ → /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decompose_app"><span class="id" title="lemma">trans_decompose_app</span></a> <span class="id" title="var">p</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> ⇒ /= →.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_destInd"><span class="id" title="lemma">trans_destInd</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_option_out_check_one_cofix" class="idref" href="#map_option_out_check_one_cofix"><span class="id" title="lemma">map_option_out_check_one_cofix</span></a> <a id="mfix:859" class="idref" href="#mfix:859"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<span class="id" title="keyword">fun</span> <a id="x:860" class="idref" href="#x:860"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">TT.check_one_cofix</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:860"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:859"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_one_cofix"><span class="id" title="definition">ST.check_one_cofix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:859"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a> ⇒ <span class="id" title="var">x</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_check_one_cofix"><span class="id" title="lemma">trans_check_one_cofix</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_check_rec_kind" class="idref" href="#trans_check_rec_kind"><span class="id" title="lemma">trans_check_rec_kind</span></a> <a id="be00b059ee34000158e21d2449a063b9" class="idref" href="#be00b059ee34000158e21d2449a063b9"><span class="id" title="binder">Σ</span></a> <a id="k:862" class="idref" href="#k:862"><span class="id" title="binder">k</span></a> <a id="f:863" class="idref" href="#f:863"><span class="id" title="binder">f</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_recursivity_kind"><span class="id" title="definition">ST.check_recursivity_kind</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#be00b059ee34000158e21d2449a063b9"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:862"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:863"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_recursivity_kind"><span class="id" title="definition">TT.check_recursivity_kind</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#be00b059ee34000158e21d2449a063b9"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:862"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:863"><span class="id" title="variable">f</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_recursivity_kind"><span class="id" title="definition">ST.check_recursivity_kind</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#check_recursivity_kind"><span class="id" title="definition">TT.check_recursivity_kind</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_env"><span class="id" title="definition">SE.lookup_env</span></a> <span class="id" title="keyword">as</span> [[]|] ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_fixpoint" class="idref" href="#trans_wf_fixpoint"><span class="id" title="lemma">trans_wf_fixpoint</span></a> <a id="d10d79a10e846559d8eaeadecf0403ae" class="idref" href="#d10d79a10e846559d8eaeadecf0403ae"><span class="id" title="binder">Σ</span></a> <a id="p:865" class="idref" href="#p:865"><span class="id" title="binder">p</span></a> <a id="n:866" class="idref" href="#n:866"><span class="id" title="binder">n</span></a> <a id="mfix:867" class="idref" href="#mfix:867"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_mfix"><span class="id" title="definition">on_free_vars_mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:865"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:866"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:867"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint"><span class="id" title="definition">TT.wf_fixpoint</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d10d79a10e846559d8eaeadecf0403ae"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:867"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint"><span class="id" title="definition">ST.wf_fixpoint</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d10d79a10e846559d8eaeadecf0403ae"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:867"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hmfix</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint"><span class="id" title="definition">ST.wf_fixpoint</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint"><span class="id" title="definition">TT.wf_fixpoint</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint_gen"><span class="id" title="definition">ST.wf_fixpoint_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_fixpoint_gen"><span class="id" title="definition">TT.wf_fixpoint_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_map"><span class="id" title="lemma">forallb_map</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isLambda"><span class="id" title="lemma">trans_isLambda</span></a> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_option_out_check_one_fix"><span class="id" title="lemma">map_option_out_check_one_fix</span></a> <span class="id" title="var">hmfix</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> <span class="id" title="keyword">as</span> [[]|] ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_check_rec_kind"><span class="id" title="lemma">trans_check_rec_kind</span></a> <span class="id" title="var">Σ</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_cofixpoint" class="idref" href="#trans_wf_cofixpoint"><span class="id" title="lemma">trans_wf_cofixpoint</span></a> <a id="e8cf5d780f33bc12b937f35995e9bf1f" class="idref" href="#e8cf5d780f33bc12b937f35995e9bf1f"><span class="id" title="binder">Σ</span></a> <a id="mfix:869" class="idref" href="#mfix:869"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint"><span class="id" title="definition">TT.wf_cofixpoint</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8cf5d780f33bc12b937f35995e9bf1f"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:869"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint"><span class="id" title="definition">ST.wf_cofixpoint</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8cf5d780f33bc12b937f35995e9bf1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:869"><span class="id" title="variable">mfix</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint"><span class="id" title="definition">ST.wf_cofixpoint</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint"><span class="id" title="definition">TT.wf_cofixpoint</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint_gen"><span class="id" title="definition">ST.wf_cofixpoint_gen</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cofixpoint_gen"><span class="id" title="definition">TT.wf_cofixpoint_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_option_out_check_one_cofix"><span class="id" title="lemma">map_option_out_check_one_cofix</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.MROption.html#map_option_out"><span class="id" title="definition">map_option_out</span></a> <span class="id" title="keyword">as</span> [[]|] ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_check_rec_kind"><span class="id" title="lemma">trans_check_rec_kind</span></a> <span class="id" title="var">Σ</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="type_mkApps_napp" class="idref" href="#type_mkApps_napp"><span class="id" title="lemma">type_mkApps_napp</span></a> `{<a id="H:870" class="idref" href="#H:870"><span class="id" title="binder">checker_flags</span></a>} {<a id="434de336d78a08125134d57de2c531b2" class="idref" href="#434de336d78a08125134d57de2c531b2"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="a3581be8207d8e6a5ba9854aaeca955f" class="idref" href="#a3581be8207d8e6a5ba9854aaeca955f"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#434de336d78a08125134d57de2c531b2"><span class="id" title="variable">Σ</span></a>} <a id="2e882e4212018eb1e12b4e042e08ea38" class="idref" href="#2e882e4212018eb1e12b4e042e08ea38"><span class="id" title="binder">Γ</span></a> <a id="f:874" class="idref" href="#f:874"><span class="id" title="binder">f</span></a> <a id="u:875" class="idref" href="#u:875"><span class="id" title="binder">u</span></a> <a id="T:876" class="idref" href="#T:876"><span class="id" title="binder">T</span></a> <a id="T':877" class="idref" href="#T':877"><span class="id" title="binder">T'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#b3ebd0deddd84fd60e149cb5ef719351"><span class="id" title="notation">~~</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#isApp"><span class="id" title="definition">isApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:874"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#434de336d78a08125134d57de2c531b2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2e882e4212018eb1e12b4e042e08ea38"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:874"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:876"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#typing_spine"><span class="id" title="inductive">typing_spine</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#434de336d78a08125134d57de2c531b2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2e882e4212018eb1e12b4e042e08ea38"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:876"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:875"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T':877"><span class="id" title="variable">T'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#434de336d78a08125134d57de2c531b2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2e882e4212018eb1e12b4e042e08ea38"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:874"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:875"><span class="id" title="variable">u</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T':877"><span class="id" title="variable">T'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hf</span> <span class="id" title="var">hty</span> <span class="id" title="var">hsp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">hsp</span>. <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#type_ws_cumul_pb"><span class="id" title="lemma">type_ws_cumul_pb</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#type_mkApps"><span class="id" title="lemma">type_mkApps</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a id="fix_guard_trans" class="idref" href="#fix_guard_trans"><span class="id" title="axiom">fix_guard_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="b4e93f7edcd84eb53f85f7bcd068328f" class="idref" href="#b4e93f7edcd84eb53f85f7bcd068328f"><span class="id" title="binder">Σ</span></a> <a id="178d22fcda353a5527c6dee7fa82dcef" class="idref" href="#178d22fcda353a5527c6dee7fa82dcef"><span class="id" title="binder">Γ</span></a> <a id="mfix:880" class="idref" href="#mfix:880"><span class="id" title="binder">mfix</span></a>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_guard"><span class="id" title="definition">ST.fix_guard</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b4e93f7edcd84eb53f85f7bcd068328f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#178d22fcda353a5527c6dee7fa82dcef"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:880"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_guard"><span class="id" title="definition">TT.fix_guard</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b4e93f7edcd84eb53f85f7bcd068328f"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#178d22fcda353a5527c6dee7fa82dcef"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:880"><span class="id" title="variable">mfix</span></a>).<br/>

<br/>
<span class="id" title="keyword">Axiom</span> <a id="cofix_guard_trans" class="idref" href="#cofix_guard_trans"><span class="id" title="axiom">cofix_guard_trans</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">∀</span> <a id="8880112528a6d1299c33947a9c1b6534" class="idref" href="#8880112528a6d1299c33947a9c1b6534"><span class="id" title="binder">Σ</span></a> <a id="eec4524a30232363e326932b2f7ea856" class="idref" href="#eec4524a30232363e326932b2f7ea856"><span class="id" title="binder">Γ</span></a> <a id="mfix:885" class="idref" href="#mfix:885"><span class="id" title="binder">mfix</span></a>,<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cofix_guard"><span class="id" title="definition">ST.cofix_guard</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8880112528a6d1299c33947a9c1b6534"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eec4524a30232363e326932b2f7ea856"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:885"><span class="id" title="variable">mfix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cofix_guard"><span class="id" title="definition">TT.cofix_guard</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8880112528a6d1299c33947a9c1b6534"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eec4524a30232363e326932b2f7ea856"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:885"><span class="id" title="variable">mfix</span></a>).<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_it_mkLambda_or_LetIn" class="idref" href="#trans_it_mkLambda_or_LetIn"><span class="id" title="lemma">trans_it_mkLambda_or_LetIn</span></a> <a id="33aafbc25158d53df10ce18b31e5354a" class="idref" href="#33aafbc25158d53df10ce18b31e5354a"><span class="id" title="binder">Γ</span></a> <a id="T:889" class="idref" href="#T:889"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkLambda_or_LetIn"><span class="id" title="definition">it_mkLambda_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#33aafbc25158d53df10ce18b31e5354a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:889"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkLambda_or_LetIn"><span class="id" title="definition">it_mkLambda_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#33aafbc25158d53df10ce18b31e5354a"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:889"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /=. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#it_mkLambda_or_LetIn_app"><span class="id" title="lemma">PCUICAstUtils.it_mkLambda_or_LetIn_app</span></a> [<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span>]<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#it_mkLambda_or_LetIn_app"><span class="id" title="lemma">it_mkLambda_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>] ⇒ /=; <span class="id" title="var">cbn</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2i_All2_mapi" class="idref" href="#All2i_All2_mapi"><span class="id" title="lemma">All2i_All2_mapi</span></a> {<a id="A:890" class="idref" href="#A:890"><span class="id" title="binder">A</span></a> <a id="B:891" class="idref" href="#B:891"><span class="id" title="binder">B</span></a> <a id="C:892" class="idref" href="#C:892"><span class="id" title="binder">C</span></a> <a id="D:893" class="idref" href="#D:893"><span class="id" title="binder">D</span></a>} <a id="P:894" class="idref" href="#P:894"><span class="id" title="binder">P</span></a> (<a id="f:895" class="idref" href="#f:895"><span class="id" title="binder">f</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:890"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:891"><span class="id" title="variable">B</span></a>) (<a id="g:896" class="idref" href="#g:896"><span class="id" title="binder">g</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:892"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#D:893"><span class="id" title="variable">D</span></a>) <a id="l:897" class="idref" href="#l:897"><span class="id" title="binder">l</span></a> <a id="l':898" class="idref" href="#l':898"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> (<span class="id" title="keyword">fun</span> <a id="i:899" class="idref" href="#i:899"><span class="id" title="binder">i</span></a> <a id="x:900" class="idref" href="#x:900"><span class="id" title="binder">x</span></a> <a id="y:901" class="idref" href="#y:901"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:894"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:895"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:899"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:900"><span class="id" title="variable">x</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:896"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:899"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:901"><span class="id" title="variable">y</span></a>)) 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:897"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':898"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:894"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:895"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:897"><span class="id" title="variable">l</span></a>) (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:896"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':898"><span class="id" title="variable">l'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>. <span class="id" title="tactic">generalize</span> 0.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2i_sym" class="idref" href="#All2i_sym"><span class="id" title="lemma">All2i_sym</span></a> {<a id="A:902" class="idref" href="#A:902"><span class="id" title="binder">A</span></a> <a id="B:903" class="idref" href="#B:903"><span class="id" title="binder">B</span></a>} (<a id="P:904" class="idref" href="#P:904"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:902"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:903"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) <a id="n:905" class="idref" href="#n:905"><span class="id" title="binder">n</span></a> <a id="l:906" class="idref" href="#l:906"><span class="id" title="binder">l</span></a> <a id="l':907" class="idref" href="#l':907"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> (<span class="id" title="keyword">fun</span> <a id="i:908" class="idref" href="#i:908"><span class="id" title="binder">i</span></a> <a id="x:909" class="idref" href="#x:909"><span class="id" title="binder">x</span></a> <a id="y:910" class="idref" href="#y:910"><span class="id" title="binder">y</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:904"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:908"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:910"><span class="id" title="variable">y</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:909"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:905"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':907"><span class="id" title="variable">l'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:906"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:904"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:905"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:906"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':907"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_names_subst_context_pcuic" class="idref" href="#eq_names_subst_context_pcuic"><span class="id" title="lemma">eq_names_subst_context_pcuic</span></a> <a id="nas:911" class="idref" href="#nas:911"><span class="id" title="binder">nas</span></a> <a id="da6c3c42991cddbb2af26ecea8b8b5d0" class="idref" href="#da6c3c42991cddbb2af26ecea8b8b5d0"><span class="id" title="binder">Γ</span></a> <a id="s:913" class="idref" href="#s:913"><span class="id" title="binder">s</span></a> <a id="k:914" class="idref" href="#k:914"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#eq_names"><span class="id" title="abbreviation">eq_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:911"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#da6c3c42991cddbb2af26ecea8b8b5d0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#eq_names"><span class="id" title="abbreviation">eq_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:911"><span class="id" title="variable">nas</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:913"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:914"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#da6c3c42991cddbb2af26ecea8b8b5d0"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_snoc"><span class="id" title="lemma">subst_context_snoc</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_names_subst_instance_pcuic" class="idref" href="#eq_names_subst_instance_pcuic"><span class="id" title="lemma">eq_names_subst_instance_pcuic</span></a> <a id="nas:915" class="idref" href="#nas:915"><span class="id" title="binder">nas</span></a> (<a id="465775976edf69dd5565accfbdf78515" class="idref" href="#465775976edf69dd5565accfbdf78515"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="u:917" class="idref" href="#u:917"><span class="id" title="binder">u</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#eq_names"><span class="id" title="abbreviation">eq_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:915"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#465775976edf69dd5565accfbdf78515"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#eq_names"><span class="id" title="abbreviation">eq_names</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:915"><span class="id" title="variable">nas</span></a> (<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:917"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#465775976edf69dd5565accfbdf78515"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;× <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> /=. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_expand_lets_lift_cancel" class="idref" href="#map_expand_lets_lift_cancel"><span class="id" title="lemma">map_expand_lets_lift_cancel</span></a> <a id="d5bbcb45450f31924c09c7f012c378e6" class="idref" href="#d5bbcb45450f31924c09c7f012c378e6"><span class="id" title="binder">Γ</span></a> <a id="n:919" class="idref" href="#n:919"><span class="id" title="binder">n</span></a> <a id="ts:920" class="idref" href="#ts:920"><span class="id" title="binder">ts</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:919"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d5bbcb45450f31924c09c7f012c378e6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d5bbcb45450f31924c09c7f012c378e6"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:919"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ts:920"><span class="id" title="variable">ts</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift0"><span class="id" title="abbreviation">lift0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d5bbcb45450f31924c09c7f012c378e6"><span class="id" title="variable">Γ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ts:920"><span class="id" title="variable">ts</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> →. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_refl"><span class="id" title="lemma">All_refl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#expand_lets_lift_cancel"><span class="id" title="lemma">expand_lets_lift_cancel</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_subst_comm" class="idref" href="#expand_lets_k_subst_comm"><span class="id" title="lemma">expand_lets_k_subst_comm</span></a> <a id="9d32894013b8025d5f139d24d2cdba50" class="idref" href="#9d32894013b8025d5f139d24d2cdba50"><span class="id" title="binder">Δ</span></a> <a id="k:922" class="idref" href="#k:922"><span class="id" title="binder">k</span></a> <a id="s:923" class="idref" href="#s:923"><span class="id" title="binder">s</span></a> <a id="T:924" class="idref" href="#T:924"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9d32894013b8025d5f139d24d2cdba50"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:922"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:923"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:922"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:924"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9d32894013b8025d5f139d24d2cdba50"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:923"><span class="id" title="variable">s</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:922"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9d32894013b8025d5f139d24d2cdba50"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:923"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:922"><span class="id" title="variable">k</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:924"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{1}(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <span class="id" title="var">k</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_subst_rec"><span class="id" title="lemma">distr_subst_rec</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">s</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_set_binder_name" class="idref" href="#context_assumptions_set_binder_name"><span class="id" title="lemma">context_assumptions_set_binder_name</span></a> <a id="nas:925" class="idref" href="#nas:925"><span class="id" title="binder">nas</span></a> <a id="6c80bf31b044d2a40ffa9a23282bc446" class="idref" href="#6c80bf31b044d2a40ffa9a23282bc446"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:925"><span class="id" title="variable">nas</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6c80bf31b044d2a40ffa9a23282bc446"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:925"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6c80bf31b044d2a40ffa9a23282bc446"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6c80bf31b044d2a40ffa9a23282bc446"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">nas</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHnas</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extended_subst_set_binder_name" class="idref" href="#extended_subst_set_binder_name"><span class="id" title="lemma">extended_subst_set_binder_name</span></a> <a id="nas:927" class="idref" href="#nas:927"><span class="id" title="binder">nas</span></a> <a id="64caa92aa36d4ae4ead8b11100da68dc" class="idref" href="#64caa92aa36d4ae4ead8b11100da68dc"><span class="id" title="binder">Γ</span></a> <a id="k:929" class="idref" href="#k:929"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:927"><span class="id" title="variable">nas</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64caa92aa36d4ae4ead8b11100da68dc"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:927"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64caa92aa36d4ae4ead8b11100da68dc"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:929"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extended_subst"><span class="id" title="definition">extended_subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64caa92aa36d4ae4ead8b11100da68dc"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:929"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">nas</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span>, <span class="id" title="var">k</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#map2_length"><span class="id" title="lemma">map2_length</span></a> //. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHnas</span> //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_set_binder_name"><span class="id" title="lemma">context_assumptions_set_binder_name</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_set_binder_name" class="idref" href="#expand_lets_set_binder_name"><span class="id" title="lemma">expand_lets_set_binder_name</span></a> <a id="nas:930" class="idref" href="#nas:930"><span class="id" title="binder">nas</span></a> <a id="de3ba611d7c8cd6e58b01900624b1b65" class="idref" href="#de3ba611d7c8cd6e58b01900624b1b65"><span class="id" title="binder">Γ</span></a> <a id="t:932" class="idref" href="#t:932"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:930"><span class="id" title="variable">nas</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#de3ba611d7c8cd6e58b01900624b1b65"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map2"><span class="id" title="definition">map2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.set_binder_name"><span class="id" title="definition">set_binder_name</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nas:930"><span class="id" title="variable">nas</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#de3ba611d7c8cd6e58b01900624b1b65"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:932"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#de3ba611d7c8cd6e58b01900624b1b65"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:932"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">nas</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#extended_subst_set_binder_name"><span class="id" title="lemma">extended_subst_set_binder_name</span></a> // <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#map2_length"><span class="id" title="lemma">map2_length</span></a> // <span class="id" title="var">H0</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_set_binder_name"><span class="id" title="lemma">context_assumptions_set_binder_name</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_lift" class="idref" href="#expand_lets_k_lift"><span class="id" title="lemma">expand_lets_k_lift</span></a> <a id="n:933" class="idref" href="#n:933"><span class="id" title="binder">n</span></a> <a id="k:934" class="idref" href="#k:934"><span class="id" title="binder">k</span></a> <a id="k':935" class="idref" href="#k':935"><span class="id" title="binder">k'</span></a> <a id="293f5f4db2af643e9021a2bb63e069e3" class="idref" href="#293f5f4db2af643e9021a2bb63e069e3"><span class="id" title="binder">Γ</span></a> <a id="t:937" class="idref" href="#t:937"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:933"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:934"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#293f5f4db2af643e9021a2bb63e069e3"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':935"><span class="id" title="variable">k'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:933"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#293f5f4db2af643e9021a2bb63e069e3"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:934"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':935"><span class="id" title="variable">k'</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:937"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:933"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:934"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':935"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#293f5f4db2af643e9021a2bb63e069e3"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#293f5f4db2af643e9021a2bb63e069e3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':935"><span class="id" title="variable">k'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:937"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#extended_subst_lift_context"><span class="id" title="lemma">extended_subst_lift_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">k'</span> (<span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#permute_lift"><span class="id" title="lemma">permute_lift</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">k'</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> &lt;- <span class="id" title="var">H</span>. 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lift_expand_lets_k" class="idref" href="#lift_expand_lets_k"><span class="id" title="lemma">lift_expand_lets_k</span></a> <a id="88ff3dd6ab5d11a0d5d37a7d8f2c109a" class="idref" href="#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="binder">Δ</span></a> <a id="e6a8def41970fd63ab9359c54f823ed6" class="idref" href="#e6a8def41970fd63ab9359c54f823ed6"><span class="id" title="binder">Γ</span></a> <a id="t:940" class="idref" href="#t:940"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed_ctx"><span class="id" title="abbreviation">closed_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6a8def41970fd63ab9359c54f823ed6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6a8def41970fd63ab9359c54f823ed6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:940"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6a8def41970fd63ab9359c54f823ed6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:940"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6a8def41970fd63ab9359c54f823ed6"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#88ff3dd6ab5d11a0d5d37a7d8f2c109a"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:940"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cl</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{1}(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_closed"><span class="id" title="lemma">lift_closed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Δ</span>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">t</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_lift_impl"><span class="id" title="lemma">on_free_vars_lift_impl</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_closed"><span class="id" title="lemma">lift_closed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_rec"><span class="id" title="lemma">distr_lift_subst_rec</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_closed"><span class="id" title="lemma">lift_closed</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#closed_subst_map_lift"><span class="id" title="lemma">closed_subst_map_lift</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_comm" class="idref" href="#expand_lets_comm"><span class="id" title="lemma">expand_lets_comm</span></a> <a id="f0fb5dac59197107455fde9f36916f86" class="idref" href="#f0fb5dac59197107455fde9f36916f86"><span class="id" title="binder">Γ</span></a> <a id="d3d8eed71fd86febc0f470bd45f5f724" class="idref" href="#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="binder">Δ</span></a> <a id="t:943" class="idref" href="#t:943"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed_ctx"><span class="id" title="abbreviation">closed_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0fb5dac59197107455fde9f36916f86"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0fb5dac59197107455fde9f36916f86"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:943"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0fb5dac59197107455fde9f36916f86"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0fb5dac59197107455fde9f36916f86"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:943"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f0fb5dac59197107455fde9f36916f86"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d3d8eed71fd86febc0f470bd45f5f724"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:943"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">clΓ</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {2}/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> {3}/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_k_subst_comm"><span class="id" title="lemma">PCUICInductives.expand_lets_k_subst_comm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> {1}/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> {1}/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_extended_subst"><span class="id" title="lemma">subst_extended_subst</span></a>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#extended_subst_lift_context"><span class="id" title="lemma">extended_subst_lift_context</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a> ⇒ <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_expand_lets_k"><span class="id" title="lemma">lift_expand_lets_k</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="to_extended_list_smash_context_eq" class="idref" href="#to_extended_list_smash_context_eq"><span class="id" title="lemma">to_extended_list_smash_context_eq</span></a> <a id="fc50e0f731e1aa9bef3bdf5285f6616f" class="idref" href="#fc50e0f731e1aa9bef3bdf5285f6616f"><span class="id" title="binder">Δ</span></a> <a id="82af00d1c7042a1c4e0a87f1ceec9431" class="idref" href="#82af00d1c7042a1c4e0a87f1ceec9431"><span class="id" title="binder">Δ'</span></a> <a id="k:946" class="idref" href="#k:946"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fc50e0f731e1aa9bef3bdf5285f6616f"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82af00d1c7042a1c4e0a87f1ceec9431"><span class="id" title="variable">Δ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fc50e0f731e1aa9bef3bdf5285f6616f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82af00d1c7042a1c4e0a87f1ceec9431"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fc50e0f731e1aa9bef3bdf5285f6616f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:946"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82af00d1c7042a1c4e0a87f1ceec9431"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:946"><span class="id" title="variable">k</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Δ'</span>, <span class="id" title="var">k</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Δ'</span> ⇒ /= //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]. <span class="id" title="var">exfalso</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na'</span> [<span class="id" title="var">b'</span>|] <span class="id" title="var">ty'</span>]; <span class="id" title="var">cbn</span>. <span class="id" title="var">exfalso</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !(<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#reln_acc"><span class="id" title="lemma">reln_acc</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHΔ</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass'</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_subst_k" class="idref" href="#on_free_vars_subst_k"><span class="id" title="lemma">on_free_vars_subst_k</span></a> <a id="s:947" class="idref" href="#s:947"><span class="id" title="binder">s</span></a> <a id="k:948" class="idref" href="#k:948"><span class="id" title="binder">k</span></a> <a id="t:949" class="idref" href="#t:949"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:947"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:947"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:948"><span class="id" title="variable">k</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:949"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:948"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:947"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:948"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:949"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ons</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_impl"><span class="id" title="lemma">on_free_vars_impl</span></a>; [|<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_gen"><span class="id" title="lemma">on_free_vars_subst_gen</span></a>]; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#substP"><span class="id" title="definition">substP</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">nat_compare_specs</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_expand_lets_k" class="idref" href="#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> <a id="P:950" class="idref" href="#P:950"><span class="id" title="binder">P</span></a> <a id="2108fc9e92c54fcf46405304f8ccf84e" class="idref" href="#2108fc9e92c54fcf46405304f8ccf84e"><span class="id" title="binder">Γ</span></a> <a id="k:952" class="idref" href="#k:952"><span class="id" title="binder">k</span></a> <a id="t:953" class="idref" href="#t:953"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:950"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2108fc9e92c54fcf46405304f8ccf84e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:952"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2108fc9e92c54fcf46405304f8ccf84e"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:950"><span class="id" title="variable">P</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:953"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:952"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2108fc9e92c54fcf46405304f8ccf84e"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:950"><span class="id" title="variable">P</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2108fc9e92c54fcf46405304f8ccf84e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:952"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:953"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HΓ</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_impl"><span class="id" title="lemma">on_free_vars_impl</span></a>; <span class="id" title="var">cycle</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_gen"><span class="id" title="lemma">on_free_vars_subst_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_extended_subst"><span class="id" title="lemma">on_free_vars_extended_subst</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_lift"><span class="id" title="lemma">on_free_vars_lift</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#substP"><span class="id" title="definition">substP</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#strengthenP"><span class="id" title="definition">strengthenP</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a>) <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#occ_betweenP"><span class="id" title="definition">occ_betweenP</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_diag"><span class="id" title="lemma">orb_diag</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">replace</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>) <span class="id" title="keyword">with</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">(</span></a><span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">)</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_case_predicate_context" class="idref" href="#on_free_vars_case_predicate_context"><span class="id" title="lemma">on_free_vars_case_predicate_context</span></a> {<a id="cf:954" class="idref" href="#cf:954"><span class="id" title="binder">cf</span></a>} {<a id="a5fbdcaf12475b3ec22b34139f63a835" class="idref" href="#a5fbdcaf12475b3ec22b34139f63a835"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="c1c479a60f66105368518b8f1a52d891" class="idref" href="#c1c479a60f66105368518b8f1a52d891"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a5fbdcaf12475b3ec22b34139f63a835"><span class="id" title="variable">Σ</span></a>} {<a id="P:957" class="idref" href="#P:957"><span class="id" title="binder">P</span></a> <a id="ind:958" class="idref" href="#ind:958"><span class="id" title="binder">ind</span></a> <a id="mdecl:959" class="idref" href="#mdecl:959"><span class="id" title="binder">mdecl</span></a> <a id="idecl:960" class="idref" href="#idecl:960"><span class="id" title="binder">idecl</span></a> <a id="p:961" class="idref" href="#p:961"><span class="id" title="binder">p</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="pctx:962" class="idref" href="#pctx:962"><span class="id" title="binder">pctx</span></a> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:958"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:959"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:960"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:961"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_inductive"><span class="id" title="definition">declared_inductive</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a5fbdcaf12475b3ec22b34139f63a835"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:958"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:959"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:960"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:959"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:960"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:961"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:957"><span class="id" title="variable">P</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:961"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:957"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pctx:962"><span class="id" title="variable">pctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">pctx</span> <span class="id" title="var">decli</span> <span class="id" title="var">wfp</span> <span class="id" title="var">onps</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">pctx</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context_gen"><span class="id" title="definition">case_predicate_context_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_on_free_vars_ctx"><span class="id" title="lemma">alpha_eq_on_free_vars_ctx</span></a>. <span class="id" title="tactic">symmetry</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#eq_binder_annots_eq"><span class="id" title="lemma">eq_binder_annots_eq</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#wf_pre_case_predicate_context_gen"><span class="id" title="lemma">wf_pre_case_predicate_context_gen</span></a> <span class="id" title="var">wfp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#pre_case_predicate_context_gen"><span class="id" title="definition">pre_case_predicate_context_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_inst_case_context"><span class="id" title="lemma">on_free_vars_ctx_inst_case_context</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate_length_pars"><span class="id" title="lemma">wf_predicate_length_pars</span></a> <span class="id" title="var">wfp</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICGlobalEnv.html#declared_minductive_ind_npars"><span class="id" title="lemma">declared_minductive_ind_npars</span></a> <span class="id" title="var">decli</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ind_predicate_context"><span class="id" title="lemma">on_free_vars_ind_predicate_context</span></a> (<span class="id" title="var">ind</span>:=<span class="id" title="var">ind</span>) <span class="id" title="var">decli</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Hint</span> <span class="id" title="keyword">Resolve</span> <span class="id" title="var">declared_inductive_closed_params</span> : <span class="id" title="var">pcuic</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_case_branch_type" class="idref" href="#trans_case_branch_type"><span class="id" title="lemma">trans_case_branch_type</span></a> {<a id="cf:963" class="idref" href="#cf:963"><span class="id" title="binder">cf</span></a>} {<a id="6acd3b6a45bce7fbae50bd11c79f13a4" class="idref" href="#6acd3b6a45bce7fbae50bd11c79f13a4"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="dace99463cf68e605cfdc82dcc051953" class="idref" href="#dace99463cf68e605cfdc82dcc051953"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6acd3b6a45bce7fbae50bd11c79f13a4"><span class="id" title="variable">Σ</span></a>} {<a id="fcdbb6beee7ba683eae37322bb58202c" class="idref" href="#fcdbb6beee7ba683eae37322bb58202c"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>} {<a id="ci:967" class="idref" href="#ci:967"><span class="id" title="binder">ci</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#case_info"><span class="id" title="record">case_info</span></a>} {<a id="mdecl:968" class="idref" href="#mdecl:968"><span class="id" title="binder">mdecl</span></a> <a id="idecl:969" class="idref" href="#idecl:969"><span class="id" title="binder">idecl</span></a> <a id="cdecl:970" class="idref" href="#cdecl:970"><span class="id" title="binder">cdecl</span></a> <a id="i:971" class="idref" href="#i:971"><span class="id" title="binder">i</span></a> <a id="p:972" class="idref" href="#p:972"><span class="id" title="binder">p</span></a> <a id="br:973" class="idref" href="#br:973"><span class="id" title="binder">br</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6acd3b6a45bce7fbae50bd11c79f13a4"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:971"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#consistent_instance_ext"><span class="id" title="definition">consistent_instance_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6acd3b6a45bce7fbae50bd11c79f13a4"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:973"><span class="id" title="variable">br</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">pcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#ind_predicate_context"><span class="id" title="definition">ind_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:973"><span class="id" title="variable">br</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fcdbb6beee7ba683eae37322bb58202c"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fcdbb6beee7ba683eae37322bb58202c"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#preturn"><span class="id" title="projection">preturn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="ptm:974" class="idref" href="#ptm:974"><span class="id" title="binder">ptm</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkLambda_or_LetIn"><span class="id" title="definition">it_mkLambda_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#preturn"><span class="id" title="projection">preturn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':975" class="idref" href="#p':975"><span class="id" title="binder">p'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="br':976" class="idref" href="#br':976"><span class="id" title="binder">br'</span></a> :=  (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p':975"><span class="id" title="variable">p'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:973"><span class="id" title="variable">br</span></a>)) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cbctx:977" class="idref" href="#cbctx:977"><span class="id" title="binder">cbctx</span></a> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:973"><span class="id" title="variable">br</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="cbt':978" class="idref" href="#cbt':978"><span class="id" title="binder">cbt'</span></a> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type"><span class="id" title="definition">case_branch_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p':975"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br':976"><span class="id" title="variable">br'</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkLambda_or_LetIn"><span class="id" title="definition">it_mkLambda_or_LetIn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context"><span class="id" title="definition">case_predicate_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#preturn"><span class="id" title="projection">preturn</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a>)))<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:971"><span class="id" title="variable">i</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbt':978"><span class="id" title="variable">cbt'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbctx:977"><span class="id" title="variable">cbctx</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbt':978"><span class="id" title="variable">cbt'</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cbctx:977"><span class="id" title="variable">cbctx</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type"><span class="id" title="definition">case_branch_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:967"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:968"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:969"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:972"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:973"><span class="id" title="variable">br</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ptm:974"><span class="id" title="variable">ptm</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:971"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:970"><span class="id" title="variable">cdecl</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">).2</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">declc</span> <span class="id" title="var">cu</span> <span class="id" title="var">wfp</span> <span class="id" title="var">wfbr</span> <span class="id" title="var">wfpctx</span> <span class="id" title="var">wfbctx</span> <span class="id" title="var">onps</span> <span class="id" title="var">ptm</span> <span class="id" title="var">p'</span> <span class="id" title="var">br'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">wfbr'</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <span class="id" title="var">cdecl</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <span class="id" title="var">br</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">move</span>: <span class="id" title="var">wfbr</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch_gen"><span class="id" title="definition">wf_branch_gen</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#forget_types_map_context"><span class="id" title="lemma">forget_types_map_context</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type"><span class="id" title="definition">case_branch_type</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type_gen"><span class="id" title="definition">case_branch_type_gen</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">brctx'</span> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">eqbrctx'</span> : <span class="id" title="var">brctx'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <span class="id" title="var">ci</span> <span class="id" title="var">mdecl</span> <span class="id" title="var">p</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>)) <span class="id" title="var">cdecl</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">brctx'</span> [<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inst_case_branch_context"><span class="id" title="lemma">trans_inst_case_branch_context</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">br</span> := <span class="id" title="var">br</span>) <span class="id" title="var">wfp</span> <span class="id" title="var">wfbr</span> <span class="id" title="var">declc</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICTactics.html#lengths"><span class="id" title="definition">lengths</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#expand_lets_lift_cancel"><span class="id" title="lemma">expand_lets_lift_cancel</span></a>. 2:<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_length_args"><span class="id" title="lemma">case_branch_context_length_args</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_assumptions"><span class="id" title="lemma">case_branch_context_assumptions</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">ptm</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_it_mkLambda_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkLambda_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_case_predicate_context"><span class="id" title="lemma">on_free_vars_case_predicate_context</span></a> <span class="id" title="var">declc</span> <span class="id" title="var">wfp</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context_length_indices"><span class="id" title="lemma">case_predicate_context_length_indices</span></a> <span class="id" title="var">wfp</span>) ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkLambda_or_LetIn"><span class="id" title="lemma">trans_it_mkLambda_or_LetIn</span></a> //. }<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">onfvsargs</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_indices"><span class="id" title="lemma">declared_constructor_closed_indices</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">cl</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">cl</span>. <span class="id" title="tactic">red</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">cl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsexpx</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="var">x</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">cl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_instance"><span class="id" title="lemma">on_free_vars_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">cl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvssi</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst"><span class="id" title="definition">S.subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ci</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind_bodies"><span class="id" title="projection">SE.ind_bodies</span></a> <span class="id" title="var">mdecl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="var">x</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_subst_k"><span class="id" title="lemma">on_free_vars_subst_k</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">fvsexpx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">fvsexpx</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_k"><span class="id" title="lemma">trans_expand_lets_k</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_params"><span class="id" title="lemma">declared_inductive_closed_params</span></a> <span class="id" title="var">declc</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">i'</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">fvssi</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">declc</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">fvssi</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">fvssi</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onps</span>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_set_binder_name"><span class="id" title="lemma">expand_lets_set_binder_name</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_length"><span class="id" title="lemma">All2_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context_length"><span class="id" title="lemma">cstr_branch_context_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfbctx</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#pre_case_branch_context_gen"><span class="id" title="definition">pre_case_branch_context_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_subst_comm"><span class="id" title="lemma">expand_lets_subst_comm</span></a>. 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_instance"><span class="id" title="lemma">context_assumptions_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context_assumptions"><span class="id" title="lemma">cstr_branch_context_assumptions</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#expand_lets_subst_instance"><span class="id" title="lemma">expand_lets_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions"><span class="id" title="definition">SE.context_assumptions</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;-<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_subst_comm"><span class="id" title="lemma">expand_lets_subst_comm</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_comm"><span class="id" title="lemma">expand_lets_comm</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_subst_context"><span class="id" title="lemma">subst_instance_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#instantiate_inds"><span class="id" title="lemma">instantiate_inds</span></a> //. <span class="id" title="tactic">exact</span> <span class="id" title="var">declc</span>. 4:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;4:<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance_context"><span class="id" title="lemma">closedn_subst_instance_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">declc</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_subst_k"><span class="id" title="lemma">on_free_vars_subst_k</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_instance"><span class="id" title="lemma">on_free_vars_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_expand_lets_lift_cancel"><span class="id" title="lemma">map_expand_lets_lift_cancel</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_length_args"><span class="id" title="lemma">case_branch_context_length_args</span></a> <span class="id" title="var">wfbr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_assumptions"><span class="id" title="lemma">case_branch_context_assumptions</span></a> <span class="id" title="var">wfbr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onps</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map_eq"><span class="id" title="lemma">All_map_eq</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">op</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#to_extended_list_case_branch_context"><span class="id" title="lemma">to_extended_list_case_branch_context</span></a> <span class="id" title="var">ci</span> <span class="id" title="var">mdecl</span> <span class="id" title="var">p</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_All2"><span class="id" title="lemma">Forall2_All2</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">wfbr</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#map_expand_lets_to_extended_list"><span class="id" title="lemma">map_expand_lets_to_extended_list</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list"><span class="id" title="definition">to_extended_list</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#to_extended_list_smash_context_eq"><span class="id" title="lemma">to_extended_list_smash_context_eq</span></a>; <span class="id" title="var">pcuic</span>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_assumptions"><span class="id" title="lemma">case_branch_context_assumptions</span></a> <span class="id" title="var">wfbr</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="untyped_subslet_inds" class="idref" href="#untyped_subslet_inds"><span class="id" title="lemma">untyped_subslet_inds</span></a> <a id="aa45c70fa69df8fb678c66ec8d6f6a55" class="idref" href="#aa45c70fa69df8fb678c66ec8d6f6a55"><span class="id" title="binder">Γ</span></a> <a id="ind:980" class="idref" href="#ind:980"><span class="id" title="binder">ind</span></a> <a id="u:981" class="idref" href="#u:981"><span class="id" title="binder">u</span></a> <a id="u':982" class="idref" href="#u':982"><span class="id" title="binder">u'</span></a> <a id="mdecl:983" class="idref" href="#mdecl:983"><span class="id" title="binder">mdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#untyped_subslet"><span class="id" title="inductive">untyped_subslet</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aa45c70fa69df8fb678c66ec8d6f6a55"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:980"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:981"><span class="id" title="variable">u</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:983"><span class="id" title="variable">mdecl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Common.Universes.html#subst_instance"><span class="id" title="definition">subst_instance</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u':982"><span class="id" title="variable">u'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:983"><span class="id" title="variable">mdecl</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#le_n"><span class="id" title="constructor">le_n</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span>) <span class="id" title="tactic">at</span> 1 3 4.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">first</span> <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a> /= ⇒ <span class="id" title="var">Hlen</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHl</span>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ws_cumul_pb_it_mkProd_or_LetIn_smash" class="idref" href="#ws_cumul_pb_it_mkProd_or_LetIn_smash"><span class="id" title="lemma">ws_cumul_pb_it_mkProd_or_LetIn_smash</span></a> {<a id="cf:984" class="idref" href="#cf:984"><span class="id" title="binder">cf</span></a>} {<a id="9ae004736850773fa1cdd7db6cdde9fd" class="idref" href="#9ae004736850773fa1cdd7db6cdde9fd"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="092a7d6768839fc1822c26d92826ecd3" class="idref" href="#092a7d6768839fc1822c26d92826ecd3"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9ae004736850773fa1cdd7db6cdde9fd"><span class="id" title="variable">Σ</span></a>} <a id="4351bbb42a72c1e0c43ac77c7f54d275" class="idref" href="#4351bbb42a72c1e0c43ac77c7f54d275"><span class="id" title="binder">Γ</span></a> <a id="61c9645e499d6bfab21b26ec9471335c" class="idref" href="#61c9645e499d6bfab21b26ec9471335c"><span class="id" title="binder">Δ</span></a> <a id="T:989" class="idref" href="#T:989"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4351bbb42a72c1e0c43ac77c7f54d275"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4351bbb42a72c1e0c43ac77c7f54d275"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#61c9645e499d6bfab21b26ec9471335c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:989"><span class="id" title="variable">T</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9ae004736850773fa1cdd7db6cdde9fd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ef93fc0aa5631a2954ee48fa80bbfa3a"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4351bbb42a72c1e0c43ac77c7f54d275"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ef93fc0aa5631a2954ee48fa80bbfa3a"><span class="id" title="notation">⊢</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#61c9645e499d6bfab21b26ec9471335c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:989"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ef93fc0aa5631a2954ee48fa80bbfa3a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#61c9645e499d6bfab21b26ec9471335c"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#61c9645e499d6bfab21b26ec9471335c"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:989"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hfvΓ</span> <span class="id" title="var">hfv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>. 1-3:<span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;2:{ <span class="id" title="tactic">move</span>: <span class="id" title="var">hfv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>⇒ [] <span class="id" title="var">onΔ</span> <span class="id" title="var">onT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> // /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0) ⇒ //. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_conv_conv"><span class="id" title="lemma">red_conv_conv</span></a>; [|<span class="id" title="tactic">reflexivity</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hfvΓ</span> <span class="id" title="var">hfv</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span>, <span class="id" title="var">T</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_nil"><span class="id" title="lemma">expand_lets_nil</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; [<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_def"><span class="id" title="lemma">smash_context_app_def</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vdef"><span class="id" title="lemma">expand_lets_vdef</span></a>|<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_ass"><span class="id" title="lemma">smash_context_app_ass</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vass"><span class="id" title="lemma">expand_lets_vass</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst1"><span class="id" title="definition">subst1</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.mkProd_or_LetIn"><span class="id" title="definition">mkProd_or_LetIn</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_prod"><span class="id" title="lemma">red_prod</span></a>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="map_expand_lets_to_extended_list_k_above" class="idref" href="#map_expand_lets_to_extended_list_k_above"><span class="id" title="lemma">map_expand_lets_to_extended_list_k_above</span></a> <a id="bbbf5b9f008ef1d2a2ede9f6e3bacb7a" class="idref" href="#bbbf5b9f008ef1d2a2ede9f6e3bacb7a"><span class="id" title="binder">Γ</span></a> <a id="27a444bbcb2ee68b5c82623e3f9b77f9" class="idref" href="#27a444bbcb2ee68b5c82623e3f9b77f9"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bbbf5b9f008ef1d2a2ede9f6e3bacb7a"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#27a444bbcb2ee68b5c82623e3f9b77f9"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bbbf5b9f008ef1d2a2ede9f6e3bacb7a"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#27a444bbcb2ee68b5c82623e3f9b77f9"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bbbf5b9f008ef1d2a2ede9f6e3bacb7a"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#reln_lift"><span class="id" title="lemma">reln_lift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#expand_lets_lift_cancel"><span class="id" title="lemma">expand_lets_lift_cancel</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#reln_lift"><span class="id" title="lemma">reln_lift</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_to_extended_list_k" class="idref" href="#on_free_vars_to_extended_list_k"><span class="id" title="lemma">on_free_vars_to_extended_list_k</span></a> <a id="P:992" class="idref" href="#P:992"><span class="id" title="binder">P</span></a> <a id="ctx:993" class="idref" href="#ctx:993"><span class="id" title="binder">ctx</span></a> <a id="k:994" class="idref" href="#k:994"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:994"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:993"><span class="id" title="variable">ctx</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:992"><span class="id" title="variable">P</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:993"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:994"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list"><span class="id" title="definition">to_extended_list</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span>: (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">ctx</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">P</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ctx</span> <span class="id" title="tactic">in</span> <span class="id" title="var">k</span> |- *; <span class="id" title="tactic">intros</span> <span class="id" title="var">l</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [? [?|] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHctx</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>) <span class="id" title="var">l</span> <span class="id" title="var">Hn</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_1_r"><span class="id" title="lemma">Nat.add_1_r</span></a>. <span class="id" title="tactic">eapply</span> (<span class="id" title="var">IHctx</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">k</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">_</span>](<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a> <span class="id" title="var">k</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">ctx</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) /= <span class="id" title="var">Hn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">nat_compare_specs</span> ⇒ /= //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_type_of_constructor" class="idref" href="#trans_type_of_constructor"><span class="id" title="lemma">trans_type_of_constructor</span></a> {<a id="cf:995" class="idref" href="#cf:995"><span class="id" title="binder">cf</span></a>} {<a id="d6fe52aeb370dfa035ede96e11365ca6" class="idref" href="#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="99828ecf1ec15fdfdf5d81e2d1ad257d" class="idref" href="#99828ecf1ec15fdfdf5d81e2d1ad257d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="variable">Σ</span></a>} {<a id="ead50ece555d53a297d446840bc78883" class="idref" href="#ead50ece555d53a297d446840bc78883"><span class="id" title="binder">wfΣ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="variable">Σ</span></a>}<br/>
&nbsp;&nbsp;{<a id="mdecl:999" class="idref" href="#mdecl:999"><span class="id" title="binder">mdecl</span></a> <a id="idecl:1000" class="idref" href="#idecl:1000"><span class="id" title="binder">idecl</span></a> <a id="cdecl:1001" class="idref" href="#cdecl:1001"><span class="id" title="binder">cdecl</span></a> <a id="ind:1002" class="idref" href="#ind:1002"><span class="id" title="binder">ind</span></a> <a id="i:1003" class="idref" href="#i:1003"><span class="id" title="binder">i</span></a> <a id="u:1004" class="idref" href="#u:1004"><span class="id" title="binder">u</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1002"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1003"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:999"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1000"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1001"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#consistent_instance_ext"><span class="id" title="definition">consistent_instance_ext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:999"><span class="id" title="variable">mdecl</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1004"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb"><span class="id" title="inductive">ws_cumul_pb</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:995"><span class="id" title="variable">cf</span></a>) <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6fe52aeb370dfa035ede96e11365ca6"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_of_constructor"><span class="id" title="definition">ST.type_of_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:999"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1001"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1002"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1003"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1004"><span class="id" title="variable">u</span></a>))<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_of_constructor"><span class="id" title="definition">TT.type_of_constructor</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:999"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1002"><span class="id" title="variable">ind</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:999"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1001"><span class="id" title="variable">cdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1002"><span class="id" title="variable">ind</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1003"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1004"><span class="id" title="variable">u</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">oncstr</span> <span class="id" title="var">onu</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_of_constructor"><span class="id" title="definition">ST.type_of_constructor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_gen_type"><span class="id" title="lemma">declared_constructor_closed_gen_type</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">oncstr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">oncstr</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance"><span class="id" title="lemma">closedn_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_of_constructor"><span class="id" title="definition">TT.type_of_constructor</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#untyped_substitution_ws_cumul_pb"><span class="id" title="lemma">untyped_substitution_ws_cumul_pb</span></a> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>) (<span class="id" title="var">Γ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) (<span class="id" title="var">Γ''</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#untyped_subslet_inds"><span class="id" title="lemma">untyped_subslet_inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="tactic">instantiate</span> (1:=<span class="id" title="var">u</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#on_declared_constructor"><span class="id" title="lemma">on_declared_constructor</span></a> <span class="id" title="var">oncstr</span>) <span class="id" title="keyword">as</span> [[<span class="id" title="var">onmind</span> <span class="id" title="var">onind</span>] [<span class="id" title="var">cs</span> [<span class="id" title="var">hnth</span> <span class="id" title="var">onc</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_eq"><span class="id" title="projection">cstr_eq</span></a> <span class="id" title="var">onc</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_instance_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clctx</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a><br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <span class="id" title="var">mdecl</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span>))<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a><br/>
&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">oncstr</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_inductive_closed_params"><span class="id" title="lemma">declared_inductive_closed_params</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance_context"><span class="id" title="lemma">closedn_subst_instance_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_ctx_upwards"><span class="id" title="lemma">closedn_ctx_upwards</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closed_ctx_on_free_vars"><span class="id" title="lemma">closed_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_minductive_closed_arities"><span class="id" title="lemma">declared_minductive_closed_arities</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>) (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> <span class="id" title="var">H</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">H1</span>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed"><span class="id" title="lemma">declared_constructor_closed</span></a> <span class="id" title="var">oncstr</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closed_constructor_body"><span class="id" title="definition">closed_constructor_body</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">H</span> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clargs</span> <span class="id" title="var">cli</span> <span class="id" title="var">clty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clterm</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <span class="id" title="var">mdecl</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span>))<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_mkApps"><span class="id" title="lemma">subst_instance_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_mkApps"><span class="id" title="lemma">on_free_vars_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_map"><span class="id" title="lemma">forallb_map</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#orb_false_r"><span class="id" title="lemma">orb_false_r</span></a>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">oncstr</span> <span class="id" title="keyword">as</span> [[] ?]. <span class="id" title="tactic">clear</span> <span class="id" title="var">hnth</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_impl"><span class="id" title="lemma">forallb_impl</span></a>. 2:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_to_extended_list_k"><span class="id" title="lemma">on_free_vars_to_extended_list_k</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">hx</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_instance"><span class="id" title="lemma">on_free_vars_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>. <span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">H</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_instance"><span class="id" title="lemma">on_free_vars_subst_instance</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_pb_it_mkProd_or_LetIn"><span class="id" title="lemma">ws_cumul_pb_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#ws_cumul_ctx_pb_rel_app"><span class="id" title="lemma">ws_cumul_ctx_pb_rel_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContextConversion.html#ws_cumul_ctx_pb_refl"><span class="id" title="lemma">ws_cumul_ctx_pb_refl</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ws_cumul_pb_it_mkProd_or_LetIn_smash"><span class="id" title="lemma">ws_cumul_pb_it_mkProd_or_LetIn_smash</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> &lt;-: <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ind</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>) <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a> <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <span class="id" title="var">ind</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> <span class="id" title="var">cdecl</span>)))<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICUnivSubst.html#subst_instance_mkApps"><span class="id" title="lemma">subst_instance_mkApps</span></a> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl_head"><span class="id" title="definition">trans_cstr_concl_head</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl_head"><span class="id" title="definition">cstr_concl_head</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_tRel"><span class="id" title="lemma">expand_lets_tRel</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_instance"><span class="id" title="lemma">context_assumptions_subst_instance</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#subst_instance_to_extended_list_k"><span class="id" title="lemma">subst_instance_to_extended_list_k</span></a>. <span class="id" title="var">len</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_expand_lets_to_extended_list_k_above"><span class="id" title="lemma">map_expand_lets_to_extended_list_k_above</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions_subst_instance"><span class="id" title="lemma">context_assumptions_subst_instance</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">setoid_rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets"><span class="id" title="lemma">subst_instance_expand_lets</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> ![<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <span class="id" title="var">_</span> ]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_refl"><span class="id" title="lemma">ws_cumul_pb_refl</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP_shiftnP"><span class="id" title="lemma">closedP_shiftnP</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">PCUICOnFreeVars.on_free_vars_expand_lets_k</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_trans"><span class="id" title="lemma">on_free_vars_ctx_trans</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">clterm</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">_</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_eq_annots" class="idref" href="#trans_eq_annots"><span class="id" title="lemma">trans_eq_annots</span></a> (<a id="e6484731c90ab2e4b7866b883e39bb5b" class="idref" href="#e6484731c90ab2e4b7866b883e39bb5b"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) <a id="6909f87ce9a815cb06fda8ee9770fd59" class="idref" href="#6909f87ce9a815cb06fda8ee9770fd59"><span class="id" title="binder">Δ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots"><span class="id" title="abbreviation">eq_annots</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6484731c90ab2e4b7866b883e39bb5b"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6909f87ce9a815cb06fda8ee9770fd59"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots"><span class="id" title="abbreviation">eq_annots</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e6484731c90ab2e4b7866b883e39bb5b"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6909f87ce9a815cb06fda8ee9770fd59"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_predicate" class="idref" href="#trans_wf_predicate"><span class="id" title="lemma">trans_wf_predicate</span></a> <a id="ci:1007" class="idref" href="#ci:1007"><span class="id" title="binder">ci</span></a> <a id="mdecl:1008" class="idref" href="#mdecl:1008"><span class="id" title="binder">mdecl</span></a> <a id="idecl:1009" class="idref" href="#idecl:1009"><span class="id" title="binder">idecl</span></a> <a id="p:1010" class="idref" href="#p:1010"><span class="id" title="binder">p</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1008"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1009"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1010"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1008"><span class="id" title="variable">mdecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1008"><span class="id" title="variable">mdecl</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:1007"><span class="id" title="variable">ci</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1009"><span class="id" title="variable">idecl</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1010"><span class="id" title="variable">p</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ [] <span class="id" title="var">eqps</span> <span class="id" title="var">eqanns</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#forget_types_map_context"><span class="id" title="lemma">forget_types_map_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">eqanns</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#idecl_binder"><span class="id" title="definition">idecl_binder</span></a> /= ⇒ <span class="id" title="var">eqanns</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">eqanns</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_annots"><span class="id" title="lemma">trans_eq_annots</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="lookup_globals_trans" class="idref" href="#lookup_globals_trans"><span class="id" title="lemma">lookup_globals_trans</span></a> <a id="decls:1011" class="idref" href="#decls:1011"><span class="id" title="binder">decls</span></a> <a id="c:1012" class="idref" href="#c:1012"><span class="id" title="binder">c</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_globals"><span class="id" title="definition">lookup_globals</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decls:1011"><span class="id" title="variable">decls</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1012"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decl"><span class="id" title="definition">trans_global_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_globals"><span class="id" title="definition">lookup_globals</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#decls:1011"><span class="id" title="variable">decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1012"><span class="id" title="variable">c</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">decls</span>. <span class="id" title="tactic">elim</span> ⇒ //= ⇒ [[<span class="id" title="var">kn</span> <span class="id" title="var">d</span>]] <span class="id" title="var">decls</span> //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">elim</span>: <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb_spec"><span class="id" title="method">eqb_spec</span></a> ⇒ //= → → //=.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extends_strictly_on_decls_trans" class="idref" href="#extends_strictly_on_decls_trans"><span class="id" title="lemma">extends_strictly_on_decls_trans</span></a> {<a id="956846e77b79c748baa5d90c0e0895a2" class="idref" href="#956846e77b79c748baa5d90c0e0895a2"><span class="id" title="binder">Σ</span></a> <a id="c58453c7d39cf3093e3b04875437cfbf" class="idref" href="#c58453c7d39cf3093e3b04875437cfbf"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends_strictly_on_decls"><span class="id" title="class">extends_strictly_on_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#956846e77b79c748baa5d90c0e0895a2"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c58453c7d39cf3093e3b04875437cfbf"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends_strictly_on_decls"><span class="id" title="class">extends_strictly_on_decls</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#956846e77b79c748baa5d90c0e0895a2"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c58453c7d39cf3093e3b04875437cfbf"><span class="id" title="variable">Σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> [<span class="id" title="var">Σ''</span> <span class="id" title="var">eq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <span class="id" title="var">Σ''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">eq</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="strictly_extends_decls_trans" class="idref" href="#strictly_extends_decls_trans"><span class="id" title="lemma">strictly_extends_decls_trans</span></a> {<a id="b6c8d33edf008151fed076cc6df9137e" class="idref" href="#b6c8d33edf008151fed076cc6df9137e"><span class="id" title="binder">Σ</span></a> <a id="547ddd38e69c42e2b66fb7fedd3eacda" class="idref" href="#547ddd38e69c42e2b66fb7fedd3eacda"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.strictly_extends_decls"><span class="id" title="class">strictly_extends_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b6c8d33edf008151fed076cc6df9137e"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#547ddd38e69c42e2b66fb7fedd3eacda"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.strictly_extends_decls"><span class="id" title="class">strictly_extends_decls</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b6c8d33edf008151fed076cc6df9137e"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#547ddd38e69c42e2b66fb7fedd3eacda"><span class="id" title="variable">Σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> [<span class="id" title="var">Σ''</span> <span class="id" title="var">eq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <span class="id" title="var">Σ''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /= <span class="id" title="var">eq</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extends_trans" class="idref" href="#extends_trans"><span class="id" title="lemma">extends_trans</span></a> {<a id="99aeeba886764270da2d7779cd2f4c0c" class="idref" href="#99aeeba886764270da2d7779cd2f4c0c"><span class="id" title="binder">Σ</span></a> <a id="5d00a64cb12c2be4fef5543081fdc252" class="idref" href="#5d00a64cb12c2be4fef5543081fdc252"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends"><span class="id" title="class">extends</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#99aeeba886764270da2d7779cd2f4c0c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d00a64cb12c2be4fef5543081fdc252"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends"><span class="id" title="class">extends</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#99aeeba886764270da2d7779cd2f4c0c"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5d00a64cb12c2be4fef5543081fdc252"><span class="id" title="variable">Σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ // <span class="id" title="var">c</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">eq</span> <span class="id" title="var">c</span>). <span class="id" title="tactic">move</span>: <span class="id" title="var">eq</span> ⇒ [<span class="id" title="var">Σ''</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decl"><span class="id" title="definition">trans_global_decl</span></a> <span class="id" title="var">Σ''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_envs"><span class="id" title="definition">lookup_envs</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> /= !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_globals_trans"><span class="id" title="lemma">lookup_globals_trans</span></a> <span class="id" title="var">eq</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="extends_decls_trans" class="idref" href="#extends_decls_trans"><span class="id" title="lemma">extends_decls_trans</span></a> {<a id="36f81957d1b8470ff5ddc479dd21a6d8" class="idref" href="#36f81957d1b8470ff5ddc479dd21a6d8"><span class="id" title="binder">Σ</span></a> <a id="9e6b3a4d9af48e2e4a0db58f1ec2c2f2" class="idref" href="#9e6b3a4d9af48e2e4a0db58f1ec2c2f2"><span class="id" title="binder">Σ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends_decls"><span class="id" title="class">extends_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#36f81957d1b8470ff5ddc479dd21a6d8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9e6b3a4d9af48e2e4a0db58f1ec2c2f2"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends_decls"><span class="id" title="class">extends_decls</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#36f81957d1b8470ff5ddc479dd21a6d8"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9e6b3a4d9af48e2e4a0db58f1ec2c2f2"><span class="id" title="variable">Σ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ // <span class="id" title="var">c</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">eq</span> <span class="id" title="var">c</span>). <span class="id" title="tactic">move</span>: <span class="id" title="var">eq</span> ⇒ [<span class="id" title="var">Σ''</span> <span class="id" title="var">eq</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decl"><span class="id" title="definition">trans_global_decl</span></a> <span class="id" title="var">Σ''</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_envs"><span class="id" title="definition">lookup_envs</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> /= !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lookup_globals_trans"><span class="id" title="lemma">lookup_globals_trans</span></a> <span class="id" title="var">eq</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="weaken_prop_gen" class="idref" href="#weaken_prop_gen"><span class="id" title="lemma">weaken_prop_gen</span></a> {<a id="cf:1021" class="idref" href="#cf:1021"><span class="id" title="binder">cf</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#weaken_env_prop_gen"><span class="id" title="definition">weaken_env_prop_gen</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a>) (<span class="id" title="keyword">fun</span> <a id="abd7c624fd6a8621d63877f7ef4b0d75" class="idref" href="#abd7c624fd6a8621d63877f7ef4b0d75"><span class="id" title="binder">Σ</span></a> <a id="7b0d4c1c98a688e166ebdc2500b70827" class="idref" href="#7b0d4c1c98a688e166ebdc2500b70827"><span class="id" title="binder">Σ'</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#abd7c624fd6a8621d63877f7ef4b0d75"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7b0d4c1c98a688e166ebdc2500b70827"><span class="id" title="variable">Σ'</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.extends"><span class="id" title="class">extends</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#abd7c624fd6a8621d63877f7ef4b0d75"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7b0d4c1c98a688e166ebdc2500b70827"><span class="id" title="variable">Σ'</span></a>)<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a><br/>
&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">(</span></a><a id="d94f42a708be6d3da9decc9a3ee6aee3" class="idref" href="#d94f42a708be6d3da9decc9a3ee6aee3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="33a6163d57ef72ac7e530bdb67479125" class="idref" href="#33a6163d57ef72ac7e530bdb67479125"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) (<a id="t:1024" class="idref" href="#t:1024"><span class="id" title="binder">t</span></a> <a id="T:1025" class="idref" href="#T:1025"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">),</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1021"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d94f42a708be6d3da9decc9a3ee6aee3"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#33a6163d57ef72ac7e530bdb67479125"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1024"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1025"><span class="id" title="variable">T</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Σ'</span> <span class="id" title="var">u</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wf'</span> <span class="id" title="var">ext</span> <span class="id" title="var">Γ</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_impl"><span class="id" title="lemma">lift_typing_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">Hj</span>); <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#weakening_env"><span class="id" title="lemma">weakening_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">u</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)), <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#extends_trans"><span class="id" title="lemma">extends_trans</span></a>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">ext</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">wfΣ</span>&amp;<span class="id" title="var">wfΣ'</span>&amp;<span class="id" title="var">ext</span>); <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Defined</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="weaken_prop" class="idref" href="#weaken_prop"><span class="id" title="lemma">weaken_prop</span></a> {<a id="cf:1028" class="idref" href="#cf:1028"><span class="id" title="binder">cf</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#weaken_env_strictly_decls_prop"><span class="id" title="definition">weaken_env_strictly_decls_prop</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a>)<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="756399d48b48bd4cf3ab4c83568ae658" class="idref" href="#756399d48b48bd4cf3ab4c83568ae658"><span class="id" title="binder">Σ</span></a> <a id="848935c21bad8330a7c32c5c2a24a151" class="idref" href="#848935c21bad8330a7c32c5c2a24a151"><span class="id" title="binder">Γ</span></a> <a id="j:1031" class="idref" href="#j:1031"><span class="id" title="binder">j</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#756399d48b48bd4cf3ab4c83568ae658"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing0"><span class="id" title="definition">lift_typing0</span></a> (<span class="id" title="keyword">fun</span> <a id="t:1032" class="idref" href="#t:1032"><span class="id" title="binder">t</span></a> <a id="T:1033" class="idref" href="#T:1033"><span class="id" title="binder">T</span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1028"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#756399d48b48bd4cf3ab4c83568ae658"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#848935c21bad8330a7c32c5c2a24a151"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1032"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1033"><span class="id" title="variable">T</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#j:1031"><span class="id" title="variable">j</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#weaken_prop_gen"><span class="id" title="lemma">weaken_prop_gen</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#weaken_env_strictly_on_decls_prop"><span class="id" title="definition">weaken_env_strictly_on_decls_prop</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#weaken_env_prop_gen"><span class="id" title="definition">weaken_env_prop_gen</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">intro</span>; <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span> <span class="id" title="var">x</span> : <span class="id" title="var">_</span> |- <span class="id" title="var">_</span> ⇒ <span class="id" title="var">x</span> <span class="id" title="keyword">end</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">pose</span> (<span class="id" title="var">H</span> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H'</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span> ⇒ <span class="id" title="var">Hext</span> <span class="id" title="var">Γ</span> <span class="id" title="var">j</span> <span class="id" title="var">Hj</span> <span class="id" title="var">wftΣ'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="keyword">fun</span> <a id="v:1034" class="idref" href="#v:1034"><span class="id" title="binder"><span id="v:1037" class="id">v</span></span></a> <a id="2b516eaff1ccd115020ec47aa7d55325" class="idref" href="#2b516eaff1ccd115020ec47aa7d55325"><span class="id" title="binder"><span id="46ba005add9c2572ff639c9abcc72e41" class="id">wfΣ'</span></span></a> <a id="4725b778d33582b57f8bf5545470cb8e" class="idref" href="#4725b778d33582b57f8bf5545470cb8e"><span class="id" title="binder"><span id="1c56ef94bd1176c2a86ced9cfc91426a" class="id">wfΣ</span></span></a> ⇒ <span class="id" title="var">H</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4725b778d33582b57f8bf5545470cb8e"><span class="id" title="variable">wfΣ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2b516eaff1ccd115020ec47aa7d55325"><span class="id" title="variable">wfΣ'</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">tc</span>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">))</span></a> <span class="id" title="var">Γ</span> <span class="id" title="var">j</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1034"><span class="id" title="variable">v</span></a>) <span class="id" title="keyword">as</span> <span class="id" title="var">H'</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">rename</span> <span class="id" title="var">H'</span> <span class="id" title="var">into</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#strictly_extends_decls_wf"><span class="id" title="lemma">strictly_extends_decls_wf</span></a> <span class="id" title="keyword">with</span> (2 := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#strictly_extends_decls_trans"><span class="id" title="lemma">strictly_extends_decls_trans</span></a> <span class="id" title="var">Hext</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">wftΣ'</span> <span class="id" title="keyword">as</span> <span class="id" title="var">wftΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_arities_context" class="idref" href="#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a> <a id="mdecl:1040" class="idref" href="#mdecl:1040"><span class="id" title="binder">mdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1040"><span class="id" title="variable">mdecl</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1040"><span class="id" title="variable">mdecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_mapi"><span class="id" title="lemma">rev_mapi</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_mapi"><span class="id" title="lemma">map_mapi</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_cst_map"><span class="id" title="lemma">mapi_cst_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_refl"><span class="id" title="lemma">All_refl</span></a>. <span class="id" title="tactic">intros</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_subst_telescope" class="idref" href="#trans_subst_telescope"><span class="id" title="lemma">trans_subst_telescope</span></a> <a id="p:1041" class="idref" href="#p:1041"><span class="id" title="binder">p</span></a> <a id="q:1042" class="idref" href="#q:1042"><span class="id" title="binder">q</span></a> <a id="s:1043" class="idref" href="#s:1043"><span class="id" title="binder">s</span></a> <a id="n:1044" class="idref" href="#n:1044"><span class="id" title="binder">n</span></a> <a id="26d2228af5dea276d4a3922031f27caa" class="idref" href="#26d2228af5dea276d4a3922031f27caa"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1041"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1043"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:1042"><span class="id" title="variable">q</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#26d2228af5dea276d4a3922031f27caa"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_telescope"><span class="id" title="definition">subst_telescope</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1043"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1044"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#26d2228af5dea276d4a3922031f27caa"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_telescope"><span class="id" title="definition">subst_telescope</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1043"><span class="id" title="variable">s</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1044"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#26d2228af5dea276d4a3922031f27caa"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">s</span>, <span class="id" title="var">n</span>, <span class="id" title="var">q</span>|- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ons</span>; <span class="id" title="tactic">rewrite</span> /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /= <span class="id" title="var">ona</span> <span class="id" title="var">onΓ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span>!<a class="idref" href="MetaRocq.PCUIC.PCUICContextSubst.html#subst_telescope_cons"><span class="id" title="lemma">PCUICContextSubst.subst_telescope_cons</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_decl"><span class="id" title="lemma">trans_subst_decl</span></a> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) //. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ona</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_Sk"><span class="id" title="lemma">mapi_rec_Sk</span></a>. <span class="id" title="tactic">rewrite</span> -(<span class="id" title="var">IHΓ</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <span class="id" title="var">q</span>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_telescope"><span class="id" title="definition">subst_telescope</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi"><span class="id" title="definition">mapi</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#mapi_rec_ext"><span class="id" title="lemma">mapi_rec_ext</span></a>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_succ_r"><span class="id" title="lemma">Nat.add_succ_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All2i_All2" class="idref" href="#All2i_All2"><span class="id" title="lemma">All2i_All2</span></a> {<a id="A:1046" class="idref" href="#A:1046"><span class="id" title="binder">A</span></a> <a id="B:1047" class="idref" href="#B:1047"><span class="id" title="binder">B</span></a>} {<a id="P:1048" class="idref" href="#P:1048"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1046"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1047"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="Q:1049" class="idref" href="#Q:1049"><span class="id" title="binder">Q</span></a>} <a id="n:1050" class="idref" href="#n:1050"><span class="id" title="binder">n</span></a> <a id="l:1051" class="idref" href="#l:1051"><span class="id" title="binder">l</span></a> <a id="l':1052" class="idref" href="#l':1052"><span class="id" title="binder">l'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i"><span class="id" title="inductive">All2i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1048"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1050"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1051"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':1052"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="i:1053" class="idref" href="#i:1053"><span class="id" title="binder">i</span></a> <a id="x:1054" class="idref" href="#x:1054"><span class="id" title="binder">x</span></a> <a id="y:1055" class="idref" href="#y:1055"><span class="id" title="binder">y</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1048"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1053"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1054"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:1055"><span class="id" title="variable">y</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:1049"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1054"><span class="id" title="variable">x</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#y:1055"><span class="id" title="variable">y</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2"><span class="id" title="inductive">All2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Q:1049"><span class="id" title="variable">Q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1051"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':1052"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eq_annots_expand_lets_ctx" class="idref" href="#eq_annots_expand_lets_ctx"><span class="id" title="lemma">eq_annots_expand_lets_ctx</span></a> (<a id="9d664b42ee3c34c71b499ab5d7347a2d" class="idref" href="#9d664b42ee3c34c71b499ab5d7347a2d"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#aname"><span class="id" title="definition">aname</span></a>) (<a id="54eeb94b296c70734e40cecc06bce45b" class="idref" href="#54eeb94b296c70734e40cecc06bce45b"><span class="id" title="binder">Δ</span></a> <a id="3896348cbe48ff3331b4a8dde0b9314d" class="idref" href="#3896348cbe48ff3331b4a8dde0b9314d"><span class="id" title="binder">Δ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots"><span class="id" title="abbreviation">eq_annots</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9d664b42ee3c34c71b499ab5d7347a2d"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#54eeb94b296c70734e40cecc06bce45b"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3896348cbe48ff3331b4a8dde0b9314d"><span class="id" title="variable">Δ'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'&lt;-&gt;'_x"><span class="id" title="notation">↔</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots"><span class="id" title="abbreviation">eq_annots</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9d664b42ee3c34c71b499ab5d7347a2d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3896348cbe48ff3331b4a8dde0b9314d"><span class="id" title="variable">Δ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots_subst_context"><span class="id" title="lemma">eq_annots_subst_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots_lift_context"><span class="id" title="lemma">eq_annots_lift_context</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
We need to go through the intermediate definition which just maps the translation
    on inductive declarations but does not perform smashing of the arguments contexts. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_trans_constructor_body" class="idref" href="#map_trans_constructor_body"><span class="id" title="definition">map_trans_constructor_body</span></a> (<a id="d:1059" class="idref" href="#d:1059"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.constructor_body"><span class="id" title="record">PCUICEnvironment.constructor_body</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="args:1060" class="idref" href="#args:1060"><span class="id" title="binder">args</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1059"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="indices:1061" class="idref" href="#indices:1061"><span class="id" title="binder">indices</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1059"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_name"><span class="id" title="projection">cstr_name</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1059"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_name"><span class="id" title="projection">PCUICEnvironment.cstr_name</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:1060"><span class="id" title="variable">args</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#indices:1061"><span class="id" title="variable">indices</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_type"><span class="id" title="projection">cstr_type</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1059"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_type"><span class="id" title="projection">cstr_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_arity"><span class="id" title="projection">cstr_arity</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1059"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_arity"><span class="id" title="projection">PCUICEnvironment.cstr_arity</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_trans_one_ind_body" class="idref" href="#map_trans_one_ind_body"><span class="id" title="definition">map_trans_one_ind_body</span></a> (<a id="d:1062" class="idref" href="#d:1062"><span class="id" title="binder">d</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.one_inductive_body"><span class="id" title="record">PCUICEnvironment.one_inductive_body</span></a>) :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_name"><span class="id" title="projection">ind_name</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_name"><span class="id" title="projection">PCUICEnvironment.ind_name</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_relevance"><span class="id" title="projection">ind_relevance</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_relevance"><span class="id" title="projection">PCUICEnvironment.ind_relevance</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">PCUICEnvironment.ind_indices</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_type"><span class="id" title="projection">ind_type</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_type"><span class="id" title="projection">PCUICEnvironment.ind_type</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_sort"><span class="id" title="projection">ind_sort</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_sort"><span class="id" title="projection">PCUICEnvironment.ind_sort</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_kelim"><span class="id" title="projection">ind_kelim</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_kelim"><span class="id" title="projection">PCUICEnvironment.ind_kelim</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_ctors"><span class="id" title="projection">ind_ctors</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_constructor_body"><span class="id" title="definition">map_trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_ctors"><span class="id" title="projection">PCUICEnvironment.ind_ctors</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">ind_projs</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_projection_body"><span class="id" title="definition">trans_projection_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1062"><span class="id" title="variable">d</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">PCUICEnvironment.ind_projs</span></a>) |}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a id="map_trans_minductive_body" class="idref" href="#map_trans_minductive_body"><span class="id" title="definition">map_trans_minductive_body</span></a> <a id="md:1063" class="idref" href="#md:1063"><span class="id" title="binder">md</span></a> :=<br/>
&nbsp;&nbsp;{| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_finite"><span class="id" title="projection">ind_finite</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_finite"><span class="id" title="projection">PCUICEnvironment.ind_finite</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">ind_npars</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_npars"><span class="id" title="projection">PCUICEnvironment.ind_npars</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">PCUICEnvironment.ind_params</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_one_ind_body"><span class="id" title="definition">map_trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">PCUICEnvironment.ind_bodies</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">PCUICEnvironment.ind_universes</span></a>);<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_variance"><span class="id" title="projection">ind_variance</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#md:1063"><span class="id" title="variable">md</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_variance"><span class="id" title="projection">PCUICEnvironment.ind_variance</span></a>)<br/>
&nbsp;&nbsp;|}.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_case_branch_context" class="idref" href="#trans_case_branch_context"><span class="id" title="lemma">trans_case_branch_context</span></a> {<a id="cf:1064" class="idref" href="#cf:1064"><span class="id" title="binder">cf</span></a>} {<a id="1b3e7462abe8591073c8d44395ea191b" class="idref" href="#1b3e7462abe8591073c8d44395ea191b"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="e34298feef1ad3ec63c36a55561361cb" class="idref" href="#e34298feef1ad3ec63c36a55561361cb"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1b3e7462abe8591073c8d44395ea191b"><span class="id" title="variable">Σ</span></a>} {<a id="ci:1067" class="idref" href="#ci:1067"><span class="id" title="binder">ci</span></a> <a id="c:1068" class="idref" href="#c:1068"><span class="id" title="binder">c</span></a> <a id="mdecl:1069" class="idref" href="#mdecl:1069"><span class="id" title="binder">mdecl</span></a> <a id="idecl:1070" class="idref" href="#idecl:1070"><span class="id" title="binder">idecl</span></a> <a id="cdecl:1071" class="idref" href="#cdecl:1071"><span class="id" title="binder">cdecl</span></a> <a id="p:1072" class="idref" href="#p:1072"><span class="id" title="binder">p</span></a> <a id="br:1073" class="idref" href="#br:1073"><span class="id" title="binder">br</span></a>} {<a id="b5308fc8ee105fdd7fe2179b3130f471" class="idref" href="#b5308fc8ee105fdd7fe2179b3130f471"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1b3e7462abe8591073c8d44395ea191b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:1067"><span class="id" title="variable">ci</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1068"><span class="id" title="variable">c</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1069"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1070"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1071"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate"><span class="id" title="definition">wf_predicate</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1069"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1070"><span class="id" title="variable">idecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1072"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1071"><span class="id" title="variable">cdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1073"><span class="id" title="variable">br</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names"><span class="id" title="abbreviation">eq_context_upto_names</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1073"><span class="id" title="variable">br</span></a>)	(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:1067"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1069"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1071"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b5308fc8ee105fdd7fe2179b3130f471"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1072"><span class="id" title="variable">p</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':1075" class="idref" href="#p':1075"><span class="id" title="binder">p'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1072"><span class="id" title="variable">p</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="br':1076" class="idref" href="#br':1076"><span class="id" title="binder">br'</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1073"><span class="id" title="variable">br</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ci:1067"><span class="id" title="variable">ci</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1069"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1072"><span class="id" title="variable">p</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#forget_types"><span class="id" title="definition">forget_types</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1073"><span class="id" title="variable">br</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1071"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p':1075"><span class="id" title="variable">p'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br':1076"><span class="id" title="variable">br'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">declc</span> <span class="id" title="var">wfp</span> <span class="id" title="var">wfbr</span> <span class="id" title="var">onbctx</span> <span class="id" title="var">onpars</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span> <span class="id" title="var">br'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">onfvsargs</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvssi</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ci</span>) (<a class="idref" href="MetaRocq.Common.Universes.html#abstract_instance"><span class="id" title="definition">abstract_instance</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">mdecl</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span>)) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context"><span class="id" title="lemma">on_free_vars_ctx_subst_context</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). }<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;-(<a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#inst_case_branch_context_eq"><span class="id" title="lemma">PCUICCasesContexts.inst_case_branch_context_eq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">ind</span> := <span class="id" title="var">ci</span>) (<span class="id" title="var">mdecl</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_minductive_body"><span class="id" title="definition">map_trans_minductive_body</span></a> <span class="id" title="var">mdecl</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">cdecl</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_constructor_body"><span class="id" title="definition">map_trans_constructor_body</span></a> <span class="id" title="var">cdecl</span>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context_gen"><span class="id" title="definition">case_branch_context_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#pre_case_branch_context_gen"><span class="id" title="definition">pre_case_branch_context_gen</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_set_binder"><span class="id" title="lemma">trans_local_set_binder</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">br'</span> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#forget_types_map_context"><span class="id" title="lemma">forget_types_map_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_cstr_branch_context"><span class="id" title="lemma">on_free_vars_ctx_cstr_branch_context</span></a> (<span class="id" title="var">c</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ci</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">c</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">declc</span>). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">declc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a> //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">br'</span>. <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onbctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">declc</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_constructor_body"><span class="id" title="definition">map_trans_constructor_body</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_minductive_body"><span class="id" title="definition">map_trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_trans_minductive_body"><span class="id" title="definition">map_trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All_over_All" class="idref" href="#All_over_All"><span class="id" title="lemma">All_over_All</span></a> {<a id="cf:1077" class="idref" href="#cf:1077"><span class="id" title="binder">cf</span></a>} <a id="37cb755dd673c310af25d14b6b5fd3a7" class="idref" href="#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="binder">Σ</span></a> <a id="f1535701eaf97e98ff263d4c9aaf626c" class="idref" href="#f1535701eaf97e98ff263d4c9aaf626c"><span class="id" title="binder">Γ</span></a> <a id="1c5c2470e439074e44a78f5686429121" class="idref" href="#1c5c2470e439074e44a78f5686429121"><span class="id" title="binder">wfΓ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env_over"><span class="id" title="definition">ST.All_local_env_over</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="6ae8e3a860bcb7574c37529bd6fca6c4" class="idref" href="#6ae8e3a860bcb7574c37529bd6fca6c4"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context"><span class="id" title="definition">SE.context</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6ae8e3a860bcb7574c37529bd6fca6c4"><span class="id" title="variable">Γ</span></a>) (<a id="t:1082" class="idref" href="#t:1082"><span class="id" title="binder">t</span></a> <a id="T:1083" class="idref" href="#T:1083"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">_</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6ae8e3a860bcb7574c37529bd6fca6c4"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1082"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1083"><span class="id" title="variable">T</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1077"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6ae8e3a860bcb7574c37529bd6fca6c4"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1082"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1083"><span class="id" title="variable">T</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f1535701eaf97e98ff263d4c9aaf626c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1c5c2470e439074e44a78f5686429121"><span class="id" title="variable">wfΓ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env"><span class="id" title="inductive">ST.All_local_env</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing"><span class="id" title="abbreviation">ST.lift_typing</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> (<a id="eb9e30805f28f28570ada0283c444415" class="idref" href="#eb9e30805f28f28570ada0283c444415"><span class="id" title="binder">Σ0</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_env_ext"><span class="id" title="definition">SE.global_env_ext</span></a>) (<a id="81a97d3dff5f2a8cdcee90e1cdbf0639" class="idref" href="#81a97d3dff5f2a8cdcee90e1cdbf0639"><span class="id" title="binder">Γ0</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context"><span class="id" title="definition">SE.context</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a id="b:1086" class="idref" href="#b:1086"><span class="id" title="binder">b</span></a> <a id="ty:1087" class="idref" href="#ty:1087"><span class="id" title="binder">ty</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">PCUICAst.term</span></a>) ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">ST.typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eb9e30805f28f28570ada0283c444415"><span class="id" title="variable">Σ0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#81a97d3dff5f2a8cdcee90e1cdbf0639"><span class="id" title="variable">Γ0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:1086"><span class="id" title="variable">b</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:1087"><span class="id" title="variable">ty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1077"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eb9e30805f28f28570ada0283c444415"><span class="id" title="variable">Σ0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#81a97d3dff5f2a8cdcee90e1cdbf0639"><span class="id" title="variable">Γ0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:1086"><span class="id" title="variable">b</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ty:1087"><span class="id" title="variable">ty</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37cb755dd673c310af25d14b6b5fd3a7"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f1535701eaf97e98ff263d4c9aaf626c"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">H</span>;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHAll_local_env_over_sorting</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_sorting_it_impl"><span class="id" title="lemma">lift_sorting_it_impl</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tu</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">HT</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">tas</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">apply</span> <span class="id" title="var">IHAll_local_env_over_sorting</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_sorting_it_impl"><span class="id" title="lemma">lift_sorting_it_impl</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">tu</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">intros</span> <span class="id" title="var">HT</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">split</span>; <span class="id" title="var">tas</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_prim_ty" class="idref" href="#trans_prim_ty"><span class="id" title="lemma">trans_prim_ty</span></a> <a id="p:1088" class="idref" href="#p:1088"><span class="id" title="binder">p</span></a> <a id="prim_ty:1089" class="idref" href="#prim_ty:1089"><span class="id" title="binder">prim_ty</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#prim_type"><span class="id" title="definition">prim_type</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1088"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#prim_ty:1089"><span class="id" title="variable">prim_ty</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#prim_type"><span class="id" title="definition">prim_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICPrimitive.html#map_prim"><span class="id" title="abbreviation">map_prim</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1088"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#prim_ty:1089"><span class="id" title="variable">prim_ty</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="var">simp</span> <span class="id" title="var">prim_type</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <a id="pcuic_expand_lets" class="idref" href="#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a> {<a id="cf:1090" class="idref" href="#cf:1090"><span class="id" title="binder">cf</span></a>} (<a id="91e42f85264425c2e19df17f1f1c95f3" class="idref" href="#91e42f85264425c2e19df17f1f1c95f3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#global_env_ext"><span class="id" title="definition">SE.global_env_ext</span></a>) <a id="d6e996e09d8dc6fac4bf0f6398841c62" class="idref" href="#d6e996e09d8dc6fac4bf0f6398841c62"><span class="id" title="binder">Γ</span></a> <a id="t:1093" class="idref" href="#t:1093"><span class="id" title="binder">t</span></a> <a id="T:1094" class="idref" href="#T:1094"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91e42f85264425c2e19df17f1f1c95f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91e42f85264425c2e19df17f1f1c95f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6e996e09d8dc6fac4bf0f6398841c62"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1093"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1094"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91e42f85264425c2e19df17f1f1c95f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1090"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#91e42f85264425c2e19df17f1f1c95f3"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d6e996e09d8dc6fac4bf0f6398841c62"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1093"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1094"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">X</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Σ</span> <span class="id" title="var">X</span> <span class="id" title="var">Γ</span> <span class="id" title="var">t</span> <span class="id" title="var">T</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_ind_env"><span class="id" title="lemma">typing_ind_env</span></a> (<span class="id" title="keyword">fun</span> <a id="490450a4a0afdbb90bad7343a627c29a" class="idref" href="#490450a4a0afdbb90bad7343a627c29a"><span class="id" title="binder"><span id="8489da233c93ffec122d628a2e80952e" class="id">Σ</span></span></a> <a id="30832482bd677198b1e99cd52764dce0" class="idref" href="#30832482bd677198b1e99cd52764dce0"><span class="id" title="binder"><span id="005c54e1308cc469a51d9cb3231f84e5" class="id">Γ</span></span></a> <a id="t:1104" class="idref" href="#t:1104"><span class="id" title="binder"><span id="t:1115" class="id">t</span></span></a> <a id="T:1105" class="idref" href="#T:1105"><span class="id" title="binder"><span id="T:1116" class="id">T</span></span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#490450a4a0afdbb90bad7343a627c29a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#490450a4a0afdbb90bad7343a627c29a"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30832482bd677198b1e99cd52764dce0"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1104"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1105"><span class="id" title="variable">T</span></a>)<br/>
&nbsp;&nbsp;)%<span class="id" title="keyword">type</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="dfa9eb917c2082cde255c413eee992dd" class="idref" href="#dfa9eb917c2082cde255c413eee992dd"><span class="id" title="binder"><span id="5f6e67ca28a44b212786dd597bdd83e2" class="id">Σ</span></span></a> <a id="05eafd20af1feef6f9f7800cb82cdeab" class="idref" href="#05eafd20af1feef6f9f7800cb82cdeab"><span class="id" title="binder"><span id="9459b7b12b3c4cb4794425fe2a8a0dfb" class="id">Γ</span></span></a> <a id="j:1099" class="idref" href="#j:1099"><span class="id" title="binder"><span id="j:1110" class="id">j</span></span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfa9eb917c2082cde255c413eee992dd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing0"><span class="id" title="definition">lift_typing0</span></a> (<span class="id" title="keyword">fun</span> <a id="t:1100" class="idref" href="#t:1100"><span class="id" title="binder"><span id="t:1111" class="id">t</span></span></a> <a id="T:1101" class="idref" href="#T:1101"><span class="id" title="binder"><span id="T:1112" class="id">T</span></span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dfa9eb917c2082cde255c413eee992dd"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#05eafd20af1feef6f9f7800cb82cdeab"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1100"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1101"><span class="id" title="variable">T</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#j:1099"><span class="id" title="variable">j</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="23ad4d4893e59ac8dedbbabe79a9f7f3" class="idref" href="#23ad4d4893e59ac8dedbbabe79a9f7f3"><span class="id" title="binder"><span id="61df9bb3c2c0c646e91c219478402c5c" class="id">Σ</span></span></a> <a id="e1b2600183e012b5709c8278f25eee65" class="idref" href="#e1b2600183e012b5709c8278f25eee65"><span class="id" title="binder"><span id="eab7cba769bf85eae4fbebce5de596fb" class="id">Γ</span></span></a> ⇒<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#23ad4d4893e59ac8dedbbabe79a9f7f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env"><span class="id" title="inductive">TT.All_local_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_typing"><span class="id" title="abbreviation">TT.lift_typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#typing"><span class="id" title="inductive">TT.typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#23ad4d4893e59ac8dedbbabe79a9f7f3"><span class="id" title="variable">Σ</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e1b2600183e012b5709c8278f25eee65"><span class="id" title="variable">Γ</span></a>))<br/>
&nbsp;&nbsp;);<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_impl"><span class="id" title="lemma">lift_typing_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X</span>) ⇒ ?? [] <span class="id" title="var">_</span> ? //; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf_local_env"><span class="id" title="lemma">trans_wf_local_env</span></a> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_over_All"><span class="id" title="lemma">All_over_All</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#skipn"><span class="id" title="definition">skipn</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#closed_wf_local"><span class="id" title="lemma">closed_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfΓ</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_ctx_decl"><span class="id" title="lemma">closedn_ctx_decl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfΓ</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">wfΓ</span>⇒ /= [] <span class="id" title="var">_</span> <span class="id" title="var">cl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#length_skipn"><span class="id" title="lemma">length_skipn</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decl_type"><span class="id" title="lemma">trans_decl_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_Rel"><span class="id" title="constructor">type_Rel</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Prod"><span class="id" title="constructor">TT.type_Prod</span></a>;<span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Lambda"><span class="id" title="constructor">TT.type_Lambda</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_LetIn"><span class="id" title="constructor">TT.type_LetIn</span></a>;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst10"><span class="id" title="lemma">trans_subst10</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#type_is_open_term"><span class="id" title="lemma">type_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">X2</span> ⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[]. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_App"><span class="id" title="constructor">type_App</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cst_type"><span class="id" title="lemma">trans_cst_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Const"><span class="id" title="constructor">TT.type_Const</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constant"><span class="id" title="lemma">trans_declared_constant</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_type"><span class="id" title="lemma">trans_ind_type</span></a> <span class="id" title="var">mdecl</span> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> <span class="id" title="var">ind</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Ind"><span class="id" title="constructor">TT.type_Ind</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_inductive"><span class="id" title="lemma">trans_declared_inductive</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">isdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#type_ws_cumul_pb"><span class="id" title="lemma">type_ws_cumul_pb</span></a> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Construct"><span class="id" title="constructor">TT.type_Construct</span></a>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningEnvTyp.html#declared_constructor_inv"><span class="id" title="lemma">declared_constructor_inv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#weaken_prop"><span class="id" title="lemma">weaken_prop</span></a> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">isdecl</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">cs</span> [<span class="id" title="var">hnth</span> <span class="id" title="var">onc</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onc</span>. <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_sorting_ex_it_impl_gen"><span class="id" title="lemma">lift_sorting_ex_it_impl_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">on_ctype</span> <span class="id" title="var">_</span>) ⇒ //= <span class="id" title="var">Hs</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_of_constructor"><span class="id" title="definition">type_of_constructor</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 0 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_gen_type"><span class="id" title="lemma">declared_constructor_closed_gen_type</span></a> <span class="id" title="var">isdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance"><span class="id" title="lemma">closedn_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eexists</span>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#substitution"><span class="id" title="lemma">substitution</span></a> (<span class="id" title="var">Γ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">Γ</span>) (<span class="id" title="var">Δ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) (<span class="id" title="var">T</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <span class="id" title="var">_@</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#weaken_subslet"><span class="id" title="lemma">weaken_subslet</span></a> (<span class="id" title="var">Γ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">Γ</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)); <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#subslet_inds"><span class="id" title="lemma">subslet_inds</span></a>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_inductive"><span class="id" title="lemma">trans_declared_inductive</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">isdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_ctx"><span class="id" title="lemma">weaken_ctx</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">hnth</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#typing_subst_instance_decl"><span class="id" title="lemma">PCUICUnivSubstitutionTyp.typing_subst_instance_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj1"><span class="id" title="definition">proj1</span></a> <span class="id" title="var">isdecl</span>)) <span class="id" title="var">Hs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">X2</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">symmetry</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#weaken_ws_cumul_pb"><span class="id" title="lemma">weaken_ws_cumul_pb</span></a> (<span class="id" title="var">Γ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">Γ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_type_of_constructor"><span class="id" title="lemma">trans_type_of_constructor</span></a> <span class="id" title="var">isdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_consistent_instance_ext"><span class="id" title="lemma">trans_consistent_instance_ext</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">ptm</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkLambda_or_LetIn"><span class="id" title="lemma">trans_it_mkLambda_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">predctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">hty</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#validity"><span class="id" title="lemma">validity</span></a> <span class="id" title="var">X6</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#isType_mkApps_Ind_smash"><span class="id" title="lemma">isType_mkApps_Ind_smash</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span> <span class="id" title="keyword">as</span> []; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_predicate_length_pars"><span class="id" title="lemma">wf_predicate_length_pars</span></a> <span class="id" title="var">H0</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Case"><span class="id" title="constructor">TT.type_Case</span></a>; <span class="id" title="tactic">auto</span>. 4-5:<span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_inductive"><span class="id" title="lemma">trans_declared_inductive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) (<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X7</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">X7</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf_predicate"><span class="id" title="lemma">trans_wf_predicate</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">pcontext</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) (<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_predicate_context"><span class="id" title="lemma">trans_ind_predicate_context</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">eassert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#ctx_inst"><span class="id" title="abbreviation">ctx_inst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hctxi</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst_impl"><span class="id" title="lemma">ctx_inst_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X5</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? []).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">eassert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvTyping.ctx_inst"><span class="id" title="inductive">PCUICEnvTyping.ctx_inst</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">IHctxi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst_impl"><span class="id" title="lemma">ctx_inst_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X5</span>). <span class="id" title="tactic">intros</span> ? ? [? <span class="id" title="var">r</span>]; <span class="id" title="tactic">exact</span> <span class="id" title="var">r</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hctxi</span> <span class="id" title="var">IHctxi</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">wfctx</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><span class="id" title="var">Γ</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <span class="id" title="var">idecl</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">PCUICWeakeningTyp.weaken_wf_local</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#on_minductive_wf_params_indices_inst"><span class="id" title="lemma">on_minductive_wf_params_indices_inst</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">wfΣ</span> <span class="id" title="var">X9</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> -[<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span>)]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span>)]<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">indices</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_instance_context"><span class="id" title="instance">T.PCUICEnvironment.subst_instance_context</span></a> <span class="id" title="keyword">with</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_instance_context"><span class="id" title="instance">subst_instance_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <span class="id" title="var">idecl</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a> <span class="id" title="keyword">as</span> <span class="id" title="var">Δ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="var">revert</span> <span class="id" title="var">Γ</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">c</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">Γ</span> <span class="id" title="var">l</span> <span class="id" title="keyword">wf</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">c</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">l</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">H</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">depelim</span> <span class="id" title="var">IHctxi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">t2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#substitution_wf_local"><span class="id" title="lemma">substitution_wf_local</span></a> (<span class="id" title="var">Γ'</span>:=<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">wfctx</span>). <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subslet_ass_tip"><span class="id" title="lemma">subslet_ass_tip</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> 0 <span class="id" title="var">Γ</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">now</span> <span class="id" title="var">len</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X0</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHctxi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> <span class="id" title="var">IHctxi</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_telescope"><span class="id" title="lemma">trans_subst_telescope</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="var">t0</span>) //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">wfctx</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">c</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_app_inv"><span class="id" title="definition">All_local_env_app_inv</span></a> <span class="id" title="var">wfctx</span>) <span class="id" title="keyword">as</span> [<span class="id" title="var">w</span> <span class="id" title="var">_</span>]. <span class="id" title="var">depelim</span> <span class="id" title="var">w</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l0</span> <span class="id" title="keyword">as</span> <span class="id" title="var">Hb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#substitution_wf_local"><span class="id" title="lemma">substitution_wf_local</span></a> (<span class="id" title="var">Γ'</span>:=<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vdef"><span class="id" title="definition">vdef</span></a> <span class="id" title="var">na</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">wfctx</span>). <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subslet_def_tip"><span class="id" title="lemma">subslet_def_tip</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> 0 <span class="id" title="var">Γ</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">now</span> <span class="id" title="var">len</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X0</span> <span class="id" title="var">H</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_telescope"><span class="id" title="lemma">trans_subst_telescope</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="var">Hb</span>) //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">wfctx</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">red</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_map_right"><span class="id" title="lemma">Forall2_map_right</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_map"><span class="id" title="lemma">Forall2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_All2"><span class="id" title="lemma">Forall2_All2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_All2_mix_left"><span class="id" title="lemma">All2i_All2_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X8</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_nth_hyp"><span class="id" title="lemma">All2i_nth_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_Forall2"><span class="id" title="lemma">All2_Forall2</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All2i_All2"><span class="id" title="lemma">All2i_All2</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">cdecl</span> <span class="id" title="var">br</span> [<span class="id" title="var">hnth</span> [<span class="id" title="var">wfbr</span> [<span class="id" title="var">cd</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">declc</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ci</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfbr</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch"><span class="id" title="definition">wf_branch</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#wf_branch_gen"><span class="id" title="definition">wf_branch_gen</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#cstr_branch_context"><span class="id" title="definition">cstr_branch_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_eq_context_upto_names"><span class="id" title="lemma">trans_eq_context_upto_names</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names_smash_context"><span class="id" title="lemma">eq_context_upto_names_smash_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">eqann</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_annots_subst_context"><span class="id" title="lemma">eq_annots_subst_context</span></a> <span class="id" title="var">_</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#inds"><span class="id" title="definition">inds</span></a> (<a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> <span class="id" title="var">ci</span>) (<a class="idref" href="MetaRocq.Common.Universes.html#abstract_instance"><span class="id" title="definition">abstract_instance</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">mdecl</span>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span>))) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eq_annots_expand_lets_ctx"><span class="id" title="lemma">eq_annots_expand_lets_ctx</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_subst"><span class="id" title="lemma">smash_context_subst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /= <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#expand_lets_smash_context"><span class="id" title="lemma">expand_lets_smash_context</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) /=. <span class="id" title="var">len</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#expand_lets_k_ctx_nil"><span class="id" title="lemma">expand_lets_k_ctx_nil</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_context"><span class="id" title="lemma">on_free_vars_ctx_subst_context</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#eq_context_upto_names_binder_annot"><span class="id" title="lemma">eq_context_upto_names_binder_annot</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_map"><span class="id" title="lemma">All2i_map</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_map_right"><span class="id" title="lemma">All2i_map_right</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall2_All2"><span class="id" title="lemma">Forall2_All2</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_nth_hyp"><span class="id" title="lemma">All2i_nth_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_All2_mix_left"><span class="id" title="lemma">All2i_All2_mix_left</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X8</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2i_impl"><span class="id" title="lemma">All2i_impl</span></a> ; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">cdecl</span> <span class="id" title="var">br</span>. <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cbt</span> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type"><span class="id" title="definition">case_branch_type</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> (<span class="id" title="keyword">wf</span> &amp; <span class="id" title="var">hnth</span> &amp; <span class="id" title="var">eqctx</span> &amp; <span class="id" title="var">Hbctx</span> &amp; (<span class="id" title="var">Hb</span> &amp; <span class="id" title="var">IHb</span>) &amp; (<span class="id" title="var">Hbty</span> &amp; <span class="id" title="var">IHbty</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">declc</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constructor"><span class="id" title="definition">declared_constructor</span></a> <span class="id" title="var">Σ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ci</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">cdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">split</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clargs</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">mdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constructor_closed_args"><span class="id" title="lemma">declared_constructor_closed_args</span></a> <span class="id" title="var">declc</span>). <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cstr_branch_context"><span class="id" title="lemma">trans_cstr_branch_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>); <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCasesContexts.html#alpha_eq_smash_context"><span class="id" title="lemma">alpha_eq_smash_context</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#alpha_eq_trans"><span class="id" title="lemma">alpha_eq_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_predicate_context"><span class="id" title="lemma">trans_case_predicate_context</span></a> <span class="id" title="var">declc</span> <span class="id" title="var">H1</span> <span class="id" title="var">s</span> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">brctxty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">trbr</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#a9a0b33c1f7aa55888d16704fbe19a94"><span class="id" title="notation">!!</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#a9a0b33c1f7aa55888d16704fbe19a94"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_branch_type"><span class="id" title="lemma">trans_case_branch_type</span></a> (<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ</span>) <span class="id" title="var">declc</span> <span class="id" title="var">H1</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">X1</span> <span class="id" title="var">eqctx</span><a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#a9a0b33c1f7aa55888d16704fbe19a94"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward_keep</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">eassert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#ctx_inst"><span class="id" title="abbreviation">ctx_inst</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">Hctxi</span> <span class="id" title="tactic">by</span> (<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst_impl"><span class="id" title="lemma">ctx_inst_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X5</span>); <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> ? []).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#ctx_inst_open_terms"><span class="id" title="lemma">ctx_inst_open_terms</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_app"><span class="id" title="lemma">All_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hctxi</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_forallb"><span class="id" title="lemma">All_forallb</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">pret</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">pret</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<span class="id" title="var">predctx</span>; <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_predicate_context_length_indices"><span class="id" title="lemma">case_predicate_context_length_indices</span></a> <span class="id" title="var">H0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/<span class="id" title="var">ptm</span>  <span class="id" title="tactic">in</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">p'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">cbv</span> <span class="id" title="keyword">zeta</span> <span class="id" title="tactic">in</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">br'</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">cbctx</span> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_context"><span class="id" title="definition">case_branch_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">brctxty'</span> := <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#case_branch_type"><span class="id" title="definition">case_branch_type</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">trbr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> <span class="id" title="var">brctxty</span> <span class="id" title="keyword">with</span> <span class="id" title="var">brctxty'</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">brctxty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">trbr</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">eqbrctx'</span> <span class="id" title="var">eqbrty'</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHb</span> <span class="id" title="var">X9</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHbty</span> <span class="id" title="var">X9</span>). <span class="id" title="tactic">specialize</span> (<span class="id" title="var">Hbctx</span> <span class="id" title="var">X9</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvs_cbctx</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">cbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInversion.html#typing_closed_ctx"><span class="id" title="lemma">typing_closed_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hb</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">Hb</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[]. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqbrctx'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqbrctx'</span> <span class="id" title="var">eqbrty'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hbty</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">cbt</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <span class="id" title="var">br'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">cbctx</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <span class="id" title="var">br</span>))) <span class="id" title="keyword">as</span> →.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">br'</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>; <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p'</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p'</span>) <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">cbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_branch_context"><span class="id" title="lemma">trans_case_branch_context</span></a> (<span class="id" title="var">Γ</span> := <span class="id" title="var">Γ</span>) <span class="id" title="var">declc</span>) //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#typing_expand_lets"><span class="id" title="lemma">typing_expand_lets</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqbrctx'</span> <span class="id" title="var">eqbrty'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hbty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hbty</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">cbt</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#typing_expand_lets"><span class="id" title="lemma">typing_expand_lets</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <span class="id" title="var">ps</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHbty</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#projection_context"><span class="id" title="definition">projection_context</span></a> <span class="id" title="var">p</span>.(<a class="idref" href="MetaRocq.Common.Kernames.html#proj_ind"><span class="id" title="projection">proj_ind</span></a>) <span class="id" title="var">mdecl</span> <span class="id" title="var">idecl</span> <span class="id" title="var">u</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#projection_context"><span class="id" title="definition">projection_context</span></a> /=; <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#declared_projection_type_and_eq"><span class="id" title="lemma">declared_projection_type_and_eq</span></a> <span class="id" title="var">_</span> <span class="id" title="var">isdecl</span>) <span class="id" title="keyword">as</span> [[] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#isType_is_open_term"><span class="id" title="lemma">isType_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>; <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst_instance"><span class="id" title="lemma">on_free_vars_subst_instance</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="var">X1</span>). <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#type_is_open_term"><span class="id" title="lemma">type_is_open_term</span></a>: <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_mkApps"><span class="id" title="lemma">on_free_vars_mkApps</span></a> /= <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> ⇒ → →. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a> /= <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.proj_type"><span class="id" title="projection">proj_type</span></a> <span class="id" title="var">pdecl</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_projection_body"><span class="id" title="definition">trans_projection_body</span></a> <span class="id" title="var">pdecl</span>).(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.proj_type"><span class="id" title="projection">proj_type</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#type_Proj"><span class="id" title="constructor">type_Proj</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_projection"><span class="id" title="lemma">trans_declared_projection</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X2</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> <span class="id" title="var">H</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">mdecl</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_dtype"><span class="id" title="lemma">trans_dtype</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <span class="id" title="var">Γ</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)). <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_Fix"><span class="id" title="constructor">TT.type_Fix</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env_app_inv"><span class="id" title="definition">TT.All_local_env_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fix_guard_trans"><span class="id" title="axiom">fix_guard_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">erewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">apply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">X1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">tu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">tu</span> <span class="id" title="var">_</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">types</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_prod"><span class="id" title="lemma">All_prod</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X3</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X1</span> <span class="id" title="var">X2</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> (<span class="id" title="var">onb</span> &amp; <span class="id" title="var">ont</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">tas</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">onb</span> <span class="id" title="var">_</span>) ⇒ // <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HT</span>; <span class="id" title="var">len</span>; <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0 <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#isTypeRel_is_open_term"><span class="id" title="lemma">isTypeRel_is_open_term</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#fix_context_length"><span class="id" title="lemma">fix_context_length</span></a> <span class="id" title="var">mfix</span>); <span class="id" title="tactic">eapply</span> <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf_fixpoint"><span class="id" title="lemma">trans_wf_fixpoint</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">mfix</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) //.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_dtype"><span class="id" title="lemma">trans_dtype</span></a>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <span class="id" title="var">Γ</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">n</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)). <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_CoFix"><span class="id" title="constructor">TT.type_CoFix</span></a>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env_app_inv"><span class="id" title="definition">TT.All_local_env_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span> <span class="id" title="keyword">as</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cofix_guard_trans"><span class="id" title="axiom">cofix_guard_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">erewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_nth_error"><span class="id" title="lemma">map_nth_error</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="var">eassumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>, (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a> <span class="id" title="var">X1</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> <span class="id" title="var">tu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">tu</span> <span class="id" title="var">_</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">fold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">types</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_prod"><span class="id" title="lemma">All_prod</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">X3</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">X1</span> <span class="id" title="var">X2</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">d</span> (<span class="id" title="var">onb</span> &amp; <span class="id" title="var">ont</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">tas</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">onb</span> <span class="id" title="var">_</span>) ⇒ // <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">HT</span>; <span class="id" title="var">len</span>; <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0 <span class="id" title="var">H2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">try</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#isTypeRel_is_open_term"><span class="id" title="lemma">isTypeRel_is_open_term</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#fix_context_length"><span class="id" title="lemma">fix_context_length</span></a> <span class="id" title="var">mfix</span>); <span class="id" title="tactic">eapply</span> <span class="id" title="var">HT</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf_cofixpoint"><span class="id" title="lemma">trans_wf_cofixpoint</span></a> //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_prim_ty"><span class="id" title="lemma">trans_prim_ty</span></a>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#prim_val_tag_map"><span class="id" title="lemma">prim_val_tag_map</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constant"><span class="id" title="lemma">trans_declared_constant</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [? []]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span> |- ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> []; <span class="id" title="tactic">split</span> ⇒ //; <span class="id" title="tactic">rewrite</span> ?<span class="id" title="var">H1</span> ?<span class="id" title="var">H2</span> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">depelim</span> <span class="id" title="var">X0</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">X1</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICArities.html#type_ws_cumul_pb"><span class="id" title="lemma">type_ws_cumul_pb</span></a> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulSpec_cumulAlgo_curry"><span class="id" title="lemma">cumulSpec_cumulAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X4</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cumul_decorate"><span class="id" title="lemma">cumul_decorate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X4</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICValidity.html#validity"><span class="id" title="lemma">validity</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumul"><span class="id" title="lemma">trans_cumul</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars_ctx"><span class="id" title="lemma">trans_on_free_vars_ctx</span></a> 0). <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfΓ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X1</span> <span class="id" title="var">X5</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#type_is_open_term"><span class="id" title="lemma">type_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X3</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fresh_global_map" class="idref" href="#fresh_global_map"><span class="id" title="lemma">fresh_global_map</span></a> {<a id="kn:1117" class="idref" href="#kn:1117"><span class="id" title="binder">kn</span></a>} {<a id="212df1d03cb73c636cd32d48e9700258" class="idref" href="#212df1d03cb73c636cd32d48e9700258"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#fresh_global"><span class="id" title="definition">fresh_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#kn:1117"><span class="id" title="variable">kn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#212df1d03cb73c636cd32d48e9700258"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#fresh_global"><span class="id" title="definition">fresh_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#kn:1117"><span class="id" title="variable">kn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#212df1d03cb73c636cd32d48e9700258"><span class="id" title="variable">Σ</span></a>.(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map"><span class="id" title="lemma">Forall_map</span></a>; <span class="id" title="var">cbn</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fold_right_map" class="idref" href="#fold_right_map"><span class="id" title="lemma">fold_right_map</span></a> {<a id="A:1119" class="idref" href="#A:1119"><span class="id" title="binder">A</span></a> <a id="B:1120" class="idref" href="#B:1120"><span class="id" title="binder">B</span></a> <a id="C:1121" class="idref" href="#C:1121"><span class="id" title="binder">C</span></a>} {<a id="f:1122" class="idref" href="#f:1122"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1120"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1119"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1119"><span class="id" title="variable">A</span></a>} {<a id="acc:1123" class="idref" href="#acc:1123"><span class="id" title="binder">acc</span></a> <a id="l:1124" class="idref" href="#l:1124"><span class="id" title="binder">l</span></a>} {<a id="g:1125" class="idref" href="#g:1125"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#C:1121"><span class="id" title="variable">C</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1120"><span class="id" title="variable">B</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1122"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1123"><span class="id" title="variable">acc</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:1125"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1124"><span class="id" title="variable">l</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> (<span class="id" title="keyword">fun</span> <a id="c:1126" class="idref" href="#c:1126"><span class="id" title="binder">c</span></a> <a id="a:1127" class="idref" href="#a:1127"><span class="id" title="binder">a</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1122"><span class="id" title="variable">f</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:1125"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1126"><span class="id" title="variable">c</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:1127"><span class="id" title="variable">a</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1123"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1124"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="fold_right_ext" class="idref" href="#fold_right_ext"><span class="id" title="lemma">fold_right_ext</span></a> {<a id="A:1128" class="idref" href="#A:1128"><span class="id" title="binder">A</span></a> <a id="B:1129" class="idref" href="#B:1129"><span class="id" title="binder">B</span></a>} {<a id="f:1130" class="idref" href="#f:1130"><span class="id" title="binder">f</span></a> <a id="g:1131" class="idref" href="#g:1131"><span class="id" title="binder">g</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1129"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1128"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1128"><span class="id" title="variable">A</span></a>} {<a id="acc:1132" class="idref" href="#acc:1132"><span class="id" title="binder">acc</span></a> <a id="l:1133" class="idref" href="#l:1133"><span class="id" title="binder">l</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1130"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.Utils.MRPrelude.html#fe2a1a98339f5fcdd989ce8af348292e"><span class="id" title="notation">=2</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:1131"><span class="id" title="variable">g</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1130"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1132"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1133"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#fold_right"><span class="id" title="definition">fold_right</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#g:1131"><span class="id" title="variable">g</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1132"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1133"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">l</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span> ⇒ <span class="id" title="var">Hfg</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHl</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_global_levels" class="idref" href="#trans_global_levels"><span class="id" title="lemma">trans_global_levels</span></a> {<a id="cc72b519d2fc9a25da40cd9769dff68f" class="idref" href="#cc72b519d2fc9a25da40cd9769dff68f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.global_levels"><span class="id" title="definition">PCUICLookup.global_levels</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc72b519d2fc9a25da40cd9769dff68f"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.global_levels"><span class="id" title="definition">PCUICLookup.global_levels</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc72b519d2fc9a25da40cd9769dff68f"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_global_constraints" class="idref" href="#trans_global_constraints"><span class="id" title="lemma">trans_global_constraints</span></a> {<a id="bc058945ac0a190b4e01017b84a6ce21" class="idref" href="#bc058945ac0a190b4e01017b84a6ce21"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.global_constraints"><span class="id" title="definition">PCUICLookup.global_constraints</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bc058945ac0a190b4e01017b84a6ce21"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.global_constraints"><span class="id" title="definition">PCUICLookup.global_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bc058945ac0a190b4e01017b84a6ce21"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="type_it_mkProd_or_LetIn_smash_middle" class="idref" href="#type_it_mkProd_or_LetIn_smash_middle"><span class="id" title="lemma">type_it_mkProd_or_LetIn_smash_middle</span></a> {<a id="cf:1136" class="idref" href="#cf:1136"><span class="id" title="binder">cf</span></a>} {<a id="35fb8e58d5d1c649731d392bf7a5930f" class="idref" href="#35fb8e58d5d1c649731d392bf7a5930f"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="e2c6e918f2315d073f4d2a175e336001" class="idref" href="#e2c6e918f2315d073f4d2a175e336001"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35fb8e58d5d1c649731d392bf7a5930f"><span class="id" title="variable">Σ</span></a>} {<a id="9755054a7dabd10cd1618064c257be17" class="idref" href="#9755054a7dabd10cd1618064c257be17"><span class="id" title="binder">Γ</span></a> <a id="04cd01b7c2e0a54018d557f5e7f013dc" class="idref" href="#04cd01b7c2e0a54018d557f5e7f013dc"><span class="id" title="binder">Δ</span></a> <a id="31f1f2b45a6af73b5fdce3a09bf2c046" class="idref" href="#31f1f2b45a6af73b5fdce3a09bf2c046"><span class="id" title="binder">Δ'</span></a> <a id="T:1142" class="idref" href="#T:1142"><span class="id" title="binder">T</span></a> <a id="s:1143" class="idref" href="#s:1143"><span class="id" title="binder">s</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35fb8e58d5d1c649731d392bf7a5930f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9755054a7dabd10cd1618064c257be17"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#04cd01b7c2e0a54018d557f5e7f013dc"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#31f1f2b45a6af73b5fdce3a09bf2c046"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1142"><span class="id" title="variable">T</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1143"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#35fb8e58d5d1c649731d392bf7a5930f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9755054a7dabd10cd1618064c257be17"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#04cd01b7c2e0a54018d557f5e7f013dc"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#31f1f2b45a6af73b5fdce3a09bf2c046"><span class="id" title="variable">Δ'</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#31f1f2b45a6af73b5fdce3a09bf2c046"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1142"><span class="id" title="variable">T</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tSort"><span class="id" title="constructor">tSort</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1143"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#subject_reduction"><span class="id" title="lemma">subject_reduction</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">hit</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_it_mkProd_or_LetIn"><span class="id" title="lemma">red_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">T</span> <span class="id" title="var">Δ</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">Δ'</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a> ⇒ <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_nil"><span class="id" title="lemma">expand_lets_nil</span></a>; <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_def"><span class="id" title="lemma">smash_context_app_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> 0 <span class="id" title="var">Γ0</span>) <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">now</span> <span class="id" title="var">len</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst"><span class="id" title="definition">subst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ0</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">T</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">etransitivity</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red1_red"><span class="id" title="lemma">red1_red</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_zeta"><span class="id" title="constructor">red_zeta</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst1"><span class="id" title="definition">subst1</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vdef"><span class="id" title="lemma">expand_lets_vdef</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_ass"><span class="id" title="lemma">smash_context_app_ass</span></a> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">X</span> <span class="id" title="var">Γ0</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">easy</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICReduction.html#red_prod"><span class="id" title="lemma">red_prod</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vass"><span class="id" title="lemma">expand_lets_vass</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <span class="id" title="var">_</span>](<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>). <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="subst_context_expand_lets_ctx" class="idref" href="#subst_context_expand_lets_ctx"><span class="id" title="lemma">subst_context_expand_lets_ctx</span></a> <a id="11d5ea52b5f94a901512f0c3b707296d" class="idref" href="#11d5ea52b5f94a901512f0c3b707296d"><span class="id" title="binder">Δ</span></a> <a id="s:1145" class="idref" href="#s:1145"><span class="id" title="binder">s</span></a> <a id="52d08ddd715e8be03c1e982147292d3a" class="idref" href="#52d08ddd715e8be03c1e982147292d3a"><span class="id" title="binder">Δ'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11d5ea52b5f94a901512f0c3b707296d"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1145"><span class="id" title="variable">s</span></a>) 0 (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11d5ea52b5f94a901512f0c3b707296d"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1145"><span class="id" title="variable">s</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#52d08ddd715e8be03c1e982147292d3a"><span class="id" title="variable">Δ'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#11d5ea52b5f94a901512f0c3b707296d"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1145"><span class="id" title="variable">s</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#52d08ddd715e8be03c1e982147292d3a"><span class="id" title="variable">Δ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">s</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> &lt;-<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_app_context"><span class="id" title="lemma">subst_app_context</span></a>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_context_comm"><span class="id" title="lemma">subst_context_comm</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_context"><span class="id" title="lemma">distr_lift_subst_context</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ctx_inst_expand_lets" class="idref" href="#ctx_inst_expand_lets"><span class="id" title="lemma">ctx_inst_expand_lets</span></a> {<a id="cf:1147" class="idref" href="#cf:1147"><span class="id" title="binder">cf</span></a>} {<a id="22056e264fb4683e91d81c921358adc7" class="idref" href="#22056e264fb4683e91d81c921358adc7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="ff8985a3ad1c64b0f7f1dbfd7b4caabf" class="idref" href="#ff8985a3ad1c64b0f7f1dbfd7b4caabf"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#22056e264fb4683e91d81c921358adc7"><span class="id" title="variable">Σ</span></a>} {<a id="univs:1150" class="idref" href="#univs:1150"><span class="id" title="binder">univs</span></a>} {<a id="9c9b6277528dbe6a03bae08d44418a0f" class="idref" href="#9c9b6277528dbe6a03bae08d44418a0f"><span class="id" title="binder">Γ</span></a> <a id="e603816c943f100df8ea6af7e90e3217" class="idref" href="#e603816c943f100df8ea6af7e90e3217"><span class="id" title="binder">Δ</span></a>} {<a id="s:1153" class="idref" href="#s:1153"><span class="id" title="binder">s</span></a> <a id="ctx:1154" class="idref" href="#ctx:1154"><span class="id" title="binder">ctx</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst"><span class="id" title="inductive">PCUICTyping.ctx_inst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="c2cb1511ef83046d6c64133f1c8a076f" class="idref" href="#c2cb1511ef83046d6c64133f1c8a076f"><span class="id" title="binder">Γ</span></a> <a id="t:1156" class="idref" href="#t:1156"><span class="id" title="binder">t</span></a> <a id="T:1157" class="idref" href="#T:1157"><span class="id" title="binder">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#22056e264fb4683e91d81c921358adc7"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1150"><span class="id" title="variable">univs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c2cb1511ef83046d6c64133f1c8a076f"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#TermTyp"><span class="id" title="abbreviation">TermTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1156"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1157"><span class="id" title="variable">T</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9c9b6277528dbe6a03bae08d44418a0f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e603816c943f100df8ea6af7e90e3217"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1153"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1154"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst"><span class="id" title="inductive">PCUICTyping.ctx_inst</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <a id="ff52a757456c0d200467503640ca6a5f" class="idref" href="#ff52a757456c0d200467503640ca6a5f"><span class="id" title="binder">Γ</span></a> <a id="t:1159" class="idref" href="#t:1159"><span class="id" title="binder">t</span></a> <a id="T:1160" class="idref" href="#T:1160"><span class="id" title="binder">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#22056e264fb4683e91d81c921358adc7"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1150"><span class="id" title="variable">univs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ff52a757456c0d200467503640ca6a5f"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#TermTyp"><span class="id" title="abbreviation">TermTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1159"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1160"><span class="id" title="variable">T</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9c9b6277528dbe6a03bae08d44418a0f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e603816c943f100df8ea6af7e90e3217"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e603816c943f100df8ea6af7e90e3217"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1153"><span class="id" title="variable">s</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e603816c943f100df8ea6af7e90e3217"><span class="id" title="variable">Δ</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1154"><span class="id" title="variable">ctx</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">expand_lets_ctx_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /=. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">t0</span>) ⇒ // ?? <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#typing_expand_lets"><span class="id" title="lemma">typing_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context_expand_lets_ctx"><span class="id" title="lemma">subst_context_expand_lets_ctx</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">i</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">expand_lets_ctx_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /=. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_telescope_subst_context"><span class="id" title="lemma">subst_telescope_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context_expand_lets_ctx"><span class="id" title="lemma">subst_context_expand_lets_ctx</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="rev_inj" class="idref" href="#rev_inj"><span class="id" title="lemma">rev_inj</span></a> {<a id="A:1161" class="idref" href="#A:1161"><span class="id" title="binder">A</span></a>} {<a id="l:1162" class="idref" href="#l:1162"><span class="id" title="binder">l</span></a> <a id="l':1163" class="idref" href="#l':1163"><span class="id" title="binder">l'</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1161"><span class="id" title="variable">A</span></a>} : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1162"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':1163"><span class="id" title="variable">l'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1162"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l':1163"><span class="id" title="variable">l'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">l'</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">l</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l'</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_case"><span class="id" title="lemma">rev_case</span></a> ⇒ /= //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /= //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /= //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">List.rev_app_distr</span></a> /= ⇒ [=] &lt;- <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_local_subst_telescope" class="idref" href="#trans_local_subst_telescope"><span class="id" title="lemma">trans_local_subst_telescope</span></a> <a id="p:1164" class="idref" href="#p:1164"><span class="id" title="binder">p</span></a> <a id="q:1165" class="idref" href="#q:1165"><span class="id" title="binder">q</span></a> <a id="s:1166" class="idref" href="#s:1166"><span class="id" title="binder">s</span></a> <a id="k:1167" class="idref" href="#k:1167"><span class="id" title="binder">k</span></a> <a id="897c12890999453f4e662f9d1c10b7c4" class="idref" href="#897c12890999453f4e662f9d1c10b7c4"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1164"><span class="id" title="variable">p</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#897c12890999453f4e662f9d1c10b7c4"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#q:1165"><span class="id" title="variable">q</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1166"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_telescope"><span class="id" title="definition">subst_telescope</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1166"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1167"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#897c12890999453f4e662f9d1c10b7c4"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_telescope"><span class="id" title="definition">subst_telescope</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1166"><span class="id" title="variable">s</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1167"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#897c12890999453f4e662f9d1c10b7c4"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onp</span> <span class="id" title="var">onq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#rev_inj"><span class="id" title="lemma">rev_inj</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>] (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">q</span>) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ctx_inst_expand_lets" class="idref" href="#trans_ctx_inst_expand_lets"><span class="id" title="lemma">trans_ctx_inst_expand_lets</span></a> {<a id="cf:1169" class="idref" href="#cf:1169"><span class="id" title="binder">cf</span></a>} {<a id="8c5ea68e61b45e95e846c8a5a39355c3" class="idref" href="#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="6448206edad2c7fe8b8085729301ca18" class="idref" href="#6448206edad2c7fe8b8085729301ca18"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="variable">Σ</span></a>} {<a id="3fc03df0c4ff6c3d0f1cc8b759e59567" class="idref" href="#3fc03df0c4ff6c3d0f1cc8b759e59567"><span class="id" title="binder">Γ</span></a> <a id="928939a9ad0cdd15b7fb7e65d89d9208" class="idref" href="#928939a9ad0cdd15b7fb7e65d89d9208"><span class="id" title="binder">Δ</span></a>} {<a id="s:1174" class="idref" href="#s:1174"><span class="id" title="binder">s</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3fc03df0c4ff6c3d0f1cc8b759e59567"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#928939a9ad0cdd15b7fb7e65d89d9208"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst"><span class="id" title="inductive">PCUICTyping.ctx_inst</span></a> (<span class="id" title="keyword">fun</span> <a id="a1e3706d030c6c522b640244613d5e81" class="idref" href="#a1e3706d030c6c522b640244613d5e81"><span class="id" title="binder">Γ</span></a> <a id="t:1176" class="idref" href="#t:1176"><span class="id" title="binder">t</span></a> <a id="T:1177" class="idref" href="#T:1177"><span class="id" title="binder">T</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a1e3706d030c6c522b640244613d5e81"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#TermTyp"><span class="id" title="abbreviation">TermTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1176"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1177"><span class="id" title="variable">T</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3fc03df0c4ff6c3d0f1cc8b759e59567"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1174"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#928939a9ad0cdd15b7fb7e65d89d9208"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst"><span class="id" title="inductive">PCUICTyping.ctx_inst</span></a> (<span class="id" title="keyword">fun</span> <a id="b05480e8e940d86f651303d4574a40c3" class="idref" href="#b05480e8e940d86f651303d4574a40c3"><span class="id" title="binder">Γ</span></a> <a id="t:1179" class="idref" href="#t:1179"><span class="id" title="binder">t</span></a> <a id="T:1180" class="idref" href="#T:1180"><span class="id" title="binder">T</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1169"><span class="id" title="variable">cf</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8c5ea68e61b45e95e846c8a5a39355c3"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b05480e8e940d86f651303d4574a40c3"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#TermTyp"><span class="id" title="abbreviation">TermTyp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1179"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1180"><span class="id" title="variable">T</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3fc03df0c4ff6c3d0f1cc8b759e59567"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1174"><span class="id" title="variable">s</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#928939a9ad0cdd15b7fb7e65d89d9208"><span class="id" title="variable">Δ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wfctx</span> <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">i</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">t0</span>) ⇒ // ?? <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#substitution_wf_local"><span class="id" title="lemma">substitution_wf_local</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">wfctx</span>). <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subslet_ass_tip"><span class="id" title="lemma">subslet_ass_tip</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_subst_telescope"><span class="id" title="lemma">trans_local_subst_telescope</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">IHi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">wfctx</span> ⇒ /=. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="var">t0</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#substitution_wf_local"><span class="id" title="lemma">substitution_wf_local</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) (<span class="id" title="var">Γ'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vdef"><span class="id" title="definition">vdef</span></a> <span class="id" title="var">na</span> <span class="id" title="var">b</span> <span class="id" title="var">t</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">wfctx</span>). <span class="id" title="var">shelve</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subslet_def_tip"><span class="id" title="lemma">subslet_def_tip</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_app_inv"><span class="id" title="definition">All_local_env_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wf'</span> <span class="id" title="var">_</span>]. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">wf'</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#subst_context_subst_telescope"><span class="id" title="lemma">subst_context_subst_telescope</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHi</span> <span class="id" title="var">X</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_subst_telescope"><span class="id" title="lemma">trans_local_subst_telescope</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">IHi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">wfctx</span> ⇒ /=. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_app_inv"><span class="id" title="definition">All_local_env_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfctx</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wf'</span> <span class="id" title="var">_</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">wf'</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="var">l</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHi</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_ctx_lift_context_cancel" class="idref" href="#expand_lets_ctx_lift_context_cancel"><span class="id" title="lemma">expand_lets_ctx_lift_context_cancel</span></a> {<a id="5b4ad503a193659e910bac9a779c176c" class="idref" href="#5b4ad503a193659e910bac9a779c176c"><span class="id" title="binder">Γ</span></a> <a id="be66d7f7f25397019ed586e15cd10ff3" class="idref" href="#be66d7f7f25397019ed586e15cd10ff3"><span class="id" title="binder">Δ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5b4ad503a193659e910bac9a779c176c"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5b4ad503a193659e910bac9a779c176c"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#be66d7f7f25397019ed586e15cd10ff3"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lift_context"><span class="id" title="definition">lift_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5b4ad503a193659e910bac9a779c176c"><span class="id" title="variable">Γ</span></a>) 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#be66d7f7f25397019ed586e15cd10ff3"><span class="id" title="variable">Δ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#lift_context_lift_context"><span class="id" title="lemma">lift_context_lift_context</span></a> <span class="id" title="var">_</span> 0) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#lift_context_add"><span class="id" title="lemma">lift_context_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#subst_context_lift_context_cancel"><span class="id" title="lemma">subst_context_lift_context_cancel</span></a> //. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="forallb_proper" class="idref" href="#forallb_proper"><span class="id" title="instance">forallb_proper</span></a> <a id="A:1183" class="idref" href="#A:1183"><span class="id" title="binder">A</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1183"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (@<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1183"><span class="id" title="variable">A</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eqfg</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> →. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_ext"><span class="id" title="lemma">forallb_ext</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">eqfg</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="on_free_vars_terms_proper" class="idref" href="#on_free_vars_terms_proper"><span class="id" title="instance">on_free_vars_terms_proper</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#pointwise_relation"><span class="id" title="definition">pointwise_relation</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">f</span> <span class="id" title="var">g</span> <span class="id" title="var">eqfg</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> →. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqfg</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
#[<span class="id" title="var">global</span>] <span class="id" title="keyword">Instance</span> <a id="istrue_proper" class="idref" href="#istrue_proper"><span class="id" title="instance">istrue_proper</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#Proper"><span class="id" title="class">Proper</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Classes.Morphisms.html#8dc5652698a6e16f72dd37bd17d3b973"><span class="id" title="notation">==&gt;</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq"><span class="id" title="inductive">eq</span></a>) (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#is_true"><span class="id" title="definition">is_true</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> →.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Alli_nth_hyp_ind" class="idref" href="#Alli_nth_hyp_ind"><span class="id" title="lemma">Alli_nth_hyp_ind</span></a> {<a id="A:1184" class="idref" href="#A:1184"><span class="id" title="binder">A</span></a>} {<a id="P:1185" class="idref" href="#P:1185"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1184"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="n:1186" class="idref" href="#n:1186"><span class="id" title="binder">n</span></a> <a id="l:1187" class="idref" href="#l:1187"><span class="id" title="binder">l</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1185"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1186"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1187"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> (<span class="id" title="keyword">fun</span> <a id="i:1188" class="idref" href="#i:1188"><span class="id" title="binder">i</span></a> <a id="x:1189" class="idref" href="#x:1189"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1186"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1188"><span class="id" title="variable">i</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">×</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1187"><span class="id" title="variable">l</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1188"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1186"><span class="id" title="variable">n</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1189"><span class="id" title="variable">x</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#11c698c8685bb8ab1cf725545c085ac4"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.utils.html#8426aced733de3f9c0ab331518367c06"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1185"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1188"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1189"><span class="id" title="variable">x</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1186"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1187"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /=. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_impl"><span class="id" title="lemma">Alli_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="var">b0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">n0</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">destruct</span> <span class="id" title="var">tl</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="var">depelim</span> <span class="id" title="var">a0</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">a0</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_succ_l"><span class="id" title="lemma">Nat.sub_succ_l</span></a> //; <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Alli_nth_hyp" class="idref" href="#Alli_nth_hyp"><span class="id" title="lemma">Alli_nth_hyp</span></a> {<a id="A:1190" class="idref" href="#A:1190"><span class="id" title="binder">A</span></a>} {<a id="P:1191" class="idref" href="#P:1191"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1190"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>} {<a id="l:1192" class="idref" href="#l:1192"><span class="id" title="binder">l</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1191"><span class="id" title="variable">P</span></a> 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1192"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> (<span class="id" title="keyword">fun</span> <a id="i:1193" class="idref" href="#i:1193"><span class="id" title="binder">i</span></a> <a id="x:1194" class="idref" href="#x:1194"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.Utils.utils.html#8426aced733de3f9c0ab331518367c06"><span class="id" title="notation">(</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1192"><span class="id" title="variable">l</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1193"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1194"><span class="id" title="variable">x</span></a><a class="idref" href="MetaRocq.Utils.utils.html#8426aced733de3f9c0ab331518367c06"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.Utils.utils.html#8426aced733de3f9c0ab331518367c06"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1191"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1193"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1194"><span class="id" title="variable">x</span></a>) 0 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1192"><span class="id" title="variable">l</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Alli_nth_hyp_ind"><span class="id" title="lemma">Alli_nth_hyp_ind</span></a> ⇒ <span class="id" title="var">a</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_impl"><span class="id" title="lemma">Alli_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_0_r"><span class="id" title="lemma">Nat.sub_0_r</span></a>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cstr_concl_eq" class="idref" href="#trans_cstr_concl_eq"><span class="id" title="lemma">trans_cstr_concl_eq</span></a> <a id="m:1195" class="idref" href="#m:1195"><span class="id" title="binder">m</span></a> <a id="n:1196" class="idref" href="#n:1196"><span class="id" title="binder">n</span></a> <a id="cdecl:1197" class="idref" href="#cdecl:1197"><span class="id" title="binder">cdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1196"><span class="id" title="variable">n</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>)))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1195"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1196"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cdecl:1197"><span class="id" title="variable">cdecl</span></a>)).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">onargs</span> <span class="id" title="var">onindices</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl_head"><span class="id" title="definition">trans_cstr_concl_head</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl_head"><span class="id" title="definition">cstr_concl_head</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_tRel"><span class="id" title="lemma">expand_lets_tRel</span></a>. 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a>. }<br/>
&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_reln"><span class="id" title="lemma">trans_reln</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.to_extended_list_k"><span class="id" title="definition">to_extended_list_k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>)) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_expand_lets_to_extended_list_k_above"><span class="id" title="lemma">map_expand_lets_to_extended_list_k_above</span></a>. 2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a> //. }<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_map"><span class="id" title="lemma">trans_expand_lets_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="positive_cstr_smash_middle" class="idref" href="#positive_cstr_smash_middle"><span class="id" title="lemma">positive_cstr_smash_middle</span></a> <a id="m:1198" class="idref" href="#m:1198"><span class="id" title="binder">m</span></a> <a id="n:1199" class="idref" href="#n:1199"><span class="id" title="binder">n</span></a> <a id="acc:1200" class="idref" href="#acc:1200"><span class="id" title="binder">acc</span></a> <a id="0f1054362f81ffd0ae762a322f064475" class="idref" href="#0f1054362f81ffd0ae762a322f064475"><span class="id" title="binder">Γ</span></a> <a id="d66ff3cfd01e1ca9cb816278793258a0" class="idref" href="#d66ff3cfd01e1ca9cb816278793258a0"><span class="id" title="binder">Δ</span></a> <a id="T:1203" class="idref" href="#T:1203"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr"><span class="id" title="inductive">positive_cstr</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1198"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1199"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1200"><span class="id" title="variable">acc</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0f1054362f81ffd0ae762a322f064475"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d66ff3cfd01e1ca9cb816278793258a0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1203"><span class="id" title="variable">T</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr"><span class="id" title="inductive">positive_cstr</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1198"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1199"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1200"><span class="id" title="variable">acc</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0f1054362f81ffd0ae762a322f064475"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn"><span class="id" title="definition">it_mkProd_or_LetIn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d66ff3cfd01e1ca9cb816278793258a0"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d66ff3cfd01e1ca9cb816278793258a0"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1203"><span class="id" title="variable">T</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">Δ</span> <span class="id" title="var">acc</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_nil"><span class="id" title="lemma">expand_lets_nil</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">acc</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_def"><span class="id" title="lemma">smash_context_app_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">p</span>. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vdef"><span class="id" title="lemma">expand_lets_vdef</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_ass"><span class="id" title="lemma">smash_context_app_ass</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_vass"><span class="id" title="lemma">expand_lets_vass</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">p</span>. <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> 3; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">Δ</span> <span class="id" title="var">acc</span> <span class="id" title="var">T</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a> /=; <span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">p</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">solve_discr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> ⇒ /=. <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_subst_comm"><span class="id" title="lemma">expand_lets_subst_comm</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_subst"><span class="id" title="lemma">smash_context_subst</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_it_mkProd_or_LetIn"><span class="id" title="lemma">subst_it_mkProd_or_LetIn</span></a> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">constructor</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p0</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closedn_trans" class="idref" href="#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a> <a id="n:1204" class="idref" href="#n:1204"><span class="id" title="binder">n</span></a> <a id="t:1205" class="idref" href="#t:1205"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1204"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1205"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1204"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1205"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">cl</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_destArity" class="idref" href="#trans_destArity"><span class="id" title="lemma">trans_destArity</span></a> <a id="ctx:1206" class="idref" href="#ctx:1206"><span class="id" title="binder">ctx</span></a> <a id="t:1207" class="idref" href="#t:1207"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1206"><span class="id" title="variable">ctx</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1207"><span class="id" title="variable">t</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="keyword">match</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1206"><span class="id" title="variable">ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1207"><span class="id" title="variable">t</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">ctx</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">T</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1206"><span class="id" title="variable">ctx</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">T</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;| <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> ⇒ <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">t</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ctx</span> |- *; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHt2</span> (<span class="id" title="var">ctx</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">t1</span>)) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<span class="id" title="var">IHt3</span> (<span class="id" title="var">ctx</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vdef"><span class="id" title="definition">vdef</span></a> <span class="id" title="var">na</span> <span class="id" title="var">t1</span> <span class="id" title="var">t2</span>)) //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ind_realargs" class="idref" href="#trans_ind_realargs"><span class="id" title="lemma">trans_ind_realargs</span></a> <a id="m:1208" class="idref" href="#m:1208"><span class="id" title="binder">m</span></a> <a id="k:1209" class="idref" href="#k:1209"><span class="id" title="binder">k</span></a> <a id="i:1210" class="idref" href="#i:1210"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_realargs"><span class="id" title="definition">ind_realargs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1210"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_realargs"><span class="id" title="definition">ind_realargs</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_one_ind_body"><span class="id" title="definition">trans_one_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1208"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1209"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1210"><span class="id" title="variable">i</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_realargs"><span class="id" title="definition">ind_realargs</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_destArity"><span class="id" title="lemma">trans_destArity</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="positive_cstr_arg_trans" class="idref" href="#positive_cstr_arg_trans"><span class="id" title="lemma">positive_cstr_arg_trans</span></a> <a id="m:1211" class="idref" href="#m:1211"><span class="id" title="binder">m</span></a> <a id="acc:1212" class="idref" href="#acc:1212"><span class="id" title="binder">acc</span></a> <a id="p:1213" class="idref" href="#p:1213"><span class="id" title="binder">p</span></a> <a id="T:1214" class="idref" href="#T:1214"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr_arg"><span class="id" title="inductive">positive_cstr_arg</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1211"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1212"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1214"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1213"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1214"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr_arg"><span class="id" title="inductive">positive_cstr_arg</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1211"><span class="id" title="variable">m</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1212"><span class="id" title="variable">acc</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1214"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">p</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">m0</span> <span class="id" title="keyword">as</span> [? [? ?]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_mkApps"><span class="id" title="lemma">on_free_vars_mkApps</span></a> ⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onk</span> <span class="id" title="var">onl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>. <span class="id" title="tactic">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: {<span class="id" title="var">solve_all</span>. <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2: {<span class="id" title="tactic">repeat</span> (<span class="id" title="tactic">econstructor</span>; [<span class="id" title="var">now</span> <span class="id" title="var">len</span>|]).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_mapi"><span class="id" title="lemma">rev_mapi</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a> <span class="id" title="var">H1</span> /= //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ind_realargs"><span class="id" title="lemma">trans_ind_realargs</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">onb</span> <span class="id" title="var">onty</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> 3.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <span class="id" title="var">p</span>) <span class="id" title="var">p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHX</span> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">onb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst"><span class="id" title="lemma">on_free_vars_subst</span></a> ⇒ /= //. <span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">onb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>⇒ []<span class="id" title="var">onty</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span> 4. <span class="id" title="var">len</span>; <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="positive_cstr_trans" class="idref" href="#positive_cstr_trans"><span class="id" title="lemma">positive_cstr_trans</span></a> <a id="m:1215" class="idref" href="#m:1215"><span class="id" title="binder">m</span></a> <a id="n:1216" class="idref" href="#n:1216"><span class="id" title="binder">n</span></a> <a id="acc:1217" class="idref" href="#acc:1217"><span class="id" title="binder">acc</span></a> <a id="p:1218" class="idref" href="#p:1218"><span class="id" title="binder">p</span></a> <a id="T:1219" class="idref" href="#T:1219"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr"><span class="id" title="inductive">positive_cstr</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1215"><span class="id" title="variable">m</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1216"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1217"><span class="id" title="variable">acc</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1219"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1218"><span class="id" title="variable">p</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1219"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#positive_cstr"><span class="id" title="inductive">positive_cstr</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1215"><span class="id" title="variable">m</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1216"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#acc:1217"><span class="id" title="variable">acc</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1219"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="tactic">in</span> <span class="id" title="var">p</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> /<span class="id" title="var">headrel</span>. <span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Γ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>. <span class="id" title="var">all</span>:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">onb</span> <span class="id" title="var">onty</span> <span class="id" title="var">ont</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <span class="id" title="var">p</span>) <span class="id" title="var">p</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">IHX</span> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">onb</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst"><span class="id" title="lemma">on_free_vars_subst</span></a> ⇒ /= //. <span class="id" title="var">now</span> <span class="id" title="var">erewrite</span> <span class="id" title="var">onb</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>⇒ [] <span class="id" title="var">onty</span> <span class="id" title="var">ont</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#positive_cstr_arg_trans"><span class="id" title="lemma">positive_cstr_arg_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cumul_context_Spec_Algo" class="idref" href="#cumul_context_Spec_Algo"><span class="id" title="lemma">cumul_context_Spec_Algo</span></a> {<a id="cf:1220" class="idref" href="#cf:1220"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="45d5271a16a9d19793237736ab9e8689" class="idref" href="#45d5271a16a9d19793237736ab9e8689"><span class="id" title="binder">Σ</span></a>} {<a id="c6a4842833da872c054781b7ae0a386b" class="idref" href="#c6a4842833da872c054781b7ae0a386b"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#45d5271a16a9d19793237736ab9e8689"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>} {<a id="6eb7f4f34c58853a3cd1145c8ff31dae" class="idref" href="#6eb7f4f34c58853a3cd1145c8ff31dae"><span class="id" title="binder">Γ</span></a> <a id="c9ad84ce5f6617a65e2bfddffc0abab6" class="idref" href="#c9ad84ce5f6617a65e2bfddffc0abab6"><span class="id" title="binder">Γ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#45d5271a16a9d19793237736ab9e8689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6eb7f4f34c58853a3cd1145c8ff31dae"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#45d5271a16a9d19793237736ab9e8689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c9ad84ce5f6617a65e2bfddffc0abab6"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_context"><span class="id" title="abbreviation">cumul_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#45d5271a16a9d19793237736ab9e8689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c9ad84ce5f6617a65e2bfddffc0abab6"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6eb7f4f34c58853a3cd1145c8ff31dae"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_context"><span class="id" title="abbreviation">cumul_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo_gen"><span class="id" title="inductive">cumulAlgo_gen</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#45d5271a16a9d19793237736ab9e8689"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c9ad84ce5f6617a65e2bfddffc0abab6"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6eb7f4f34c58853a3cd1145c8ff31dae"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΓ</span> <span class="id" title="var">wfΓ'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">wfΓ</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">wfΓ'</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulSpec_cumulAlgo_curry"><span class="id" title="lemma">cumulSpec_cumulAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>; <span class="id" title="var">tea</span>. 2-4:<span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">l</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>), <span class="id" title="var">l0</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#convSpec_convAlgo_curry"><span class="id" title="lemma">convSpec_convAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqb</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;1-3:<span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulSpec_cumulAlgo_curry"><span class="id" title="lemma">cumulSpec_cumulAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>; <span class="id" title="var">tea</span>. 2-4:<span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>). <span class="id" title="var">fvs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_cumulativity_spec" class="idref" href="#context_cumulativity_spec"><span class="id" title="lemma">context_cumulativity_spec</span></a> {<a id="cf:1225" class="idref" href="#cf:1225"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="f11191068b950c21f4e356d237c52d1f" class="idref" href="#f11191068b950c21f4e356d237c52d1f"><span class="id" title="binder">Σ</span></a>} {<a id="cf7cd0cc0656c61f8b03fef1c2d782f7" class="idref" href="#cf7cd0cc0656c61f8b03fef1c2d782f7"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f11191068b950c21f4e356d237c52d1f"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>} <a id="617546deb682b66d9a3f309169554a62" class="idref" href="#617546deb682b66d9a3f309169554a62"><span class="id" title="binder">Γ</span></a> {<a id="t:1229" class="idref" href="#t:1229"><span class="id" title="binder">t</span></a> <a id="T:1230" class="idref" href="#T:1230"><span class="id" title="binder">T</span></a> <a id="3f1a1d63c045e4b79ed1d8f66169895b" class="idref" href="#3f1a1d63c045e4b79ed1d8f66169895b"><span class="id" title="binder">Γ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f11191068b950c21f4e356d237c52d1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#617546deb682b66d9a3f309169554a62"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1229"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1230"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f11191068b950c21f4e356d237c52d1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3f1a1d63c045e4b79ed1d8f66169895b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_context"><span class="id" title="abbreviation">cumul_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f11191068b950c21f4e356d237c52d1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3f1a1d63c045e4b79ed1d8f66169895b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#617546deb682b66d9a3f309169554a62"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f11191068b950c21f4e356d237c52d1f"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3f1a1d63c045e4b79ed1d8f66169895b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">|-</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1229"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#f6519f471ad5acf69089466a686d7a45"><span class="id" title="notation">:</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1230"><span class="id" title="variable">T</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span> <span class="id" title="var">hΓ'</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICContextConversionTyp.html#context_cumulativity"><span class="id" title="lemma">PCUICContextConversionTyp.context_cumulativity</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cumul_context_Spec_Algo"><span class="id" title="lemma">cumul_context_Spec_Algo</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">pcuic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cumulSpec" class="idref" href="#trans_cumulSpec"><span class="id" title="lemma">trans_cumulSpec</span></a> {<a id="cf:1232" class="idref" href="#cf:1232"><span class="id" title="binder">cf</span></a>} {<a id="44eecbbe155f7e2476cd336d00c08e99" class="idref" href="#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="68ab5e3c510feaf5e3a0cbd7c554be97" class="idref" href="#68ab5e3c510feaf5e3a0cbd7c554be97"><span class="id" title="binder">Γ</span></a> <a id="T:1235" class="idref" href="#T:1235"><span class="id" title="binder">T</span></a> <a id="U:1236" class="idref" href="#U:1236"><span class="id" title="binder">U</span></a>} {<a id="ede1258a61c00cdaa5a0d29e9f9487cf" class="idref" href="#ede1258a61c00cdaa5a0d29e9f9487cf"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#68ab5e3c510feaf5e3a0cbd7c554be97"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1235"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#68ab5e3c510feaf5e3a0cbd7c554be97"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1236"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec"><span class="id" title="definition">cumulSpec</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#68ab5e3c510feaf5e3a0cbd7c554be97"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1235"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1236"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec"><span class="id" title="definition">cumulSpec</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1232"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#44eecbbe155f7e2476cd336d00c08e99"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#68ab5e3c510feaf5e3a0cbd7c554be97"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1235"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1236"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">wtT</span> <span class="id" title="var">wtU</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulSpec_cumulAlgo_curry"><span class="id" title="lemma">cumulSpec_cumulAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cumul_decorate"><span class="id" title="lemma">cumul_decorate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumul"><span class="id" title="lemma">trans_cumul</span></a> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">cum</span>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulAlgo_cumulSpec"><span class="id" title="lemma">cumulAlgo_cumulSpec</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtT</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>). <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>. <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtT</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>). <span class="id" title="var">fvs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_convSpec" class="idref" href="#trans_convSpec"><span class="id" title="lemma">trans_convSpec</span></a> {<a id="cf:1238" class="idref" href="#cf:1238"><span class="id" title="binder">cf</span></a>} {<a id="9717a9f71cb708c6abd29109cb679a7d" class="idref" href="#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="999298d8a3e450965f2e8c295cebdbaf" class="idref" href="#999298d8a3e450965f2e8c295cebdbaf"><span class="id" title="binder">Γ</span></a> <a id="T:1241" class="idref" href="#T:1241"><span class="id" title="binder">T</span></a> <a id="U:1242" class="idref" href="#U:1242"><span class="id" title="binder">U</span></a>} {<a id="63d2a967a73b37d114bd19095506622a" class="idref" href="#63d2a967a73b37d114bd19095506622a"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999298d8a3e450965f2e8c295cebdbaf"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1241"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999298d8a3e450965f2e8c295cebdbaf"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1242"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#c41c566ddac4c1298b9e7dd2bae1c794"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#convSpec"><span class="id" title="definition">convSpec</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999298d8a3e450965f2e8c295cebdbaf"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1241"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1242"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#convSpec"><span class="id" title="definition">convSpec</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1238"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9717a9f71cb708c6abd29109cb679a7d"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#999298d8a3e450965f2e8c295cebdbaf"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1241"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1242"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">wtT</span> <span class="id" title="var">wtU</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#convSpec_convAlgo_curry"><span class="id" title="lemma">convSpec_convAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tas</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#conv_decorate"><span class="id" title="lemma">conv_decorate</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cum</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_conv"><span class="id" title="lemma">trans_conv</span></a> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">cum</span>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulAlgo_cumulSpec"><span class="id" title="lemma">cumulAlgo_cumulSpec</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtT</span>, <span class="id" title="var">wtU</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>. <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;1-2:<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtT</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtU</span>. <span class="id" title="var">fvs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cumul_ctx_rel" class="idref" href="#trans_cumul_ctx_rel"><span class="id" title="lemma">trans_cumul_ctx_rel</span></a> {<a id="cf:1244" class="idref" href="#cf:1244"><span class="id" title="binder">cf</span></a>} {<a id="429bb726979d326065684159f3ee7955" class="idref" href="#429bb726979d326065684159f3ee7955"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="71f7688ba1bf09d6033b0bec1d203009" class="idref" href="#71f7688ba1bf09d6033b0bec1d203009"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a>} {<a id="6626163631a6d81376ac2296a99eccef" class="idref" href="#6626163631a6d81376ac2296a99eccef"><span class="id" title="binder">Γ</span></a> <a id="1a6fb985d2473b5f1d2d3d0a11179cbf" class="idref" href="#1a6fb985d2473b5f1d2d3d0a11179cbf"><span class="id" title="binder">Δ</span></a> <a id="656cb464c875e7b7d2c0740bf07b5ec5" class="idref" href="#656cb464c875e7b7d2c0740bf07b5ec5"><span class="id" title="binder">Δ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6626163631a6d81376ac2296a99eccef"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a6fb985d2473b5f1d2d3d0a11179cbf"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6626163631a6d81376ac2296a99eccef"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#656cb464c875e7b7d2c0740bf07b5ec5"><span class="id" title="variable">Δ'</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_ctx_rel"><span class="id" title="definition">cumul_ctx_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6626163631a6d81376ac2296a99eccef"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a6fb985d2473b5f1d2d3d0a11179cbf"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#656cb464c875e7b7d2c0740bf07b5ec5"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_ctx_rel"><span class="id" title="definition">cumul_ctx_rel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> (<span class="id" title="var">cf</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1244"><span class="id" title="variable">cf</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#429bb726979d326065684159f3ee7955"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6626163631a6d81376ac2296a99eccef"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a6fb985d2473b5f1d2d3d0a11179cbf"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#656cb464c875e7b7d2c0740bf07b5ec5"><span class="id" title="variable">Δ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wf'</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">wfl</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">wfr</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">depelim</span> <span class="id" title="var">wfl</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">wfr</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>), <span class="id" title="var">l0</span> <span class="id" title="keyword">as</span> (? &amp; ? &amp; ? &amp; <span class="id" title="var">_</span>); <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumulSpec"><span class="id" title="lemma">trans_cumulSpec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_cumulativity_spec"><span class="id" title="lemma">context_cumulativity_spec</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_app"><span class="id" title="lemma">All2_fold_app</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_convSpec"><span class="id" title="lemma">trans_convSpec</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">∃</span> <span class="id" title="var">t'</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_cumulativity_spec"><span class="id" title="lemma">context_cumulativity_spec</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_app"><span class="id" title="lemma">All2_fold_app</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. }<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumulSpec"><span class="id" title="lemma">trans_cumulSpec</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_cumulativity_spec"><span class="id" title="lemma">context_cumulativity_spec</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_app"><span class="id" title="lemma">All2_fold_app</span></a>. <span class="id" title="tactic">reflexivity</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">X</span>. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#"><span class="id" title="library">PCUICRedTypeIrrelevance</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pres_let_bodies_assumption_context" class="idref" href="#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a> {<a id="cf:1250" class="idref" href="#cf:1250"><span class="id" title="binder">cf</span></a>} {<a id="efb2ea104ba0beaba79933716bf04424" class="idref" href="#efb2ea104ba0beaba79933716bf04424"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="711f51309b052481432a64900b5c4665" class="idref" href="#711f51309b052481432a64900b5c4665"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#efb2ea104ba0beaba79933716bf04424"><span class="id" title="variable">Σ</span></a>} {<a id="2276b2ace2ba44e477f7c31b4974c82f" class="idref" href="#2276b2ace2ba44e477f7c31b4974c82f"><span class="id" title="binder">Γ</span></a> <a id="7f104bf3f9b31b51b165cbf37d3b7393" class="idref" href="#7f104bf3f9b31b51b165cbf37d3b7393"><span class="id" title="binder">Γ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2276b2ace2ba44e477f7c31b4974c82f"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7f104bf3f9b31b51b165cbf37d3b7393"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2276b2ace2ba44e477f7c31b4974c82f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7f104bf3f9b31b51b165cbf37d3b7393"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold"><span class="id" title="inductive">All2_fold</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">λ</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_decl"><span class="id" title="abbreviation">context_decl</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Unicode.Utf8_core.html#bc1ad27deabe143d39d35abe6be2c1a4"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#pres_let_bodies"><span class="id" title="definition">pres_let_bodies</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2276b2ace2ba44e477f7c31b4974c82f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7f104bf3f9b31b51b165cbf37d3b7393"><span class="id" title="variable">Γ'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ'</span> |- *; <span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ'</span> ⇒ /= //; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΓ</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H0</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">red</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>], <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na'</span> [<span class="id" title="var">b'</span>|] <span class="id" title="var">ty'</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">try</span> <span class="id" title="tactic">exact</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#tt"><span class="id" title="constructor">tt</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">H0</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">H1</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="cumul_type_irrelevance" class="idref" href="#cumul_type_irrelevance"><span class="id" title="lemma">cumul_type_irrelevance</span></a> {<a id="cf:1255" class="idref" href="#cf:1255"><span class="id" title="binder">cf</span></a>} {<a id="4a8b772c2ca6af6303ef19b87d974780" class="idref" href="#4a8b772c2ca6af6303ef19b87d974780"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="cedbda1fad65518a306dc6be9b2e436b" class="idref" href="#cedbda1fad65518a306dc6be9b2e436b"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4a8b772c2ca6af6303ef19b87d974780"><span class="id" title="variable">Σ</span></a>} {<a id="b07575add33dbe5dc7ae6b183a8d1229" class="idref" href="#b07575add33dbe5dc7ae6b183a8d1229"><span class="id" title="binder">Γ</span></a> <a id="2d3c9e40a53a5b090872d3a076f493fe" class="idref" href="#2d3c9e40a53a5b090872d3a076f493fe"><span class="id" title="binder">Γ'</span></a> <a id="T:1260" class="idref" href="#T:1260"><span class="id" title="binder">T</span></a> <a id="U:1261" class="idref" href="#U:1261"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4a8b772c2ca6af6303ef19b87d974780"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b07575add33dbe5dc7ae6b183a8d1229"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d3c9e40a53a5b090872d3a076f493fe"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b07575add33dbe5dc7ae6b183a8d1229"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d3c9e40a53a5b090872d3a076f493fe"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4a8b772c2ca6af6303ef19b87d974780"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b07575add33dbe5dc7ae6b183a8d1229"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1260"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1261"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4a8b772c2ca6af6303ef19b87d974780"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2d3c9e40a53a5b090872d3a076f493fe"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1260"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1261"><span class="id" title="variable">U</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">len</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red1"><span class="id" title="lemma">context_pres_let_bodies_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red1"><span class="id" title="lemma">context_pres_let_bodies_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Section</span> <a id="wtcumul'" class="idref" href="#wtcumul'"><span class="id" title="section">wtcumul'</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#"><span class="id" title="module">PCUICAst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#"><span class="id" title="module">PCUICTyping</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#"><span class="id" title="module">PCUICEquality</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Context</span> {<a id="wtcumul'.cf" class="idref" href="#wtcumul'.cf"><span class="id" title="variable">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>}.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Reserved Notation</span> &quot; Σ ;;; Γ | Γ' |-- t &lt;=[ le ] u " (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50, <span class="id" title="var">Γ</span>, <span class="id" title="var">Γ'</span> , <span class="id" title="var">le</span>, <span class="id" title="var">t</span>, <span class="id" title="var">u</span> <span class="id" title="tactic">at</span> <span class="id" title="var">next</span> <span class="id" title="keyword">level</span>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a id="wt_cumul_pb_hetero" class="idref" href="#wt_cumul_pb_hetero"><span class="id" title="definition, inductive"><span id="wt_cumul_pb_hetero_rect" class="id"><span id="wt_cumul_pb_hetero_ind" class="id"><span id="wt_cumul_pb_hetero_rec" class="id"><span id="wt_cumul_pb_hetero_sind" class="id">wt_cumul_pb_hetero</span></span></span></span></span></a> (<a id="pb:1263" class="idref" href="#pb:1263"><span class="id" title="binder">pb</span></a> : <a class="idref" href="MetaRocq.Common.BasicAst.html#conv_pb"><span class="id" title="inductive">conv_pb</span></a>) (<a id="56fa79e5d061aeaeab554af54485b374" class="idref" href="#56fa79e5d061aeaeab554af54485b374"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) (<a id="ed98acd9f2f4c584e41a6b1c43a58f0d" class="idref" href="#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="binder">Γ</span></a> <a id="77e701f1fe61831ed27f2646ba0e9082" class="idref" href="#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="binder">Γ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#term"><span class="id" title="inductive">term</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span> :=<br/>
&nbsp;&nbsp;| <a id="wt_cumul_refl'" class="idref" href="#wt_cumul_refl'"><span class="id" title="constructor">wt_cumul_refl'</span></a> <a id="t:1269" class="idref" href="#t:1269"><span class="id" title="binder">t</span></a> <a id="u:1270" class="idref" href="#u:1270"><span class="id" title="binder">u</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1269"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1270"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEquality.html#compare_term"><span class="id" title="definition">compare_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#global_ext_constraints"><span class="id" title="definition">global_ext_constraints</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1269"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1270"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1269"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1270"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;| <a id="wt_cumul_red_l'" class="idref" href="#wt_cumul_red_l'"><span class="id" title="constructor">wt_cumul_red_l'</span></a> <a id="t:1271" class="idref" href="#t:1271"><span class="id" title="binder">t</span></a> <a id="u:1272" class="idref" href="#u:1272"><span class="id" title="binder">u</span></a> <a id="v:1273" class="idref" href="#v:1273"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red1"><span class="id" title="record">wt_red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1271"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1273"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1273"><span class="id" title="variable">v</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1272"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1271"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1272"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;| <a id="wt_cumul_red_r'" class="idref" href="#wt_cumul_red_r'"><span class="id" title="constructor">wt_cumul_red_r'</span></a> <a id="t:1274" class="idref" href="#t:1274"><span class="id" title="binder">t</span></a> <a id="u:1275" class="idref" href="#u:1275"><span class="id" title="binder">u</span></a> <a id="v:1276" class="idref" href="#v:1276"><span class="id" title="binder">v</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1274"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1276"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red1"><span class="id" title="record">wt_red1</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1275"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1276"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56fa79e5d061aeaeab554af54485b374"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">;;;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed98acd9f2f4c584e41a6b1c43a58f0d"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#77e701f1fe61831ed27f2646ba0e9082"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">|--</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1274"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&lt;=[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pb:1263"><span class="id" title="variable">pb</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1275"><span class="id" title="variable">u</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">where</span> <a id="8be02f22fd437a62dbc5b63c580aa685" class="idref" href="#8be02f22fd437a62dbc5b63c580aa685"><span class="id" title="notation">&quot;</span></a> Σ ;;; Γ | Γ' |-- t &lt;=[ le ] u " := (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero:1268"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <span class="id" title="var">le</span> <span class="id" title="var">Σ</span> <span class="id" title="var">Γ</span> <span class="id" title="var">Γ'</span> <span class="id" title="var">t</span> <span class="id" title="var">u</span>) : <span class="id" title="var">type_scope</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wt_cumul_pb_hetero_inv" class="idref" href="#wt_cumul_pb_hetero_inv"><span class="id" title="lemma">wt_cumul_pb_hetero_inv</span></a> {<a id="le:1277" class="idref" href="#le:1277"><span class="id" title="binder">le</span></a> <a id="2016157e2be5b25152292891057ee211" class="idref" href="#2016157e2be5b25152292891057ee211"><span class="id" title="binder">Σ</span></a> <a id="fb25777b2c386bea4ad23db85be68213" class="idref" href="#fb25777b2c386bea4ad23db85be68213"><span class="id" title="binder">Γ</span></a> <a id="7534a5530989cef40eec7c27ab9bc44b" class="idref" href="#7534a5530989cef40eec7c27ab9bc44b"><span class="id" title="binder">Γ'</span></a> <a id="T:1281" class="idref" href="#T:1281"><span class="id" title="binder">T</span></a> <a id="U:1282" class="idref" href="#U:1282"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#le:1277"><span class="id" title="variable">le</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2016157e2be5b25152292891057ee211"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fb25777b2c386bea4ad23db85be68213"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7534a5530989cef40eec7c27ab9bc44b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1281"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1282"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2016157e2be5b25152292891057ee211"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fb25777b2c386bea4ad23db85be68213"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1281"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2016157e2be5b25152292891057ee211"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7534a5530989cef40eec7c27ab9bc44b"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1282"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_cumul_hetero" class="idref" href="#wt_cumul_hetero"><span class="id" title="definition">wt_cumul_hetero</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a id="wt_conv_hetero" class="idref" href="#wt_conv_hetero"><span class="id" title="definition">wt_conv_hetero</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="cumul_decorate_hetero" class="idref" href="#cumul_decorate_hetero"><span class="id" title="lemma">cumul_decorate_hetero</span></a> (<a id="64c938f2b635b3c5027e7bd44cb6b0bf" class="idref" href="#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="84f2112f897a4268bba56cae78e50f8d" class="idref" href="#84f2112f897a4268bba56cae78e50f8d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="variable">Σ</span></a>} {<a id="b03c2dcab61f914b2326e96b6113ec3f" class="idref" href="#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="binder">Γ</span></a> <a id="1a9388eb302a105955b0b330fc8222d0" class="idref" href="#1a9388eb302a105955b0b330fc8222d0"><span class="id" title="binder">Γ'</span></a> <a id="T:1287" class="idref" href="#T:1287"><span class="id" title="binder">T</span></a> <a id="U:1288" class="idref" href="#U:1288"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1287"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isType"><span class="id" title="definition">isType</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a9388eb302a105955b0b330fc8222d0"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1288"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a9388eb302a105955b0b330fc8222d0"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a9388eb302a105955b0b330fc8222d0"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo"><span class="id" title="abbreviation">cumulAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1287"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1288"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#64c938f2b635b3c5027e7bd44cb6b0bf"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b03c2dcab61f914b2326e96b6113ec3f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1a9388eb302a105955b0b330fc8222d0"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1287"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1288"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType_wt</span></a> ⇒ <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isType_wt"><span class="id" title="lemma">isType_wt</span></a> ⇒ <span class="id" title="var">hu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">hlen</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">ht</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red1"><span class="id" title="lemma">context_pres_let_bodies_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">hu</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="wt_convSpec_convAlgo" class="idref" href="#wt_convSpec_convAlgo"><span class="id" title="lemma">wt_convSpec_convAlgo</span></a> {<a id="fbf72ac8d17eb804b39a70f12e63faad" class="idref" href="#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="a41d9507b8ebc0191cea327c7be4acd0" class="idref" href="#a41d9507b8ebc0191cea327c7be4acd0"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="variable">Σ</span></a>} {<a id="65c0e56bbb0baf6b7f4f0ac7bcc4f177" class="idref" href="#65c0e56bbb0baf6b7f4f0ac7bcc4f177"><span class="id" title="binder">Γ</span></a> <a id="ccc6ffcd33d26643545257fc90641225" class="idref" href="#ccc6ffcd33d26643545257fc90641225"><span class="id" title="binder">Γ'</span></a> <a id="T:1293" class="idref" href="#T:1293"><span class="id" title="binder">T</span></a> <a id="U:1294" class="idref" href="#U:1294"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c0e56bbb0baf6b7f4f0ac7bcc4f177"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1293"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ccc6ffcd33d26643545257fc90641225"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1294"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c0e56bbb0baf6b7f4f0ac7bcc4f177"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ccc6ffcd33d26643545257fc90641225"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#convSpec"><span class="id" title="definition">convSpec</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c0e56bbb0baf6b7f4f0ac7bcc4f177"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1293"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1294"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#convAlgo"><span class="id" title="abbreviation">convAlgo</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fbf72ac8d17eb804b39a70f12e63faad"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c0e56bbb0baf6b7f4f0ac7bcc4f177"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1293"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1294"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [] [] <span class="id" title="var">len</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#convSpec_convAlgo_curry"><span class="id" title="lemma">convSpec_convAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>. <span class="id" title="var">fvs</span>. <span class="id" title="var">fvs</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a id="conv_decorate_hetero" class="idref" href="#conv_decorate_hetero"><span class="id" title="lemma">conv_decorate_hetero</span></a> (<a id="02d61d3583a51e0f1af9eeea790c34f7" class="idref" href="#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) {<a id="52af78a2f15239491edd42a70ee4a661" class="idref" href="#52af78a2f15239491edd42a70ee4a661"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="variable">Σ</span></a>} {<a id="aad181eaafb8bd414b8948a0e1b9a117" class="idref" href="#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="binder">Γ</span></a> <a id="7cf585e9a2ebfd647b1540eebff1a518" class="idref" href="#7cf585e9a2ebfd647b1540eebff1a518"><span class="id" title="binder">Γ'</span></a> <a id="T:1299" class="idref" href="#T:1299"><span class="id" title="binder">T</span></a> <a id="U:1300" class="idref" href="#U:1300"><span class="id" title="binder">U</span></a>} :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1299"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7cf585e9a2ebfd647b1540eebff1a518"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1300"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7cf585e9a2ebfd647b1540eebff1a518"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7cf585e9a2ebfd647b1540eebff1a518"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#convSpec"><span class="id" title="definition">convSpec</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1299"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1300"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero"><span class="id" title="inductive">wt_cumul_pb_hetero</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02d61d3583a51e0f1af9eeea790c34f7"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aad181eaafb8bd414b8948a0e1b9a117"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7cf585e9a2ebfd647b1540eebff1a518"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1299"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1300"><span class="id" title="variable">U</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">ht</span> <span class="id" title="var">hu</span> <span class="id" title="var">hlen</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_convSpec_convAlgo"><span class="id" title="lemma">wt_convSpec_convAlgo</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">ht</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 2.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHc</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red1"><span class="id" title="lemma">context_pres_let_bodies_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_red"><span class="id" title="lemma">wt_red</span></a> <span class="id" title="var">hu</span> <span class="id" title="var">r</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span> 3; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wtcumul'"><span class="id" title="section">wtcumul'</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="pres_let_bodies_trans" class="idref" href="#pres_let_bodies_trans"><span class="id" title="lemma">pres_let_bodies_trans</span></a> <a id="30cf17f3be5ab49d552fb6eda5f28642" class="idref" href="#30cf17f3be5ab49d552fb6eda5f28642"><span class="id" title="binder">Γ</span></a> <a id="2a1efe140440792e297b3d5d70867a01" class="idref" href="#2a1efe140440792e297b3d5d70867a01"><span class="id" title="binder">Γ'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold"><span class="id" title="inductive">All2_fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#pres_let_bodies"><span class="id" title="definition">pres_let_bodies</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30cf17f3be5ab49d552fb6eda5f28642"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a1efe140440792e297b3d5d70867a01"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold"><span class="id" title="inductive">All2_fold</span></a> (<span class="id" title="keyword">fun</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#pres_let_bodies"><span class="id" title="definition">pres_let_bodies</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30cf17f3be5ab49d552fb6eda5f28642"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#2a1efe140440792e297b3d5d70867a01"><span class="id" title="variable">Γ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#All2_fold_map"><span class="id" title="lemma">All2_fold_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_impl"><span class="id" title="lemma">All2_fold_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#pres_let_bodies"><span class="id" title="definition">pres_let_bodies</span></a>; <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> [] []; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl_body</span>, <span class="id" title="var">decl_body0</span>; <span class="id" title="var">cbn</span> ⇒ //. <span class="id" title="tactic">intros</span> [=]. <span class="id" title="var">now</span> <span class="id" title="tactic">subst</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cumul'" class="idref" href="#trans_cumul'"><span class="id" title="lemma">trans_cumul'</span></a> {<a id="cf:1303" class="idref" href="#cf:1303"><span class="id" title="binder">cf</span></a>} {<a id="5a0a66693a6ccfe87adfcfada22adc8c" class="idref" href="#5a0a66693a6ccfe87adfcfada22adc8c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="82faa282ede552a8e4e7f408df24c9a8" class="idref" href="#82faa282ede552a8e4e7f408df24c9a8"><span class="id" title="binder">Γ</span></a> <a id="29b8cb37982eb39475ee733ad9110107" class="idref" href="#29b8cb37982eb39475ee733ad9110107"><span class="id" title="binder">Γ'</span></a> <a id="T:1307" class="idref" href="#T:1307"><span class="id" title="binder">T</span></a> <a id="U:1308" class="idref" href="#U:1308"><span class="id" title="binder">U</span></a>} {<a id="8c7267a92fb7f6021d307720b9910c3b" class="idref" href="#8c7267a92fb7f6021d307720b9910c3b"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5a0a66693a6ccfe87adfcfada22adc8c"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5a0a66693a6ccfe87adfcfada22adc8c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_hetero"><span class="id" title="definition">wt_cumul_hetero</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5a0a66693a6ccfe87adfcfada22adc8c"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82faa282ede552a8e4e7f408df24c9a8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#29b8cb37982eb39475ee733ad9110107"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1307"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1308"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82faa282ede552a8e4e7f408df24c9a8"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#29b8cb37982eb39475ee733ad9110107"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82faa282ede552a8e4e7f408df24c9a8"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#29b8cb37982eb39475ee733ad9110107"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo_gen"><span class="id" title="inductive">cumulAlgo_gen</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1303"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5a0a66693a6ccfe87adfcfada22adc8c"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#82faa282ede552a8e4e7f408df24c9a8"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1307"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1308"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span>; <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_compare_term"><span class="id" title="lemma">trans_compare_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_cumul_cumul"><span class="id" title="lemma">red_cumul_cumul</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red"><span class="id" title="lemma">context_pres_let_bodies_red</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_cumul_cumul_inv"><span class="id" title="lemma">red_cumul_cumul_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_trans"><span class="id" title="lemma">pres_let_bodies_trans</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">symmetry</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_conv'" class="idref" href="#trans_conv'"><span class="id" title="lemma">trans_conv'</span></a> {<a id="cf:1310" class="idref" href="#cf:1310"><span class="id" title="binder">cf</span></a>} {<a id="b29a4f2414db104d6702571a39c42ffb" class="idref" href="#b29a4f2414db104d6702571a39c42ffb"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="cd9bb4bfb15252cc3e224ca71965c9b3" class="idref" href="#cd9bb4bfb15252cc3e224ca71965c9b3"><span class="id" title="binder">Γ</span></a> <a id="4e436520c2cde6d7b1e6d7da0d96f86d" class="idref" href="#4e436520c2cde6d7b1e6d7da0d96f86d"><span class="id" title="binder">Γ'</span></a> <a id="T:1314" class="idref" href="#T:1314"><span class="id" title="binder">T</span></a> <a id="U:1315" class="idref" href="#U:1315"><span class="id" title="binder">U</span></a>} {<a id="3b317009162952b5b828c6c057a98780" class="idref" href="#3b317009162952b5b828c6c057a98780"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b29a4f2414db104d6702571a39c42ffb"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b29a4f2414db104d6702571a39c42ffb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_conv_hetero"><span class="id" title="definition">wt_conv_hetero</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b29a4f2414db104d6702571a39c42ffb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd9bb4bfb15252cc3e224ca71965c9b3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4e436520c2cde6d7b1e6d7da0d96f86d"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1314"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1315"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd9bb4bfb15252cc3e224ca71965c9b3"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4e436520c2cde6d7b1e6d7da0d96f86d"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd9bb4bfb15252cc3e224ca71965c9b3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4e436520c2cde6d7b1e6d7da0d96f86d"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#cumulAlgo_gen"><span class="id" title="inductive">cumulAlgo_gen</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1310"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b29a4f2414db104d6702571a39c42ffb"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cd9bb4bfb15252cc3e224ca71965c9b3"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1314"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1315"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span>; <span class="id" title="tactic">induction</span> 1.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_compare_term"><span class="id" title="lemma">trans_compare_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_global_ext_constraints"><span class="id" title="lemma">trans_global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_conv_conv"><span class="id" title="lemma">red_conv_conv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">w</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">r</span> <span class="id" title="var">ht</span> <span class="id" title="var">hv</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_red1"><span class="id" title="lemma">trans_red1</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICRedTypeIrrelevance.html#context_pres_let_bodies_red"><span class="id" title="lemma">context_pres_let_bodies_red</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">r</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativity.html#red_conv_conv_inv"><span class="id" title="lemma">red_conv_conv_inv</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_trans"><span class="id" title="lemma">pres_let_bodies_trans</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pres_let_bodies_assumption_context"><span class="id" title="lemma">pres_let_bodies_assumption_context</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">symmetry</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_convSpec'" class="idref" href="#trans_convSpec'"><span class="id" title="lemma">trans_convSpec'</span></a> {<a id="cf:1317" class="idref" href="#cf:1317"><span class="id" title="binder">cf</span></a>} {<a id="49b19a869ed1381388b85cddd7ac2402" class="idref" href="#49b19a869ed1381388b85cddd7ac2402"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">PCUICEnvironment.global_env_ext</span></a>} {<a id="6beb743a66de5847a754cc4855f808af" class="idref" href="#6beb743a66de5847a754cc4855f808af"><span class="id" title="binder">Γ</span></a> <a id="23abba0ddec8ffd3e63d05118da981a0" class="idref" href="#23abba0ddec8ffd3e63d05118da981a0"><span class="id" title="binder">Γ'</span></a> <a id="T:1321" class="idref" href="#T:1321"><span class="id" title="binder">T</span></a> <a id="U:1322" class="idref" href="#U:1322"><span class="id" title="binder">U</span></a>} {<a id="aed1087c684ed624f11e9d465623f04c" class="idref" href="#aed1087c684ed624f11e9d465623f04c"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">PCUICTyping.wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49b19a869ed1381388b85cddd7ac2402"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49b19a869ed1381388b85cddd7ac2402"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_conv_hetero"><span class="id" title="definition">wt_conv_hetero</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49b19a869ed1381388b85cddd7ac2402"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6beb743a66de5847a754cc4855f808af"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#23abba0ddec8ffd3e63d05118da981a0"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1321"><span class="id" title="variable">T</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1322"><span class="id" title="variable">U</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6beb743a66de5847a754cc4855f808af"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#23abba0ddec8ffd3e63d05118da981a0"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6beb743a66de5847a754cc4855f808af"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#23abba0ddec8ffd3e63d05118da981a0"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#convSpec"><span class="id" title="definition">convSpec</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1317"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49b19a869ed1381388b85cddd7ac2402"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6beb743a66de5847a754cc4855f808af"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1321"><span class="id" title="variable">T</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#U:1322"><span class="id" title="variable">U</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ'</span> <span class="id" title="var">cv</span> <span class="id" title="var">len</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulAlgo_cumulSpec"><span class="id" title="lemma">cumulAlgo_cumulSpec</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Conv"><span class="id" title="constructor">Conv</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>; [<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_conv'"><span class="id" title="lemma">trans_conv'</span></a>; <span class="id" title="var">tea</span>|<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_cumul_pb_hetero_inv"><span class="id" title="lemma">wt_cumul_pb_hetero_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cv</span> <span class="id" title="keyword">as</span> [[] []]..].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> <span class="id" title="var">len</span>; <span class="id" title="var">fvs</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_cumul_ctx_rel'" class="idref" href="#trans_cumul_ctx_rel'"><span class="id" title="lemma">trans_cumul_ctx_rel'</span></a> {<a id="cf:1324" class="idref" href="#cf:1324"><span class="id" title="binder">cf</span></a>} {<a id="448b52f25a7d61701d11eac5676f3289" class="idref" href="#448b52f25a7d61701d11eac5676f3289"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="af85afcb7817930c5889d8cc02551290" class="idref" href="#af85afcb7817930c5889d8cc02551290"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a>} {<a id="49d18694a7a3e00a636fe242d9d393e3" class="idref" href="#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="binder">Γ</span></a> <a id="1601d38e3ed00dd770dd5077791d1a9d" class="idref" href="#1601d38e3ed00dd770dd5077791d1a9d"><span class="id" title="binder">Γ'</span></a> <a id="ee0c28883a515e1b5d9532a790b41d69" class="idref" href="#ee0c28883a515e1b5d9532a790b41d69"><span class="id" title="binder">Δ</span></a> <a id="f65def84eea61325586f986c3e3dd83a" class="idref" href="#f65def84eea61325586f986c3e3dd83a"><span class="id" title="binder">Δ'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee0c28883a515e1b5d9532a790b41d69"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1601d38e3ed00dd770dd5077791d1a9d"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f65def84eea61325586f986c3e3dd83a"><span class="id" title="variable">Δ'</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1601d38e3ed00dd770dd5077791d1a9d"><span class="id" title="variable">Γ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee0c28883a515e1b5d9532a790b41d69"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1601d38e3ed00dd770dd5077791d1a9d"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f65def84eea61325586f986c3e3dd83a"><span class="id" title="variable">Δ'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_ctx_rel"><span class="id" title="definition">cumul_ctx_rel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee0c28883a515e1b5d9532a790b41d69"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f65def84eea61325586f986c3e3dd83a"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumul_ctx_rel"><span class="id" title="definition">cumul_ctx_rel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> (<span class="id" title="var">cf</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1324"><span class="id" title="variable">cf</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#448b52f25a7d61701d11eac5676f3289"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#49d18694a7a3e00a636fe242d9d393e3"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee0c28883a515e1b5d9532a790b41d69"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f65def84eea61325586f986c3e3dd83a"><span class="id" title="variable">Δ'</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wf'</span> <span class="id" title="var">wfl</span> <span class="id" title="var">wfr</span> <span class="id" title="var">eqlen</span> <span class="id" title="var">ass</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHX</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">wfl</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">wfr</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">wfl</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">wfr</span>. <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">l</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">.π2</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>). <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<span class="id" title="var">l0</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#777d545f3df7a0e7c9a56d33a4f5d56c"><span class="id" title="notation">.π2</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>). <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>, <span class="id" title="var">X1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulAlgo_cumulSpec"><span class="id" title="lemma">cumulAlgo_cumulSpec</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">pb</span>:=<a class="idref" href="MetaRocq.Common.BasicAst.html#Cumul"><span class="id" title="constructor">Cumul</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#into_ws_cumul_pb"><span class="id" title="lemma">into_ws_cumul_pb</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumul'"><span class="id" title="lemma">trans_cumul'</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ</span>) (<span class="id" title="var">Γ'</span> := <span class="id" title="var">Γ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">Γ'0</span>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cumul_decorate_hetero"><span class="id" title="lemma">cumul_decorate_hetero</span></a>; <span class="id" title="tactic">eauto</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#has_sort_isType"><span class="id" title="definition">has_sort_isType</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>) <span class="id" title="var">eqlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#cumulSpec_cumulAlgo_curry"><span class="id" title="lemma">cumulSpec_cumulAlgo_curry</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWellScopedCumulativity.html#ws_cumul_pb_forget"><span class="id" title="lemma">ws_cumul_pb_forget</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">eqt</span>. <span class="id" title="var">fvs</span>. <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>) <span class="id" title="var">eqlen</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">fvs</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">ass'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_is_closed_context"><span class="id" title="lemma">trans_is_closed_context</span></a>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context"><span class="id" title="definition">app_context</span></a>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_fold_length"><span class="id" title="lemma">All2_fold_length</span></a> <span class="id" title="var">X</span>) <span class="id" title="var">eqlen</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_app"><span class="id" title="lemma">length_app</span></a>; <span class="id" title="var">fvs</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">exfalso</span>; <span class="id" title="var">depelim</span> <span class="id" title="var">ass</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="assumption_context_arities_context" class="idref" href="#assumption_context_arities_context"><span class="id" title="lemma">assumption_context_arities_context</span></a> <a id="mdecl:1331" class="idref" href="#mdecl:1331"><span class="id" title="binder">mdecl</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1331"><span class="id" title="variable">mdecl</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev"><span class="id" title="definition">List.rev</span></a> <span class="id" title="var">mdecl</span>); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span> <span class="id" title="keyword">with</span> <span class="id" title="var">pcuic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_smash_context_id" class="idref" href="#expand_lets_smash_context_id"><span class="id" title="lemma">expand_lets_smash_context_id</span></a> <a id="fca79f95d68c5446b2b7e5f075102382" class="idref" href="#fca79f95d68c5446b2b7e5f075102382"><span class="id" title="binder">Γ</span></a> <a id="x:1333" class="idref" href="#x:1333"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fca79f95d68c5446b2b7e5f075102382"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1333"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1333"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_assumption_context"><span class="id" title="lemma">expand_lets_assumption_context</span></a> //. <span class="id" title="var">pcuic</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_expand_lets" class="idref" href="#expand_lets_expand_lets"><span class="id" title="lemma">expand_lets_expand_lets</span></a> <a id="5e654ba0d037a268c46025330ab8477e" class="idref" href="#5e654ba0d037a268c46025330ab8477e"><span class="id" title="binder">Γ</span></a> <a id="452e94f72d5c4fee028c9f31dff3a98e" class="idref" href="#452e94f72d5c4fee028c9f31dff3a98e"><span class="id" title="binder">Δ</span></a> <a id="x:1336" class="idref" href="#x:1336"><span class="id" title="binder">x</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5e654ba0d037a268c46025330ab8477e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#452e94f72d5c4fee028c9f31dff3a98e"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#452e94f72d5c4fee028c9f31dff3a98e"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1336"><span class="id" title="variable">x</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#5e654ba0d037a268c46025330ab8477e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#452e94f72d5c4fee028c9f31dff3a98e"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1336"><span class="id" title="variable">x</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#expand_lets_app"><span class="id" title="lemma">expand_lets_app</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_smash_context_id"><span class="id" title="lemma">expand_lets_smash_context_id</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICConversion.html#expand_lets_app"><span class="id" title="lemma">expand_lets_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_type_local_ctx" class="idref" href="#trans_type_local_ctx"><span class="id" title="lemma">trans_type_local_ctx</span></a> {<a id="cf:1337" class="idref" href="#cf:1337"><span class="id" title="binder">cf</span></a>} {<a id="65c4f7021e50dfdadde3f2d7e2e4d0ca" class="idref" href="#65c4f7021e50dfdadde3f2d7e2e4d0ca"><span class="id" title="binder">Σ</span></a> <a id="aedf2f86162a3e950884c87c9892b600" class="idref" href="#aedf2f86162a3e950884c87c9892b600"><span class="id" title="binder">Γ</span></a> <a id="dab87dffb7bbc61edb0315922688521f" class="idref" href="#dab87dffb7bbc61edb0315922688521f"><span class="id" title="binder">Δ</span></a> <a id="s:1341" class="idref" href="#s:1341"><span class="id" title="binder">s</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c4f7021e50dfdadde3f2d7e2e4d0ca"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c4f7021e50dfdadde3f2d7e2e4d0ca"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#type_local_ctx"><span class="id" title="definition">type_local_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvTyping.lift_typing"><span class="id" title="abbreviation">PCUICEnvTyping.lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c4f7021e50dfdadde3f2d7e2e4d0ca"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aedf2f86162a3e950884c87c9892b600"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dab87dffb7bbc61edb0315922688521f"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1341"><span class="id" title="variable">s</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#type_local_ctx"><span class="id" title="definition">type_local_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvTyping.lift_typing"><span class="id" title="abbreviation">PCUICEnvTyping.lift_typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1337"><span class="id" title="variable">cf</span></a>))) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#65c4f7021e50dfdadde3f2d7e2e4d0ca"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aedf2f86162a3e950884c87c9892b600"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#dab87dffb7bbc61edb0315922688521f"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1341"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Δ</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.wf_sort"><span class="id" title="definition">PCUICLookup.wf_sort</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#wf_sort"><span class="id" title="definition">wf_sort</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">s</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [? [?|] ?] ⇒ /= //; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">b</span>) ⇒ //; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_on_context" class="idref" href="#trans_on_context"><span class="id" title="lemma">trans_on_context</span></a> {<a id="cf:1342" class="idref" href="#cf:1342"><span class="id" title="binder">cf</span></a>} {<a id="9cc51f2ccb2775620a796c3534b60f29" class="idref" href="#9cc51f2ccb2775620a796c3534b60f29"><span class="id" title="binder">Σ</span></a> <a id="58b432bc697d0e1c6f87683051067e38" class="idref" href="#58b432bc697d0e1c6f87683051067e38"><span class="id" title="binder">Γ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cc51f2ccb2775620a796c3534b60f29"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cc51f2ccb2775620a796c3534b60f29"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_context"><span class="id" title="definition">on_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvTyping.lift_typing"><span class="id" title="abbreviation">PCUICEnvTyping.lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cc51f2ccb2775620a796c3534b60f29"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#58b432bc697d0e1c6f87683051067e38"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_context"><span class="id" title="definition">on_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvTyping.lift_typing"><span class="id" title="abbreviation">PCUICEnvTyping.lift_typing</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1342"><span class="id" title="variable">cf</span></a>))) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cc51f2ccb2775620a796c3534b60f29"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#58b432bc697d0e1c6f87683051067e38"><span class="id" title="variable">Γ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> <span class="id" title="var">wf'</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">t0</span>) ⇒ //; <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="Alli_map" class="idref" href="#Alli_map"><span class="id" title="lemma">Alli_map</span></a> {<a id="A:1345" class="idref" href="#A:1345"><span class="id" title="binder">A</span></a> <a id="B:1346" class="idref" href="#B:1346"><span class="id" title="binder">B</span></a>} (<a id="P:1347" class="idref" href="#P:1347"><span class="id" title="binder">P</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1346"><span class="id" title="variable">B</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">Type</span>) {<a id="f:1348" class="idref" href="#f:1348"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#A:1345"><span class="id" title="variable">A</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#B:1346"><span class="id" title="variable">B</span></a>} {<a id="n:1349" class="idref" href="#n:1349"><span class="id" title="binder">n</span></a> <a id="l:1350" class="idref" href="#l:1350"><span class="id" title="binder">l</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> (<span class="id" title="keyword">fun</span> <a id="n:1351" class="idref" href="#n:1351"><span class="id" title="binder">n</span></a> <a id="x:1352" class="idref" href="#x:1352"><span class="id" title="binder">x</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1347"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1351"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1348"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1352"><span class="id" title="variable">x</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1349"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1350"><span class="id" title="variable">l</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli"><span class="id" title="inductive">Alli</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1347"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1349"><span class="id" title="variable">n</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1348"><span class="id" title="variable">f</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#l:1350"><span class="id" title="variable">l</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_projs" class="idref" href="#trans_projs"><span class="id" title="lemma">trans_projs</span></a> <a id="ind:1353" class="idref" href="#ind:1353"><span class="id" title="binder">ind</span></a> <a id="n:1354" class="idref" href="#n:1354"><span class="id" title="binder">n</span></a> <a id="n':1355" class="idref" href="#n':1355"><span class="id" title="binder">n'</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.projs"><span class="id" title="definition">projs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1353"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1354"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':1355"><span class="id" title="variable">n'</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.projs"><span class="id" title="definition">projs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1353"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1354"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n':1355"><span class="id" title="variable">n'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="sub_context_set_empty" class="idref" href="#sub_context_set_empty"><span class="id" title="lemma">sub_context_set_empty</span></a> <a id="s:1356" class="idref" href="#s:1356"><span class="id" title="binder">s</span></a> : <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#sub_context_set"><span class="id" title="definition">sub_context_set</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#ContextSet.empty"><span class="id" title="definition">ContextSet.empty</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1356"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">red</span>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">hin</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Universes.html#LevelSetFact.empty_iff"><span class="id" title="lemma">LevelSetFact.empty_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> <span class="id" title="var">hin</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Common.Universes.html#ConstraintSetFact.empty_iff"><span class="id" title="lemma">ConstraintSetFact.empty_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_subst_instance" class="idref" href="#wt_subst_instance"><span class="id" title="lemma">wt_subst_instance</span></a> {<a id="cf:1357" class="idref" href="#cf:1357"><span class="id" title="binder">cf</span></a>} {<a id="0d49d6b55932ca26d32094d2eb9eff1c" class="idref" href="#0d49d6b55932ca26d32094d2eb9eff1c"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="42564a90e583ebce0c65f2daba4ca192" class="idref" href="#42564a90e583ebce0c65f2daba4ca192"><span class="id" title="binder">ϕ</span></a> : <a class="idref" href="MetaRocq.Common.Universes.html#universes_decl"><span class="id" title="inductive">universes_decl</span></a>} {<a id="b0f16d742fb7409c3c919521d5218176" class="idref" href="#b0f16d742fb7409c3c919521d5218176"><span class="id" title="binder">Γ</span></a> <a id="T:1361" class="idref" href="#T:1361"><span class="id" title="binder">T</span></a> <a id="u:1362" class="idref" href="#u:1362"><span class="id" title="binder">u</span></a> <a id="univs:1363" class="idref" href="#univs:1363"><span class="id" title="binder">univs</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#wf_ext_wk"><span class="id" title="definition">wf_ext_wk</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0d49d6b55932ca26d32094d2eb9eff1c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#Polymorphic_ctx"><span class="id" title="constructor">Polymorphic_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1363"><span class="id" title="variable">univs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0d49d6b55932ca26d32094d2eb9eff1c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.Common.Universes.html#Polymorphic_ctx"><span class="id" title="constructor">Polymorphic_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1363"><span class="id" title="variable">univs</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b0f16d742fb7409c3c919521d5218176"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1361"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#consistent_instance_ext"><span class="id" title="definition">consistent_instance_ext</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0d49d6b55932ca26d32094d2eb9eff1c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#42564a90e583ebce0c65f2daba4ca192"><span class="id" title="variable">ϕ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.Common.Universes.html#Polymorphic_ctx"><span class="id" title="constructor">Polymorphic_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1363"><span class="id" title="variable">univs</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1362"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0d49d6b55932ca26d32094d2eb9eff1c"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#42564a90e583ebce0c65f2daba4ca192"><span class="id" title="variable">ϕ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b0f16d742fb7409c3c919521d5218176"><span class="id" title="variable">Γ@</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1362"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1361"><span class="id" title="variable">T@</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1362"><span class="id" title="variable">u</span></a><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>] <span class="id" title="var">cu</span>. <span class="id" title="tactic">∃</span> (<span class="id" title="var">s@</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">[</span></a><span class="id" title="var">u</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#typing_subst_instance'"><span class="id" title="lemma">PCUICUnivSubstitutionTyp.typing_subst_instance'</span></a>; <span class="id" title="var">tea</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_expand_lets" class="idref" href="#wt_expand_lets"><span class="id" title="lemma">wt_expand_lets</span></a> {<a id="cf:1364" class="idref" href="#cf:1364"><span class="id" title="binder">cf</span></a>} {<a id="87d5bcdd2e1ac00c49f6c3c3f60ceea9" class="idref" href="#87d5bcdd2e1ac00c49f6c3c3f60ceea9"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="fb203c213d6db1baae4104ff1245a49a" class="idref" href="#fb203c213d6db1baae4104ff1245a49a"><span class="id" title="binder">Γ</span></a> <a id="860f7f7596447efce955cb417bec13f5" class="idref" href="#860f7f7596447efce955cb417bec13f5"><span class="id" title="binder">Δ</span></a> <a id="T:1368" class="idref" href="#T:1368"><span class="id" title="binder">T</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#87d5bcdd2e1ac00c49f6c3c3f60ceea9"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#87d5bcdd2e1ac00c49f6c3c3f60ceea9"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fb203c213d6db1baae4104ff1245a49a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#860f7f7596447efce955cb417bec13f5"><span class="id" title="variable">Δ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1368"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#87d5bcdd2e1ac00c49f6c3c3f60ceea9"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fb203c213d6db1baae4104ff1245a49a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#860f7f7596447efce955cb417bec13f5"><span class="id" title="variable">Δ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#860f7f7596447efce955cb417bec13f5"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1368"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="keyword">wf</span> [<span class="id" title="var">s</span> <span class="id" title="var">Hs</span>]. <span class="id" title="tactic">∃</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">s</span>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#typing_expand_lets"><span class="id" title="lemma">typing_expand_lets</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_ctx_mon" class="idref" href="#on_free_vars_ctx_mon"><span class="id" title="lemma">on_free_vars_ctx_mon</span></a> <a id="k:1369" class="idref" href="#k:1369"><span class="id" title="binder">k</span></a> <a id="k':1370" class="idref" href="#k':1370"><span class="id" title="binder">k'</span></a> <a id="6de10384b42453f2645d9c1872e72750" class="idref" href="#6de10384b42453f2645d9c1872e72750"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1369"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">≤</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':1370"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1369"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6de10384b42453f2645d9c1872e72750"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k':1370"><span class="id" title="variable">k'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6de10384b42453f2645d9c1872e72750"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hk</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> ⇒ <span class="id" title="var">i</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">nat_compare_specs</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ctx_inst_wt" class="idref" href="#ctx_inst_wt"><span class="id" title="lemma">ctx_inst_wt</span></a> {<a id="cf:1372" class="idref" href="#cf:1372"><span class="id" title="binder">cf</span></a>} {<a id="245cc795930bbbdfaea568b6ac630e8b" class="idref" href="#245cc795930bbbdfaea568b6ac630e8b"><span class="id" title="binder">Σ</span></a> <a id="93ca613fcd0f5cde097ded0885e7a26f" class="idref" href="#93ca613fcd0f5cde097ded0885e7a26f"><span class="id" title="binder">Γ</span></a> <a id="s:1375" class="idref" href="#s:1375"><span class="id" title="binder">s</span></a> <a id="7f4ae00d695e16a7ae4bdea7a67834a3" class="idref" href="#7f4ae00d695e16a7ae4bdea7a67834a3"><span class="id" title="binder">Δ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#ctx_inst"><span class="id" title="abbreviation">ctx_inst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#245cc795930bbbdfaea568b6ac630e8b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#93ca613fcd0f5cde097ded0885e7a26f"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1375"><span class="id" title="variable">s</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7f4ae00d695e16a7ae4bdea7a67834a3"><span class="id" title="variable">Δ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.All_Forall.html#All"><span class="id" title="inductive">All</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#245cc795930bbbdfaea568b6ac630e8b"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#93ca613fcd0f5cde097ded0885e7a26f"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#s:1375"><span class="id" title="variable">s</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">∃</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_ind_indices" class="idref" href="#wf_ind_indices"><span class="id" title="lemma">wf_ind_indices</span></a> {<a id="cf:1377" class="idref" href="#cf:1377"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} {<a id="e78cd9e459d0953f40e7c83f90a212cc" class="idref" href="#e78cd9e459d0953f40e7c83f90a212cc"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="9be479dfc1ba927cc584a19fc0a40354" class="idref" href="#9be479dfc1ba927cc584a19fc0a40354"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e78cd9e459d0953f40e7c83f90a212cc"><span class="id" title="variable">Σ</span></a>} {<a id="mind:1380" class="idref" href="#mind:1380"><span class="id" title="binder">mind</span></a> <a id="mdecl:1381" class="idref" href="#mdecl:1381"><span class="id" title="binder">mdecl</span></a> <a id="i:1382" class="idref" href="#i:1382"><span class="id" title="binder">i</span></a> <a id="idecl:1383" class="idref" href="#idecl:1383"><span class="id" title="binder">idecl</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_ind_body"><span class="id" title="record">on_ind_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCumulativitySpec.html#cumulSpec0"><span class="id" title="inductive">cumulSpec0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing"><span class="id" title="abbreviation">lift_typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e78cd9e459d0953f40e7c83f90a212cc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mind:1380"><span class="id" title="variable">mind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1381"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1382"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1383"><span class="id" title="variable">idecl</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e78cd9e459d0953f40e7c83f90a212cc"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mdecl:1381"><span class="id" title="variable">mdecl</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idecl:1383"><span class="id" title="variable">idecl</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ind_arity_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onArity</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onArity</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#type_it_mkProd_or_LetIn_inv"><span class="id" title="lemma">type_it_mkProd_or_LetIn_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δs</span> [<span class="id" title="var">ts</span> [<span class="id" title="var">_</span> <span class="id" title="var">Hs</span>]]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#type_it_mkProd_or_LetIn_inv"><span class="id" title="lemma">type_it_mkProd_or_LetIn_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">Δs'</span> [<span class="id" title="var">ts'</span> []]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="nth_error_smash_onfvs" class="idref" href="#nth_error_smash_onfvs"><span class="id" title="lemma">nth_error_smash_onfvs</span></a> <a id="P:1384" class="idref" href="#P:1384"><span class="id" title="binder">P</span></a> <a id="d06c8e774647bfb5f12fb4e5dd6e0f67" class="idref" href="#d06c8e774647bfb5f12fb4e5dd6e0f67"><span class="id" title="binder">Γ</span></a> <a id="n:1386" class="idref" href="#n:1386"><span class="id" title="binder">n</span></a> <a id="c:1387" class="idref" href="#c:1387"><span class="id" title="binder">c</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d06c8e774647bfb5f12fb4e5dd6e0f67"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1386"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1387"><span class="id" title="variable">c</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1384"><span class="id" title="variable">P</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d06c8e774647bfb5f12fb4e5dd6e0f67"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d06c8e774647bfb5f12fb4e5dd6e0f67"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1386"><span class="id" title="variable">n</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1384"><span class="id" title="variable">P</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c:1387"><span class="id" title="variable">c</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Γ</span> <span class="id" title="tactic">in</span> <span class="id" title="var">P</span>, <span class="id" title="var">n</span>, <span class="id" title="var">c</span> |- × <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#ctx_length_rev_ind"><span class="id" title="lemma">ctx_length_rev_ind</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_def"><span class="id" title="lemma">smash_context_app_def</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span> <span class="id" title="var">onfvs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">b</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> 0 <span class="id" title="var">Γ</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hnth</span> <span class="id" title="var">onfvs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_app_ass"><span class="id" title="lemma">smash_context_app_ass</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.Compare_dec.html#lt_dec"><span class="id" title="lemma">lt_dec</span></a> <span class="id" title="var">n</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>)); <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">hn</span> : <span class="id" title="var">n</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span> <span class="id" title="var">n</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a>; <span class="id" title="var">len</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.sub_diag"><span class="id" title="lemma">Nat.sub_diag</span></a> /=. <span class="id" title="tactic">intros</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">ond</span> <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">ond</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ond</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#S"><span class="id" title="constructor">S</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">Γ</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0) <span class="id" title="keyword">as</span> → <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span> <span class="id" title="var">onp</span>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">onp</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> /= ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">ondecl</span> <span class="id" title="var">onctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H</span> <span class="id" title="var">Γ</span> <span class="id" title="keyword">ltac</span>:(<span class="id" title="var">now</span> <span class="id" title="var">lia</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hnth</span> <span class="id" title="var">onctx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H</span>. <span class="id" title="var">lia_f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="on_free_vars_projs" class="idref" href="#on_free_vars_projs"><span class="id" title="lemma">on_free_vars_projs</span></a> <a id="p:1388" class="idref" href="#p:1388"><span class="id" title="binder">p</span></a> <a id="ind:1389" class="idref" href="#ind:1389"><span class="id" title="binder">ind</span></a> <a id="n:1390" class="idref" href="#n:1390"><span class="id" title="binder">n</span></a> <a id="k:1391" class="idref" href="#k:1391"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1388"><span class="id" title="variable">p</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.projs"><span class="id" title="definition">projs</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ind:1389"><span class="id" title="variable">ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1390"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1391"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">k</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_on_udecl" class="idref" href="#trans_on_udecl"><span class="id" title="lemma">trans_on_udecl</span></a> {<a id="cf:1392" class="idref" href="#cf:1392"><span class="id" title="binder">cf</span></a>} {<a id="4f409366de06384f75183b36daeb5afd" class="idref" href="#4f409366de06384f75183b36daeb5afd"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="univs:1394" class="idref" href="#univs:1394"><span class="id" title="binder">univs</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4f409366de06384f75183b36daeb5afd"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1394"><span class="id" title="variable">univs</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4f409366de06384f75183b36daeb5afd"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1394"><span class="id" title="variable">univs</span></a>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">auto</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf" class="idref" href="#trans_wf"><span class="id" title="lemma">trans_wf</span></a> {<a id="cf:1395" class="idref" href="#cf:1395"><span class="id" title="binder">cf</span></a>} {<a id="02ad591a63976310a8b4793f247d624d" class="idref" href="#02ad591a63976310a8b4793f247d624d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02ad591a63976310a8b4793f247d624d"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#02ad591a63976310a8b4793f247d624d"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fst_ctx"><span class="id" title="definition">PCUICEnvironment.fst_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">gunivs</span> <span class="id" title="var">Σ</span> <span class="id" title="var">retro</span>] <span class="id" title="var">udecl</span>]; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> [<span class="id" title="var">onu</span> <span class="id" title="var">wfΣ</span>]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">wfΣ</span> <span class="id" title="keyword">as</span> [|<span class="id" title="var">Σ0</span> <span class="id" title="var">kn</span> <span class="id" title="var">d</span> <span class="id" title="var">X</span> <span class="id" title="var">IHX</span> [<span class="id" title="var">f</span> <span class="id" title="var">udecl'</span> <span class="id" title="var">onu'</span> <span class="id" title="var">ond</span>]]. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">onud</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_udecl"><span class="id" title="definition">on_udecl</span></a> <span class="id" title="var">gunivs</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.universes_decl_of_decl"><span class="id" title="definition">PCUICLookup.universes_decl_of_decl</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decl"><span class="id" title="definition">trans_global_decl</span></a> <span class="id" title="var">d</span>)).<br/>
&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_udecl"><span class="id" title="lemma">trans_on_udecl</span></a> (<span class="id" title="var">Σ</span>:= {| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <span class="id" title="var">gunivs</span>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">Σ0</span>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <span class="id" title="var">retro</span> |})) <span class="id" title="tactic">in</span> <span class="id" title="var">onu'</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span> ⇒ //. }<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">Σ0</span> <span class="id" title="var">into</span> <span class="id" title="var">Σd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">Σ0</span> := {| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <span class="id" title="var">gunivs</span>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <span class="id" title="var">Σd</span>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <span class="id" title="var">retro</span> |}).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rename</span> <span class="id" title="var">X</span> <span class="id" title="var">into</span> <span class="id" title="var">Xd</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">X</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">onu</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">Xd</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <span class="id" title="var">Σ0</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>; <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fresh_global_map"><span class="id" title="lemma">fresh_global_map</span></a> (<span class="id" title="var">Σ</span> := <span class="id" title="var">Σ0</span>)). }<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">d</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">ond</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ?? <span class="id" title="var">Hty</span>; <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">Hty</span> <span class="id" title="var">IHX</span>).<br/>
&nbsp;&nbsp;× <span class="id" title="tactic">generalize</span> <span class="id" title="var">ond</span>. <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_mapi"><span class="id" title="lemma">Alli_mapi</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">).1</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_impl"><span class="id" title="lemma">Alli_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">idecl</span> <span class="id" title="var">onind</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="var">onind</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ind_arity_eq</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_typing_f_impl"><span class="id" title="lemma">lift_typing_f_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">onArity</span>) ⇒ // ?? <span class="id" title="var">Hty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">Hty</span> <span class="id" title="var">IHX</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">ind_cunivs</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onConstructors</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_left"><span class="id" title="lemma">All2_map_left</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_impl"><span class="id" title="lemma">All2_impl</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cdecl</span> <span class="id" title="var">univs</span> <span class="id" title="var">onc</span>; <span class="id" title="tactic">generalize</span> <span class="id" title="var">onc</span>; <span class="id" title="tactic">intros</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">parsfvs</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">oncargs</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#sorts_local_ctx_wf_local"><span class="id" title="lemma">sorts_local_ctx_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_cargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_cargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">on_cargs</span>; <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">on_ctype</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">oncindices</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_indices"><span class="id" title="projection">cstr_indices</span></a> <span class="id" title="var">cdecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">on_ctype</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">_</span> <span class="id" title="var">_</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_mkApps"><span class="id" title="lemma">on_free_vars_mkApps</span></a> /=. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">_</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb_app"><span class="id" title="lemma">forallb_app</span></a>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">_</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">cstr_args_length</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl_head"><span class="id" title="definition">trans_cstr_concl_head</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl_head"><span class="id" title="definition">cstr_concl_head</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_typing_it"><span class="id" title="lemma">trans_lift_typing_it</span></a> <span class="id" title="keyword">with</span> <span class="id" title="var">on_ctype</span> ⇒ // <span class="id" title="var">Hty</span>. <span class="id" title="tactic">set</span> (<span class="id" title="var">s</span> := <span class="id" title="var">_</span><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#9068efa82fa7bcf30341b045859b1c5b"><span class="id" title="notation">.π1</span></a>) <span class="id" title="tactic">in</span> *; <span class="id" title="var">clearbody</span> <span class="id" title="var">s</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">X</span> <span class="id" title="var">Hty</span> <span class="id" title="var">IHX</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#type_it_mkProd_or_LetIn_smash_middle"><span class="id" title="lemma">type_it_mkProd_or_LetIn_smash_middle</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#meta_conv_term"><span class="id" title="lemma">meta_conv_term</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl"><span class="id" title="definition">trans_cstr_concl</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl"><span class="id" title="definition">cstr_concl</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_cstr_concl_head"><span class="id" title="definition">trans_cstr_concl_head</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_concl_head"><span class="id" title="definition">cstr_concl_head</span></a>. <span class="id" title="var">len</span> ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_mkApps"><span class="id" title="lemma">expand_lets_mkApps</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>]. <span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>. <span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_tRel"><span class="id" title="lemma">expand_lets_tRel</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_to_extended_list"><span class="id" title="lemma">trans_to_extended_list</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#map_expand_lets_to_extended_list_k_above"><span class="id" title="lemma">map_expand_lets_to_extended_list_k_above</span></a>; <span class="id" title="var">now</span> <span class="id" title="tactic">try</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">X</span> <span class="id" title="var">onud</span> <span class="id" title="var">on_cargs</span> <span class="id" title="var">IHX</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">univs</span>, <span class="id" title="var">on_cargs</span> |- × ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">on_cargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <span class="id" title="var">_</span>)](<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_app_expand"><span class="id" title="lemma">smash_context_app_expand</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">_</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#snoc"><span class="id" title="definition">snoc</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context"><span class="id" title="definition">app_context</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_tip"><span class="id" title="lemma">expand_lets_ctx_tip</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">univs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHc</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>, <span class="id" title="var">on_cargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">on_cargs</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">hs</span> <span class="id" title="var">hj</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_sorting_f_it_impl"><span class="id" title="lemma">lift_sorting_f_it_impl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">f</span> := <span class="id" title="keyword">fun</span> <a id="t:1397" class="idref" href="#t:1397"><span class="id" title="binder"><span id="t:1398" class="id">t</span></span></a> ⇒ <span class="id" title="var">_</span> (<span class="id" title="var">_</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1397"><span class="id" title="variable">t</span></a>)) (<span class="id" title="var">tu</span> := <span class="id" title="var">hj</span>) ⇒ // <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsc</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a>, <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">ht</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsty</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">c</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="var">ty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ht</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#typing_expand_lets"><span class="id" title="lemma">typing_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) // <span class="id" title="tactic">in</span> <span class="id" title="var">ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span>: <span class="id" title="var">on_cindices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ci</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx_inst_expand_lets"><span class="id" title="lemma">ctx_inst_expand_lets</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">ci</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ci</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ci</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_ctx_lift_context_cancel"><span class="id" title="lemma">expand_lets_ctx_lift_context_cancel</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ci</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_map"><span class="id" title="lemma">trans_expand_lets_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift_context"><span class="id" title="lemma">trans_lift_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">ind_arity_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onArity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onArity</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hs</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">_</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP0"><span class="id" title="lemma">shiftnP0</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_ctx_inst_expand_lets"><span class="id" title="lemma">trans_ctx_inst_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ci</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_involutive"><span class="id" title="lemma">List.rev_involutive</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)). <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weakening_wf_local"><span class="id" title="lemma">weakening_wf_local</span></a>. 3:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#wf_arities_context'"><span class="id" title="lemma">wf_arities_context'</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">ind_arity_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onArity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onArity</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.it_mkProd_or_LetIn_app"><span class="id" title="lemma">it_mkProd_or_LetIn_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#type_it_mkProd_or_LetIn_inv"><span class="id" title="lemma">type_it_mkProd_or_LetIn_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span> <span class="id" title="keyword">as</span> [? [? [<span class="id" title="var">Hs</span> <span class="id" title="var">_</span>]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICClosedConv.html#sorts_local_ctx_All_local_env"><span class="id" title="lemma">PCUICClosedConv.sorts_local_ctx_All_local_env</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#sorts_local_ctx_wf_local"><span class="id" title="lemma">sorts_local_ctx_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_cargs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#wf_arities_context'"><span class="id" title="lemma">wf_arities_context'</span></a>; <span class="id" title="tactic">eauto</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_map"><span class="id" title="lemma">trans_expand_lets_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cstr_concl_eq"><span class="id" title="lemma">trans_cstr_concl_eq</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">on_ctype</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hs</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">onpars</span> <span class="id" title="var">onargs</span> <span class="id" title="var">onconcl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onconcl</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_it_mkProd_or_LetIn"><span class="id" title="lemma">trans_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype_positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#positive_cstr_smash_middle"><span class="id" title="lemma">positive_cstr_smash_middle</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype_positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#positive_cstr_trans"><span class="id" title="lemma">positive_cstr_trans</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype_positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">exact</span> <span class="id" title="var">on_ctype_positive</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">on_ctype</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_is_open_term"><span class="id" title="lemma">subject_is_open_term</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">Hs</span>; <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_it_mkProd_or_LetIn"><span class="id" title="lemma">on_free_vars_it_mkProd_or_LetIn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a> ⇒ [] <span class="id" title="var">onpars</span> <span class="id" title="var">onargs</span> <span class="id" title="var">onconcl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#and3P"><span class="id" title="lemma">and3P</span></a>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">intros</span> <span class="id" title="var">v</span> <span class="id" title="var">indv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: (<span class="id" title="var">on_ctype_variance</span> <span class="id" title="var">v</span> <span class="id" title="var">indv</span>). <span class="id" title="tactic">clear</span> -<span class="id" title="var">indv</span> <span class="id" title="var">parsfvs</span> <span class="id" title="var">onVariance</span> <span class="id" title="var">onc</span> <span class="id" title="var">X</span> <span class="id" title="var">onu</span> <span class="id" title="var">ond</span> <span class="id" title="var">onud</span> <span class="id" title="var">IHX</span> <span class="id" title="var">onParams</span> <span class="id" title="var">oncargs</span> <span class="id" title="var">oncindices</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">indv</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onVariance</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#variance_universes_insts"><span class="id" title="lemma">variance_universes_insts</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onVariance</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs'</span> [<span class="id" title="var">u</span> [<span class="id" title="var">u'</span> [<span class="id" title="var">eqv</span> <span class="id" title="var">hunivs</span> <span class="id" title="var">cu</span> <span class="id" title="var">cu'</span> <span class="id" title="var">equlen</span> <span class="id" title="var">eqvlen</span> <span class="id" title="var">equ'</span> <span class="id" title="var">cli</span> <span class="id" title="var">equ</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#cstr_respects_variance"><span class="id" title="definition">cstr_respects_variance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_idempotent"><span class="id" title="lemma">smash_context_idempotent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clpars</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_arities"><span class="id" title="definition">ind_arities</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumul_ctx_rel'"><span class="id" title="lemma">trans_cumul_ctx_rel'</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">univs'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ'</span> := <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>)<a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u'</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app"><span class="id" title="lemma">subst_instance_app</span></a> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_local_expand_lets"><span class="id" title="lemma">wf_local_expand_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_cargs"><span class="id" title="projection">on_cargs</span></a> <span class="id" title="var">onc</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#sorts_local_ctx_wf_local"><span class="id" title="lemma">sorts_local_ctx_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#typing_subst_instance_wf_local"><span class="id" title="lemma">typing_subst_instance_wf_local</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">try</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">onu</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eqv</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">eqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#on_udecl_on_udecl_prop"><span class="id" title="lemma">on_udecl_on_udecl_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#wf_arities_context'"><span class="id" title="lemma">wf_arities_context'</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app"><span class="id" title="lemma">subst_instance_app</span></a> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_local_expand_lets"><span class="id" title="lemma">wf_local_expand_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>. <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_cargs"><span class="id" title="projection">on_cargs</span></a> <span class="id" title="var">onc</span>). <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#sorts_local_ctx_wf_local"><span class="id" title="lemma">sorts_local_ctx_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#typing_subst_instance_wf_local"><span class="id" title="lemma">typing_subst_instance_wf_local</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">eqv</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">eqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#on_udecl_on_udecl_prop"><span class="id" title="lemma">on_udecl_on_udecl_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#wf_arities_context'"><span class="id" title="lemma">wf_arities_context'</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#assumption_context_arities_context"><span class="id" title="lemma">assumption_context_arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a> ⇒ //; <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#assumption_context_arities_context"><span class="id" title="lemma">assumption_context_arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a> ⇒ //; <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">do</span> 3 <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map"><span class="id" title="lemma">All2_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_map_inv"><span class="id" title="lemma">All2_map_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_All"><span class="id" title="lemma">All2_All</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_All2_refl"><span class="id" title="lemma">All_All2_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_cindices"><span class="id" title="projection">on_cindices</span></a> <span class="id" title="var">onc</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#ctx_inst_impl"><span class="id" title="lemma">ctx_inst_impl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>. 2: <span class="id" title="tactic">intros</span> ??; <span class="id" title="tactic">apply</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#unlift_TermTyp"><span class="id" title="lemma">unlift_TermTyp</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx_inst_wt"><span class="id" title="lemma">ctx_inst_wt</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_All"><span class="id" title="lemma">forallb_All</span></a>: <span class="id" title="var">oncindices</span> ⇒ <span class="id" title="var">hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_mix"><span class="id" title="lemma">All_mix</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">hi</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.Utils.All_Forall.html#All_mix"><span class="id" title="lemma">All_mix</span></a> <span class="id" title="var">X0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>; <span class="id" title="tactic">clear</span> <span class="id" title="var">X0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">eqind</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">eqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> [<span class="id" title="var">wtx</span> [<span class="id" title="var">onfvs</span> <span class="id" title="var">cv</span>]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_arities"><span class="id" title="definition">ind_arities</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_arities"><span class="id" title="definition">ind_arities</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_arities_context"><span class="id" title="lemma">trans_arities_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsparsargs</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a>; <span class="id" title="tactic">apply</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_ctx_mon"><span class="id" title="lemma">on_free_vars_ctx_mon</span></a> 0); <span class="id" title="var">tea</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> // <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#map"><span class="id" title="definition">map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_decl"><span class="id" title="definition">map_decl</span></a> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">len</span> ⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_expand_lets_k"><span class="id" title="lemma">on_free_vars_expand_lets_k</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> 0) //  <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> // /= <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_convSpec'"><span class="id" title="lemma">trans_convSpec'</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">univs'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ'</span> := <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>)<a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#smash_context"><span class="id" title="definition">SE.smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">cdecl</span>))<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u'</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2-3:<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#assumption_context_arities_context"><span class="id" title="lemma">assumption_context_arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a> ⇒ //; <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#conv_decorate_hetero"><span class="id" title="lemma">conv_decorate_hetero</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3-4:<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#assumption_context_arities_context"><span class="id" title="lemma">assumption_context_arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>));<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a> ⇒ //; <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_subst_instance"><span class="id" title="lemma">wt_subst_instance</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#on_udecl_on_udecl_prop"><span class="id" title="lemma">on_udecl_on_udecl_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_expand_lets"><span class="id" title="lemma">wt_expand_lets</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_expand_lets"><span class="id" title="lemma">wt_expand_lets</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_subst_instance"><span class="id" title="lemma">wt_subst_instance</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#on_udecl_on_udecl_prop"><span class="id" title="lemma">on_udecl_on_udecl_prop</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_expand_lets"><span class="id" title="lemma">wt_expand_lets</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt_expand_lets"><span class="id" title="lemma">wt_expand_lets</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_app"><span class="id" title="lemma">smash_context_app</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_idempotent"><span class="id" title="lemma">smash_context_idempotent</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_app"><span class="id" title="lemma">smash_context_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_expand_lets"><span class="id" title="lemma">expand_lets_expand_lets</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#rwP"><span class="id" title="lemma">rwP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a> <span class="id" title="var">_</span>)). <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">have</span> <span class="id" title="var">parsfvs</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">red</span> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">ind_projs</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">ind_projs</span></a> <span class="id" title="var">idecl</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">indps</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_ctors"><span class="id" title="projection">ind_ctors</span></a> <span class="id" title="var">idecl</span>) <span class="id" title="keyword">as</span> [|<span class="id" title="var">c</span> []] <span class="id" title="var">eqn</span>:<span class="id" title="var">hctors</span> ⇒ /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">depelim</span> <span class="id" title="var">onConstructors</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">onConstructors</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">wfargs</span> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">wf_local</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.arities_context"><span class="id" title="definition">arities_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>)<a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">c</span><a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#:::'wf_local'_x_x"><span class="id" title="notation">)</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <span class="id" title="var">o</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#sorts_local_ctx_wf_local"><span class="id" title="lemma">sorts_local_ctx_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_cargs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">cstr_eq</span> <span class="id" title="tactic">in</span> <span class="id" title="var">on_ctype</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">on_ctype</span> <span class="id" title="keyword">as</span> (<span class="id" title="var">_</span> &amp; <span class="id" title="var">s</span> &amp; <span class="id" title="var">Hs</span> &amp; <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing_wf_local"><span class="id" title="lemma">typing_wf_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Hs</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICWeakeningTyp.html#weaken_wf_local"><span class="id" title="lemma">weaken_wf_local</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">oncargs</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">c</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>: <span class="id" title="var">wfargs</span>; <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">indps</span> <span class="id" title="var">X</span> <span class="id" title="var">onu</span> <span class="id" title="var">ond</span> <span class="id" title="var">IHX</span> <span class="id" title="var">onProjections</span> <span class="id" title="var">wfargs</span> <span class="id" title="var">oncargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">lenprojs</span> : <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">ind_projs</span></a> <span class="id" title="var">idecl</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&gt;'_x"><span class="id" title="notation">&gt;</span></a> 0.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_projs"><span class="id" title="projection">ind_projs</span></a> <span class="id" title="var">idecl</span>) ⇒ /= //. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">onProjections</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /= // <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Alli_nth_hyp"><span class="id" title="lemma">Alli_nth_hyp</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">on_projs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#Alli_map"><span class="id" title="lemma">Alli_map</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#Alli_impl"><span class="id" title="lemma">Alli_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>⇒ <span class="id" title="var">n'</span> <span class="id" title="var">x</span> [] <span class="id" title="var">hnthp</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnthp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#on_projection"><span class="id" title="definition">on_projection</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_app"><span class="id" title="lemma">smash_context_app</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_idempotent"><span class="id" title="lemma">smash_context_idempotent</span></a>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context_app"><span class="id" title="lemma">smash_context_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">wfargs</span>; <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> ⇒ /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /= <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span> ⇒ /= //. <span class="id" title="tactic">intros</span> [<span class="id" title="var">onna</span> <span class="id" title="var">onty</span> <span class="id" title="var">onrel</span>]; <span class="id" title="tactic">split</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">onty</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span> ⇒ /= //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">subst</span> <span class="id" title="var">proj_type0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">ind</span> := {| <a class="idref" href="MetaRocq.Common.Kernames.html#inductive_mind"><span class="id" title="projection">inductive_mind</span></a> := <span class="id" title="var">kn</span>; <a class="idref" href="MetaRocq.Common.Kernames.html#inductive_ind"><span class="id" title="projection">inductive_ind</span></a> := <span class="id" title="var">n</span> |}) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_inds"><span class="id" title="lemma">trans_inds</span></a> <span class="id" title="var">ind</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsdecl</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">n'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <span class="id" title="var">c0</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nth_error_smash_onfvs"><span class="id" title="lemma">nth_error_smash_onfvs</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">wfargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">wfargs</span>; <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> ⇒ /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#onfvs_app"><span class="id" title="lemma">onfvs_app</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">hnth</span> ⇒ [] <span class="id" title="var">_</span> <span class="id" title="var">o</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">o</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>. <span class="id" title="var">lia_f_equal</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;-(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lift"><span class="id" title="lemma">trans_lift</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvslift</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<span class="id" title="var">n'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lift"><span class="id" title="definition">lift</span></a> 1 <span class="id" title="var">n'</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_type"><span class="id" title="projection">decl_type</span></a> <span class="id" title="var">c0</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> -2!<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_lift_impl"><span class="id" title="lemma">on_free_vars_lift_impl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_subst"><span class="id" title="lemma">on_free_vars_subst</span></a>; [<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_projs"><span class="id" title="lemma">on_free_vars_projs</span></a>|].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.projs_length"><span class="id" title="lemma">projs_length</span></a> !<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#inds_is_open_terms"><span class="id" title="lemma">inds_is_open_terms</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ind</span>). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">erewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)); <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#on_free_vars_projs"><span class="id" title="lemma">on_free_vars_projs</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_projs"><span class="id" title="lemma">trans_projs</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">ind_sorts</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#check_ind_sorts"><span class="id" title="definition">check_ind_sorts</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Common.Universes.html#Sort.to_family"><span class="id" title="definition">Sort.to_family</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICLookup.global_ext_constraints"><span class="id" title="definition">PCUICLookup.global_ext_constraints</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Common.config.html#indices_matter"><span class="id" title="method">indices_matter</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_type_local_ctx"><span class="id" title="lemma">trans_type_local_ctx</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)). }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">simpl</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_variance"><span class="id" title="projection">ind_variance</span></a> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">onIndices</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#ind_respects_variance"><span class="id" title="definition">ind_respects_variance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_variance"><span class="id" title="projection">ind_variance</span></a> <span class="id" title="var">m</span>) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#variance_universes_insts"><span class="id" title="lemma">variance_universes_insts</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onVariance</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">univs'</span> [<span class="id" title="var">u</span> [<span class="id" title="var">u'</span> [<span class="id" title="var">eqv</span> <span class="id" title="var">hunivs</span> <span class="id" title="var">cu</span> <span class="id" title="var">cu'</span> <span class="id" title="var">equlen</span> <span class="id" title="var">eqvlen</span> <span class="id" title="var">equ'</span> <span class="id" title="var">cli</span> <span class="id" title="var">equ</span>]]]].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#variance_universes"><span class="id" title="definition">variance_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <span class="id" title="var">eqv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constructor_body"><span class="id" title="definition">trans_constructor_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> [<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clpars</span> : <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_closed_context"><span class="id" title="abbreviation">is_closed_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onParams</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">wfindices</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#a9a0b33c1f7aa55888d16704fbe19a94"><span class="id" title="notation">!!</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_ind_indices"><span class="id" title="lemma">wf_ind_indices</span></a> <span class="id" title="var">onind</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">fvsindices</span>: <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_indices"><span class="id" title="projection">ind_indices</span></a> <span class="id" title="var">idecl</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#wf_local_closed_context"><span class="id" title="lemma">wf_local_closed_context</span></a>: <span class="id" title="var">wfindices</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_app"><span class="id" title="lemma">on_free_vars_ctx_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_smash_context"><span class="id" title="lemma">trans_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets_ctx"><span class="id" title="lemma">trans_expand_lets_ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>)) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_smash"><span class="id" title="lemma">on_free_vars_ctx_smash</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -!<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">wf_ext</span> : <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#wf_global_ext"><span class="id" title="definition">wf_global_ext</span></a> <span class="id" title="var">Σ0</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_universes"><span class="id" title="projection">ind_universes</span></a> <span class="id" title="var">m</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">equniv</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWeakeningEnv.html#on_udecl_on_udecl_prop"><span class="id" title="lemma">on_udecl_on_udecl_prop</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_cumul_ctx_rel'"><span class="id" title="lemma">trans_cumul_ctx_rel'</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ0</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">univs'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">Γ'</span> := <a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_params"><span class="id" title="projection">ind_params</span></a> <span class="id" title="var">m</span>)<a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">)@[</span></a><span class="id" title="var">u'</span><a class="idref" href="MetaRocq.Common.Universes.html#2069c293c95c271a185f7f719b9c1655"><span class="id" title="notation">]</span></a>)) ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_local_expand_lets"><span class="id" title="lemma">wf_local_expand_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#wf_local_subst_instance"><span class="id" title="lemma">wf_local_subst_instance</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_expand_lets_ctx"><span class="id" title="lemma">subst_instance_expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -[<span class="id" title="var">_</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">_</span>]<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#wf_local_expand_lets"><span class="id" title="lemma">wf_local_expand_lets</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_nil_l"><span class="id" title="lemma">app_context_nil_l</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#wf_local_smash_end"><span class="id" title="lemma">wf_local_smash_end</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_app_ctx"><span class="id" title="lemma">subst_instance_app_ctx</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICUnivSubstitutionTyp.html#wf_local_subst_instance"><span class="id" title="lemma">wf_local_subst_instance</span></a>; <span class="id" title="var">tea</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a>; <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#assumption_context_app_inv"><span class="id" title="lemma">assumption_context_app_inv</span></a>; <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_context"><span class="id" title="lemma">trans_on_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">onParams</span>).<br/>
&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wf_ext" class="idref" href="#trans_wf_ext"><span class="id" title="lemma">trans_wf_ext</span></a> {<a id="cf:1399" class="idref" href="#cf:1399"><span class="id" title="binder">cf</span></a>} {<a id="a4e314e54019f6816bfdf1fad6d4a447" class="idref" href="#a4e314e54019f6816bfdf1fad6d4a447"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf_ext"><span class="id" title="class">wf_ext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a4e314e54019f6816bfdf1fad6d4a447"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_ext_trans"><span class="id" title="abbreviation">wf_ext_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a4e314e54019f6816bfdf1fad6d4a447"><span class="id" title="variable">Σ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>; <span class="id" title="tactic">split</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">trans_wf</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">X</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_udecl"><span class="id" title="lemma">trans_on_udecl</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
From a typing derivation in pcuic we build one where there are no lets
  in constructor types, and branches of cases are appropriately substituted. 
</div>
<div class="code">
<span class="id" title="keyword">Theorem</span> <a id="expand_lets_sound" class="idref" href="#expand_lets_sound"><span class="id" title="lemma">expand_lets_sound</span></a> {<a id="cf:1401" class="idref" href="#cf:1401"><span class="id" title="binder">cf</span></a>} {<a id="ee544b714dc7739904fa36c44b432db8" class="idref" href="#ee544b714dc7739904fa36c44b432db8"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="cfba43a5d45ae14cf8c87ba32ad0adaf" class="idref" href="#cfba43a5d45ae14cf8c87ba32ad0adaf"><span class="id" title="binder">Γ</span></a> <a id="t:1404" class="idref" href="#t:1404"><span class="id" title="binder">t</span></a> <a id="T:1405" class="idref" href="#T:1405"><span class="id" title="binder">T</span></a>} {<a id="29da4b9faa83176bbfff32cda2a82f75" class="idref" href="#29da4b9faa83176bbfff32cda2a82f75"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee544b714dc7739904fa36c44b432db8"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee544b714dc7739904fa36c44b432db8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cfba43a5d45ae14cf8c87ba32ad0adaf"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1404"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1405"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#typing"><span class="id" title="inductive">typing</span></a> (<span class="id" title="var">H</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1401"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ee544b714dc7739904fa36c44b432db8"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cfba43a5d45ae14cf8c87ba32ad0adaf"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1404"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1405"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ht</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pcuic_expand_lets"><span class="id" title="lemma">pcuic_expand_lets</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_wf"><span class="id" title="lemma">trans_wf</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#"><span class="id" title="library">PCUICWcbvEval</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#"><span class="id" title="library">PCUICClassification</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#"><span class="id" title="library">PCUICCSubst</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_csubst" class="idref" href="#trans_csubst"><span class="id" title="lemma">trans_csubst</span></a> <a id="a:1407" class="idref" href="#a:1407"><span class="id" title="binder">a</span></a> <a id="k:1408" class="idref" href="#k:1408"><span class="id" title="binder">k</span></a> <a id="b:1409" class="idref" href="#b:1409"><span class="id" title="binder">b</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed"><span class="id" title="abbreviation">closed</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:1407"><span class="id" title="variable">a</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> 1 <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:1409"><span class="id" title="variable">b</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#csubst"><span class="id" title="definition">csubst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:1407"><span class="id" title="variable">a</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1408"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:1409"><span class="id" title="variable">b</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#csubst"><span class="id" title="definition">csubst</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a:1407"><span class="id" title="variable">a</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1408"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#b:1409"><span class="id" title="variable">b</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ona</span> <span class="id" title="var">onb</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#closed_subst"><span class="id" title="lemma">closed_subst</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#closed_subst"><span class="id" title="lemma">closed_subst</span></a> //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a> // -<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> 1 <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> 0) <span class="id" title="var">ona</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="eval_wt" class="idref" href="#eval_wt"><span class="id" title="lemma">eval_wt</span></a> {<a id="cf:1410" class="idref" href="#cf:1410"><span class="id" title="binder">cf</span></a>} {<a id="a7f60d492f825add551f129c589b4260" class="idref" href="#a7f60d492f825add551f129c589b4260"><span class="id" title="binder">Σ</span></a>} {<a id="0434f9fd309d2277d14a06d909f3dbb9" class="idref" href="#0434f9fd309d2277d14a06d909f3dbb9"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a7f60d492f825add551f129c589b4260"><span class="id" title="variable">Σ</span></a>} {<a id="t:1413" class="idref" href="#t:1413"><span class="id" title="binder">t</span></a> <a id="t':1414" class="idref" href="#t':1414"><span class="id" title="binder">t'</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a7f60d492f825add551f129c589b4260"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1413"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a7f60d492f825add551f129c589b4260"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1413"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':1414"><span class="id" title="variable">t'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a7f60d492f825add551f129c589b4260"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t':1414"><span class="id" title="variable">t'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> <span class="id" title="var">Ht</span>] <span class="id" title="var">ev</span>. <span class="id" title="tactic">∃</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#subject_reduction_eval"><span class="id" title="lemma">subject_reduction_eval</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wt_closed" class="idref" href="#wt_closed"><span class="id" title="lemma">wt_closed</span></a> {<a id="cf:1415" class="idref" href="#cf:1415"><span class="id" title="binder">cf</span></a>} {<a id="4bcf82525b897e38982138d57eba0bdb" class="idref" href="#4bcf82525b897e38982138d57eba0bdb"><span class="id" title="binder">Σ</span></a>} {<a id="fae1c23d941b570c930c88b759b48a52" class="idref" href="#fae1c23d941b570c930c88b759b48a52"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4bcf82525b897e38982138d57eba0bdb"><span class="id" title="variable">Σ</span></a>} {<a id="ed8abc58638ae12f3f21520bf73cf0b6" class="idref" href="#ed8abc58638ae12f3f21520bf73cf0b6"><span class="id" title="binder">Γ</span></a> <a id="t:1419" class="idref" href="#t:1419"><span class="id" title="binder">t</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wt"><span class="id" title="definition">wt</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4bcf82525b897e38982138d57eba0bdb"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed8abc58638ae12f3f21520bf73cf0b6"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1419"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ed8abc58638ae12f3f21520bf73cf0b6"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1419"><span class="id" title="variable">t</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">T</span> <span class="id" title="var">Ht</span>]. <span class="id" title="tactic">exact</span> (<a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#subject_closed"><span class="id" title="lemma">subject_closed</span></a> <span class="id" title="var">Ht</span>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="closed_inst_case_context" class="idref" href="#closed_inst_case_context"><span class="id" title="lemma">closed_inst_case_context</span></a> <a id="pars:1420" class="idref" href="#pars:1420"><span class="id" title="binder">pars</span></a> <a id="u:1421" class="idref" href="#u:1421"><span class="id" title="binder">u</span></a> <a id="ctx:1422" class="idref" href="#ctx:1422"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pars:1420"><span class="id" title="variable">pars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn_ctx"><span class="id" title="abbreviation">closedn_ctx</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pars:1420"><span class="id" title="variable">pars</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1422"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed_ctx"><span class="id" title="abbreviation">closed_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#pars:1420"><span class="id" title="variable">pars</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1421"><span class="id" title="variable">u</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1422"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hpars</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_ctx_subst"><span class="id" title="lemma">closedn_ctx_subst</span></a> 0 0) ⇒ //. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance_context"><span class="id" title="lemma">closedn_subst_instance_context</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_closedn" class="idref" href="#trans_closedn"><span class="id" title="lemma">trans_closedn</span></a> <a id="k:1423" class="idref" href="#k:1423"><span class="id" title="binder">k</span></a> <a id="t:1424" class="idref" href="#t:1424"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1423"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1424"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1423"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1424"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isFixApp_trans" class="idref" href="#isFixApp_trans"><span class="id" title="lemma">isFixApp_trans</span></a> <a id="f:1425" class="idref" href="#f:1425"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1425"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isFixApp"><span class="id" title="definition">isFixApp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1425"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isFixApp_mkApps"><span class="id" title="lemma">isFixApp_mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isFixApp_mkApps"><span class="id" title="lemma">isFixApp_mkApps</span></a> <span class="id" title="var">f1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isConstructApp_trans" class="idref" href="#isConstructApp_trans"><span class="id" title="lemma">isConstructApp_trans</span></a> <a id="f:1426" class="idref" href="#f:1426"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isConstructApp"><span class="id" title="definition">isConstructApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1426"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isConstructApp"><span class="id" title="definition">isConstructApp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1426"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isConstructApp_mkApps"><span class="id" title="lemma">isConstructApp_mkApps</span></a> <span class="id" title="var">f1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isPrimApp_trans" class="idref" href="#isPrimApp_trans"><span class="id" title="lemma">isPrimApp_trans</span></a> <a id="f:1427" class="idref" href="#f:1427"><span class="id" title="binder">f</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isPrimApp"><span class="id" title="definition">isPrimApp</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1427"><span class="id" title="variable">f</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isPrimApp"><span class="id" title="definition">isPrimApp</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f:1427"><span class="id" title="variable">f</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">f</span> ⇒ //. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isPrimApp_mkApps"><span class="id" title="lemma">isPrimApp_mkApps</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f1</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#isPrimApp_mkApps"><span class="id" title="lemma">isPrimApp_mkApps</span></a> <span class="id" title="var">f1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">f2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>).<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_wcbveval" class="idref" href="#trans_wcbveval"><span class="id" title="lemma">trans_wcbveval</span></a> {<a id="cf:1428" class="idref" href="#cf:1428"><span class="id" title="binder">cf</span></a>} {<a id="0382c64a7f5c89b4a8c6cf02b6b6a61a" class="idref" href="#0382c64a7f5c89b4a8c6cf02b6b6a61a"><span class="id" title="binder">Σ</span></a>} {<a id="93f4ad4550db21d60e806bd7890073d2" class="idref" href="#93f4ad4550db21d60e806bd7890073d2"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0382c64a7f5c89b4a8c6cf02b6b6a61a"><span class="id" title="variable">Σ</span></a>} {<a id="e81095b3e3b7ad616dd7d16c0fc24bf6" class="idref" href="#e81095b3e3b7ad616dd7d16c0fc24bf6"><span class="id" title="binder">wfΣ'</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_trans"><span class="id" title="abbreviation">wf_trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0382c64a7f5c89b4a8c6cf02b6b6a61a"><span class="id" title="variable">Σ</span></a>} <a id="t:1432" class="idref" href="#t:1432"><span class="id" title="binder">t</span></a> <a id="u:1433" class="idref" href="#u:1433"><span class="id" title="binder">u</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closed"><span class="id" title="abbreviation">closed</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1432"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0382c64a7f5c89b4a8c6cf02b6b6a61a"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1432"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1433"><span class="id" title="variable">u</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval"><span class="id" title="inductive">eval</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0382c64a7f5c89b4a8c6cf02b6b6a61a"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1432"><span class="id" title="variable">t</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#u:1433"><span class="id" title="variable">u</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wt</span> <span class="id" title="var">ev</span>; <span class="id" title="var">revert</span> <span class="id" title="var">wt</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">ev</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onf</span> <span class="id" title="var">ona</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">wfΣ'</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onf</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ona</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">onf</span> ⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">ont</span> <span class="id" title="var">onb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_csubst"><span class="id" title="lemma">trans_csubst</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHev3</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#closed_csubst"><span class="id" title="lemma">closed_csubst</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">onb0</span> <span class="id" title="var">ont</span> <span class="id" title="var">onb1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> <span class="id" title="var">wfΣ'</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onb0</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_csubst"><span class="id" title="lemma">trans_csubst</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICCSubst.html#closed_csubst"><span class="id" title="lemma">closed_csubst</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">_</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constant_from_gen"><span class="id" title="lemma">declared_constant_from_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constant_to_gen"><span class="id" title="lemma">declared_constant_to_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">cf</span> :=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constant"><span class="id" title="lemma">trans_declared_constant</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance"><span class="id" title="lemma">trans_subst_instance</span></a>; <span class="id" title="tactic">apply</span> <span class="id" title="var">IHev</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst_instance"><span class="id" title="lemma">closedn_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Typing.PCUICClosedTyp.html#declared_constant_closed_body"><span class="id" title="lemma">declared_constant_closed_body</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">isdecl</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clp</span> <span class="id" title="var">cldiscr</span> <span class="id" title="var">clbrs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHev1</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">e0</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">cf</span> :=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e1</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#iota_red"><span class="id" title="definition">iota_red</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_assumption_context"><span class="id" title="lemma">expand_lets_assumption_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_context"><span class="id" title="lemma">assumption_context_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_instance"><span class="id" title="lemma">assumption_context_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_assumption_context"><span class="id" title="lemma">smash_context_assumption_context</span></a>; <span class="id" title="var">pcuic</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_forallb"><span class="id" title="lemma">nth_error_forallb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clbrs</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">clbrs</span> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clctx</span> <span class="id" title="var">clb</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">clp</span> ⇒ [] /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clpars</span> <span class="id" title="var">clpctx</span> <span class="id" title="var">clpret</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clexp</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">br</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bbody"><span class="id" title="projection">bbody</span></a> <span class="id" title="var">br</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#closedn_expand_lets"><span class="id" title="lemma">closedn_expand_lets</span></a> 0) ⇒ //. 3:<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> // <span class="id" title="tactic">in</span> <span class="id" title="var">clb</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closed_inst_case_context"><span class="id" title="lemma">closed_inst_case_context</span></a> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">have</span> <span class="id" title="var">clargs</span> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#closedn"><span class="id" title="definition">closedn</span></a> 0) <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">move</span>: <span class="id" title="var">ev1</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /= ⇒ <span class="id" title="var">ev1</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#iota_red"><span class="id" title="definition">iota_red</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closedn_subst0"><span class="id" title="lemma">closedn_subst0</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_skipn"><span class="id" title="lemma">forallb_skipn</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>; <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#length_skipn"><span class="id" title="lemma">length_skipn</span></a> <span class="id" title="var">e1</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> -<span class="id" title="var">e2</span> <span class="id" title="var">e3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#ci_npar"><span class="id" title="projection">ci_npar</span></a> <span class="id" title="var">ci</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#ci_npar"><span class="id" title="projection">ci_npar</span></a> <span class="id" title="var">ci</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>)) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#subst0"><span class="id" title="abbreviation">subst0</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>). <span class="id" title="tactic">exact</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#iota_red"><span class="id" title="definition">iota_red</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst"><span class="id" title="lemma">trans_subst</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">br</span>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_skipn"><span class="id" title="lemma">forallb_skipn</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_impl"><span class="id" title="lemma">forallb_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICSR.html#on_free_vars_closedn"><span class="id" title="lemma">on_free_vars_closedn</span></a> 0) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#map_skipn"><span class="id" title="lemma">map_skipn</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_expand_lets"><span class="id" title="lemma">trans_expand_lets</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closed_inst_case_context"><span class="id" title="lemma">closed_inst_case_context</span></a> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clb</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_impl"><span class="id" title="lemma">forallb_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> //.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span> ⇒ <span class="id" title="var">cldiscr</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHev1</span> <span class="id" title="var">cldiscr</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_projection_from_gen"><span class="id" title="lemma">declared_projection_from_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_projection"><span class="id" title="lemma">trans_declared_projection</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_projection_to_gen"><span class="id" title="lemma">declared_projection_to_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">cf</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> <span class="id" title="var">e0</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">e1</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ev1</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /= ⇒ <span class="id" title="var">onargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_forallb"><span class="id" title="lemma">nth_error_forallb</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">onargs</span>; <span class="id" title="var">tea</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clf</span> <span class="id" title="var">cla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ev1</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clfix</span> <span class="id" title="var">clargsv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_fix_cunfold_eq"><span class="id" title="lemma">closed_unfold_fix_cunfold_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /= <span class="id" title="var">clargsv</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_fix"><span class="id" title="lemma">closed_unfold_fix</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev2</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_fix"><span class="id" title="lemma">trans_unfold_fix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_fix"><span class="id" title="constructor">eval_fix</span></a>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_fix_cunfold_eq"><span class="id" title="lemma">closed_unfold_fix_cunfold_eq</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clfix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev3</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev3</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHev3</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clf</span> <span class="id" title="var">cla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ev1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ev1</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clfix</span> <span class="id" title="var">clargsv</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_fix_cunfold_eq"><span class="id" title="lemma">closed_unfold_fix_cunfold_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHev1</span> <span class="id" title="var">clf</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_fix"><span class="id" title="lemma">trans_unfold_fix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">e1</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_fix_value"><span class="id" title="constructor">eval_fix_value</span></a>. <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_fix_cunfold_eq"><span class="id" title="lemma">closed_unfold_fix_cunfold_eq</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clfix</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cldiscr</span> <span class="id" title="var">clbrs</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">wfΣ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cldiscr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">clfix</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clfix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">clfix</span>. <span class="id" title="tactic">move</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">clfix</span> <span class="id" title="var">clargs</span>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix_cunfold_eq"><span class="id" title="lemma">closed_unfold_cofix_cunfold_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">clp</span> <span class="id" title="var">clbrs</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix"><span class="id" title="lemma">closed_unfold_cofix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span> <span class="id" title="var">narg</span> <span class="id" title="var">fn</span>) // <span class="id" title="var">clargs</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_cofix"><span class="id" title="lemma">trans_unfold_cofix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_cofix_case"><span class="id" title="constructor">eval_cofix_case</span></a>. 2:<span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix_cunfold_eq"><span class="id" title="lemma">closed_unfold_cofix_cunfold_eq</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clfix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev2</span> ⇒ //.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">cldiscr</span>. <span class="id" title="tactic">clear</span> <span class="id" title="var">wfΣ'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_closed"><span class="id" title="lemma">eval_closed</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">cldiscr</span> <span class="id" title="keyword">as</span> <span class="id" title="var">clfix</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">clfix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clfix</span> <span class="id" title="var">clargs</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix_cunfold_eq"><span class="id" title="lemma">closed_unfold_cofix_cunfold_eq</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev1</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">IHev2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#closedn_mkApps"><span class="id" title="lemma">closedn_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix"><span class="id" title="lemma">closed_unfold_cofix</span></a> <span class="id" title="var">mfix</span> <span class="id" title="var">idx</span> <span class="id" title="var">narg</span> <span class="id" title="var">fn</span>) // <span class="id" title="var">clargs</span> //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /= <span class="id" title="tactic">in</span> <span class="id" title="var">IHev1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_unfold_cofix"><span class="id" title="lemma">trans_unfold_cofix</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a>) <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (@<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_on_free_vars"><span class="id" title="lemma">closedn_on_free_vars</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpred0"><span class="id" title="abbreviation">xpred0</span></a> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_cofix_proj"><span class="id" title="constructor">eval_cofix_proj</span></a>. 2: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#closed_unfold_cofix_cunfold_eq"><span class="id" title="lemma">closed_unfold_cofix_cunfold_eq</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedn_trans"><span class="id" title="lemma">closedn_trans</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">clfix</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IHev2</span> ⇒ //.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clf</span> <span class="id" title="var">cla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">map_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_from_gen"><span class="id" title="lemma">declared_constructor_from_gen</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">d</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_construct"><span class="id" title="constructor">eval_construct</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> @<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#declared_constructor_to_gen"><span class="id" title="lemma">declared_constructor_to_gen</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">cf</span>:=<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <span class="id" title="var">cf</span>); <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span>: (<span class="id" title="var">IHev1</span> <span class="id" title="var">clf</span>). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">move</span>: <span class="id" title="var">l</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#length_map"><span class="id" title="lemma">length_map</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#cstr_arity"><span class="id" title="definition">cstr_arity</span></a> /= <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHev2</span>.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">clf</span> <span class="id" title="var">cla</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_app_cong"><span class="id" title="constructor">eval_app_cong</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isFixApp_trans"><span class="id" title="lemma">isFixApp_trans</span></a> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isConstructApp_trans"><span class="id" title="lemma">isConstructApp_trans</span></a> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#isPrimApp_trans"><span class="id" title="lemma">isPrimApp_trans</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">i</span>. <span class="id" title="tactic">induction</span> <span class="id" title="var">f'</span> ⇒ /= //.<br/>

<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">depelim</span> <span class="id" title="var">X</span>; <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All2_undep"><span class="id" title="lemma">All2_undep</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">a</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>⇒ <span class="id" title="var">clt</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICWcbvEval.html#eval_atom"><span class="id" title="constructor">eval_atom</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#"><span class="id" title="library">PCUICEtaExpand</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_isConstruct" class="idref" href="#trans_isConstruct"><span class="id" title="lemma">trans_isConstruct</span></a> <a id="t:1434" class="idref" href="#t:1434"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isConstruct"><span class="id" title="definition">isConstruct</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1434"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isConstruct"><span class="id" title="definition">isConstruct</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1434"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_isRel" class="idref" href="#trans_isRel"><span class="id" title="lemma">trans_isRel</span></a> <a id="t:1435" class="idref" href="#t:1435"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isRel"><span class="id" title="definition">isRel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1435"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isRel"><span class="id" title="definition">isRel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1435"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_isFix" class="idref" href="#trans_isFix"><span class="id" title="lemma">trans_isFix</span></a> <a id="t:1436" class="idref" href="#t:1436"><span class="id" title="binder">t</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isFix"><span class="id" title="definition">isFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1436"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#isFix"><span class="id" title="definition">isFix</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1436"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Let expansion preserves eta-expandedness 
</div>
<div class="code">
<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Width</span> 150.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_expand_lets" class="idref" href="#expanded_expand_lets"><span class="id" title="lemma">expanded_expand_lets</span></a> {<a id="cf:1437" class="idref" href="#cf:1437"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>}<br/>
&nbsp;&nbsp;{<a id="30e9702dcbf9c765344da6a52e95cee8" class="idref" href="#30e9702dcbf9c765344da6a52e95cee8"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env"><span class="id" title="record">global_env</span></a>} {<a id="fde676663cb704c80caec97a0b4e66b4" class="idref" href="#fde676663cb704c80caec97a0b4e66b4"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30e9702dcbf9c765344da6a52e95cee8"><span class="id" title="variable">Σ</span></a>} <a id="bceb29869db4ca13ec9741d8939f11d2" class="idref" href="#bceb29869db4ca13ec9741d8939f11d2"><span class="id" title="binder">Γ</span></a> <a id="t:1441" class="idref" href="#t:1441"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30e9702dcbf9c765344da6a52e95cee8"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bceb29869db4ca13ec9741d8939f11d2"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1441"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded"><span class="id" title="inductive">expanded</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#30e9702dcbf9c765344da6a52e95cee8"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bceb29869db4ca13ec9741d8939f11d2"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1441"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1 <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_ind"><span class="id" title="lemma">expanded_ind</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_tRel"><span class="id" title="constructor">expanded_tRel</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>. <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>; [|<span class="id" title="var">solve_all</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isConstruct"><span class="id" title="lemma">trans_isConstruct</span></a> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isRel"><span class="id" title="lemma">trans_isRel</span></a> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isFix"><span class="id" title="lemma">trans_isFix</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#Forall_map"><span class="id" title="lemma">Forall_map</span></a>. <span class="id" title="tactic">repeat</span> <span class="id" title="var">toAll</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_impl"><span class="id" title="lemma">All_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">x</span> [<span class="id" title="var">expb</span> <span class="id" title="var">IH</span>].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bcontext"><span class="id" title="lemma">trans_bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>. <span class="id" title="var">len</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>. <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">have</span>: (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#assumption_context"><span class="id" title="inductive">assumption_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>)))) <span class="id" title="tactic">by</span> <span class="id" title="var">pcuic</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span>. <span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">c</span>; <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">IHc</span>. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [<span class="id" title="var">b</span>|] <span class="id" title="var">ty</span>]; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">H</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">relativize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">expb</span> <span class="id" title="keyword">as</span> [[] ?], <span class="id" title="var">IH</span> <span class="id" title="keyword">as</span> [[] ?].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_let_expansion"><span class="id" title="lemma">expanded_let_expansion</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context"><span class="id" title="definition">subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">red</span>; <span class="id" title="var">sq</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICParallelReduction.html#All_fold_fold_context_k"><span class="id" title="lemma">PCUICParallelReduction.All_fold_fold_context_k</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">do</span> 2 <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#All_fold_map_context"><span class="id" title="lemma">All_fold_map_context</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold_impl"><span class="id" title="lemma">All_fold_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">H1</span>. <span class="id" title="tactic">intros</span> ??; <span class="id" title="var">len</span>; <span class="id" title="tactic">intros</span> []; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_subst"><span class="id" title="lemma">expanded_subst</span></a>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_length"><span class="id" title="lemma">repeat_length</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_Forall"><span class="id" title="lemma">All_Forall</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_rev"><span class="id" title="lemma">All_rev</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_map"><span class="id" title="lemma">All_map</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_subst_instance"><span class="id" title="lemma">expanded_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#repeat_app"><span class="id" title="lemma">repeat_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_weakening"><span class="id" title="lemma">expanded_weakening</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>; <span class="id" title="tactic">exact</span> <span class="id" title="var">e0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_tFix"><span class="id" title="constructor">expanded_tFix</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_isLambda"><span class="id" title="lemma">trans_isLambda</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_map_spec"><span class="id" title="lemma">rev_map_spec</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">b</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">args</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H4</span>. <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_tConstruct_app"><span class="id" title="constructor">expanded_tConstruct_app</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_declared_constructor"><span class="id" title="lemma">trans_declared_constructor</span></a> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#empty_ext"><span class="id" title="definition">empty_ext</span></a> <span class="id" title="var">Σ</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;4:<span class="id" title="tactic">eauto</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#context_assumptions_smash_context"><span class="id" title="lemma">context_assumptions_smash_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_map"><span class="id" title="lemma">context_assumptions_map</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">depelim</span> <span class="id" title="var">H0</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_trans_local" class="idref" href="#expanded_trans_local"><span class="id" title="lemma">expanded_trans_local</span></a> {<a id="cf:1442" class="idref" href="#cf:1442"><span class="id" title="binder">cf</span></a>:<a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>}<br/>
&nbsp;&nbsp;{<a id="9b022223444ce500ea94c3af5fb66688" class="idref" href="#9b022223444ce500ea94c3af5fb66688"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>} {<a id="106636cf0e69401ff848fcb26b9d9a6d" class="idref" href="#106636cf0e69401ff848fcb26b9d9a6d"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9b022223444ce500ea94c3af5fb66688"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>} <a id="256fd13189270968bf3e13ae8041c618" class="idref" href="#256fd13189270968bf3e13ae8041c618"><span class="id" title="binder">Γ</span></a> <a id="ctx:1446" class="idref" href="#ctx:1446"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9b022223444ce500ea94c3af5fb66688"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#256fd13189270968bf3e13ae8041c618"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1446"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9b022223444ce500ea94c3af5fb66688"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#256fd13189270968bf3e13ae8041c618"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1446"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span>]; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#All_fold_map_context"><span class="id" title="lemma">All_fold_map_context</span></a>, <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_fold_impl"><span class="id" title="lemma">All_fold_impl</span></a>; <span class="id" title="var">tea</span>; <span class="id" title="tactic">cbv</span> <span class="id" title="keyword">beta</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ??; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> [];<br/>
&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>; <span class="id" title="var">len</span>; <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_expand_lets"><span class="id" title="lemma">expanded_expand_lets</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_smash_context" class="idref" href="#expanded_smash_context"><span class="id" title="lemma">expanded_smash_context</span></a> {<a id="00ca40438612d72a6b3ee3de29a3c291" class="idref" href="#00ca40438612d72a6b3ee3de29a3c291"><span class="id" title="binder">Σ</span></a>} <a id="e91d5739aed8d2f9310c5c62385ec3ab" class="idref" href="#e91d5739aed8d2f9310c5c62385ec3ab"><span class="id" title="binder">Γ</span></a> <a id="ctx:1449" class="idref" href="#ctx:1449"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#00ca40438612d72a6b3ee3de29a3c291"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e91d5739aed8d2f9310c5c62385ec3ab"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1449"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#00ca40438612d72a6b3ee3de29a3c291"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e91d5739aed8d2f9310c5c62385ec3ab"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1449"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_context"><span class="id" title="definition">expanded_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [<span class="id" title="var">a</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">forward</span> (@<a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_context_assumption_context"><span class="id" title="lemma">smash_context_assumption_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <span class="id" title="var">ctx</span>). <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <span class="id" title="var">ctx</span>). <span class="id" title="tactic">clear</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">c</span> <span class="id" title="var">a</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">IHa</span>; <span class="id" title="var">sq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="wf_cons_inv" class="idref" href="#wf_cons_inv"><span class="id" title="lemma">wf_cons_inv</span></a> {<a id="cf:1450" class="idref" href="#cf:1450"><span class="id" title="binder">cf</span></a>} <a id="univs:1451" class="idref" href="#univs:1451"><span class="id" title="binder">univs</span></a> <a id="retro:1452" class="idref" href="#retro:1452"><span class="id" title="binder">retro</span></a> (<a id="4853591fa6125e6b75b3115815cfb8a1" class="idref" href="#4853591fa6125e6b75b3115815cfb8a1"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_declarations"><span class="id" title="definition">global_declarations</span></a>) <a id="d:1454" class="idref" href="#d:1454"><span class="id" title="binder">d</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> {| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1451"><span class="id" title="variable">univs</span></a>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d:1454"><span class="id" title="variable">d</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#::list_scope:x_'::'_x"><span class="id" title="notation">::</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4853591fa6125e6b75b3115815cfb8a1"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#retro:1452"><span class="id" title="variable">retro</span></a> |} <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> {| <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.universes"><span class="id" title="projection">universes</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#univs:1451"><span class="id" title="variable">univs</span></a>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#4853591fa6125e6b75b3115815cfb8a1"><span class="id" title="variable">Σ</span></a>; <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.retroknowledge"><span class="id" title="projection">retroknowledge</span></a> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#retro:1452"><span class="id" title="variable">retro</span></a> |}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="var">depelim</span> <span class="id" title="var">o0</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_global_env_expand_lets" class="idref" href="#expanded_global_env_expand_lets"><span class="id" title="lemma">expanded_global_env_expand_lets</span></a> {<a id="cf:1455" class="idref" href="#cf:1455"><span class="id" title="binder">cf</span></a>} <a id="0f3346e9ecf2e9ac171441a756dcadd6" class="idref" href="#0f3346e9ecf2e9ac171441a756dcadd6"><span class="id" title="binder">Σ</span></a> {<a id="5dd03739fa9ae45a1d4eb36aab97c42c" class="idref" href="#5dd03739fa9ae45a1d4eb36aab97c42c"><span class="id" title="binder">wfΣ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0f3346e9ecf2e9ac171441a756dcadd6"><span class="id" title="variable">Σ</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">PCUICEtaExpand.expanded_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0f3346e9ecf2e9ac171441a756dcadd6"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0f3346e9ecf2e9ac171441a756dcadd6"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Σ</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">univs</span> <span class="id" title="var">Σ</span>] <span class="id" title="var">udecl</span>]. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_global_env"><span class="id" title="definition">expanded_global_env</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">etaenv</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">etaenv</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">forward</span> <span class="id" title="var">IHetaenv</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cons_inv"><span class="id" title="lemma">wf_cons_inv</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">forward</span> <span class="id" title="var">IHetaenv</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#wf_cons_inv"><span class="id" title="lemma">wf_cons_inv</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">decl</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">kn</span> []]; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">depelim</span> <span class="id" title="var">H</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_constant_body"><span class="id" title="definition">PCUICExpandLets.trans_constant_body</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cst_body"><span class="id" title="projection">cst_body</span></a> <span class="id" title="var">c</span>); <span class="id" title="var">cbn</span> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">expanded_body</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_expand_lets"><span class="id" title="lemma">expanded_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">expanded_body</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">inversion</span> <span class="id" title="var">o0</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">set</span> (<span class="id" title="var">Σ'</span> := {| <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#universes"><span class="id" title="projection">T.PCUICEnvironment.universes</span></a> := <span class="id" title="var">_</span>; <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#declarations"><span class="id" title="projection">T.PCUICEnvironment.declarations</span></a> := <span class="id" title="var">Σ</span> |}) <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> {| <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#universes"><span class="id" title="projection">T.PCUICEnvironment.universes</span></a> := <span class="id" title="var">_</span> |} <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">Σ'</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_trans_local"><span class="id" title="lemma">expanded_trans_local</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>) <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">expanded_params</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_mapi"><span class="id" title="lemma">All_mapi</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_Alli"><span class="id" title="lemma">All_Alli</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> [].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>. <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_trans_local"><span class="id" title="lemma">expanded_trans_local</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">expanded_cstr_args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_smash_context"><span class="id" title="lemma">expanded_smash_context</span></a> (<span class="id" title="var">Σ</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">Σ'</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>)) <span class="id" title="tactic">in</span> <span class="id" title="var">expanded_cstr_args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>: <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">unfold</span> <span class="id" title="var">Σ'</span>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">inversion</span> <span class="id" title="var">o0</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#"><span class="id" title="library">PCUICProgram</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#"><span class="id" title="library">PCUICFirstorder</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expanded_expand_lets_program" class="idref" href="#expanded_expand_lets_program"><span class="id" title="lemma">expanded_expand_lets_program</span></a> {<a id="cf:1458" class="idref" href="#cf:1458"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} <a id="p:1459" class="idref" href="#p:1459"><span class="id" title="binder">p</span></a> (<a id="wtp:1460" class="idref" href="#wtp:1460"><span class="id" title="binder">wtp</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#wt_pcuic_program"><span class="id" title="definition">wt_pcuic_program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1459"><span class="id" title="variable">p</span></a>) :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_pcuic_program"><span class="id" title="definition">expanded_pcuic_program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1459"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICEtaExpand.html#expanded_pcuic_program"><span class="id" title="definition">expanded_pcuic_program</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1459"><span class="id" title="variable">p</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">Σ</span> <span class="id" title="var">udecl</span>] <span class="id" title="var">t</span>]; <span class="id" title="tactic">intros</span> [<span class="id" title="var">etaenv</span> <span class="id" title="var">etat</span>].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">wtp</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">wfΣ</span> <span class="id" title="var">wtp</span>].<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×. <span class="id" title="tactic">split</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_global_env_expand_lets"><span class="id" title="lemma">expanded_global_env_expand_lets</span></a> (<span class="id" title="var">cf</span>:=<span class="id" title="var">cf</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="var">Σ</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <span class="id" title="var">udecl</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expanded_expand_lets"><span class="id" title="lemma">expanded_expand_lets</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">etat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unshelve</span>. <span class="id" title="var">all</span>:<span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_fo" class="idref" href="#expand_lets_fo"><span class="id" title="lemma">expand_lets_fo</span></a> {<a id="cf:1461" class="idref" href="#cf:1461"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="37e47bf0342a3d02da080ef593c02763" class="idref" href="#37e47bf0342a3d02da080ef593c02763"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="t:1463" class="idref" href="#t:1463"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">firstorder_value</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37e47bf0342a3d02da080ef593c02763"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1463"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p:1464" class="idref" href="#p:1464"><span class="id" title="binder">p</span></a> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37e47bf0342a3d02da080ef593c02763"><span class="id" title="variable">Σ</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1463"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">expand_lets_program</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1464"><span class="id" title="variable">p</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#build_global_env_map"><span class="id" title="definition">build_global_env_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fst_ctx"><span class="id" title="definition">PCUICAst.PCUICEnvironment.fst_ctx</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">PCUICExpandLets.trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1464"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>))<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1464"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1463"><span class="id" title="variable">t</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#expand_lets_program"><span class="id" title="definition">PCUICExpandLets.expand_lets_program</span></a>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">p</span>. <span class="id" title="tactic">apply</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_inds"><span class="id" title="lemma">firstorder_value_inds</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<span class="id" title="keyword">fun</span> <a id="t:1465" class="idref" href="#t:1465"><span class="id" title="binder"><span id="t:1466" class="id">t</span></span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1465"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1465"><span class="id" title="variable">t</span></a>)).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">ui</span> <span class="id" title="var">u</span> <span class="id" title="var">args</span> <span class="id" title="var">pandi</span> <span class="id" title="var">ht</span> <span class="id" title="var">hf</span> <span class="id" title="var">ih</span> <span class="id" title="var">isp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forall_map_id_spec"><span class="id" title="lemma">forall_map_id_spec</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="isArity_trans" class="idref" href="#isArity_trans"><span class="id" title="lemma">isArity_trans</span></a> <a id="T:1467" class="idref" href="#T:1467"><span class="id" title="binder">T</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isArity"><span class="id" title="definition">isArity</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1467"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#isArity"><span class="id" title="definition">isArity</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">PCUICExpandLets.trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1467"><span class="id" title="variable">T</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">T</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="mkApps_trans_inv" class="idref" href="#mkApps_trans_inv"><span class="id" title="lemma">mkApps_trans_inv</span></a> <a id="fn:1468" class="idref" href="#fn:1468"><span class="id" title="binder">fn</span></a> <a id="args:1469" class="idref" href="#args:1469"><span class="id" title="binder">args</span></a> <a id="T:1470" class="idref" href="#T:1470"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:1468"><span class="id" title="variable">fn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:1469"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1470"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">∑</span></a> <a id="fn':1471" class="idref" href="#fn':1471"><span class="id" title="binder">fn'</span></a> <a id="args':1472" class="idref" href="#args':1472"><span class="id" title="binder">args'</span></a><a class="idref" href="MetaRocq.Utils.MRPrelude.html#cd4bc1b07c8b3bdc9f3bbc7941b56107"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1470"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#mkApps"><span class="id" title="definition">mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn':1471"><span class="id" title="variable">fn'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args':1472"><span class="id" title="variable">args'</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn:1468"><span class="id" title="variable">fn</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#fn':1471"><span class="id" title="variable">fn'</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args:1469"><span class="id" title="variable">args</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#args':1472"><span class="id" title="variable">args'</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">T</span>; <span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> <span class="id" title="keyword">using</span> <a class="idref" href="MetaRocq.Utils.MRList.html#rev_ind"><span class="id" title="lemma">rev_ind</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span> <span class="id" title="var">T</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> →. <span class="id" title="tactic">∃</span> <span class="id" title="var">T</span>, <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>; <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a> /=. <span class="id" title="tactic">destruct</span> <span class="id" title="var">T</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">subst</span> <span class="id" title="var">x</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H0</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">fn'</span> [<span class="id" title="var">args'</span> [? []]]]; <span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> <span class="id" title="var">fn'</span>, (<span class="id" title="var">args'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">T2</span><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>)%<span class="id" title="var">list</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#mkApps_app"><span class="id" title="lemma">mkApps_app</span></a>. <span class="id" title="tactic">split</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_app"><span class="id" title="lemma">List.map_app</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_tRel_ass" class="idref" href="#expand_lets_k_tRel_ass"><span class="id" title="lemma">expand_lets_k_tRel_ass</span></a> {<a id="16d6836d861c7d3d5d70748fd5ef4205" class="idref" href="#16d6836d861c7d3d5d70748fd5ef4205"><span class="id" title="binder">Γ</span></a> <a id="i:1474" class="idref" href="#i:1474"><span class="id" title="binder">i</span></a> <a id="k:1475" class="idref" href="#k:1475"><span class="id" title="binder">k</span></a> <a id="x:1476" class="idref" href="#x:1476"><span class="id" title="binder">x</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#16d6836d861c7d3d5d70748fd5ef4205"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1474"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1476"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1476"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#16d6836d861c7d3d5d70748fd5ef4205"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1475"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1475"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1474"><span class="id" title="variable">i</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1474"><span class="id" title="variable">i</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#16d6836d861c7d3d5d70748fd5ef4205"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1475"><span class="id" title="variable">k</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span> <span class="id" title="var">hbo</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#lift_rel_lt"><span class="id" title="lemma">TL.lift_rel_lt</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec0"><span class="id" title="lemma">Nat.leb_spec0</span></a> <span class="id" title="var">k</span> (<span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span>)); <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">k</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <span class="id" title="var">k</span>) <span class="id" title="keyword">with</span> <span class="id" title="var">i</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#nth_error_extended_subst"><span class="id" title="lemma">nth_error_extended_subst</span></a> <span class="id" title="var">hnth</span> <span class="id" title="var">hbo</span>. <span class="id" title="var">cbn</span>. <span class="id" title="var">lia_f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="context_assumptions_firstn" class="idref" href="#context_assumptions_firstn"><span class="id" title="lemma">context_assumptions_firstn</span></a> {<a id="n:1477" class="idref" href="#n:1477"><span class="id" title="binder">n</span></a> <a id="e8b8a153ac50ef7ba2d549702bf98ed7" class="idref" href="#e8b8a153ac50ef7ba2d549702bf98ed7"><span class="id" title="binder">Γ</span></a> <a id="x:1479" class="idref" href="#x:1479"><span class="id" title="binder">x</span></a>} :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1477"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8b8a153ac50ef7ba2d549702bf98ed7"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8b8a153ac50ef7ba2d549702bf98ed7"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1477"><span class="id" title="variable">n</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1479"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#x:1479"><span class="id" title="variable">x</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#None"><span class="id" title="constructor">None</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Lists.ListDef.html#firstn"><span class="id" title="definition">firstn</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1477"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8b8a153ac50ef7ba2d549702bf98ed7"><span class="id" title="variable">Γ</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e8b8a153ac50ef7ba2d549702bf98ed7"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">n</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Γ</span> |- ×.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#firstn_0"><span class="id" title="lemma">firstn_0</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span> ⇒ //. <span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span> [= &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span> →. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">hl</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">Γ</span> ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span> <span class="id" title="var">hbod</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">Γ</span>). <span class="id" title="var">forward</span> <span class="id" title="var">IHn</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHn</span> <span class="id" title="var">hnth</span> <span class="id" title="var">hbod</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> <span class="id" title="var">c</span>); <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">From</span> <span class="id" title="var">MetaRocq.PCUIC</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#"><span class="id" title="library">PCUICLiftSubst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#"><span class="id" title="library">PCUICContexts</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#"><span class="id" title="library">PCUICOnFreeVars</span></a>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_tFix" class="idref" href="#expand_lets_tFix"><span class="id" title="lemma">expand_lets_tFix</span></a> <a id="80972eaf81440d93ee08b623a9fe799e" class="idref" href="#80972eaf81440d93ee08b623a9fe799e"><span class="id" title="binder">Γ</span></a> <a id="mfix:1481" class="idref" href="#mfix:1481"><span class="id" title="binder">mfix</span></a> <a id="idx:1482" class="idref" href="#idx:1482"><span class="id" title="binder">idx</span></a> <a id="k:1483" class="idref" href="#k:1483"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#80972eaf81440d93ee08b623a9fe799e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1483"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1481"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:1482"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tFix"><span class="id" title="constructor">tFix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#80972eaf81440d93ee08b623a9fe799e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1483"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#80972eaf81440d93ee08b623a9fe799e"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1481"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1483"><span class="id" title="variable">k</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1481"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:1482"><span class="id" title="variable">idx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_tCoFix" class="idref" href="#expand_lets_tCoFix"><span class="id" title="lemma">expand_lets_tCoFix</span></a> <a id="39ec9fcaf3ecb76e3c2e3c9277394930" class="idref" href="#39ec9fcaf3ecb76e3c2e3c9277394930"><span class="id" title="binder">Γ</span></a> <a id="mfix:1485" class="idref" href="#mfix:1485"><span class="id" title="binder">mfix</span></a> <a id="idx:1486" class="idref" href="#idx:1486"><span class="id" title="binder">idx</span></a> <a id="k:1487" class="idref" href="#k:1487"><span class="id" title="binder">k</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#39ec9fcaf3ecb76e3c2e3c9277394930"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1487"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1485"><span class="id" title="variable">mfix</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:1486"><span class="id" title="variable">idx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tCoFix"><span class="id" title="constructor">tCoFix</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#39ec9fcaf3ecb76e3c2e3c9277394930"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1487"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#39ec9fcaf3ecb76e3c2e3c9277394930"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1485"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1487"><span class="id" title="variable">k</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1485"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#idx:1486"><span class="id" title="variable">idx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>; <span class="id" title="var">cbn</span>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_ctx_fix_context" class="idref" href="#expand_lets_k_ctx_fix_context"><span class="id" title="lemma">expand_lets_k_ctx_fix_context</span></a> <a id="41ee7a63c5afffad32140bd97bbe9023" class="idref" href="#41ee7a63c5afffad32140bd97bbe9023"><span class="id" title="binder">Γ</span></a> <a id="k:1489" class="idref" href="#k:1489"><span class="id" title="binder">k</span></a> <a id="mfix:1490" class="idref" href="#mfix:1490"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#41ee7a63c5afffad32140bd97bbe9023"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1489"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1490"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#41ee7a63c5afffad32140bd97bbe9023"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1489"><span class="id" title="variable">k</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#41ee7a63c5afffad32140bd97bbe9023"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1490"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1489"><span class="id" title="variable">k</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1490"><span class="id" title="variable">mfix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICWeakeningConv.html#lift_fix_context"><span class="id" title="lemma">PCUICWeakeningConv.lift_fix_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICSubstitution.html#subst_fix_context"><span class="id" title="lemma">PCUICSubstitution.subst_fix_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_ext"><span class="id" title="lemma">map_ext</span></a> ⇒ [].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> []. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#map_def_map_def"><span class="id" title="lemma">map_def_map_def</span></a> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">f_equal</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_ctx_fix_context" class="idref" href="#expand_lets_ctx_fix_context"><span class="id" title="lemma">expand_lets_ctx_fix_context</span></a> <a id="8d330070a4be33bd1aa8ec8b439abe6e" class="idref" href="#8d330070a4be33bd1aa8ec8b439abe6e"><span class="id" title="binder">Γ</span></a> <a id="mfix:1492" class="idref" href="#mfix:1492"><span class="id" title="binder">mfix</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d330070a4be33bd1aa8ec8b439abe6e"><span class="id" title="variable">Γ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1492"><span class="id" title="variable">mfix</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_def"><span class="id" title="definition">map_def</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d330070a4be33bd1aa8ec8b439abe6e"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8d330070a4be33bd1aa8ec8b439abe6e"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1492"><span class="id" title="variable">mfix</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#mfix:1492"><span class="id" title="variable">mfix</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_ctx_fix_context"><span class="id" title="lemma">expand_lets_k_ctx_fix_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_0_r"><span class="id" title="lemma">Nat.add_0_r</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_rel_lt" class="idref" href="#expand_lets_k_rel_lt"><span class="id" title="lemma">expand_lets_k_rel_lt</span></a> <a id="81e5088ba8a478cc2699020815f5dbfc" class="idref" href="#81e5088ba8a478cc2699020815f5dbfc"><span class="id" title="binder">Γ</span></a> <a id="k:1494" class="idref" href="#k:1494"><span class="id" title="binder">k</span></a> <a id="i:1495" class="idref" href="#i:1495"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1495"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1494"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#81e5088ba8a478cc2699020815f5dbfc"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1494"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1495"><span class="id" title="variable">i</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1495"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hi</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_rel_lt"><span class="id" title="lemma">lift_rel_lt</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_rel_lt"><span class="id" title="lemma">subst_rel_lt</span></a> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_k_rel_ge" class="idref" href="#expand_lets_k_rel_ge"><span class="id" title="lemma">expand_lets_k_rel_ge</span></a> <a id="k:1496" class="idref" href="#k:1496"><span class="id" title="binder">k</span></a> <a id="c4a1a6ad394675231e372535f1eb7988" class="idref" href="#c4a1a6ad394675231e372535f1eb7988"><span class="id" title="binder">Γ</span></a> <a id="n:1498" class="idref" href="#n:1498"><span class="id" title="binder">n</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c4a1a6ad394675231e372535f1eb7988"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1498"><span class="id" title="variable">n</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1496"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c4a1a6ad394675231e372535f1eb7988"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1498"><span class="id" title="variable">n</span></a>)) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#tRel"><span class="id" title="constructor">tRel</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1496"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context_assumptions"><span class="id" title="definition">context_assumptions</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c4a1a6ad394675231e372535f1eb7988"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1498"><span class="id" title="variable">n</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets"><span class="id" title="definition">expand_lets</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_rel_ge"><span class="id" title="lemma">lift_rel_ge</span></a>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_rel_gt"><span class="id" title="lemma">subst_rel_gt</span></a>; <span class="id" title="var">len</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">lia_f_equal</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_inst_case_context" class="idref" href="#expand_lets_inst_case_context"><span class="id" title="lemma">expand_lets_inst_case_context</span></a> (<a id="73bb13648fb661b4fc45efd669d987b0" class="idref" href="#73bb13648fb661b4fc45efd669d987b0"><span class="id" title="binder">Γ</span></a> <a id="e03dd297e5da57315325af23da9bc0e9" class="idref" href="#e03dd297e5da57315325af23da9bc0e9"><span class="id" title="binder">Δ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="p:1501" class="idref" href="#p:1501"><span class="id" title="binder">p</span></a> <a id="ctx:1502" class="idref" href="#ctx:1502"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#test_context_k"><span class="id" title="definition">test_context_k</span></a> (<span class="id" title="keyword">fun</span> <a id="k:1503" class="idref" href="#k:1503"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1503"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1501"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1502"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73bb13648fb661b4fc45efd669d987b0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e03dd297e5da57315325af23da9bc0e9"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1501"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1501"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1502"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73bb13648fb661b4fc45efd669d987b0"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e03dd297e5da57315325af23da9bc0e9"><span class="id" title="variable">Δ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1501"><span class="id" title="variable">p</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1501"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1502"><span class="id" title="variable">ctx</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k_ctx"><span class="id" title="definition">expand_lets_k_ctx</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#distr_lift_subst_context"><span class="id" title="lemma">distr_lift_subst_context</span></a>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#subst_context_subst_context"><span class="id" title="lemma">subst_context_subst_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#closed_ctx_lift"><span class="id" title="lemma">PCUICClosed.closed_ctx_lift</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedP_mon"><span class="id" title="lemma">closedP_mon</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSpine.html#closed_ctx_subst"><span class="id" title="lemma">PCUICSpine.closed_ctx_subst</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedn_ctx_on_free_vars"><span class="id" title="lemma">closedn_ctx_on_free_vars</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_impl"><span class="id" title="lemma">on_free_vars_ctx_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#closedP_mon"><span class="id" title="lemma">closedP_mon</span></a>. <span class="id" title="var">lia</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="ne_nf_smash_context" class="idref" href="#ne_nf_smash_context"><span class="id" title="lemma">ne_nf_smash_context</span></a> <a id="562eaa28eeb2de0ac2b0d8ca64f643f3" class="idref" href="#562eaa28eeb2de0ac2b0d8ca64f643f3"><span class="id" title="binder">Σ</span></a> <a id="cf268b57cb21218c87d67401c86aa022" class="idref" href="#cf268b57cb21218c87d67401c86aa022"><span class="id" title="binder">Γ</span></a> <a id="T:1506" class="idref" href="#T:1506"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#562eaa28eeb2de0ac2b0d8ca64f643f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="7551bb091fd0f23d593264c047169b7a" class="idref" href="#7551bb091fd0f23d593264c047169b7a"><span class="id" title="binder">Δ</span></a> <a id="e35fd38260db614ca3bc8db2d67c57fa" class="idref" href="#e35fd38260db614ca3bc8db2d67c57fa"><span class="id" title="binder">Γ'</span></a> <a id="8de541cc13596c7e929958cd92a28eb8" class="idref" href="#8de541cc13596c7e929958cd92a28eb8"><span class="id" title="binder">Δ'</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e35fd38260db614ca3bc8db2d67c57fa"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7551bb091fd0f23d593264c047169b7a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8de541cc13596c7e929958cd92a28eb8"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#562eaa28eeb2de0ac2b0d8ca64f643f3"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e35fd38260db614ca3bc8db2d67c57fa"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7551bb091fd0f23d593264c047169b7a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7551bb091fd0f23d593264c047169b7a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8de541cc13596c7e929958cd92a28eb8"><span class="id" title="variable">Δ'</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#7551bb091fd0f23d593264c047169b7a"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8de541cc13596c7e929958cd92a28eb8"><span class="id" title="variable">Δ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#562eaa28eeb2de0ac2b0d8ca64f643f3"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="9cf5c7726187b1305c4ecd9b22bed2db" class="idref" href="#9cf5c7726187b1305c4ecd9b22bed2db"><span class="id" title="binder">Δ</span></a> <a id="1c928824a63d4fe6fd026a047b0eef0f" class="idref" href="#1c928824a63d4fe6fd026a047b0eef0f"><span class="id" title="binder">Γ'</span></a> <a id="37a36ac4decb953bc12854fcd7a39829" class="idref" href="#37a36ac4decb953bc12854fcd7a39829"><span class="id" title="binder">Δ'</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf268b57cb21218c87d67401c86aa022"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1c928824a63d4fe6fd026a047b0eef0f"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cf5c7726187b1305c4ecd9b22bed2db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37a36ac4decb953bc12854fcd7a39829"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#562eaa28eeb2de0ac2b0d8ca64f643f3"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#1c928824a63d4fe6fd026a047b0eef0f"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cf5c7726187b1305c4ecd9b22bed2db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx"><span class="id" title="definition">expand_lets_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cf5c7726187b1305c4ecd9b22bed2db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37a36ac4decb953bc12854fcd7a39829"><span class="id" title="variable">Δ'</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9cf5c7726187b1305c4ecd9b22bed2db"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#37a36ac4decb953bc12854fcd7a39829"><span class="id" title="variable">Δ'</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1506"><span class="id" title="variable">T</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne_nf_ind_all"><span class="id" title="lemma">ne_nf_ind_all</span></a> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="faaabd4c7313394da225c29d38d2720c" class="idref" href="#faaabd4c7313394da225c29d38d2720c"><span class="id" title="binder"><span id="6db4f2e827353a49c1cae4d4d3aee613" class="id">Γ</span></span></a> <a id="T:1519" class="idref" href="#T:1519"><span class="id" title="binder"><span id="T:1529" class="id">T</span></span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#faaabd4c7313394da225c29d38d2720c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1519"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="bff596f1ab961c82d50028c702756ebb" class="idref" href="#bff596f1ab961c82d50028c702756ebb"><span class="id" title="binder"><span id="ef0c770ecaf22310318d0e93a9e68be3" class="id">Δ</span></span></a> <a id="f52135395e9f77be37a7f5e5d76899cc" class="idref" href="#f52135395e9f77be37a7f5e5d76899cc"><span class="id" title="binder"><span id="56e2abe448cb6524e62eaecf20b695b6" class="id">Γ'</span></span></a> <a id="d8c398f4b0fd01347a8d202f3d13f2bf" class="idref" href="#d8c398f4b0fd01347a8d202f3d13f2bf"><span class="id" title="binder"><span id="3cc32f510eaf2cff0590fe55ed1c031b" class="id">Δ'</span></span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#faaabd4c7313394da225c29d38d2720c"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f52135395e9f77be37a7f5e5d76899cc"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#bff596f1ab961c82d50028c702756ebb"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d8c398f4b0fd01347a8d202f3d13f2bf"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="e5425bfe634e2ae9debbd583344cc896" class="idref" href="#e5425bfe634e2ae9debbd583344cc896"><span class="id" title="binder"><span id="5196b1ec782048171b16fed4663887a2" class="id">Γ</span></span></a> <a id="T:1514" class="idref" href="#T:1514"><span class="id" title="binder"><span id="T:1524" class="id">T</span></span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e5425bfe634e2ae9debbd583344cc896"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1514"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <span class="id" title="keyword">∀</span> <a id="685f5f7f651d1668b4efd7abaac1eb74" class="idref" href="#685f5f7f651d1668b4efd7abaac1eb74"><span class="id" title="binder"><span id="e9e93bf140af1b6b14ef9981943236d4" class="id">Δ</span></span></a> <a id="73be165b9316054ac72c9006abcdb384" class="idref" href="#73be165b9316054ac72c9006abcdb384"><span class="id" title="binder"><span id="f316ca90bfb74522e91b700c25ea5537" class="id">Γ'</span></span></a> <a id="6cde7875120ca82cb94e59515c6e4876" class="idref" href="#6cde7875120ca82cb94e59515c6e4876"><span class="id" title="binder"><span id="9ad8cc60c469a0a9a47734b97a38dc0d" class="id">Δ'</span></span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e5425bfe634e2ae9debbd583344cc896"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#73be165b9316054ac72c9006abcdb384"><span class="id" title="variable">Γ'</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#685f5f7f651d1668b4efd7abaac1eb74"><span class="id" title="variable">Δ</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#6cde7875120ca82cb94e59515c6e4876"><span class="id" title="variable">Δ'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>)); <span class="id" title="tactic">intros</span>; <span class="id" title="tactic">subst</span> <span class="id" title="var">Γ0</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="var">cbn</span>; <span class="id" title="tactic">econstructor</span>; <span class="id" title="var">inv_on_free_vars</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>; <span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context"><span class="id" title="definition">app_context</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#app_assoc"><span class="id" title="lemma">app_assoc</span></a>. <span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nth_error_appP"><span class="id" title="lemma">TL.nth_error_appP</span></a> (<span class="id" title="var">Δ'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <span class="id" title="var">Δ</span>) <span class="id" title="var">Γ'</span> <span class="id" title="var">i</span>) ⇒ //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">case</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nth_error_appP"><span class="id" title="lemma">TL.nth_error_appP</span></a> <span class="id" title="var">Δ'</span> <span class="id" title="var">Δ</span> <span class="id" title="var">i</span>) ⇒ //=; <span class="id" title="tactic">intros</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">e0</span>; <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_rel_lt"><span class="id" title="lemma">expand_lets_k_rel_lt</span></a> //. <span class="id" title="tactic">constructor</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a> //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx_length"><span class="id" title="lemma">expand_lets_ctx_length</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#nth_error_expand_lets"><span class="id" title="lemma">PCUICInductiveInversion.nth_error_expand_lets</span></a> /= <span class="id" title="var">e</span> /= <span class="id" title="var">H</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">noconf</span> <span class="id" title="var">e0</span>. <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="i':1533" class="idref" href="#i':1533"><span class="id" title="binder"><span id="i':1534" class="id">i'</span></span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i':1533"><span class="id" title="variable">i'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). <span class="id" title="var">lia</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H1</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i'</span> &lt;-]. <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_comm"><span class="id" title="lemma">Nat.add_comm</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">replace</span> (<span class="id" title="var">i'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="keyword">with</span> <span class="id" title="var">i'</span> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span> <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_tRel_ass"><span class="id" title="lemma">expand_lets_k_tRel_ass</span></a> <span class="id" title="var">e</span>) //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<span class="id" title="var">i'</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'&lt;'_x"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>) <span class="id" title="tactic">by</span> <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx_length"><span class="id" title="lemma">expand_lets_ctx_length</span></a>; <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_lt"><span class="id" title="lemma">nth_error_app_lt</span></a>. <span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_firstn"><span class="id" title="lemma">context_assumptions_firstn</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>); <span class="id" title="var">tea</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#nth_error_smash_context"><span class="id" title="lemma">nth_error_smash_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">congruence</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> ? ?; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_nil"><span class="id" title="lemma">nth_error_nil</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error_None"><span class="id" title="lemma">nth_error_None</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#context_assumptions_firstn"><span class="id" title="lemma">context_assumptions_firstn</span></a> <span class="id" title="var">H1</span> <span class="id" title="var">e</span> <span class="id" title="var">H</span>). <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">intros</span> <span class="id" title="var">x</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">hnth</span> <span class="id" title="var">he</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">assert</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">∃</span></a> <a id="i':1535" class="idref" href="#i':1535"><span class="id" title="binder"><span id="i':1536" class="id">i'</span></span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#a883bdd010993579f99d60b3775bcf54"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i':1535"><span class="id" title="variable">i'</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <span class="id" title="var">i</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">∃</span> (<span class="id" title="var">i</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ'</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Peano.html#::nat_scope:x_'-'_x"><span class="id" title="notation">-</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">Δ</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a>). <span class="id" title="var">lia</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">i'</span> &lt;-].<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_rel_ge"><span class="id" title="lemma">expand_lets_k_rel_ge</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">constructor</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_ctx_length"><span class="id" title="lemma">expand_lets_ctx_length</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_app_ge"><span class="id" title="lemma">nth_error_app_ge</span></a>. <span class="id" title="var">len</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">len</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">noconf</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">rewrite</span> -<span class="id" title="var">H</span>. <span class="id" title="tactic">change</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> <span class="id" title="var">x</span>)) <span class="id" title="keyword">with</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#option_map"><span class="id" title="definition">option_map</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#decl_body"><span class="id" title="projection">decl_body</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<span class="id" title="var">hnth</span>. <span class="id" title="var">lia_f_equal</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_k_mkApps"><span class="id" title="lemma">expand_lets_k_mkApps</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_tFix"><span class="id" title="lemma">expand_lets_tFix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">set</span> (<span class="id" title="var">mfix'</span> := <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H</span> /= //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> /= <span class="id" title="var">H0</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">eapply</span> <span class="id" title="var">H2</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">toAll</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">unfold</span> <span class="id" title="var">mfix'</span> <span class="id" title="tactic">at</span> 2. <span class="id" title="var">solve_all</span>; <span class="id" title="var">inv_on_free_vars</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H5</span>. { <span class="id" title="var">len</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H5</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <span class="id" title="var">mfix</span>)). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H5</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>). <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_ctx_fix_context"><span class="id" title="lemma">expand_lets_k_ctx_fix_context</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="tactic">econstructor</span>. <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <span class="id" title="var">Δ</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H4</span>. {  <span class="id" title="var">len</span>; <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H6</span> ⇒ //. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="var">p</span> <span class="id" title="var">x</span>)).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H4</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_inst_case_context"><span class="id" title="lemma">expand_lets_inst_case_context</span></a> ?<a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_predicate_context"><span class="id" title="definition">inst_case_predicate_context</span></a> /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">rewrite</span> -/(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_inst_case_context"><span class="id" title="lemma">expand_lets_inst_case_context</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICInstConv.html#on_free_vars_ctx_inst_case_context_nil"><span class="id" title="lemma">PCUICInstConv.on_free_vars_ctx_inst_case_context_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) <span class="id" title="var">_</span> <span class="id" title="var">p0</span> <span class="id" title="var">p2</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="var">X3</span> <span class="id" title="var">H3</span>; <span class="id" title="tactic">clear</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_predicate_context"><span class="id" title="definition">inst_case_predicate_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="tactic">try</span> <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#on_local_decl"><span class="id" title="definition">PCUICInduction.on_local_decl</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> × |-.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>:<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_snoc"><span class="id" title="lemma">on_free_vars_ctx_snoc</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">HΓ</span> <span class="id" title="var">hna</span>; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hna</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> → <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hna</span>; <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hna</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t0</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t1</span>; <span class="id" title="tactic">try</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">t2</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IHX3</span> <span class="id" title="var">HΓ</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2: <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">hna</span> ⇒ [] <span class="id" title="var">hna0</span> <span class="id" title="var">hna1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_k_ctx_snoc"><span class="id" title="lemma">PCUICInductives.expand_lets_k_ctx_snoc</span></a>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">cbn</span> -[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.expand_lets_k"><span class="id" title="definition">expand_lets_k</span></a>] <span class="id" title="tactic">in</span> ×.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_wf_term_it_impl"><span class="id" title="lemma">lift_wf_term_it_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">t0</span>) ⇒ // <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="var">forward</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> <span class="id" title="tactic">assumption</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">specialize</span> (<span class="id" title="var">IH</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <span class="id" title="var">Γ</span>)); <span class="id" title="var">forward</span> <span class="id" title="var">IH</span> <span class="id" title="tactic">by</span> <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_app</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>; <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">IH</span>.<br/>
&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H2</span>. { <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">p1</span> ⇒ //. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">p1</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pcontext"><span class="id" title="projection">pcontext</span></a> <span class="id" title="var">p</span>))).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_app</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_inst_case_context"><span class="id" title="lemma">expand_lets_inst_case_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ⇒ //. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.add_assoc"><span class="id" title="lemma">Nat.add_assoc</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#map_map_compose"><span class="id" title="lemma">map_map_compose</span></a>. <span class="id" title="tactic">exact</span> <span class="id" title="var">H2</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_lam"><span class="id" title="constructor">nf_lam</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H2</span>. { <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>; <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span>  (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">A</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_snoc"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_snoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#expand_lets_k_mkApps"><span class="id" title="lemma">expand_lets_k_mkApps</span></a>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_tCoFix"><span class="id" title="lemma">expand_lets_tCoFix</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_cofix"><span class="id" title="constructor">nf_cofix</span></a>. <span class="id" title="var">solve_all</span>. <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H1</span>. { <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#9c82c702508313fd669cee3f1f4704ce"><span class="id" title="notation">,,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.fix_context"><span class="id" title="definition">fix_context</span></a> <span class="id" title="var">mfix</span>)). <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">specialize</span> (<span class="id" title="var">H1</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_app"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_app</span></a> <a class="idref" href="MetaRocq.Common.BasicAst.html#app_context_assoc"><span class="id" title="lemma">app_context_assoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_k_ctx_fix_context"><span class="id" title="lemma">expand_lets_k_ctx_fix_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>. <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_tProd"><span class="id" title="constructor">nf_tProd</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>. <span class="id" title="var">cbn</span>; <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">specialize</span> (<span class="id" title="var">H2</span> <span class="id" title="var">Δ</span> <span class="id" title="var">Γ'</span> (<span class="id" title="var">Δ'</span> <a class="idref" href="MetaRocq.Common.BasicAst.html#b66601545ff7e22c5dcb7c86aa0cca21"><span class="id" title="notation">,,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.vass"><span class="id" title="definition">vass</span></a> <span class="id" title="var">na</span> <span class="id" title="var">dom</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductives.html#expand_lets_ctx_snoc"><span class="id" title="lemma">PCUICInductives.expand_lets_ctx_snoc</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span> ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_case_context" class="idref" href="#trans_case_context"><span class="id" title="lemma">trans_case_context</span></a> (<a id="d1598f7bc2026cbe51f62f78ad14dac0" class="idref" href="#d1598f7bc2026cbe51f62f78ad14dac0"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="p:1538" class="idref" href="#p:1538"><span class="id" title="binder">p</span></a> <a id="br:1539" class="idref" href="#br:1539"><span class="id" title="binder">br</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':1540" class="idref" href="#p':1540"><span class="id" title="binder">p'</span></a> := (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#d1598f7bc2026cbe51f62f78ad14dac0"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#test_context_k"><span class="id" title="definition">test_context_k</span></a> (<span class="id" title="keyword">fun</span> <a id="k:1541" class="idref" href="#k:1541"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1541"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1539"><span class="id" title="variable">br</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.smash_context"><span class="id" title="definition">smash_context</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1539"><span class="id" title="variable">br</span></a>))) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1538"><span class="id" title="variable">p</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p':1540"><span class="id" title="variable">p'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_branch"><span class="id" title="definition">map_branch</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#br:1539"><span class="id" title="variable">br</span></a>))).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span> <span class="id" title="var">hpars</span> <span class="id" title="var">hbctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_branch"><span class="id" title="definition">trans_branch</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.is_assumption_context"><span class="id" title="definition">is_assumption_context</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hn</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#is_assumption_context_spec"><span class="id" title="lemma">is_assumption_context_spec</span></a>: <span class="id" title="var">hn</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_assumption_context"><span class="id" title="lemma">trans_assumption_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ass</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICContexts.html#smash_assumption_context"><span class="id" title="lemma">smash_assumption_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_assumption_context"><span class="id" title="lemma">trans_assumption_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_context"><span class="id" title="lemma">PCUICInductiveInversion.assumption_context_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICInductiveInversion.html#assumption_context_subst_instance"><span class="id" title="lemma">PCUICInductiveInversion.assumption_context_subst_instance</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //. <span class="id" title="tactic">exact</span> <span class="id" title="var">hpars</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICUnivSubstitutionConv.html#subst_instance_smash"><span class="id" title="lemma">PCUICUnivSubstitutionConv.subst_instance_smash</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICClosed.html#smash_context_subst"><span class="id" title="lemma">PCUICClosed.smash_context_subst</span></a>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.subst_context_nil"><span class="id" title="lemma">subst_context_nil</span></a> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbctx</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //. <span class="id" title="tactic">exact</span> <span class="id" title="var">hpars</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_local_case_context" class="idref" href="#trans_local_case_context"><span class="id" title="lemma">trans_local_case_context</span></a> (<a id="9ebdc39e323236d620bdc8a64225851b" class="idref" href="#9ebdc39e323236d620bdc8a64225851b"><span class="id" title="binder">Γ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.context"><span class="id" title="definition">context</span></a>) <a id="p:1543" class="idref" href="#p:1543"><span class="id" title="binder">p</span></a> <a id="ctx:1544" class="idref" href="#ctx:1544"><span class="id" title="binder">ctx</span></a> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <a id="p':1545" class="idref" href="#p':1545"><span class="id" title="binder">p'</span></a> := (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#map_predicate"><span class="id" title="definition">map_predicate</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>) <span class="id" title="tactic">in</span><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#forallb"><span class="id" title="definition">forallb</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#9ebdc39e323236d620bdc8a64225851b"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.Common.BasicAst.html#test_context_k"><span class="id" title="definition">test_context_k</span></a> (<span class="id" title="keyword">fun</span> <a id="k:1546" class="idref" href="#k:1546"><span class="id" title="binder">k</span></a> : <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#closedP"><span class="id" title="definition">closedP</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1546"><span class="id" title="variable">k</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#xpredT"><span class="id" title="abbreviation">xpredT</span></a>)) <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1544"><span class="id" title="variable">ctx</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1544"><span class="id" title="variable">ctx</span></a>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#p:1543"><span class="id" title="variable">p</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ctx:1544"><span class="id" title="variable">ctx</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">p'</span> <span class="id" title="var">hpars</span> <span class="id" title="var">hbctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="var">erewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_context"><span class="id" title="lemma">trans_subst_context</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_subst_instance_ctx"><span class="id" title="lemma">trans_subst_instance_ctx</span></a> //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hbctx</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx_subst_instance"><span class="id" title="lemma">on_free_vars_ctx_subst_instance</span></a>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_terms"><span class="id" title="definition">on_free_vars_terms</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#forallb_rev"><span class="id" title="lemma">forallb_rev</span></a> //. <span class="id" title="tactic">exact</span> <span class="id" title="var">hpars</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="All_local_env_on_free_vars_ctx" class="idref" href="#All_local_env_on_free_vars_ctx"><span class="id" title="lemma">All_local_env_on_free_vars_ctx</span></a> <a id="P:1547" class="idref" href="#P:1547"><span class="id" title="binder">P</span></a> <a id="P':1548" class="idref" href="#P':1548"><span class="id" title="binder">P'</span></a> <a id="c1501ad881137b5c519eecbadefbca40" class="idref" href="#c1501ad881137b5c519eecbadefbca40"><span class="id" title="binder">Γ</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env"><span class="id" title="inductive">PCUICTyping.All_local_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#on_local_decl"><span class="id" title="definition">PCUICInduction.on_local_decl</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1547"><span class="id" title="variable">P</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c1501ad881137b5c519eecbadefbca40"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_ctx"><span class="id" title="definition">on_free_vars_ctx</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P':1548"><span class="id" title="variable">P'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c1501ad881137b5c519eecbadefbca40"><span class="id" title="variable">Γ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env"><span class="id" title="inductive">PCUICTyping.All_local_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICInduction.html#on_local_decl"><span class="id" title="definition">PCUICInduction.on_local_decl</span></a> (<span class="id" title="keyword">fun</span> <a id="a61ed8d85c6ca82f2ab2a0ea747c48d2" class="idref" href="#a61ed8d85c6ca82f2ab2a0ea747c48d2"><span class="id" title="binder">Γ</span></a> <a id="t:1551" class="idref" href="#t:1551"><span class="id" title="binder">t</span></a> ⇒ <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P:1547"><span class="id" title="variable">P</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a61ed8d85c6ca82f2ab2a0ea747c48d2"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1551"><span class="id" title="variable">t</span></a> <a class="idref" href="MetaRocq.Utils.MRProd.html#52eddd74560fa276f934634af83eeaf4"><span class="id" title="notation">×</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars"><span class="id" title="definition">on_free_vars</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP"><span class="id" title="definition">shiftnP</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#a61ed8d85c6ca82f2ab2a0ea747c48d2"><span class="id" title="variable">Γ</span></a><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#P':1548"><span class="id" title="variable">P'</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1551"><span class="id" title="variable">t</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#c1501ad881137b5c519eecbadefbca40"><span class="id" title="variable">Γ</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> 1; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_app"><span class="id" title="lemma">alli_app</span></a> ⇒ /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>[] <span class="id" title="var">hΓ</span> /= <span class="id" title="var">hass</span>; <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hass</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>;<br/>
&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#on_free_vars_decl"><span class="id" title="definition">on_free_vars_decl</span></a>, <a class="idref" href="MetaRocq.Common.BasicAst.html#test_decl"><span class="id" title="definition">test_decl</span></a> <span class="id" title="tactic">in</span> *; <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> *; <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_wf_term_it_impl"><span class="id" title="lemma">lift_wf_term_it_impl</span></a> <span class="id" title="keyword">with</span> (1 := <span class="id" title="var">t0</span>) ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_ne_nf" class="idref" href="#trans_ne_nf"><span class="id" title="lemma">trans_ne_nf</span></a> <a id="56f19ac19a1bc379502ad44ad0db3113" class="idref" href="#56f19ac19a1bc379502ad44ad0db3113"><span class="id" title="binder">Σ</span></a> <a id="cc7d0bb2c75613b3a08dfc239a9e38de" class="idref" href="#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="binder">Γ</span></a> <a id="T:1554" class="idref" href="#T:1554"><span class="id" title="binder">T</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56f19ac19a1bc379502ad44ad0db3113"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56f19ac19a1bc379502ad44ad0db3113"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">∧</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56f19ac19a1bc379502ad44ad0db3113"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#is_open_term"><span class="id" title="abbreviation">is_open_term</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#56f19ac19a1bc379502ad44ad0db3113"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cc7d0bb2c75613b3a08dfc239a9e38de"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1554"><span class="id" title="variable">T</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">)</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span>: (<a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne_nf_ind_all"><span class="id" title="lemma">ne_nf_ind_all</span></a> <span class="id" title="var">_</span>  (<span class="id" title="keyword">fun</span> <a id="0a5158d286a3c9bb692eae503a43e64b" class="idref" href="#0a5158d286a3c9bb692eae503a43e64b"><span class="id" title="binder"><span id="98ad5d6432067a9333abcbfacdc9efdf" class="id">Γ</span></span></a> <a id="T:1558" class="idref" href="#T:1558"><span class="id" title="binder"><span id="T:1562" class="id">T</span></span></a> ⇒ <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#ne"><span class="id" title="inductive">ne</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">Σ</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0a5158d286a3c9bb692eae503a43e64b"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1558"><span class="id" title="variable">T</span></a>))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="keyword">fun</span> <a id="3ef14c799267d6d2ddb9577a0db5a87f" class="idref" href="#3ef14c799267d6d2ddb9577a0db5a87f"><span class="id" title="binder"><span id="304473dc49f0a689b99b6087fce14b81" class="id">Γ</span></span></a> <a id="T:1556" class="idref" href="#T:1556"><span class="id" title="binder"><span id="T:1560" class="id">T</span></span></a> ⇒ <span class="id" title="var">_</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf"><span class="id" title="inductive">nf</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <span class="id" title="var">Σ</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#3ef14c799267d6d2ddb9577a0db5a87f"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#T:1556"><span class="id" title="variable">T</span></a>))); <span class="id" title="var">cbn</span>; <span class="id" title="tactic">intros</span>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="tactic">solve</span> [<span class="id" title="tactic">constructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>].<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span> |- ×. <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a> <span class="id" title="var">H</span> /= //. <span class="id" title="var">cbn</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">H0</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> <span class="id" title="var">H</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_map"><span class="id" title="lemma">nth_error_map</span></a> /= <span class="id" title="var">H0</span> //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#nth_error_all"><span class="id" title="lemma">nth_error_all</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">eauto</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">erewrite</span> &lt;- <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> ⇒ //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">H7</span>. <span class="id" title="var">now</span> <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">instantiate</span> (1 := <span class="id" title="var">idx</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">econstructor</span>; <span class="id" title="tactic">eauto</span>; <span class="id" title="var">solve_all</span>; <span class="id" title="var">rtoProp</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_bbody"><span class="id" title="lemma">trans_bbody</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H8</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_branch_context"><span class="id" title="definition">inst_case_branch_context</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_case_context"><span class="id" title="lemma">trans_case_context</span></a> <span class="id" title="var">Γ0</span>); <span class="id" title="var">solve_all</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">forward</span> <span class="id" title="var">H8</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">unshelve</span> <span class="id" title="var">epose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRProd.html#proj2"><span class="id" title="definition">proj2</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#ne_nf_smash_context"><span class="id" title="lemma">ne_nf_smash_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <span class="id" title="var">Σ</span>) <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">H8</span> <span class="id" title="var">_</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> (<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_context"><span class="id" title="definition">inst_case_context</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#pparams"><span class="id" title="projection">pparams</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>) (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#bcontext"><span class="id" title="projection">bcontext</span></a> <span class="id" title="var">x</span>)))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <span class="id" title="var">Γ0</span>) <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#eq_refl"><span class="id" title="constructor">eq_refl</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="var">cbn</span>; <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H10</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_on_free_vars"><span class="id" title="lemma">trans_on_free_vars</span></a>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>. <span class="id" title="tactic">rewrite</span> {2 3}(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_case_context"><span class="id" title="lemma">trans_local_case_context</span></a> <span class="id" title="var">Γ0</span>) <span class="id" title="tactic">in</span> <span class="id" title="var">H11</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_predicate_context"><span class="id" title="definition">inst_case_predicate_context</span></a> /= /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#id"><span class="id" title="definition">id</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.Common.BasicAst.html#map_context"><span class="id" title="definition">map_context</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">change</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map"><span class="id" title="abbreviation">List.map</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_decl"><span class="id" title="abbreviation">trans_decl</span></a>) <span class="id" title="keyword">with</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_case_context"><span class="id" title="lemma">trans_local_case_context</span></a> <span class="id" title="var">Γ0</span>) //. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICCases.html#inst_case_predicate_context"><span class="id" title="definition">inst_case_predicate_context</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_map"><span class="id" title="lemma">All_local_env_map</span></a>; <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">H5</span> <span class="id" title="var">H3</span> <span class="id" title="var">X3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#test_context_k_closed_on_free_vars_ctx"><span class="id" title="lemma">test_context_k_closed_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> (<a class="idref" href="MetaRocq.PCUIC.Conversion.PCUICInstConv.html#on_free_vars_ctx_inst_case_context_nil"><span class="id" title="lemma">PCUICInstConv.on_free_vars_ctx_inst_case_context_nil</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#puinst"><span class="id" title="projection">puinst</span></a> <span class="id" title="var">p</span>)) <span class="id" title="tactic">in</span> <span class="id" title="var">H5</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#All_forallb"><span class="id" title="lemma">All_forallb</span></a>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#All_local_env_on_free_vars_ctx"><span class="id" title="lemma">All_local_env_on_free_vars_ctx</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">X3</span>; <span class="id" title="var">tea</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#All_local_env_impl"><span class="id" title="lemma">All_local_env_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#lift_wf_term_f_impl"><span class="id" title="lemma">lift_wf_term_f_impl</span></a> <span class="id" title="keyword">with</span> (<span class="id" title="var">r</span> := <a class="idref" href="MetaRocq.Common.BasicAst.html#j_rel"><span class="id" title="projection">j_rel</span></a> <span class="id" title="var">j</span>) (<span class="id" title="var">u</span> := <a class="idref" href="MetaRocq.Common.BasicAst.html#j_univ"><span class="id" title="projection">j_univ</span></a> <span class="id" title="var">j</span>) (1 := <span class="id" title="var">X</span>); <span class="id" title="tactic">intros</span> <span class="id" title="var">t</span> (<span class="id" title="var">Ht</span> &amp; <span class="id" title="var">ont</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ont</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">Ht</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;× <span class="id" title="tactic">rewrite</span> -(<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_case_context"><span class="id" title="lemma">trans_local_case_context</span></a> <span class="id" title="var">Γ0</span> <span class="id" title="var">p</span>) //. <span class="id" title="var">solve_all</span>. <span class="id" title="var">cbn</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H2</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H2</span>. <span class="id" title="var">len</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">rtoProp</span>; <span class="id" title="tactic">intuition</span> <span class="id" title="tactic">auto</span>. <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_lam"><span class="id" title="constructor">nf_lam</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H4</span>. <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_cofix"><span class="id" title="constructor">nf_cofix</span></a>. <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">erewrite</span> &lt;- (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_fix_context"><span class="id" title="lemma">trans_fix_context</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">idx</span>); <span class="id" title="var">tea</span>; <span class="id" title="tactic">eauto</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;2:{ <span class="id" title="var">cbn</span>. <span class="id" title="var">solve_all</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_local_app"><span class="id" title="lemma">trans_local_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H1</span>; <span class="id" title="tactic">eauto</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H1</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b0</span>. <span class="id" title="var">now</span> <span class="id" title="var">len</span>. <span class="id" title="tactic">eapply</span> <span class="id" title="var">H3</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="var">inv_on_free_vars</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">inv_on_free_vars</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICOnFreeVars.html#shiftnP_add"><span class="id" title="lemma">shiftnP_add</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">b</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICNormal.html#nf_tProd"><span class="id" title="constructor">nf_tProd</span></a>; <span class="id" title="tactic">eauto</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_axiom_free" class="idref" href="#trans_axiom_free"><span class="id" title="lemma">trans_axiom_free</span></a> <a id="0a2aff02571604a63095ab814bd90635" class="idref" href="#0a2aff02571604a63095ab814bd90635"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0a2aff02571604a63095ab814bd90635"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICClassification.html#axiom_free"><span class="id" title="definition">axiom_free</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#0a2aff02571604a63095ab814bd90635"><span class="id" title="variable">Σ</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">ax</span> <span class="id" title="var">kn</span> <span class="id" title="var">decl</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#declared_constant"><span class="id" title="definition">PCUICAst.declared_constant</span></a> /= /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">h</span>; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICElimination.html#In_map"><span class="id" title="lemma">PCUICElimination.In_map</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">h</span> <span class="id" title="keyword">as</span> [[<span class="id" title="var">kn'</span> <span class="id" title="var">decl'</span>]  [<span class="id" title="var">hin</span> <span class="id" title="var">heq</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="var">noconf</span> <span class="id" title="var">heq</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">decl'</span>; <span class="id" title="var">noconf</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <span class="id" title="var">ax</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hin</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">c</span> <span class="id" title="keyword">as</span> [? [] ? ?] ⇒ //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_lets_preserves_fo" class="idref" href="#expand_lets_preserves_fo"><span class="id" title="lemma">expand_lets_preserves_fo</span></a> {<a id="cf:1564" class="idref" href="#cf:1564"><span class="id" title="binder">cf</span></a> : <a class="idref" href="MetaRocq.Common.config.html#checker_flags"><span class="id" title="class">checker_flags</span></a>} (<a id="f297f91400413e6fdc3253a675f18435" class="idref" href="#f297f91400413e6fdc3253a675f18435"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_env_ext"><span class="id" title="definition">global_env_ext</span></a>) <a id="e37c69e773a918fa8d6accd60129f42a" class="idref" href="#e37c69e773a918fa8d6accd60129f42a"><span class="id" title="binder">Γ</span></a> <a id="v:1567" class="idref" href="#v:1567"><span class="id" title="binder">v</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICTyping.html#wf"><span class="id" title="class">wf</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f297f91400413e6fdc3253a675f18435"><span class="id" title="variable">Σ</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">firstorder_value</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f297f91400413e6fdc3253a675f18435"><span class="id" title="variable">Σ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e37c69e773a918fa8d6accd60129f42a"><span class="id" title="variable">Γ</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1567"><span class="id" title="variable">v</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value"><span class="id" title="inductive">firstorder_value</span></a> (<span class="id" title="var">cf</span> := <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf'"><span class="id" title="definition">cf'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#cf:1564"><span class="id" title="variable">cf</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global"><span class="id" title="definition">trans_global</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#f297f91400413e6fdc3253a675f18435"><span class="id" title="variable">Σ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e37c69e773a918fa8d6accd60129f42a"><span class="id" title="variable">Γ</span></a>) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#v:1567"><span class="id" title="variable">v</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">wfΣ</span>; <span class="id" title="tactic">move</span>: <span class="id" title="var">v</span>; <span class="id" title="tactic">apply</span>: <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_value_inds"><span class="id" title="lemma">firstorder_value_inds</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> <span class="id" title="var">n</span> <span class="id" title="var">ui</span> <span class="id" title="var">u</span> <span class="id" title="var">args</span> <span class="id" title="var">pandi</span> <span class="id" title="var">hty</span> <span class="id" title="var">hargs</span> <span class="id" title="var">ihargs</span> <span class="id" title="var">isp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a>. <span class="id" title="tactic">econstructor</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_lets_sound"><span class="id" title="lemma">expand_lets_sound</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hty</span>. <span class="id" title="tactic">exact</span> <span class="id" title="var">hty</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#negbTE"><span class="id" title="lemma">negbTE</span></a>: <span class="id" title="var">isp</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#isPropositional"><span class="id" title="definition">PCUICFirstorder.isPropositional</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_inductive"><span class="id" title="definition">lookup_inductive</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_inductive_gen"><span class="id" title="definition">lookup_inductive_gen</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#lookup_minductive_gen"><span class="id" title="definition">lookup_minductive_gen</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_mapi"><span class="id" title="lemma">nth_error_mapi</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#isPropositionalArity"><span class="id" title="definition">PCUICFirstorder.isPropositionalArity</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_destArity"><span class="id" title="lemma">trans_destArity</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>). <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#destArity"><span class="id" title="definition">destArity</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">p</span> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">intros</span> →.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="expand_firstorder_type" class="idref" href="#expand_firstorder_type"><span class="id" title="lemma">expand_firstorder_type</span></a> (<a id="aa305d1e24e86d65ea987b77a717045d" class="idref" href="#aa305d1e24e86d65ea987b77a717045d"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_declarations"><span class="id" title="definition">global_declarations</span></a>) <a id="n:1569" class="idref" href="#n:1569"><span class="id" title="binder">n</span></a> <a id="k:1570" class="idref" href="#k:1570"><span class="id" title="binder">k</span></a> <a id="t:1571" class="idref" href="#t:1571"><span class="id" title="binder">t</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="nm:1572" class="idref" href="#nm:1572"><span class="id" title="binder">nm</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aa305d1e24e86d65ea987b77a717045d"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1572"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aa305d1e24e86d65ea987b77a717045d"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1572"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_type"><span class="id" title="definition">PCUICFirstorder.firstorder_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aa305d1e24e86d65ea987b77a717045d"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1569"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1570"><span class="id" title="variable">k</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1571"><span class="id" title="variable">t</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_type"><span class="id" title="definition">PCUICFirstorder.firstorder_type</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#aa305d1e24e86d65ea987b77a717045d"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#n:1569"><span class="id" title="variable">n</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#k:1570"><span class="id" title="variable">k</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans"><span class="id" title="definition">trans</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#t:1571"><span class="id" title="variable">t</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_type"><span class="id" title="definition">PCUICFirstorder.firstorder_type</span></a> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env"><span class="id" title="definition">PCUICFirstorder.firstorder_env</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_decompose_app"><span class="id" title="lemma">trans_decompose_app</span></a> <span class="id" title="var">t</span>).<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a>. <span class="id" title="tactic">rewrite</span> {}<span class="id" title="var">H</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">case</span>: <span class="id" title="var">t0</span> ⇒ //=.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">intros</span> <span class="id" title="var">n'</span> <span class="id" title="var">hn</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //.<br/>
&nbsp;&nbsp;- <span class="id" title="tactic">case</span> ⇒ /= <span class="id" title="var">kn</span> <span class="id" title="var">_</span> <span class="id" title="var">_</span> <span class="id" title="var">hd</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hp</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <span class="id" title="var">hd</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hp</span> //.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_firstorder_mutind" class="idref" href="#trans_firstorder_mutind"><span class="id" title="lemma">trans_firstorder_mutind</span></a> (<a id="eed03b6a27021483fd16259a270e15a0" class="idref" href="#eed03b6a27021483fd16259a270e15a0"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_declarations"><span class="id" title="definition">global_declarations</span></a>) <a id="m:1574" class="idref" href="#m:1574"><span class="id" title="binder">m</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">(</span></a><span class="id" title="keyword">∀</span> <a id="nm:1575" class="idref" href="#nm:1575"><span class="id" title="binder">nm</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eed03b6a27021483fd16259a270e15a0"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1575"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eed03b6a27021483fd16259a270e15a0"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1575"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">)</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_mutind"><span class="id" title="definition">firstorder_mutind</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eed03b6a27021483fd16259a270e15a0"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1574"><span class="id" title="variable">m</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;@<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_mutind"><span class="id" title="definition">firstorder_mutind</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#eed03b6a27021483fd16259a270e15a0"><span class="id" title="variable">Σ</span></a>)) (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#m:1574"><span class="id" title="variable">m</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">he</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_mutind"><span class="id" title="definition">firstorder_mutind</span></a>. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_minductive_body"><span class="id" title="definition">trans_minductive_body</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> -{1}[<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.ind_bodies"><span class="id" title="projection">ind_bodies</span></a> <span class="id" title="var">m</span>]<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_id"><span class="id" title="lemma">map_id</span></a>. <span class="id" title="tactic">rewrite</span> -<a class="idref" href="MetaRocq.Utils.MRList.html#mapi_cst_map"><span class="id" title="lemma">mapi_cst_map</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] → /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_mapi_impl"><span class="id" title="lemma">forallb_mapi_impl</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">n</span> <span class="id" title="var">x</span> <span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_oneind"><span class="id" title="definition">firstorder_oneind</span></a>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">x</span>; <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] <span class="id" title="var">hc</span> -&gt;; <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#forallb_map"><span class="id" title="lemma">forallb_map</span></a>. <span class="id" title="var">solve_all</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">H</span>; <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_con"><span class="id" title="definition">firstorder_con</span></a> /=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> !<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#rev_app_distr"><span class="id" title="lemma">rev_app_distr</span></a> !<a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_app"><span class="id" title="lemma">alli_app</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [<span class="id" title="var">hp</span> <span class="id" title="var">ha</span>]. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">len</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_local"><span class="id" title="definition">trans_local</span></a> -<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#map_rev"><span class="id" title="lemma">map_rev</span></a> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_map"><span class="id" title="lemma">alli_map</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_impl"><span class="id" title="lemma">alli_impl</span></a>; <span class="id" title="var">tea</span>. <span class="id" title="tactic">intros</span> <span class="id" title="var">i</span> []. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#expand_firstorder_type"><span class="id" title="lemma">expand_firstorder_type</span></a>.<br/>
&nbsp;&nbsp;- <span class="id" title="var">len</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ha</span>. <span class="id" title="tactic">clear</span> -<span class="id" title="var">ha</span> <span class="id" title="var">he</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">ha</span>; <span class="id" title="tactic">generalize</span> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.cstr_args"><span class="id" title="projection">cstr_args</span></a> <span class="id" title="var">x</span>) <span class="id" title="keyword">as</span> <span class="id" title="var">args</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">args</span> ⇒ <span class="id" title="var">ha</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span> <span class="id" title="keyword">as</span> [<span class="id" title="var">na</span> [] ?] ⇒ /=. <span class="id" title="tactic">eapply</span> <span class="id" title="var">IHargs</span>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ha</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_app"><span class="id" title="lemma">alli_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ha</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ha</span> ⇒ [] //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICSigmaCalculus.html#smash_context_acc"><span class="id" title="lemma">PCUICSigmaCalculus.smash_context_acc</span></a> /=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">ha</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_app"><span class="id" title="lemma">alli_app</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">ha</span>. <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>: <span class="id" title="var">ha</span> ⇒ [] // <span class="id" title="var">hc</span> <span class="id" title="var">hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.Utils.All_Forall.html#alli_app"><span class="id" title="lemma">alli_app</span></a>. <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHargs</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">len</span>. <span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a>. <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>. <span class="id" title="tactic">rewrite</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Bool.Bool.html#andb_true_r"><span class="id" title="lemma">andb_true_r</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>. <span class="id" title="var">len</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hd</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">clear</span> -<span class="id" title="var">he</span> <span class="id" title="var">hd</span>. <span class="id" title="tactic">move</span>: <span class="id" title="var">hd</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_type"><span class="id" title="definition">firstorder_type</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app"><span class="id" title="definition">decompose_app</span></a> <span class="id" title="var">decl_type</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">e</span>. <span class="id" title="var">cbn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">t</span> ⇒ //; <span class="id" title="tactic">apply</span> <a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_inv"><span class="id" title="lemma">decompose_app_inv</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">e</span>; <span class="id" title="tactic">rewrite</span> <span class="id" title="var">e</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">l</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">move</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a> ⇒ [] /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="var">hn</span> /<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a> <span class="id" title="var">hn'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_mkApps"><span class="id" title="lemma">PCUICLiftSubst.lift_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_mkApps"><span class="id" title="lemma">PCUICLiftSubst.subst_mkApps</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">proof</span> (<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a> <span class="id" title="var">hnth</span>).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>: <span class="id" title="var">hnth</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>). <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">len</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">now</span> <span class="id" title="var">cbn</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Lists.List.html#nth_error"><span class="id" title="definition">nth_error</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hnth</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">move</span>/<a class="idref" href="MetaRocq.Utils.MRList.html#nth_error_Some_length"><span class="id" title="lemma">nth_error_Some_length</span></a>: <span class="id" title="var">hnth</span>. <span class="id" title="var">len</span>. <span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>). <span class="id" title="var">lia</span>. <span class="id" title="var">lia</span>. <span class="id" title="var">len</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_spec"><span class="id" title="lemma">Nat.leb_spec</span></a> <a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">#|</span></a><span class="id" title="var">args</span><a class="idref" href="MetaRocq.Utils.MRList.html#50abc9bd1bb81dce67ffb7e42f8ed4c9"><span class="id" title="notation">|</span></a> <span class="id" title="var">n</span>). <span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>. <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">apply</span>/<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.ssr.ssrbool.html#andP"><span class="id" title="lemma">andP</span></a>; <span class="id" title="tactic">split</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a>. <span class="id" title="var">lia</span>. <span class="id" title="tactic">apply</span> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/stdlib/Stdlib.Arith.PeanoNat.html#Nat.ltb_lt"><span class="id" title="lemma">Nat.ltb_lt</span></a>. <span class="id" title="var">lia</span>. }<br/>
&nbsp;&nbsp;&nbsp;&nbsp;{ <span class="id" title="tactic">rewrite</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_mkApps"><span class="id" title="lemma">trans_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#lift_mkApps"><span class="id" title="lemma">PCUICLiftSubst.lift_mkApps</span></a> <a class="idref" href="MetaRocq.PCUIC.Syntax.PCUICLiftSubst.html#subst_mkApps"><span class="id" title="lemma">PCUICLiftSubst.subst_mkApps</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.utils.PCUICAstUtils.html#decompose_app_mkApps"><span class="id" title="lemma">decompose_app_mkApps</span></a> //=.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">ind</span>, <span class="id" title="var">l</span> ⇒ //=. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> <span class="id" title="var">eqn</span>:<span class="id" title="var">hp</span> ⇒ //.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">b</span> ⇒ //. <span class="id" title="tactic">apply</span> <span class="id" title="var">he</span> <span class="id" title="tactic">in</span> <span class="id" title="var">hp</span>. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">hp</span> //. }<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_firstorder_env" class="idref" href="#trans_firstorder_env"><span class="id" title="lemma">trans_firstorder_env</span></a> (<a id="e43081b064392533edee202384a6ee02" class="idref" href="#e43081b064392533edee202384a6ee02"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.global_declarations"><span class="id" title="definition">global_declarations</span></a>) :<br/>
&nbsp;&nbsp;(<span class="id" title="keyword">∀</span> <a id="nm:1577" class="idref" href="#nm:1577"><span class="id" title="binder">nm</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e43081b064392533edee202384a6ee02"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1577"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#plookup_env"><span class="id" title="definition">plookup_env</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#e43081b064392533edee202384a6ee02"><span class="id" title="variable">Σ</span></a>)) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#nm:1577"><span class="id" title="variable">nm</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#Some"><span class="id" title="constructor">Some</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">Σ</span>; <span class="id" title="var">cbn</span> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">a</span>. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nm</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb"><span class="id" title="method">eqb</span></a> ⇒ //. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΣ</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">nm</span>. <span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.Utils.ReflectEq.html#eqb"><span class="id" title="method">eqb</span></a> ⇒ //.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> [=]. <span class="id" title="tactic">f_equal</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_mutind"><span class="id" title="lemma">trans_firstorder_mutind</span></a>. <span class="id" title="tactic">apply</span> <span class="id" title="var">IHΣ</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <a id="trans_firstorder_ind" class="idref" href="#trans_firstorder_ind"><span class="id" title="lemma">trans_firstorder_ind</span></a> (<a id="8b02b0a4d15b6717d152f3e514e3fe62" class="idref" href="#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="binder">Σ</span></a> : <a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#global_env_ext_map"><span class="id" title="definition">global_env_ext_map</span></a>) <a id="i:1579" class="idref" href="#i:1579"><span class="id" title="binder">i</span></a> :<br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">firstorder_ind</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="variable">Σ</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env"><span class="id" title="definition">firstorder_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="variable">Σ</span></a>) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1579"><span class="id" title="variable">i</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Logic.html#::type_scope:x_'-&gt;'_x"><span class="id" title="notation">→</span></a><br/>
&nbsp;&nbsp;<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">firstorder_ind</span></a> <a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="MetaRocq.PCUIC.PCUICProgram.html#build_global_env_map"><span class="id" title="definition">build_global_env_map</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_env"><span class="id" title="definition">trans_global_env</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>)<a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.2'"><span class="id" title="notation">.2</span></a><a class="idref" href="https://rocq-prover.org/doc/V9.0.0/corelib/Corelib.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_env'"><span class="id" title="definition">firstorder_env'</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICExpandLets.html#trans_global_decls"><span class="id" title="definition">trans_global_decls</span></a> (<a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.declarations"><span class="id" title="projection">declarations</span></a> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#8b02b0a4d15b6717d152f3e514e3fe62"><span class="id" title="variable">Σ</span></a><a class="idref" href="MetaRocq.Utils.MRProd.html#::pair_scope:x_'.1'"><span class="id" title="notation">.1</span></a>))) <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#i:1579"><span class="id" title="variable">i</span></a>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">cbn</span>. <span class="id" title="tactic">rewrite</span> /<a class="idref" href="MetaRocq.PCUIC.PCUICFirstorder.html#firstorder_ind"><span class="id" title="definition">firstorder_ind</span></a> /= <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_lookup"><span class="id" title="lemma">trans_lookup</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <a class="idref" href="MetaRocq.PCUIC.PCUICAst.html#PCUICEnvironment.lookup_env"><span class="id" title="definition">lookup_env</span></a> ⇒ //. <span class="id" title="tactic">destruct</span> <span class="id" title="var">g</span> ⇒ //=.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">eapply</span> <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_mutind"><span class="id" title="lemma">trans_firstorder_mutind</span></a>, <a class="idref" href="MetaRocq.PCUIC.PCUICExpandLetsCorrectness.html#trans_firstorder_env"><span class="id" title="lemma">trans_firstorder_env</span></a>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
